<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Introduction to Writing Functions | Data Scientist with R</title>
  <meta name="description" content="This is a notebook about the data science courses took from the datacamp." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Introduction to Writing Functions | Data Scientist with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a notebook about the data science courses took from the datacamp." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Introduction to Writing Functions | Data Scientist with R" />
  
  <meta name="twitter:description" content="This is a notebook about the data science courses took from the datacamp." />
  

<meta name="author" content="Yen Chun Chen" />


<meta name="date" content="2024-01-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-dates-and-times-in-r.html"/>
<link rel="next" href="exploratory-data-analysis-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Scientist with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-arithmetic"><i class="fa fa-check"></i><b>1.1</b> Basic arithmetic</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-data-types"><i class="fa fa-check"></i><b>1.2</b> Basic data types</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vector"><i class="fa fa-check"></i><b>1.3</b> Vector</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function"><i class="fa fa-check"></i><b>1.3.1</b> Useful function</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-brackets-or-names"><i class="fa fa-check"></i><b>1.3.2</b> Selection - by brackets or names</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---operators"><i class="fa fa-check"></i><b>1.3.3</b> Selection - by comparison - operators</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---values"><i class="fa fa-check"></i><b>1.3.4</b> Selection - by comparison - values</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#matrix"><i class="fa fa-check"></i><b>1.4</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-function"><i class="fa fa-check"></i><b>1.4.1</b> Construct function</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-by-vector"><i class="fa fa-check"></i><b>1.4.2</b> Construct by vector</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#naming-a-matrix"><i class="fa fa-check"></i><b>1.4.3</b> Naming a matrix</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---sum-of-each-row-column"><i class="fa fa-check"></i><b>1.4.4</b> Manipulating - sum of each row &amp; column</a></li>
<li class="chapter" data-level="1.4.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-columns"><i class="fa fa-check"></i><b>1.4.5</b> Manipulating - add columns</a></li>
<li class="chapter" data-level="1.4.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-rows"><i class="fa fa-check"></i><b>1.4.6</b> Manipulating - add rows</a></li>
<li class="chapter" data-level="1.4.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection-of-matrix-elements"><i class="fa fa-check"></i><b>1.4.7</b> Selection of matrix elements</a></li>
<li class="chapter" data-level="1.4.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---1"><i class="fa fa-check"></i><b>1.4.8</b> Arithmetic - 1</a></li>
<li class="chapter" data-level="1.4.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---2"><i class="fa fa-check"></i><b>1.4.9</b> Arithmetic - 2</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor"><i class="fa fa-check"></i><b>1.5</b> Factor</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function-1"><i class="fa fa-check"></i><b>1.5.1</b> Useful function</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#nominal-ordinal-categorical-variable"><i class="fa fa-check"></i><b>1.5.2</b> Nominal &amp; Ordinal categorical variable</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor-levels"><i class="fa fa-check"></i><b>1.5.3</b> Factor levels</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#summarizing-a-factor"><i class="fa fa-check"></i><b>1.5.4</b> Summarizing a factor</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ordered-factors"><i class="fa fa-check"></i><b>1.5.5</b> Ordered factors</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frame"><i class="fa fa-check"></i><b>1.6</b> Data Frame</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#quick-look-at-dataset"><i class="fa fa-check"></i><b>1.6.1</b> Quick look at dataset</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-data-frame"><i class="fa fa-check"></i><b>1.6.2</b> Creating a data frame</a></li>
<li class="chapter" data-level="1.6.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---brackets"><i class="fa fa-check"></i><b>1.6.3</b> Selection - brackets</a></li>
<li class="chapter" data-level="1.6.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---names"><i class="fa fa-check"></i><b>1.6.4</b> Selection - names</a></li>
<li class="chapter" data-level="1.6.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection--"><i class="fa fa-check"></i><b>1.6.5</b> Selection - $</a></li>
<li class="chapter" data-level="1.6.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---subset"><i class="fa fa-check"></i><b>1.6.6</b> Selection - subset</a></li>
<li class="chapter" data-level="1.6.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#sorting"><i class="fa fa-check"></i><b>1.6.7</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#list"><i class="fa fa-check"></i><b>1.7</b> List</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-list"><i class="fa fa-check"></i><b>1.7.1</b> Creating a list</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-named-list"><i class="fa fa-check"></i><b>1.7.2</b> Creating a named list</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection"><i class="fa fa-check"></i><b>1.7.3</b> Selection</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#bring-it-all-together"><i class="fa fa-check"></i><b>1.8</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>2</b> Intermediate R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#conditionals-and-control-flow"><i class="fa fa-check"></i><b>2.1</b> Conditionals and Control Flow</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intermediate-r.html"><a href="intermediate-r.html#relational-operators"><i class="fa fa-check"></i><b>2.1.1</b> Relational operators</a></li>
<li class="chapter" data-level="2.1.2" data-path="intermediate-r.html"><a href="intermediate-r.html#conditional-statements"><i class="fa fa-check"></i><b>2.1.2</b> Conditional statements</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#loops"><i class="fa fa-check"></i><b>2.2</b> Loops</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#while-loop"><i class="fa fa-check"></i><b>2.2.1</b> While loop</a></li>
<li class="chapter" data-level="2.2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loop"><i class="fa fa-check"></i><b>2.2.2</b> For loop</a></li>
<li class="chapter" data-level="2.2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#bring-it-all-together-1"><i class="fa fa-check"></i><b>2.2.3</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#function"><i class="fa fa-check"></i><b>2.3</b> Function</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#introduction-to-function"><i class="fa fa-check"></i><b>2.3.1</b> Introduction to function</a></li>
<li class="chapter" data-level="2.3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#writing-functions"><i class="fa fa-check"></i><b>2.3.2</b> Writing functions</a></li>
<li class="chapter" data-level="2.3.3" data-path="intermediate-r.html"><a href="intermediate-r.html#packages"><i class="fa fa-check"></i><b>2.3.3</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intermediate-r.html"><a href="intermediate-r.html#the-apply-family"><i class="fa fa-check"></i><b>2.4</b> The apply family</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply"><i class="fa fa-check"></i><b>2.4.1</b> lapply</a></li>
<li class="chapter" data-level="2.4.2" data-path="intermediate-r.html"><a href="intermediate-r.html#sapply"><i class="fa fa-check"></i><b>2.4.2</b> sapply</a></li>
<li class="chapter" data-level="2.4.3" data-path="intermediate-r.html"><a href="intermediate-r.html#vapply"><i class="fa fa-check"></i><b>2.4.3</b> vapply</a></li>
<li class="chapter" data-level="2.4.4" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply-vs-sapply-vs-vapply"><i class="fa fa-check"></i><b>2.4.4</b> lapply vs sapply vs vapply</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intermediate-r.html"><a href="intermediate-r.html#utilities"><i class="fa fa-check"></i><b>2.5</b> Utilities</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="intermediate-r.html"><a href="intermediate-r.html#mathematical-utilities"><i class="fa fa-check"></i><b>2.5.1</b> Mathematical utilities</a></li>
<li class="chapter" data-level="2.5.2" data-path="intermediate-r.html"><a href="intermediate-r.html#data-structures-utilities"><i class="fa fa-check"></i><b>2.5.2</b> Data structures utilities</a></li>
<li class="chapter" data-level="2.5.3" data-path="intermediate-r.html"><a href="intermediate-r.html#regular-expressions"><i class="fa fa-check"></i><b>2.5.3</b> Regular Expressions</a></li>
<li class="chapter" data-level="2.5.4" data-path="intermediate-r.html"><a href="intermediate-r.html#dates-times"><i class="fa fa-check"></i><b>2.5.4</b> Dates &amp; Times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Introduction to the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-wrangling"><i class="fa fa-check"></i><b>3.1</b> Data wrangling</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#load-dataset"><i class="fa fa-check"></i><b>3.1.1</b> Load dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#filtering"><i class="fa fa-check"></i><b>3.1.2</b> Filtering</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.1.3</b> Arrange</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.1.4</b> Mutate</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-visualization"><i class="fa fa-check"></i><b>3.2</b> Data visualization</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#subset-df-variable"><i class="fa fa-check"></i><b>3.2.1</b> Subset df variable</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#ggplot-aesthetics"><i class="fa fa-check"></i><b>3.2.2</b> ggplot aesthetics</a></li>
<li class="chapter" data-level="3.2.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#faceting"><i class="fa fa-check"></i><b>3.2.3</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grouping-summarizing"><i class="fa fa-check"></i><b>3.3</b> Grouping &amp; summarizing</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#summarize"><i class="fa fa-check"></i><b>3.3.1</b> Summarize</a></li>
<li class="chapter" data-level="3.3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#group-by"><i class="fa fa-check"></i><b>3.3.2</b> Group by</a></li>
<li class="chapter" data-level="3.3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#visualizing-summarized-data"><i class="fa fa-check"></i><b>3.3.3</b> Visualizing summarized data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#types-of-visualizations"><i class="fa fa-check"></i><b>3.4</b> Types of visualizations</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#line-plots"><i class="fa fa-check"></i><b>3.4.1</b> Line plots</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#bar-plots"><i class="fa fa-check"></i><b>3.4.2</b> Bar plots</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#histograms"><i class="fa fa-check"></i><b>3.4.3</b> Histograms</a></li>
<li class="chapter" data-level="3.4.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#box-plots"><i class="fa fa-check"></i><b>3.4.4</b> Box plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#transforming-data"><i class="fa fa-check"></i><b>4.1</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data"><i class="fa fa-check"></i><b>4.1.1</b> Exploring data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#aggregating-data"><i class="fa fa-check"></i><b>4.2</b> Aggregating Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#count"><i class="fa fa-check"></i><b>4.2.1</b> Count</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#group_by-summarize-ungroup"><i class="fa fa-check"></i><b>4.2.2</b> group_by, summarize, ungroup</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#slice_min-slice_max"><i class="fa fa-check"></i><b>4.2.3</b> slice_min, slice_max</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#selecting-and-transforming-data"><i class="fa fa-check"></i><b>4.3</b> Selecting and Transforming Data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#select"><i class="fa fa-check"></i><b>4.3.1</b> Select</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#rename"><i class="fa fa-check"></i><b>4.3.2</b> Rename</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-manipulation.html"><a href="data-manipulation.html#transmute"><i class="fa fa-check"></i><b>4.3.3</b> Transmute</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#case-study-the-babynames-dataset"><i class="fa fa-check"></i><b>4.4</b> Case Study: The babynames Dataset</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#load-dataset-1"><i class="fa fa-check"></i><b>4.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data-1"><i class="fa fa-check"></i><b>4.4.2</b> Exploring data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="joining-data.html"><a href="joining-data.html"><i class="fa fa-check"></i><b>5</b> Joining Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="joining-data.html"><a href="joining-data.html#inner-join"><i class="fa fa-check"></i><b>5.1</b> Inner join</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="joining-data.html"><a href="joining-data.html#join-by-keys"><i class="fa fa-check"></i><b>5.1.1</b> Join by keys</a></li>
<li class="chapter" data-level="5.1.2" data-path="joining-data.html"><a href="joining-data.html#join-with-a-one-to-many-relationship"><i class="fa fa-check"></i><b>5.1.2</b> Join with a one-to-many relationship</a></li>
<li class="chapter" data-level="5.1.3" data-path="joining-data.html"><a href="joining-data.html#join-in-either-direction"><i class="fa fa-check"></i><b>5.1.3</b> Join in either direction</a></li>
<li class="chapter" data-level="5.1.4" data-path="joining-data.html"><a href="joining-data.html#join-three-or-more-tables"><i class="fa fa-check"></i><b>5.1.4</b> Join three or more tables</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="joining-data.html"><a href="joining-data.html#left-right-joins"><i class="fa fa-check"></i><b>5.2</b> Left &amp; Right Joins</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="joining-data.html"><a href="joining-data.html#left-join"><i class="fa fa-check"></i><b>5.2.1</b> Left join</a></li>
<li class="chapter" data-level="5.2.2" data-path="joining-data.html"><a href="joining-data.html#right-join"><i class="fa fa-check"></i><b>5.2.2</b> Right join</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="joining-data.html"><a href="joining-data.html#full-semi-anti-joins"><i class="fa fa-check"></i><b>5.3</b> Full, Semi &amp; Anti Joins</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="joining-data.html"><a href="joining-data.html#full-join"><i class="fa fa-check"></i><b>5.3.1</b> Full join</a></li>
<li class="chapter" data-level="5.3.2" data-path="joining-data.html"><a href="joining-data.html#semi-anti-joins"><i class="fa fa-check"></i><b>5.3.2</b> Semi &amp; Anti joins</a></li>
<li class="chapter" data-level="5.3.3" data-path="joining-data.html"><a href="joining-data.html#visualizing-set-differences"><i class="fa fa-check"></i><b>5.3.3</b> Visualizing set differences</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="joining-data.html"><a href="joining-data.html#case-study-joins-on-stack-overflow-data"><i class="fa fa-check"></i><b>5.4</b> Case study: Joins on Stack Overflow Data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="joining-data.html"><a href="joining-data.html#load-dataset-2"><i class="fa fa-check"></i><b>5.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="5.4.2" data-path="joining-data.html"><a href="joining-data.html#stack-overflow-questions"><i class="fa fa-check"></i><b>5.4.2</b> Stack Overflow questions</a></li>
<li class="chapter" data-level="5.4.3" data-path="joining-data.html"><a href="joining-data.html#joining-questions-and-answers"><i class="fa fa-check"></i><b>5.4.3</b> Joining questions and answers</a></li>
<li class="chapter" data-level="5.4.4" data-path="joining-data.html"><a href="joining-data.html#the-bind_rows-verb"><i class="fa fa-check"></i><b>5.4.4</b> The bind_rows verb</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>6</b> Introduction to Statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#summary-statistics"><i class="fa fa-check"></i><b>6.1</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-center"><i class="fa fa-check"></i><b>6.1.1</b> Measures of center</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-spread"><i class="fa fa-check"></i><b>6.1.2</b> Measures of spread</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#random-numbers-and-probability"><i class="fa fa-check"></i><b>6.2</b> Random Numbers and Probability</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chances"><i class="fa fa-check"></i><b>6.2.1</b> Chances</a></li>
<li class="chapter" data-level="6.2.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#discrete-distributions"><i class="fa fa-check"></i><b>6.2.2</b> Discrete distributions</a></li>
<li class="chapter" data-level="6.2.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#continuous-distributions"><i class="fa fa-check"></i><b>6.2.3</b> Continuous distributions</a></li>
<li class="chapter" data-level="6.2.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#binomial-distribution"><i class="fa fa-check"></i><b>6.2.4</b> Binomial distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#more-distributions-central-limit-theorem"><i class="fa fa-check"></i><b>6.3</b> More Distributions &amp; Central Limit Theorem</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#normal-distribution"><i class="fa fa-check"></i><b>6.3.1</b> Normal distribution</a></li>
<li class="chapter" data-level="6.3.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>6.3.2</b> Central limit theorem</a></li>
<li class="chapter" data-level="6.3.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#poisson-distribution"><i class="fa fa-check"></i><b>6.3.3</b> Poisson distribution</a></li>
<li class="chapter" data-level="6.3.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#exponential-distribution"><i class="fa fa-check"></i><b>6.3.4</b> Exponential distribution</a></li>
<li class="chapter" data-level="6.3.5" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#students-t-distribution"><i class="fa fa-check"></i><b>6.3.5</b> (Student’s) t-distribution</a></li>
<li class="chapter" data-level="6.3.6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#log-normal-distribution"><i class="fa fa-check"></i><b>6.3.6</b> Log-normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-and-experimental-design"><i class="fa fa-check"></i><b>6.4</b> Correlation and Experimental Design</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation"><i class="fa fa-check"></i><b>6.4.1</b> Correlation</a></li>
<li class="chapter" data-level="6.4.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-caveats"><i class="fa fa-check"></i><b>6.4.2</b> Correlation caveats</a></li>
<li class="chapter" data-level="6.4.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#design-of-experiments"><i class="fa fa-check"></i><b>6.4.3</b> Design of experiments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Introduction to Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#data-columns-types-affect-plot-types"><i class="fa fa-check"></i><b>7.1.1</b> Data columns types affect plot types</a></li>
<li class="chapter" data-level="7.1.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1.2</b> The grammar of graphics</a></li>
<li class="chapter" data-level="7.1.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#ggplot2-layers"><i class="fa fa-check"></i><b>7.1.3</b> ggplot2 layers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>7.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#visible-aesthetics"><i class="fa fa-check"></i><b>7.2.1</b> Visible aesthetics</a></li>
<li class="chapter" data-level="7.2.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#using-attributes"><i class="fa fa-check"></i><b>7.2.2</b> Using attributes</a></li>
<li class="chapter" data-level="7.2.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#modifying-aesthetics"><i class="fa fa-check"></i><b>7.2.3</b> Modifying aesthetics</a></li>
<li class="chapter" data-level="7.2.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics-best-practices"><i class="fa fa-check"></i><b>7.2.4</b> Aesthetics best practices</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#geometries"><i class="fa fa-check"></i><b>7.3</b> Geometries</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#scatter-plots"><i class="fa fa-check"></i><b>7.3.1</b> Scatter plots</a></li>
<li class="chapter" data-level="7.3.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#histograms-1"><i class="fa fa-check"></i><b>7.3.2</b> Histograms</a></li>
<li class="chapter" data-level="7.3.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#bar-plots-1"><i class="fa fa-check"></i><b>7.3.3</b> Bar plots</a></li>
<li class="chapter" data-level="7.3.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#line-plots-1"><i class="fa fa-check"></i><b>7.3.4</b> Line plots</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>7.4</b> Themes</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes-from-scratch"><i class="fa fa-check"></i><b>7.4.1</b> Themes from scratch</a></li>
<li class="chapter" data-level="7.4.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#theme-flexibility"><i class="fa fa-check"></i><b>7.4.2</b> Theme flexibility</a></li>
<li class="chapter" data-level="7.4.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#effective-explanatory-plots"><i class="fa fa-check"></i><b>7.4.3</b> Effective explanatory plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Intermediate Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#statistics"><i class="fa fa-check"></i><b>8.1</b> Statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-with-geoms"><i class="fa fa-check"></i><b>8.1.1</b> Stats with geoms</a></li>
<li class="chapter" data-level="8.1.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-sum-quantile"><i class="fa fa-check"></i><b>8.1.2</b> Stats: sum &amp; quantile</a></li>
<li class="chapter" data-level="8.1.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-outside-geoms"><i class="fa fa-check"></i><b>8.1.3</b> Stats outside geoms</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>8.2</b> Coordinates</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>8.2.1</b> Coordinates layer</a></li>
<li class="chapter" data-level="8.2.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-vs.-scales"><i class="fa fa-check"></i><b>8.2.2</b> Coordinates vs. scales</a></li>
<li class="chapter" data-level="8.2.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#double-flipped-axes"><i class="fa fa-check"></i><b>8.2.3</b> Double &amp; flipped axes</a></li>
<li class="chapter" data-level="8.2.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#polar-coordinates"><i class="fa fa-check"></i><b>8.2.4</b> Polar coordinates</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>8.3</b> Facets</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#the-facets-layer"><i class="fa fa-check"></i><b>8.3.1</b> The facets layer</a></li>
<li class="chapter" data-level="8.3.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-labels-order"><i class="fa fa-check"></i><b>8.3.2</b> Facet labels &amp; order</a></li>
<li class="chapter" data-level="8.3.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-plotting-spaces"><i class="fa fa-check"></i><b>8.3.3</b> Facet plotting spaces</a></li>
<li class="chapter" data-level="8.3.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-wrap-margins"><i class="fa fa-check"></i><b>8.3.4</b> Facet wrap &amp; margins</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#best-practices"><i class="fa fa-check"></i><b>8.4</b> Best Practices</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#bar-plots-2"><i class="fa fa-check"></i><b>8.4.1</b> Bar plots</a></li>
<li class="chapter" data-level="8.4.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#heatmaps-use-case-scenario"><i class="fa fa-check"></i><b>8.4.2</b> Heatmaps use case scenario</a></li>
<li class="chapter" data-level="8.4.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#when-good-data-makes-bad-plots"><i class="fa fa-check"></i><b>8.4.3</b> When good data makes bad plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html"><i class="fa fa-check"></i><b>9</b> Introduction to Importing Data in R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#flat-files-with-utils"><i class="fa fa-check"></i><b>9.1</b> Flat files with utils</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.csv"><i class="fa fa-check"></i><b>9.1.1</b> read.csv</a></li>
<li class="chapter" data-level="9.1.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.delim"><i class="fa fa-check"></i><b>9.1.2</b> read.delim</a></li>
<li class="chapter" data-level="9.1.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.table"><i class="fa fa-check"></i><b>9.1.3</b> read.table</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr-data.table"><i class="fa fa-check"></i><b>9.2</b> readr &amp; data.table</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr"><i class="fa fa-check"></i><b>9.2.1</b> readr</a></li>
<li class="chapter" data-level="9.2.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#data.table"><i class="fa fa-check"></i><b>9.2.2</b> data.table</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#excel-data"><i class="fa fa-check"></i><b>9.3</b> Excel data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#list-the-sheets-of-xls-file"><i class="fa fa-check"></i><b>9.3.1</b> List the sheets of xls file</a></li>
<li class="chapter" data-level="9.3.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#import-an-excel-sheet"><i class="fa fa-check"></i><b>9.3.2</b> Import an Excel sheet</a></li>
<li class="chapter" data-level="9.3.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#col_names-skip-argument"><i class="fa fa-check"></i><b>9.3.3</b> col_names &amp; skip argument</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#reproducible-excel-work---xlconnect"><i class="fa fa-check"></i><b>9.4</b> Reproducible Excel work - XLConnect</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets"><i class="fa fa-check"></i><b>9.4.1</b> Adapting sheets</a></li>
<li class="chapter" data-level="9.4.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets-1"><i class="fa fa-check"></i><b>9.4.2</b> Adapting sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html"><i class="fa fa-check"></i><b>10</b> Cleaning Data in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#common-data-problems"><i class="fa fa-check"></i><b>10.1</b> Common Data Problems</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#data-type-constraints"><i class="fa fa-check"></i><b>10.1.1</b> Data type constraints</a></li>
<li class="chapter" data-level="10.1.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#range-constraints"><i class="fa fa-check"></i><b>10.1.2</b> Range constraints</a></li>
<li class="chapter" data-level="10.1.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniqueness-constraints"><i class="fa fa-check"></i><b>10.1.3</b> Uniqueness constraints</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-and-text-data"><i class="fa fa-check"></i><b>10.2</b> Categorical and Text Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#checking-membership"><i class="fa fa-check"></i><b>10.2.1</b> Checking membership</a></li>
<li class="chapter" data-level="10.2.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-data-problems"><i class="fa fa-check"></i><b>10.2.2</b> Categorical data problems</a></li>
<li class="chapter" data-level="10.2.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cleaning-text-data"><i class="fa fa-check"></i><b>10.2.3</b> Cleaning text data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#advanced-data-problems"><i class="fa fa-check"></i><b>10.3</b> Advanced Data Problems</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniformity"><i class="fa fa-check"></i><b>10.3.1</b> Uniformity</a></li>
<li class="chapter" data-level="10.3.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cross-field-validation"><i class="fa fa-check"></i><b>10.3.2</b> Cross field validation</a></li>
<li class="chapter" data-level="10.3.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#completeness"><i class="fa fa-check"></i><b>10.3.3</b> Completeness</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#record-linkage"><i class="fa fa-check"></i><b>10.4</b> Record Linkage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#comparing-strings"><i class="fa fa-check"></i><b>10.4.1</b> Comparing strings</a></li>
<li class="chapter" data-level="10.4.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#generating-and-comparing-pairs"><i class="fa fa-check"></i><b>10.4.2</b> Generating and comparing pairs</a></li>
<li class="chapter" data-level="10.4.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#scoring-and-linking"><i class="fa fa-check"></i><b>10.4.3</b> Scoring and linking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html"><i class="fa fa-check"></i><b>11</b> Working with Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#dates-and-times-in-r"><i class="fa fa-check"></i><b>11.1</b> Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#introduction-to-dates"><i class="fa fa-check"></i><b>11.1.1</b> Introduction to dates</a></li>
<li class="chapter" data-level="11.1.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#why-use-dates"><i class="fa fa-check"></i><b>11.1.2</b> Why use dates?</a></li>
<li class="chapter" data-level="11.1.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#what-about-times"><i class="fa fa-check"></i><b>11.1.3</b> What about times?</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-manipulating-with-lubridate"><i class="fa fa-check"></i><b>11.2</b> Parsing &amp; Manipulating with lubridate</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-dates"><i class="fa fa-check"></i><b>11.2.1</b> Parsing dates</a></li>
<li class="chapter" data-level="11.2.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#manipulating-dates"><i class="fa fa-check"></i><b>11.2.2</b> Manipulating dates</a></li>
<li class="chapter" data-level="11.2.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#extracting-parts-of-a-datetime"><i class="fa fa-check"></i><b>11.2.3</b> Extracting parts of a datetime</a></li>
<li class="chapter" data-level="11.2.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#rounding-datetimes"><i class="fa fa-check"></i><b>11.2.4</b> Rounding datetimes</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#arithmetic-with-dates-and-times"><i class="fa fa-check"></i><b>11.3</b> Arithmetic with Dates and Times</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#taking-differences-of-datetimes"><i class="fa fa-check"></i><b>11.3.1</b> Taking differences of datetimes</a></li>
<li class="chapter" data-level="11.3.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-spans"><i class="fa fa-check"></i><b>11.3.2</b> Time spans</a></li>
<li class="chapter" data-level="11.3.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#intervals"><i class="fa fa-check"></i><b>11.3.3</b> Intervals</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#problems-in-practice"><i class="fa fa-check"></i><b>11.4</b> Problems in practice</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-zones"><i class="fa fa-check"></i><b>11.4.1</b> Time zones</a></li>
<li class="chapter" data-level="11.4.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#more-on-import-and-export-datetimes"><i class="fa fa-check"></i><b>11.4.2</b> More on import and export datetimes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html"><i class="fa fa-check"></i><b>12</b> Introduction to Writing Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#write-a-function"><i class="fa fa-check"></i><b>12.1</b> Write a Function</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#why-write-function"><i class="fa fa-check"></i><b>12.1.1</b> Why write function?</a></li>
<li class="chapter" data-level="12.1.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#convert-scripts-into-functions"><i class="fa fa-check"></i><b>12.1.2</b> Convert scripts into functions</a></li>
<li class="chapter" data-level="12.1.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#readable-code"><i class="fa fa-check"></i><b>12.1.3</b> Readable code</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#all-about-arguments"><i class="fa fa-check"></i><b>12.2</b> All About Arguments</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#default-arguments"><i class="fa fa-check"></i><b>12.2.1</b> Default arguments</a></li>
<li class="chapter" data-level="12.2.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#pass-arguments-between-functions"><i class="fa fa-check"></i><b>12.2.2</b> Pass arguments between functions</a></li>
<li class="chapter" data-level="12.2.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#checking-arguments"><i class="fa fa-check"></i><b>12.2.3</b> Checking arguments</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-values-and-scope"><i class="fa fa-check"></i><b>12.3</b> Return Values and Scope</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#returning-values"><i class="fa fa-check"></i><b>12.3.1</b> Returning values</a></li>
<li class="chapter" data-level="12.3.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-multiple-values"><i class="fa fa-check"></i><b>12.3.2</b> Return multiple values</a></li>
<li class="chapter" data-level="12.3.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#environments"><i class="fa fa-check"></i><b>12.3.3</b> Environments</a></li>
<li class="chapter" data-level="12.3.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#scope-and-precedence"><i class="fa fa-check"></i><b>12.3.4</b> Scope and precedence</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#case-study-on-grain-yields"><i class="fa fa-check"></i><b>12.4</b> Case Study on Grain Yields</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#grain-yields-unit-conversion"><i class="fa fa-check"></i><b>12.4.1</b> Grain yields &amp; unit conversion</a></li>
<li class="chapter" data-level="12.4.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#visualizing-grain-yields"><i class="fa fa-check"></i><b>12.4.2</b> Visualizing grain yields</a></li>
<li class="chapter" data-level="12.4.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#modeling-grain-yields"><i class="fa fa-check"></i><b>12.4.3</b> Modeling grain yields</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html"><i class="fa fa-check"></i><b>13</b> Exploratory Data Analysis in R</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-categorical-data"><i class="fa fa-check"></i><b>13.1</b> Exploring Categorical Data</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#categorical-data"><i class="fa fa-check"></i><b>13.1.1</b> Categorical data</a></li>
<li class="chapter" data-level="13.1.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#counts-vs.-proportions"><i class="fa fa-check"></i><b>13.1.2</b> Counts vs. proportions</a></li>
<li class="chapter" data-level="13.1.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable"><i class="fa fa-check"></i><b>13.1.3</b> Distribution of one variable</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-numerical-data"><i class="fa fa-check"></i><b>13.2</b> Exploring numerical data</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-data"><i class="fa fa-check"></i><b>13.2.1</b> Numerical Data</a></li>
<li class="chapter" data-level="13.2.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable-1"><i class="fa fa-check"></i><b>13.2.2</b> Distribution of one variable</a></li>
<li class="chapter" data-level="13.2.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#box-plots-1"><i class="fa fa-check"></i><b>13.2.3</b> Box plots</a></li>
<li class="chapter" data-level="13.2.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#visual-in-higher-dimensions"><i class="fa fa-check"></i><b>13.2.4</b> Visual in higher dimensions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-summaries"><i class="fa fa-check"></i><b>13.3</b> Numerical Summaries</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-center-1"><i class="fa fa-check"></i><b>13.3.1</b> Measures of center</a></li>
<li class="chapter" data-level="13.3.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-variability"><i class="fa fa-check"></i><b>13.3.2</b> Measures of variability</a></li>
<li class="chapter" data-level="13.3.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#shape-transformations"><i class="fa fa-check"></i><b>13.3.3</b> Shape &amp; transformations</a></li>
<li class="chapter" data-level="13.3.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#outliers"><i class="fa fa-check"></i><b>13.3.4</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#case-study"><i class="fa fa-check"></i><b>13.4</b> Case Study</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#new-data"><i class="fa fa-check"></i><b>13.4.1</b> New data</a></li>
<li class="chapter" data-level="13.4.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-1"><i class="fa fa-check"></i><b>13.4.2</b> Check-in 1</a></li>
<li class="chapter" data-level="13.4.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-2"><i class="fa fa-check"></i><b>13.4.3</b> Check-in 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html"><i class="fa fa-check"></i><b>14</b> Introduction to Regression</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>14.1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#tale-of-two-variables"><i class="fa fa-check"></i><b>14.1.1</b> Tale of two variables</a></li>
<li class="chapter" data-level="14.1.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#fitting-a-linear-regression"><i class="fa fa-check"></i><b>14.1.2</b> Fitting a linear regression</a></li>
<li class="chapter" data-level="14.1.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#categorical-explanatory-variables"><i class="fa fa-check"></i><b>14.1.3</b> Categorical explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-model-objects"><i class="fa fa-check"></i><b>14.2</b> Predictions &amp; model objects</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#making-predictions"><i class="fa fa-check"></i><b>14.2.1</b> Making predictions</a></li>
<li class="chapter" data-level="14.2.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#working-with-model-objects"><i class="fa fa-check"></i><b>14.2.2</b> Working with model objects</a></li>
<li class="chapter" data-level="14.2.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>14.2.3</b> Regression to the mean</a></li>
<li class="chapter" data-level="14.2.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#transforming-variables"><i class="fa fa-check"></i><b>14.2.4</b> Transforming variables</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#assessing-model-fit"><i class="fa fa-check"></i><b>14.3</b> Assessing model fit</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantifying-model-fit"><i class="fa fa-check"></i><b>14.3.1</b> Quantifying model fit</a></li>
<li class="chapter" data-level="14.3.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#visualizing-model-fit"><i class="fa fa-check"></i><b>14.3.2</b> Visualizing model fit</a></li>
<li class="chapter" data-level="14.3.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#outliers-leverage-influence"><i class="fa fa-check"></i><b>14.3.3</b> Outliers, leverage, influence</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-logistic-regression"><i class="fa fa-check"></i><b>14.4</b> Simple logistic regression</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#why-need-logistic-regression"><i class="fa fa-check"></i><b>14.4.1</b> Why need logistic regression</a></li>
<li class="chapter" data-level="14.4.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-odds-ratios"><i class="fa fa-check"></i><b>14.4.2</b> Predictions &amp; odds ratios</a></li>
<li class="chapter" data-level="14.4.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantify-logistic-regression-fit"><i class="fa fa-check"></i><b>14.4.3</b> Quantify logistic regression fit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="intermediate-regression.html"><a href="intermediate-regression.html"><i class="fa fa-check"></i><b>15</b> Intermediate Regression</a>
<ul>
<li class="chapter" data-level="15.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes"><i class="fa fa-check"></i><b>15.1</b> Parallel Slopes</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes-linear-regression"><i class="fa fa-check"></i><b>15.1.1</b> Parallel slopes linear regression</a></li>
<li class="chapter" data-level="15.1.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predicting-parallel-slopes"><i class="fa fa-check"></i><b>15.1.2</b> Predicting parallel slopes</a></li>
<li class="chapter" data-level="15.1.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#assessing-model-performance"><i class="fa fa-check"></i><b>15.1.3</b> Assessing model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#interactions"><i class="fa fa-check"></i><b>15.2</b> Interactions</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#models-for-each-category"><i class="fa fa-check"></i><b>15.2.1</b> Models for each category</a></li>
<li class="chapter" data-level="15.2.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#one-model-with-an-interaction"><i class="fa fa-check"></i><b>15.2.2</b> One model with an interaction</a></li>
<li class="chapter" data-level="15.2.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predict-with-interactions"><i class="fa fa-check"></i><b>15.2.3</b> Predict with interactions</a></li>
<li class="chapter" data-level="15.2.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#simpsons-paradox"><i class="fa fa-check"></i><b>15.2.4</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>15.3</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#two-numeric-ivs"><i class="fa fa-check"></i><b>15.3.1</b> Two numeric IVs</a></li>
<li class="chapter" data-level="15.3.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#more-than-2-ivs"><i class="fa fa-check"></i><b>15.3.2</b> More than 2 IVs</a></li>
<li class="chapter" data-level="15.3.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance"><i class="fa fa-check"></i><b>15.3.3</b> Model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression"><i class="fa fa-check"></i><b>15.4</b> Multiple Logistic Regression</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression-1"><i class="fa fa-check"></i><b>15.4.1</b> Multiple Logistic Regression</a></li>
<li class="chapter" data-level="15.4.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#logistic-distribution"><i class="fa fa-check"></i><b>15.4.2</b> Logistic distribution</a></li>
<li class="chapter" data-level="15.4.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance-1"><i class="fa fa-check"></i><b>15.4.3</b> Model performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sampling-in-r.html"><a href="sampling-in-r.html"><i class="fa fa-check"></i><b>16</b> Sampling in R</a>
<ul>
<li class="chapter" data-level="16.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-sampling"><i class="fa fa-check"></i><b>16.1</b> Introduction to Sampling</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-point-estimates"><i class="fa fa-check"></i><b>16.1.1</b> Sampling &amp; point estimates</a></li>
<li class="chapter" data-level="16.1.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#convenience-sampling"><i class="fa fa-check"></i><b>16.1.2</b> Convenience sampling</a></li>
<li class="chapter" data-level="16.1.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#pseudo-random-number-generation"><i class="fa fa-check"></i><b>16.1.3</b> Pseudo-random number generation</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-methods"><i class="fa fa-check"></i><b>16.2</b> Sampling Methods</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#simple-random-systematic-sampling"><i class="fa fa-check"></i><b>16.2.1</b> Simple random &amp; systematic sampling</a></li>
<li class="chapter" data-level="16.2.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#stratified-weighted-random-sampling"><i class="fa fa-check"></i><b>16.2.2</b> Stratified &amp; weighted random sampling</a></li>
<li class="chapter" data-level="16.2.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#cluster-sampling"><i class="fa fa-check"></i><b>16.2.3</b> Cluster sampling</a></li>
<li class="chapter" data-level="16.2.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-methods"><i class="fa fa-check"></i><b>16.2.4</b> Comparing sampling methods</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-distributions"><i class="fa fa-check"></i><b>16.3</b> Sampling Distributions</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#relative-error-of-point-estimates"><i class="fa fa-check"></i><b>16.3.1</b> Relative error of point estimates</a></li>
<li class="chapter" data-level="16.3.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#creating-a-sampling-distribution"><i class="fa fa-check"></i><b>16.3.2</b> Creating a sampling distribution</a></li>
<li class="chapter" data-level="16.3.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#approximate-sampling-distributions"><i class="fa fa-check"></i><b>16.3.3</b> Approximate sampling distributions</a></li>
<li class="chapter" data-level="16.3.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#standard-errors-clt"><i class="fa fa-check"></i><b>16.3.4</b> Standard errors &amp; CLT</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#bootstrap-distributions"><i class="fa fa-check"></i><b>16.4</b> Bootstrap Distributions</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-bootstrapping"><i class="fa fa-check"></i><b>16.4.1</b> Introduction to bootstrapping</a></li>
<li class="chapter" data-level="16.4.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-bootstrap-distributions"><i class="fa fa-check"></i><b>16.4.2</b> Comparing sampling &amp; bootstrap distributions</a></li>
<li class="chapter" data-level="16.4.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#confidence-intervals"><i class="fa fa-check"></i><b>16.4.3</b> Confidence intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>17</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction-to-hypothesis-testing"><i class="fa fa-check"></i><b>17.1</b> Introduction to Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#hypothesis-tests-z-scores"><i class="fa fa-check"></i><b>17.1.1</b> Hypothesis tests &amp; z-scores</a></li>
<li class="chapter" data-level="17.1.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#p-values"><i class="fa fa-check"></i><b>17.1.2</b> p-values</a></li>
<li class="chapter" data-level="17.1.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#statistical-significance"><i class="fa fa-check"></i><b>17.1.3</b> Statistical significance</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-anova-tests"><i class="fa fa-check"></i><b>17.2</b> Two-Sample &amp; ANOVA Tests</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#performing-t-tests"><i class="fa fa-check"></i><b>17.2.1</b> Performing t-tests</a></li>
<li class="chapter" data-level="17.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#calculating-p-values-from-t-statistics"><i class="fa fa-check"></i><b>17.2.2</b> Calculating p-values from t-statistics</a></li>
<li class="chapter" data-level="17.2.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#paired-t-tests"><i class="fa fa-check"></i><b>17.2.3</b> Paired t-tests</a></li>
<li class="chapter" data-level="17.2.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#anova-tests"><i class="fa fa-check"></i><b>17.2.4</b> ANOVA tests</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#proportion-tests"><i class="fa fa-check"></i><b>17.3</b> Proportion Tests</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.1</b> One-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.2</b> Two-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>17.3.3</b> Chi-square test of independence</a></li>
<li class="chapter" data-level="17.3.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-goodness-of-fit-tests"><i class="fa fa-check"></i><b>17.3.4</b> Chi-square goodness of fit tests</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-tests"><i class="fa fa-check"></i><b>17.4</b> Non-Parametric Tests</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#assumptions-in-hypothesis-testing"><i class="fa fa-check"></i><b>17.4.1</b> Assumptions in hypothesis testing</a></li>
<li class="chapter" data-level="17.4.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#simulation-based-infer-pipeline"><i class="fa fa-check"></i><b>17.4.2</b> Simulation-based infer pipeline</a></li>
<li class="chapter" data-level="17.4.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-anova-unpaired-t-tests"><i class="fa fa-check"></i><b>17.4.3</b> Non-parametric ANOVA &amp; unpaired t-tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i><b>18</b> Experimental Design</a>
<ul>
<li class="chapter" data-level="18.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-to-experimental-design"><i class="fa fa-check"></i><b>18.1</b> Introduction to experimental design</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-1"><i class="fa fa-check"></i><b>18.1.1</b> Introduction</a></li>
<li class="chapter" data-level="18.1.2" data-path="experimental-design.html"><a href="experimental-design.html#replication-blocking"><i class="fa fa-check"></i><b>18.1.2</b> Replication &amp; blocking</a></li>
<li class="chapter" data-level="18.1.3" data-path="experimental-design.html"><a href="experimental-design.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>18.1.3</b> Hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="experimental-design.html"><a href="experimental-design.html#basic-experiments"><i class="fa fa-check"></i><b>18.2</b> Basic Experiments</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="experimental-design.html"><a href="experimental-design.html#anova-factor-experiments"><i class="fa fa-check"></i><b>18.2.1</b> ANOVA &amp; factor experiments</a></li>
<li class="chapter" data-level="18.2.2" data-path="experimental-design.html"><a href="experimental-design.html#model-validation"><i class="fa fa-check"></i><b>18.2.2</b> Model validation</a></li>
<li class="chapter" data-level="18.2.3" data-path="experimental-design.html"><a href="experimental-design.html#ab-testing"><i class="fa fa-check"></i><b>18.2.3</b> A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="experimental-design.html"><a href="experimental-design.html#block-designs"><i class="fa fa-check"></i><b>18.3</b> Block Designs</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="experimental-design.html"><a href="experimental-design.html#intro-to-sampling"><i class="fa fa-check"></i><b>18.3.1</b> Intro to sampling</a></li>
<li class="chapter" data-level="18.3.2" data-path="experimental-design.html"><a href="experimental-design.html#randomized-complete-block-designs-rcbd"><i class="fa fa-check"></i><b>18.3.2</b> Randomized Complete Block Designs (RCBD)</a></li>
<li class="chapter" data-level="18.3.3" data-path="experimental-design.html"><a href="experimental-design.html#balanced-incomplete-block-designs-bibd"><i class="fa fa-check"></i><b>18.3.3</b> Balanced Incomplete Block Designs (BIBD)</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="experimental-design.html"><a href="experimental-design.html#squares-factorial-experiments"><i class="fa fa-check"></i><b>18.4</b> Squares &amp; Factorial Experiments</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="experimental-design.html"><a href="experimental-design.html#latin-squares"><i class="fa fa-check"></i><b>18.4.1</b> Latin squares</a></li>
<li class="chapter" data-level="18.4.2" data-path="experimental-design.html"><a href="experimental-design.html#graeco-latin-squares"><i class="fa fa-check"></i><b>18.4.2</b> Graeco-Latin squares</a></li>
<li class="chapter" data-level="18.4.3" data-path="experimental-design.html"><a href="experimental-design.html#factorial-experiments"><i class="fa fa-check"></i><b>18.4.3</b> Factorial experiments</a></li>
<li class="chapter" data-level="18.4.4" data-path="experimental-design.html"><a href="experimental-design.html#other-experimental-designs"><i class="fa fa-check"></i><b>18.4.4</b> Other experimental designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html"><i class="fa fa-check"></i><b>19</b> Supervised Learning: Classification</a>
<ul>
<li class="chapter" data-level="19.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-nearest-neighbors-knn"><i class="fa fa-check"></i><b>19.1</b> k-Nearest Neighbors (kNN)</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-with-nearest-neighbors"><i class="fa fa-check"></i><b>19.1.1</b> Classification with Nearest Neighbors</a></li>
<li class="chapter" data-level="19.1.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-in-knn"><i class="fa fa-check"></i><b>19.1.2</b> ‘k’ in kNN</a></li>
<li class="chapter" data-level="19.1.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#data-preparation-for-knn"><i class="fa fa-check"></i><b>19.1.3</b> 1-3.Data preparation for kNN</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#naive-bayes"><i class="fa fa-check"></i><b>19.2</b> Naive Bayes</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-bayesian-methods"><i class="fa fa-check"></i><b>19.2.1</b> Understanding Bayesian methods</a></li>
<li class="chapter" data-level="19.2.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-nbs-naivety"><i class="fa fa-check"></i><b>19.2.2</b> Understanding NB’s “naivety”</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#logistic-regression"><i class="fa fa-check"></i><b>19.3</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-binary-predictions-with-regression"><i class="fa fa-check"></i><b>19.3.1</b> Making binary predictions with regression</a></li>
<li class="chapter" data-level="19.3.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#model-performance-tradeoffs"><i class="fa fa-check"></i><b>19.3.2</b> Model performance tradeoffs</a></li>
<li class="chapter" data-level="19.3.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#dummy-variables-missing-data-and-interactions"><i class="fa fa-check"></i><b>19.3.3</b> Dummy variables, missing data, and interactions</a></li>
<li class="chapter" data-level="19.3.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#automatic-feature-selection"><i class="fa fa-check"></i><b>19.3.4</b> Automatic feature selection</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-trees"><i class="fa fa-check"></i><b>19.4</b> Classification Trees</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-decisions-with-trees"><i class="fa fa-check"></i><b>19.4.1</b> Making decisions with trees</a></li>
<li class="chapter" data-level="19.4.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#growing-larger-classification-trees"><i class="fa fa-check"></i><b>19.4.2</b> Growing larger classification trees</a></li>
<li class="chapter" data-level="19.4.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#tending-to-classification-trees"><i class="fa fa-check"></i><b>19.4.3</b> Tending to classification trees</a></li>
<li class="chapter" data-level="19.4.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#seeing-the-forest-from-the-trees"><i class="fa fa-check"></i><b>19.4.4</b> Seeing the forest from the trees</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html"><i class="fa fa-check"></i><b>20</b> Supervised Learning: Regression</a>
<ul>
<li class="chapter" data-level="20.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#what-is-regression"><i class="fa fa-check"></i><b>20.1</b> What is Regression?</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#introduction-2"><i class="fa fa-check"></i><b>20.1.1</b> Introduction</a></li>
<li class="chapter" data-level="20.1.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#linear-regression"><i class="fa fa-check"></i><b>20.1.2</b> Linear regression</a></li>
<li class="chapter" data-level="20.1.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#predicting-model"><i class="fa fa-check"></i><b>20.1.3</b> Predicting model</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-and-evaluating-models"><i class="fa fa-check"></i><b>20.2</b> Training and Evaluating Models</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#graphically"><i class="fa fa-check"></i><b>20.2.1</b> Graphically</a></li>
<li class="chapter" data-level="20.2.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#root-mean-squared-error"><i class="fa fa-check"></i><b>20.2.2</b> Root Mean Squared Error</a></li>
<li class="chapter" data-level="20.2.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#r-squared"><i class="fa fa-check"></i><b>20.2.3</b> R-squared</a></li>
<li class="chapter" data-level="20.2.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-a-model"><i class="fa fa-check"></i><b>20.2.4</b> Training a Model</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#issues-to-consider"><i class="fa fa-check"></i><b>20.3</b> Issues to Consider</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#categorical-iv"><i class="fa fa-check"></i><b>20.3.1</b> Categorical IV</a></li>
<li class="chapter" data-level="20.3.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#interactions-1"><i class="fa fa-check"></i><b>20.3.2</b> Interactions</a></li>
<li class="chapter" data-level="20.3.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-dv-before-modeling"><i class="fa fa-check"></i><b>20.3.3</b> Transforming DV before modeling</a></li>
<li class="chapter" data-level="20.3.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-iv-before-modeling"><i class="fa fa-check"></i><b>20.3.4</b> Transforming IV before modeling</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#dealing-with-non-linear-responses"><i class="fa fa-check"></i><b>20.4</b> Dealing with Non-Linear Responses</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#logistic-regression-to-predict-probabilities"><i class="fa fa-check"></i><b>20.4.1</b> Logistic regression to predict probabilities</a></li>
<li class="chapter" data-level="20.4.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#poisson-and-quasipoisson-regression-to-predict-counts"><i class="fa fa-check"></i><b>20.4.2</b> Poisson and quasipoisson regression to predict counts</a></li>
<li class="chapter" data-level="20.4.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gam-to-learn-non-linear-transforms"><i class="fa fa-check"></i><b>20.4.3</b> GAM to learn non-linear transforms</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#tree-based-methods"><i class="fa fa-check"></i><b>20.5</b> Tree-Based Methods</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#random-forests"><i class="fa fa-check"></i><b>20.5.1</b> Random forests</a></li>
<li class="chapter" data-level="20.5.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#one-hot-encoding"><i class="fa fa-check"></i><b>20.5.2</b> One-Hot-Encoding</a></li>
<li class="chapter" data-level="20.5.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gradient-boosting"><i class="fa fa-check"></i><b>20.5.3</b> Gradient boosting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>21</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="21.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>21.1</b> k-means clustering</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#types-of-machine-learning"><i class="fa fa-check"></i><b>21.1.1</b> Types of machine learning</a></li>
<li class="chapter" data-level="21.1.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-to-k-means"><i class="fa fa-check"></i><b>21.1.2</b> Introduction to k-means</a></li>
<li class="chapter" data-level="21.1.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#model-selection"><i class="fa fa-check"></i><b>21.1.3</b> Model selection</a></li>
<li class="chapter" data-level="21.1.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#pokemon-data"><i class="fa fa-check"></i><b>21.1.4</b> Pokemon data</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>21.2</b> Hierarchical clustering</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-3"><i class="fa fa-check"></i><b>21.2.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#selecting-number-of-clusters-1"><i class="fa fa-check"></i><b>21.2.2</b> Selecting number of clusters</a></li>
<li class="chapter" data-level="21.2.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-linkage"><i class="fa fa-check"></i><b>21.2.3</b> Clustering linkage</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction---pca"><i class="fa fa-check"></i><b>21.3</b> Dimensionality reduction - PCA</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-4"><i class="fa fa-check"></i><b>21.3.1</b> Introduction</a></li>
<li class="chapter" data-level="21.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#visualizing-and-interpreting-1"><i class="fa fa-check"></i><b>21.3.2</b> Visualizing and interpreting</a></li>
<li class="chapter" data-level="21.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#practical-issues"><i class="fa fa-check"></i><b>21.3.3</b> Practical issues</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#case-study-1"><i class="fa fa-check"></i><b>21.4</b> Case study</a>
<ul>
<li class="chapter" data-level="21.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-5"><i class="fa fa-check"></i><b>21.4.1</b> Introduction</a></li>
<li class="chapter" data-level="21.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#next-steps"><i class="fa fa-check"></i><b>21.4.2</b> Next steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html"><i class="fa fa-check"></i><b>22</b> Intermediate Importing Data in R</a>
<ul>
<li class="chapter" data-level="22.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-1"><i class="fa fa-check"></i><b>22.1</b> Import from databases-1</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#connect-to-a-database"><i class="fa fa-check"></i><b>22.1.1</b> Connect to a database</a></li>
<li class="chapter" data-level="22.1.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-table-data"><i class="fa fa-check"></i><b>22.1.2</b> Import table data</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-2"><i class="fa fa-check"></i><b>22.2</b> Import from databases-2</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#sql-queries-from-inside-r"><i class="fa fa-check"></i><b>22.2.1</b> SQL Queries from inside R</a></li>
<li class="chapter" data-level="22.2.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#dbi-internals"><i class="fa fa-check"></i><b>22.2.2</b> DBI internals</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-1"><i class="fa fa-check"></i><b>22.3</b> Import from the web-1</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#http"><i class="fa fa-check"></i><b>22.3.1</b> HTTP</a></li>
<li class="chapter" data-level="22.3.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#downloading-files"><i class="fa fa-check"></i><b>22.3.2</b> Downloading files</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-2"><i class="fa fa-check"></i><b>22.4</b> Import from the web-2</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#apis-json"><i class="fa fa-check"></i><b>22.4.1</b> APIs &amp; JSON</a></li>
<li class="chapter" data-level="22.4.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#json-jsonlite"><i class="fa fa-check"></i><b>22.4.2</b> JSON &amp; jsonlite</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-statistical-software"><i class="fa fa-check"></i><b>22.5</b> Import from statistical software</a>
<ul>
<li class="chapter" data-level="22.5.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#haven-package"><i class="fa fa-check"></i><b>22.5.1</b> haven package</a></li>
<li class="chapter" data-level="22.5.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#foreign-package"><i class="fa fa-check"></i><b>22.5.2</b> foreign package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html"><i class="fa fa-check"></i><b>23</b> Introduction to SQL</a>
<ul>
<li class="chapter" data-level="23.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#relational-databases"><i class="fa fa-check"></i><b>23.1</b> Relational Databases</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#databases"><i class="fa fa-check"></i><b>23.1.1</b> Databases</a></li>
<li class="chapter" data-level="23.1.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#tables"><i class="fa fa-check"></i><b>23.1.2</b> Tables</a></li>
<li class="chapter" data-level="23.1.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#data"><i class="fa fa-check"></i><b>23.1.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#querying"><i class="fa fa-check"></i><b>23.2</b> Querying</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#introducing"><i class="fa fa-check"></i><b>23.2.1</b> Introducing</a></li>
<li class="chapter" data-level="23.2.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#writing-queries"><i class="fa fa-check"></i><b>23.2.2</b> Writing queries</a></li>
<li class="chapter" data-level="23.2.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#sql-flavors"><i class="fa fa-check"></i><b>23.2.3</b> SQL flavors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="intermediate-sql.html"><a href="intermediate-sql.html"><i class="fa fa-check"></i><b>24</b> Intermediate SQL</a>
<ul>
<li class="chapter" data-level="24.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#selecting-data"><i class="fa fa-check"></i><b>24.1</b> Selecting Data</a>
<ul>
<li class="chapter" data-level="24.1.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#querying-a-database"><i class="fa fa-check"></i><b>24.1.1</b> Querying a database</a></li>
<li class="chapter" data-level="24.1.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#query-execution"><i class="fa fa-check"></i><b>24.1.2</b> Query execution</a></li>
<li class="chapter" data-level="24.1.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sql-style"><i class="fa fa-check"></i><b>24.1.3</b> SQL style</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-records"><i class="fa fa-check"></i><b>24.2</b> Filtering Records</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-numbers"><i class="fa fa-check"></i><b>24.2.1</b> Filtering numbers</a></li>
<li class="chapter" data-level="24.2.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#multiple-criteria"><i class="fa fa-check"></i><b>24.2.2</b> Multiple criteria</a></li>
<li class="chapter" data-level="24.2.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-text"><i class="fa fa-check"></i><b>24.2.3</b> Filtering text</a></li>
<li class="chapter" data-level="24.2.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#null-values"><i class="fa fa-check"></i><b>24.2.4</b> NULL values</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aggregate-functions"><i class="fa fa-check"></i><b>24.3</b> Aggregate Functions</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-data"><i class="fa fa-check"></i><b>24.3.1</b> Summarizing data</a></li>
<li class="chapter" data-level="24.3.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-subsets"><i class="fa fa-check"></i><b>24.3.2</b> Summarizing subsets</a></li>
<li class="chapter" data-level="24.3.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aliasing-and-arithmetic"><i class="fa fa-check"></i><b>24.3.3</b> Aliasing and arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-and-grouping"><i class="fa fa-check"></i><b>24.4</b> Sorting and Grouping</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-results"><i class="fa fa-check"></i><b>24.4.1</b> Sorting results</a></li>
<li class="chapter" data-level="24.4.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#grouping-data"><i class="fa fa-check"></i><b>24.4.2</b> Grouping data</a></li>
<li class="chapter" data-level="24.4.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-grouped-data"><i class="fa fa-check"></i><b>24.4.3</b> Filtering grouped data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html"><i class="fa fa-check"></i><b>25</b> Joining Data in SQL</a>
<ul>
<li class="chapter" data-level="25.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inner-joins"><i class="fa fa-check"></i><b>25.1</b> Inner Joins</a>
<ul>
<li class="chapter" data-level="25.1.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#ins-outs-of-inner-join"><i class="fa fa-check"></i><b>25.1.1</b> ins &amp; outs of INNER JOIN</a></li>
<li class="chapter" data-level="25.1.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#defining-relationships"><i class="fa fa-check"></i><b>25.1.2</b> Defining relationships</a></li>
<li class="chapter" data-level="25.1.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#multiple-joins"><i class="fa fa-check"></i><b>25.1.3</b> Multiple joins</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#outer-cross-self-joins"><i class="fa fa-check"></i><b>25.2</b> Outer, Cross &amp; Self Joins</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#left-right-joins-1"><i class="fa fa-check"></i><b>25.2.1</b> LEFT &amp; RIGHT JOINs</a></li>
<li class="chapter" data-level="25.2.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#full-join-1"><i class="fa fa-check"></i><b>25.2.2</b> FULL JOIN</a></li>
<li class="chapter" data-level="25.2.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#cross-join"><i class="fa fa-check"></i><b>25.2.3</b> CROSS JOIN</a></li>
<li class="chapter" data-level="25.2.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#self-joins"><i class="fa fa-check"></i><b>25.2.4</b> Self joins</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#set-theory-for-sql-joins"><i class="fa fa-check"></i><b>25.3</b> Set Theory for SQL Joins</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#union-vs.-union-all"><i class="fa fa-check"></i><b>25.3.1</b> UNION vs. UNION ALL</a></li>
<li class="chapter" data-level="25.3.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#intersect"><i class="fa fa-check"></i><b>25.3.2</b> INTERSECT</a></li>
<li class="chapter" data-level="25.3.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#except"><i class="fa fa-check"></i><b>25.3.3</b> EXCEPT</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#subqueries"><i class="fa fa-check"></i><b>25.4</b> Subqueries</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#with-semi-joins-anti-joins"><i class="fa fa-check"></i><b>25.4.1</b> With semi joins &amp; anti joins</a></li>
<li class="chapter" data-level="25.4.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-where-select"><i class="fa fa-check"></i><b>25.4.2</b> Inside WHERE &amp; SELECT</a></li>
<li class="chapter" data-level="25.4.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-from"><i class="fa fa-check"></i><b>25.4.3</b> Inside FROM</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="introduction-to-git.html"><a href="introduction-to-git.html"><i class="fa fa-check"></i><b>26</b> Introduction to Git</a>
<ul>
<li class="chapter" data-level="26.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#introduction-6"><i class="fa fa-check"></i><b>26.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="26.1.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#useful-shell-commands"><i class="fa fa-check"></i><b>26.1.1</b> Useful shell commands</a></li>
<li class="chapter" data-level="26.1.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#saving-files"><i class="fa fa-check"></i><b>26.1.2</b> Saving files</a></li>
<li class="chapter" data-level="26.1.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-files"><i class="fa fa-check"></i><b>26.1.3</b> Comparing files</a></li>
</ul></li>
<li class="chapter" data-level="26.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#making-changes"><i class="fa fa-check"></i><b>26.2</b> Making changes</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#storing-data-with-git"><i class="fa fa-check"></i><b>26.2.1</b> Storing data with Git</a></li>
<li class="chapter" data-level="26.2.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#viewing-changes"><i class="fa fa-check"></i><b>26.2.2</b> Viewing changes</a></li>
<li class="chapter" data-level="26.2.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#undoing-changes-before-committing"><i class="fa fa-check"></i><b>26.2.3</b> Undoing changes before committing</a></li>
<li class="chapter" data-level="26.2.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#restoring-and-reverting"><i class="fa fa-check"></i><b>26.2.4</b> Restoring and reverting</a></li>
</ul></li>
<li class="chapter" data-level="26.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#git-workflows"><i class="fa fa-check"></i><b>26.3</b> Git workflows</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#configuring-git"><i class="fa fa-check"></i><b>26.3.1</b> Configuring Git</a></li>
<li class="chapter" data-level="26.3.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#branches"><i class="fa fa-check"></i><b>26.3.2</b> Branches</a></li>
<li class="chapter" data-level="26.3.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-branches"><i class="fa fa-check"></i><b>26.3.3</b> Working with branches</a></li>
<li class="chapter" data-level="26.3.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#handling-conflict"><i class="fa fa-check"></i><b>26.3.4</b> Handling conflict</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#collaborating-with-git"><i class="fa fa-check"></i><b>26.4</b> Collaborating with Git</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#creating-repos"><i class="fa fa-check"></i><b>26.4.1</b> Creating repos</a></li>
<li class="chapter" data-level="26.4.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-remotes"><i class="fa fa-check"></i><b>26.4.2</b> Working with remotes</a></li>
<li class="chapter" data-level="26.4.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pulling-from-a-remote"><i class="fa fa-check"></i><b>26.4.3</b> Pulling from a remote</a></li>
<li class="chapter" data-level="26.4.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pushing-to-a-remote"><i class="fa fa-check"></i><b>26.4.4</b> Pushing to a remote</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Scientist with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-writing-functions" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter 12</span> Introduction to Writing Functions<a href="introduction-to-writing-functions.html#introduction-to-writing-functions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="write-a-function" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Write a Function<a href="introduction-to-writing-functions.html#write-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="why-write-function" class="section level3 hasAnchor" number="12.1.1">
<h3><span class="header-section-number">12.1.1</span> Why write function?<a href="introduction-to-writing-functions.html#why-write-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Benefits of writing functions:</strong></p>
<ul>
<li><p>Functions eliminate repetition from your code, which</p>
<ul>
<li><p>can reduce your workload, and</p></li>
<li><p>help avoid errors.</p></li>
</ul></li>
<li><p>Functions also allow code reuse and sharing.</p></li>
</ul>
<div id="calling-functions" class="section level4 hasAnchor" number="12.1.1.1">
<h4><span class="header-section-number">12.1.1.1</span> Calling functions<a href="introduction-to-writing-functions.html#calling-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Best practice for calling functions is to include them in the order shown by <code>args()</code>, and to only name rare arguments.</p>
<div class="sourceCode" id="cb1356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1356-1"><a href="introduction-to-writing-functions.html#cb1356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(rank)</span></code></pre></div>
<pre><code>## function (x, na.last = TRUE, ties.method = c(&quot;average&quot;, &quot;first&quot;, 
##     &quot;last&quot;, &quot;random&quot;, &quot;max&quot;, &quot;min&quot;)) 
## NULL</code></pre>
</div>
</div>
<div id="convert-scripts-into-functions" class="section level3 hasAnchor" number="12.1.2">
<h3><span class="header-section-number">12.1.2</span> Convert scripts into functions<a href="introduction-to-writing-functions.html#convert-scripts-into-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Make a template</p></li>
<li><p>Paste your script into the body</p></li>
<li><p>Choose the arguments</p></li>
<li><p>Replace specific values with arguments</p></li>
<li><p>Generalize variable names</p></li>
<li><p>Remove the final assignment</p></li>
</ul>
<div id="first-function" class="section level4 hasAnchor" number="12.1.2.1">
<h4><span class="header-section-number">12.1.2.1</span> First function<a href="introduction-to-writing-functions.html#first-function" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1358-1"><a href="introduction-to-writing-functions.html#cb1358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Your script, from a previous step</span></span>
<span id="cb1358-2"><a href="introduction-to-writing-functions.html#cb1358-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample from coin_sides once</span></span>
<span id="cb1358-3"><a href="introduction-to-writing-functions.html#cb1358-3" aria-hidden="true" tabindex="-1"></a>coin_sides <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;head&quot;</span>, <span class="st">&quot;tail&quot;</span>)</span>
<span id="cb1358-4"><a href="introduction-to-writing-functions.html#cb1358-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(coin_sides, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;head&quot;</code></pre>
<div class="sourceCode" id="cb1360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1360-1"><a href="introduction-to-writing-functions.html#cb1360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Paste your script into the function body</span></span>
<span id="cb1360-2"><a href="introduction-to-writing-functions.html#cb1360-2" aria-hidden="true" tabindex="-1"></a>toss_coin <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb1360-3"><a href="introduction-to-writing-functions.html#cb1360-3" aria-hidden="true" tabindex="-1"></a>  coin_sides <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;head&quot;</span>, <span class="st">&quot;tail&quot;</span>)</span>
<span id="cb1360-4"><a href="introduction-to-writing-functions.html#cb1360-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(coin_sides, <span class="dv">1</span>)</span>
<span id="cb1360-5"><a href="introduction-to-writing-functions.html#cb1360-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1360-6"><a href="introduction-to-writing-functions.html#cb1360-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1360-7"><a href="introduction-to-writing-functions.html#cb1360-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Call your function</span></span>
<span id="cb1360-8"><a href="introduction-to-writing-functions.html#cb1360-8" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>()</span></code></pre></div>
<pre><code>## [1] &quot;head&quot;</code></pre>
</div>
<div id="inputs-to-functions" class="section level4 hasAnchor" number="12.1.2.2">
<h4><span class="header-section-number">12.1.2.2</span> Inputs to functions<a href="introduction-to-writing-functions.html#inputs-to-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The inputs to functions are called arguments.</p>
<div class="sourceCode" id="cb1362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1362-1"><a href="introduction-to-writing-functions.html#cb1362-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the function to return n coin tosses</span></span>
<span id="cb1362-2"><a href="introduction-to-writing-functions.html#cb1362-2" aria-hidden="true" tabindex="-1"></a>toss_coin <span class="ot">&lt;-</span> <span class="cf">function</span>(n_flips) {</span>
<span id="cb1362-3"><a href="introduction-to-writing-functions.html#cb1362-3" aria-hidden="true" tabindex="-1"></a>  coin_sides <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;head&quot;</span>, <span class="st">&quot;tail&quot;</span>)</span>
<span id="cb1362-4"><a href="introduction-to-writing-functions.html#cb1362-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(coin_sides, <span class="at">size =</span> n_flips, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1362-5"><a href="introduction-to-writing-functions.html#cb1362-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1362-6"><a href="introduction-to-writing-functions.html#cb1362-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1362-7"><a href="introduction-to-writing-functions.html#cb1362-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 10 coin tosses</span></span>
<span id="cb1362-8"><a href="introduction-to-writing-functions.html#cb1362-8" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;tail&quot; &quot;tail&quot; &quot;head&quot; &quot;tail&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot;</code></pre>
</div>
<div id="multiple-inputs-to-functions" class="section level4 hasAnchor" number="12.1.2.3">
<h4><span class="header-section-number">12.1.2.3</span> Multiple inputs to functions<a href="introduction-to-writing-functions.html#multiple-inputs-to-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If a function should have more than one argument, list them in the function signature, separated by commas.</p>
<p>Bias the coin by weighting the sampling. Specify the <code>prob</code> argument so that heads are sampled with probability <code>p_head</code> (and tails are sampled with probability <code>1 - p_head</code>).</p>
<div class="sourceCode" id="cb1364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1364-1"><a href="introduction-to-writing-functions.html#cb1364-1" aria-hidden="true" tabindex="-1"></a>coin_sides <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;head&quot;</span>, <span class="st">&quot;tail&quot;</span>)</span>
<span id="cb1364-2"><a href="introduction-to-writing-functions.html#cb1364-2" aria-hidden="true" tabindex="-1"></a>n_flips <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb1364-3"><a href="introduction-to-writing-functions.html#cb1364-3" aria-hidden="true" tabindex="-1"></a>p_head <span class="ot">&lt;-</span> <span class="fl">0.8</span></span>
<span id="cb1364-4"><a href="introduction-to-writing-functions.html#cb1364-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1364-5"><a href="introduction-to-writing-functions.html#cb1364-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a vector of weights</span></span>
<span id="cb1364-6"><a href="introduction-to-writing-functions.html#cb1364-6" aria-hidden="true" tabindex="-1"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(p_head, <span class="dv">1</span> <span class="sc">-</span> p_head)</span>
<span id="cb1364-7"><a href="introduction-to-writing-functions.html#cb1364-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1364-8"><a href="introduction-to-writing-functions.html#cb1364-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Update so that heads are sampled with prob p_head</span></span>
<span id="cb1364-9"><a href="introduction-to-writing-functions.html#cb1364-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(coin_sides, n_flips, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> weights)</span></code></pre></div>
<pre><code>##  [1] &quot;tail&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;tail&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot;</code></pre>
<p>Update the definition of <code>toss_coin()</code> so it accepts an argument, <code>p_head</code>, and weights the samples using the code you wrote in the previous step.</p>
<div class="sourceCode" id="cb1366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1366-1"><a href="introduction-to-writing-functions.html#cb1366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the function so heads have probability p_head</span></span>
<span id="cb1366-2"><a href="introduction-to-writing-functions.html#cb1366-2" aria-hidden="true" tabindex="-1"></a>toss_coin <span class="ot">&lt;-</span> <span class="cf">function</span>(n_flips, p_head) {</span>
<span id="cb1366-3"><a href="introduction-to-writing-functions.html#cb1366-3" aria-hidden="true" tabindex="-1"></a>  coin_sides <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;head&quot;</span>, <span class="st">&quot;tail&quot;</span>)</span>
<span id="cb1366-4"><a href="introduction-to-writing-functions.html#cb1366-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define a vector of weights</span></span>
<span id="cb1366-5"><a href="introduction-to-writing-functions.html#cb1366-5" aria-hidden="true" tabindex="-1"></a>  weights <span class="ot">&lt;-</span> <span class="fu">c</span>(p_head, <span class="dv">1</span> <span class="sc">-</span> p_head)</span>
<span id="cb1366-6"><a href="introduction-to-writing-functions.html#cb1366-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Modify the sampling to be weighted</span></span>
<span id="cb1366-7"><a href="introduction-to-writing-functions.html#cb1366-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(coin_sides, n_flips, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> weights)</span>
<span id="cb1366-8"><a href="introduction-to-writing-functions.html#cb1366-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1366-9"><a href="introduction-to-writing-functions.html#cb1366-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1366-10"><a href="introduction-to-writing-functions.html#cb1366-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate 10 coin tosses with an 80% chance of each head</span></span>
<span id="cb1366-11"><a href="introduction-to-writing-functions.html#cb1366-11" aria-hidden="true" tabindex="-1"></a><span class="fu">toss_coin</span>(<span class="dv">10</span>, <span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;tail&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot; &quot;head&quot;</code></pre>
</div>
</div>
<div id="readable-code" class="section level3 hasAnchor" number="12.1.3">
<h3><span class="header-section-number">12.1.3</span> Readable code<a href="introduction-to-writing-functions.html#readable-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Function names should contain a verb</p></li>
<li><p>Readability vs. typeability</p>
<ul>
<li><p>Understanding code &gt;&gt; typing code</p></li>
<li><p>Code editors have autocomplete</p></li>
<li><p>You can alias common functions</p></li>
</ul></li>
<li><p>Types of argument</p>
<ul>
<li><p>Data arguments: what you compute on</p></li>
<li><p>Detail arguments: how you perform the computation</p></li>
<li><p>Data args should precede detail args</p></li>
</ul></li>
</ul>
<p><strong>Renaming GLM</strong></p>
<p>R’s generalized linear regression function, <code>glm()</code>, suffers the same usability problems as <code>lm()</code>: its name is an acronym, and its <code>formula</code> and <code>data</code> arguments are in the wrong order.</p>
<p>To solve this exercise, you need to know two things about generalized linear regression:</p>
<ol style="list-style-type: decimal">
<li><p><code>glm()</code> formulas are specified like <code>lm()</code> formulas: response is on the left, and explanatory variables are added on the right.</p></li>
<li><p>To model count data, set <code>glm()</code>’s <code>family</code> argument to <code>poisson</code>, making it a Poisson regression.</p></li>
</ol>
<div class="sourceCode" id="cb1368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1368-1"><a href="introduction-to-writing-functions.html#cb1368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1368-2"><a href="introduction-to-writing-functions.html#cb1368-2" aria-hidden="true" tabindex="-1"></a>snake_river_visits <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/snake_river_visits.rds&quot;</span>)</span>
<span id="cb1368-3"><a href="introduction-to-writing-functions.html#cb1368-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1368-4"><a href="introduction-to-writing-functions.html#cb1368-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a generalized linear regression </span></span>
<span id="cb1368-5"><a href="introduction-to-writing-functions.html#cb1368-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glm</span>(</span>
<span id="cb1368-6"><a href="introduction-to-writing-functions.html#cb1368-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Model no. of visits vs. gender, income, travel</span></span>
<span id="cb1368-7"><a href="introduction-to-writing-functions.html#cb1368-7" aria-hidden="true" tabindex="-1"></a>  n_visits <span class="sc">~</span> gender <span class="sc">+</span> income <span class="sc">+</span> travel, </span>
<span id="cb1368-8"><a href="introduction-to-writing-functions.html#cb1368-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use the snake_river_visits dataset</span></span>
<span id="cb1368-9"><a href="introduction-to-writing-functions.html#cb1368-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> snake_river_visits, </span>
<span id="cb1368-10"><a href="introduction-to-writing-functions.html#cb1368-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make it a Poisson regression</span></span>
<span id="cb1368-11"><a href="introduction-to-writing-functions.html#cb1368-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> poisson</span>
<span id="cb1368-12"><a href="introduction-to-writing-functions.html#cb1368-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = n_visits ~ gender + income + travel, family = poisson, 
##     data = snake_river_visits)
## 
## Coefficients:
##       (Intercept)       genderfemale  income($25k,$55k]  
##            4.0864             0.3740            -0.0199  
## income($55k,$95k]  income($95k,$Inf)   travel(0.25h,4h]  
##           -0.5807            -0.5782            -0.6271  
##   travel(4h,Infh)  
##           -2.4230  
## 
## Degrees of Freedom: 345 Total (i.e. Null);  339 Residual
##   (因為不存在，64 個觀察量被刪除了)
## Null Deviance:       18900 
## Residual Deviance: 11500     AIC: 12900</code></pre>
<p>Define a function, <code>run_poisson_regression()</code>, to run a Poisson regression. This should take two arguments: <code>data</code> and <code>formula</code>, and call <code>glm()</code> .</p>
<div class="sourceCode" id="cb1370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1370-1"><a href="introduction-to-writing-functions.html#cb1370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to run a Poisson regression</span></span>
<span id="cb1370-2"><a href="introduction-to-writing-functions.html#cb1370-2" aria-hidden="true" tabindex="-1"></a>run_poisson_regression <span class="ot">&lt;-</span> <span class="cf">function</span>(data, formula) {</span>
<span id="cb1370-3"><a href="introduction-to-writing-functions.html#cb1370-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glm</span>(formula, data, <span class="at">family =</span> poisson)</span>
<span id="cb1370-4"><a href="introduction-to-writing-functions.html#cb1370-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1371-1"><a href="introduction-to-writing-functions.html#cb1371-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Re-run the Poisson regression, using your function</span></span>
<span id="cb1371-2"><a href="introduction-to-writing-functions.html#cb1371-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> snake_river_visits <span class="sc">%&gt;%</span></span>
<span id="cb1371-3"><a href="introduction-to-writing-functions.html#cb1371-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">run_poisson_regression</span>(n_visits <span class="sc">~</span> gender <span class="sc">+</span> income <span class="sc">+</span> travel)</span>
<span id="cb1371-4"><a href="introduction-to-writing-functions.html#cb1371-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1371-5"><a href="introduction-to-writing-functions.html#cb1371-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Run this to see the predictions</span></span>
<span id="cb1371-6"><a href="introduction-to-writing-functions.html#cb1371-6" aria-hidden="true" tabindex="-1"></a><span class="co"># snake_river_explanatory %&gt;%</span></span>
<span id="cb1371-7"><a href="introduction-to-writing-functions.html#cb1371-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  mutate(predicted_n_visits = predict(model, ., type = &quot;response&quot;))%&gt;%</span></span>
<span id="cb1371-8"><a href="introduction-to-writing-functions.html#cb1371-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  arrange(desc(predicted_n_visits))</span></span></code></pre></div>
</div>
</div>
<div id="all-about-arguments" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> All About Arguments<a href="introduction-to-writing-functions.html#all-about-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="default-arguments" class="section level3 hasAnchor" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Default arguments<a href="introduction-to-writing-functions.html#default-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="numeric-defaults" class="section level4 hasAnchor" number="12.2.1.1">
<h4><span class="header-section-number">12.2.1.1</span> Numeric defaults<a href="introduction-to-writing-functions.html#numeric-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Only set defaults for numeric detail arguments, not data arguments.</p>
<p><code>cut_by_quantile()</code> converts a numeric vector into a categorical variable where quantiles define the cut points.</p>
<p>By specifying default arguments, you can make it easier to use. Let’s start with <code>n</code>, which specifies how many categories to cut <code>x</code> into.</p>
<div class="sourceCode" id="cb1372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1372-1"><a href="introduction-to-writing-functions.html#cb1372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A numeric vector of the number of visits to Snake River</span></span>
<span id="cb1372-2"><a href="introduction-to-writing-functions.html#cb1372-2" aria-hidden="true" tabindex="-1"></a>n_visits <span class="ot">&lt;-</span> snake_river_visits<span class="sc">$</span>n_visits</span>
<span id="cb1372-3"><a href="introduction-to-writing-functions.html#cb1372-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1372-4"><a href="introduction-to-writing-functions.html#cb1372-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the default for n to 5</span></span>
<span id="cb1372-5"><a href="introduction-to-writing-functions.html#cb1372-5" aria-hidden="true" tabindex="-1"></a>cut_by_quantile <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">n =</span> <span class="dv">5</span>, na.rm, labels, interval_type) {</span>
<span id="cb1372-6"><a href="introduction-to-writing-functions.html#cb1372-6" aria-hidden="true" tabindex="-1"></a>  probs <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> n <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1372-7"><a href="introduction-to-writing-functions.html#cb1372-7" aria-hidden="true" tabindex="-1"></a>  qtiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, probs, <span class="at">na.rm =</span> na.rm, <span class="at">names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1372-8"><a href="introduction-to-writing-functions.html#cb1372-8" aria-hidden="true" tabindex="-1"></a>  right <span class="ot">&lt;-</span> <span class="cf">switch</span>(interval_type, <span class="st">&quot;(lo, hi]&quot;</span> <span class="ot">=</span> <span class="cn">TRUE</span>, <span class="st">&quot;[lo, hi)&quot;</span> <span class="ot">=</span> <span class="cn">FALSE</span>)</span>
<span id="cb1372-9"><a href="introduction-to-writing-functions.html#cb1372-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(x, qtiles, <span class="at">labels =</span> labels, <span class="at">right =</span> right, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1372-10"><a href="introduction-to-writing-functions.html#cb1372-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1372-11"><a href="introduction-to-writing-functions.html#cb1372-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1372-12"><a href="introduction-to-writing-functions.html#cb1372-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the n argument from the call</span></span>
<span id="cb1372-13"><a href="introduction-to-writing-functions.html#cb1372-13" aria-hidden="true" tabindex="-1"></a><span class="fu">cut_by_quantile</span>(</span>
<span id="cb1372-14"><a href="introduction-to-writing-functions.html#cb1372-14" aria-hidden="true" tabindex="-1"></a>  n_visits,</span>
<span id="cb1372-15"><a href="introduction-to-writing-functions.html#cb1372-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>, </span>
<span id="cb1372-16"><a href="introduction-to-writing-functions.html#cb1372-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;very low&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;very high&quot;</span>),</span>
<span id="cb1372-17"><a href="introduction-to-writing-functions.html#cb1372-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval_type =</span> <span class="st">&quot;(lo, hi]&quot;</span></span>
<span id="cb1372-18"><a href="introduction-to-writing-functions.html#cb1372-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##   [1] very low  very low  very low  very low  very low  very low  very low 
##   [8] very low  very low  very low  very low  very low  very low  very low 
##  [15] very low  very low  very low  very low  very low  high      very high
##  [22] high      very low  medium    low       very low  very low  very low 
##  [29] very low  very low  very low  very high very high very high very high
##  [36] very high high      very high very high very high very high very high
##  [43] medium    very high very high very high medium    medium    low      
##  [50] high      high      high      very high very high high      high     
##  [57] very high medium    very high high      medium    high      very high
##  [64] very high very high very high high      high      very high high     
##  [71] very low  very high high      high      medium    high      high     
##  [78] high      medium    very high very high very high high      high     
##  [85] high      very low  very high medium    high      very high high     
##  [92] high      very high high      very low  very low  medium    very low 
##  [99] medium    medium    very high medium    medium    medium    high     
## [106] low       high      very high medium    very high medium    very high
## [113] low       very high low       very high high      very low  very low 
## [120] very low  very low  low       very low  very low  very low  very low 
## [127] very low  very low  medium    very low  very low  low       low      
## [134] very low  very low  low       very low  very low  very low  low      
## [141] low       medium    medium    medium    medium    medium    very low 
## [148] very low  low       very low  low       medium    very low  very low 
## [155] very low  very low  very high high      very high high      medium   
## [162] very high medium    very low  high      medium    high      high     
## [169] very high high      high      very high very high high      very high
## [176] high      high      medium    very high high      high      high     
## [183] very high very high very low  high      very high high      high     
## [190] medium    very high high      very high high      very high high     
## [197] very high high      very high very low  high      very high very high
## [204] very low  very low  medium    very high medium    low       medium   
## [211] high      medium    very low  medium    very high high      very high
## [218] high      very high high      low       high      medium    very high
## [225] medium    high      high      high      very low  high      high     
## [232] high      very high high      medium    medium    very low  very low 
## [239] very low  very low  medium    low       very low  very low  very low 
## [246] medium    high      very low  very low  medium    very low  very low 
## [253] very low  very low  very low  very low  very low  very low  very low 
## [260] very low  very high medium    very low  very high medium    very high
## [267] medium    low       very high medium    medium    medium    low      
## [274] high      medium    high      very high medium    very high very high
## [281] medium    medium    very high high      medium    very high high     
## [288] medium    low       very low  medium    very low  very low  very low 
## [295] very low  very low  low       very low  very low  very low  very low 
## [302] very low  very low  very low  very low  low       very low  very low 
## [309] very low  very low  low       very low  very low  low       very low 
## [316] very low  very low  very low  low       very low  very low  very low 
## [323] very low  very low  low       very low  very low  very low  very low 
## [330] very low  very low  very low  very low  very low  very low  very low 
## [337] very low  very low  very low  very low  very low  very low  very low 
## [344] very low  very low  medium    very low  very low  very low  very low 
## [351] very low  very low  very low  very low  very low  very low  very low 
## [358] very low  low       very low  very low  very low  very low  very low 
## [365] very low  very low  very low  very low  very low  very low  low      
## [372] very low  very low  very low  very high high      very high very high
## [379] very high high      very high very high very high very high medium   
## [386] medium    medium    high      very high high      high      high     
## [393] high      high      high      high      very high high      very high
## [400] medium    high      low       high      very high low       very low 
## [407] medium    very low  medium    low      
## Levels: very low low medium high very high</code></pre>
</div>
<div id="logical-defaults" class="section level4 hasAnchor" number="12.2.1.2">
<h4><span class="header-section-number">12.2.1.2</span> Logical defaults<a href="introduction-to-writing-functions.html#logical-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>cut_by_quantile()</code> is now slightly easier to use, but you still always have to specify the <code>na.rm</code> argument. This removes missing values.</p>
<p>Where functions have an argument for removing missing values, the best practice is to <strong>not</strong> remove them by default (in case you hadn’t spotted that you had missing values). That means that the default for <code>na.rm</code> should be <code>FALSE</code>.</p>
<div class="sourceCode" id="cb1374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1374-1"><a href="introduction-to-writing-functions.html#cb1374-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the default for na.rm to FALSE</span></span>
<span id="cb1374-2"><a href="introduction-to-writing-functions.html#cb1374-2" aria-hidden="true" tabindex="-1"></a>cut_by_quantile <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, labels, interval_type) {</span>
<span id="cb1374-3"><a href="introduction-to-writing-functions.html#cb1374-3" aria-hidden="true" tabindex="-1"></a>  probs <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> n <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1374-4"><a href="introduction-to-writing-functions.html#cb1374-4" aria-hidden="true" tabindex="-1"></a>  qtiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, probs, <span class="at">na.rm =</span> na.rm, <span class="at">names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1374-5"><a href="introduction-to-writing-functions.html#cb1374-5" aria-hidden="true" tabindex="-1"></a>  right <span class="ot">&lt;-</span> <span class="cf">switch</span>(interval_type, <span class="st">&quot;(lo, hi]&quot;</span> <span class="ot">=</span> <span class="cn">TRUE</span>, <span class="st">&quot;[lo, hi)&quot;</span> <span class="ot">=</span> <span class="cn">FALSE</span>)</span>
<span id="cb1374-6"><a href="introduction-to-writing-functions.html#cb1374-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(x, qtiles, <span class="at">labels =</span> labels, <span class="at">right =</span> right, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1374-7"><a href="introduction-to-writing-functions.html#cb1374-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1374-8"><a href="introduction-to-writing-functions.html#cb1374-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1374-9"><a href="introduction-to-writing-functions.html#cb1374-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the na.rm argument from the call</span></span>
<span id="cb1374-10"><a href="introduction-to-writing-functions.html#cb1374-10" aria-hidden="true" tabindex="-1"></a><span class="fu">cut_by_quantile</span>(</span>
<span id="cb1374-11"><a href="introduction-to-writing-functions.html#cb1374-11" aria-hidden="true" tabindex="-1"></a>  n_visits,  </span>
<span id="cb1374-12"><a href="introduction-to-writing-functions.html#cb1374-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;very low&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;very high&quot;</span>),</span>
<span id="cb1374-13"><a href="introduction-to-writing-functions.html#cb1374-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval_type =</span> <span class="st">&quot;(lo, hi]&quot;</span></span>
<span id="cb1374-14"><a href="introduction-to-writing-functions.html#cb1374-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##   [1] very low  very low  very low  very low  very low  very low  very low 
##   [8] very low  very low  very low  very low  very low  very low  very low 
##  [15] very low  very low  very low  very low  very low  high      very high
##  [22] high      very low  medium    low       very low  very low  very low 
##  [29] very low  very low  very low  very high very high very high very high
##  [36] very high high      very high very high very high very high very high
##  [43] medium    very high very high very high medium    medium    low      
##  [50] high      high      high      very high very high high      high     
##  [57] very high medium    very high high      medium    high      very high
##  [64] very high very high very high high      high      very high high     
##  [71] very low  very high high      high      medium    high      high     
##  [78] high      medium    very high very high very high high      high     
##  [85] high      very low  very high medium    high      very high high     
##  [92] high      very high high      very low  very low  medium    very low 
##  [99] medium    medium    very high medium    medium    medium    high     
## [106] low       high      very high medium    very high medium    very high
## [113] low       very high low       very high high      very low  very low 
## [120] very low  very low  low       very low  very low  very low  very low 
## [127] very low  very low  medium    very low  very low  low       low      
## [134] very low  very low  low       very low  very low  very low  low      
## [141] low       medium    medium    medium    medium    medium    very low 
## [148] very low  low       very low  low       medium    very low  very low 
## [155] very low  very low  very high high      very high high      medium   
## [162] very high medium    very low  high      medium    high      high     
## [169] very high high      high      very high very high high      very high
## [176] high      high      medium    very high high      high      high     
## [183] very high very high very low  high      very high high      high     
## [190] medium    very high high      very high high      very high high     
## [197] very high high      very high very low  high      very high very high
## [204] very low  very low  medium    very high medium    low       medium   
## [211] high      medium    very low  medium    very high high      very high
## [218] high      very high high      low       high      medium    very high
## [225] medium    high      high      high      very low  high      high     
## [232] high      very high high      medium    medium    very low  very low 
## [239] very low  very low  medium    low       very low  very low  very low 
## [246] medium    high      very low  very low  medium    very low  very low 
## [253] very low  very low  very low  very low  very low  very low  very low 
## [260] very low  very high medium    very low  very high medium    very high
## [267] medium    low       very high medium    medium    medium    low      
## [274] high      medium    high      very high medium    very high very high
## [281] medium    medium    very high high      medium    very high high     
## [288] medium    low       very low  medium    very low  very low  very low 
## [295] very low  very low  low       very low  very low  very low  very low 
## [302] very low  very low  very low  very low  low       very low  very low 
## [309] very low  very low  low       very low  very low  low       very low 
## [316] very low  very low  very low  low       very low  very low  very low 
## [323] very low  very low  low       very low  very low  very low  very low 
## [330] very low  very low  very low  very low  very low  very low  very low 
## [337] very low  very low  very low  very low  very low  very low  very low 
## [344] very low  very low  medium    very low  very low  very low  very low 
## [351] very low  very low  very low  very low  very low  very low  very low 
## [358] very low  low       very low  very low  very low  very low  very low 
## [365] very low  very low  very low  very low  very low  very low  low      
## [372] very low  very low  very low  very high high      very high very high
## [379] very high high      very high very high very high very high medium   
## [386] medium    medium    high      very high high      high      high     
## [393] high      high      high      high      very high high      very high
## [400] medium    high      low       high      very high low       very low 
## [407] medium    very low  medium    low      
## Levels: very low low medium high very high</code></pre>
</div>
<div id="null-defaults" class="section level4 hasAnchor" number="12.2.1.3">
<h4><span class="header-section-number">12.2.1.3</span> NULL defaults<a href="introduction-to-writing-functions.html#null-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>cut()</code> function used by <code>cut_by_quantile()</code> can automatically provide sensible labels for each category.</p>
<p>The code to generate these labels is <a href="https://github.com/wch/r-source/blob/29a9e663a2352843a6ea26b259725b0b97d0e4bd/src/library/base/R/cut.R#L42-L60"><strong>pretty complicated</strong></a>, so rather than appearing in the function signature directly, its <code>labels</code> argument defaults to <code>NULL</code>, and the calculation details are shown on the <a href="https://www.rdocumentation.org/packages/base/topics/cut"><strong><code>?cut</code></strong></a> help page.</p>
<p>(If you use this capability, make sure to document how the argument behaves in the function’s help page.)</p>
<div class="sourceCode" id="cb1376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1376-1"><a href="introduction-to-writing-functions.html#cb1376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the default for labels to NULL</span></span>
<span id="cb1376-2"><a href="introduction-to-writing-functions.html#cb1376-2" aria-hidden="true" tabindex="-1"></a>cut_by_quantile <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">labels =</span> <span class="cn">NULL</span>, interval_type) {</span>
<span id="cb1376-3"><a href="introduction-to-writing-functions.html#cb1376-3" aria-hidden="true" tabindex="-1"></a>  probs <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> n <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1376-4"><a href="introduction-to-writing-functions.html#cb1376-4" aria-hidden="true" tabindex="-1"></a>  qtiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, probs, <span class="at">na.rm =</span> na.rm, <span class="at">names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1376-5"><a href="introduction-to-writing-functions.html#cb1376-5" aria-hidden="true" tabindex="-1"></a>  right <span class="ot">&lt;-</span> <span class="cf">switch</span>(interval_type, <span class="st">&quot;(lo, hi]&quot;</span> <span class="ot">=</span> <span class="cn">TRUE</span>, <span class="st">&quot;[lo, hi)&quot;</span> <span class="ot">=</span> <span class="cn">FALSE</span>)</span>
<span id="cb1376-6"><a href="introduction-to-writing-functions.html#cb1376-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(x, qtiles, <span class="at">labels =</span> labels, <span class="at">right =</span> right, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1376-7"><a href="introduction-to-writing-functions.html#cb1376-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1376-8"><a href="introduction-to-writing-functions.html#cb1376-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1376-9"><a href="introduction-to-writing-functions.html#cb1376-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the labels argument from the call</span></span>
<span id="cb1376-10"><a href="introduction-to-writing-functions.html#cb1376-10" aria-hidden="true" tabindex="-1"></a><span class="fu">cut_by_quantile</span>(</span>
<span id="cb1376-11"><a href="introduction-to-writing-functions.html#cb1376-11" aria-hidden="true" tabindex="-1"></a>  n_visits,</span>
<span id="cb1376-12"><a href="introduction-to-writing-functions.html#cb1376-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval_type =</span> <span class="st">&quot;(lo, hi]&quot;</span></span>
<span id="cb1376-13"><a href="introduction-to-writing-functions.html#cb1376-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##   [1] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
##   [8] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
##  [15] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    (10,35]  (35,350]
##  [22] (10,35]  [0,1]    (2,10]   (1,2]    [0,1]    [0,1]    [0,1]   
##  [29] [0,1]    [0,1]    [0,1]    (35,350] (35,350] (35,350] (35,350]
##  [36] (35,350] (10,35]  (35,350] (35,350] (35,350] (35,350] (35,350]
##  [43] (2,10]   (35,350] (35,350] (35,350] (2,10]   (2,10]   (1,2]   
##  [50] (10,35]  (10,35]  (10,35]  (35,350] (35,350] (10,35]  (10,35] 
##  [57] (35,350] (2,10]   (35,350] (10,35]  (2,10]   (10,35]  (35,350]
##  [64] (35,350] (35,350] (35,350] (10,35]  (10,35]  (35,350] (10,35] 
##  [71] [0,1]    (35,350] (10,35]  (10,35]  (2,10]   (10,35]  (10,35] 
##  [78] (10,35]  (2,10]   (35,350] (35,350] (35,350] (10,35]  (10,35] 
##  [85] (10,35]  [0,1]    (35,350] (2,10]   (10,35]  (35,350] (10,35] 
##  [92] (10,35]  (35,350] (10,35]  [0,1]    [0,1]    (2,10]   [0,1]   
##  [99] (2,10]   (2,10]   (35,350] (2,10]   (2,10]   (2,10]   (10,35] 
## [106] (1,2]    (10,35]  (35,350] (2,10]   (35,350] (2,10]   (35,350]
## [113] (1,2]    (35,350] (1,2]    (35,350] (10,35]  [0,1]    [0,1]   
## [120] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]   
## [127] [0,1]    [0,1]    (2,10]   [0,1]    [0,1]    (1,2]    (1,2]   
## [134] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    (1,2]   
## [141] (1,2]    (2,10]   (2,10]   (2,10]   (2,10]   (2,10]   [0,1]   
## [148] [0,1]    (1,2]    [0,1]    (1,2]    (2,10]   [0,1]    [0,1]   
## [155] [0,1]    [0,1]    (35,350] (10,35]  (35,350] (10,35]  (2,10]  
## [162] (35,350] (2,10]   [0,1]    (10,35]  (2,10]   (10,35]  (10,35] 
## [169] (35,350] (10,35]  (10,35]  (35,350] (35,350] (10,35]  (35,350]
## [176] (10,35]  (10,35]  (2,10]   (35,350] (10,35]  (10,35]  (10,35] 
## [183] (35,350] (35,350] [0,1]    (10,35]  (35,350] (10,35]  (10,35] 
## [190] (2,10]   (35,350] (10,35]  (35,350] (10,35]  (35,350] (10,35] 
## [197] (35,350] (10,35]  (35,350] [0,1]    (10,35]  (35,350] (35,350]
## [204] [0,1]    [0,1]    (2,10]   (35,350] (2,10]   (1,2]    (2,10]  
## [211] (10,35]  (2,10]   [0,1]    (2,10]   (35,350] (10,35]  (35,350]
## [218] (10,35]  (35,350] (10,35]  (1,2]    (10,35]  (2,10]   (35,350]
## [225] (2,10]   (10,35]  (10,35]  (10,35]  [0,1]    (10,35]  (10,35] 
## [232] (10,35]  (35,350] (10,35]  (2,10]   (2,10]   [0,1]    [0,1]   
## [239] [0,1]    [0,1]    (2,10]   (1,2]    [0,1]    [0,1]    [0,1]   
## [246] (2,10]   (10,35]  [0,1]    [0,1]    (2,10]   [0,1]    [0,1]   
## [253] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [260] [0,1]    (35,350] (2,10]   [0,1]    (35,350] (2,10]   (35,350]
## [267] (2,10]   (1,2]    (35,350] (2,10]   (2,10]   (2,10]   (1,2]   
## [274] (10,35]  (2,10]   (10,35]  (35,350] (2,10]   (35,350] (35,350]
## [281] (2,10]   (2,10]   (35,350] (10,35]  (2,10]   (35,350] (10,35] 
## [288] (2,10]   (1,2]    [0,1]    (2,10]   [0,1]    [0,1]    [0,1]   
## [295] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]   
## [302] [0,1]    [0,1]    [0,1]    [0,1]    (1,2]    [0,1]    [0,1]   
## [309] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    (1,2]    [0,1]   
## [316] [0,1]    [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]   
## [323] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]   
## [330] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [337] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [344] [0,1]    [0,1]    (2,10]   [0,1]    [0,1]    [0,1]    [0,1]   
## [351] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [358] [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [365] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    (1,2]   
## [372] [0,1]    [0,1]    [0,1]    (35,350] (10,35]  (35,350] (35,350]
## [379] (35,350] (10,35]  (35,350] (35,350] (35,350] (35,350] (2,10]  
## [386] (2,10]   (2,10]   (10,35]  (35,350] (10,35]  (10,35]  (10,35] 
## [393] (10,35]  (10,35]  (10,35]  (10,35]  (35,350] (10,35]  (35,350]
## [400] (2,10]   (10,35]  (1,2]    (10,35]  (35,350] (1,2]    [0,1]   
## [407] (2,10]   [0,1]    (2,10]   (1,2]   
## Levels: [0,1] (1,2] (2,10] (10,35] (35,350]</code></pre>
</div>
<div id="categorical-defaults" class="section level4 hasAnchor" number="12.2.1.4">
<h4><span class="header-section-number">12.2.1.4</span> Categorical defaults<a href="introduction-to-writing-functions.html#categorical-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Pass a character vector in the signature.</p></li>
<li><p>Call <code>match.arg()</code> in the body.</p></li>
</ul>
<p>The pattern for categorical defaults is:</p>
<div class="sourceCode" id="cb1378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1378-1"><a href="introduction-to-writing-functions.html#cb1378-1" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span>(<span class="at">cat_arg =</span> <span class="fu">c</span>(<span class="st">&quot;choice1&quot;</span>, <span class="st">&quot;choice2&quot;</span>)) {</span>
<span id="cb1378-2"><a href="introduction-to-writing-functions.html#cb1378-2" aria-hidden="true" tabindex="-1"></a>  cat_arg <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(cat_arg)</span>
<span id="cb1378-3"><a href="introduction-to-writing-functions.html#cb1378-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>When cutting up a numeric vector, you need to worry about what happens if a value lands exactly on a boundary. You can either put this value into a category of the lower interval or the higher interval. That is, you can choose your intervals to include values at the top boundary but not the bottom.</p>
<p>In mathematical terminology,</p>
<ul>
<li><p>“open on the left, closed on the right” = <code>(lo, hi]</code></p></li>
<li><p>“closed on the left, open on the right” = <code>[lo, hi)</code></p></li>
</ul>
<p><code>cut_by_quantile()</code> should allow these two choices.</p>
<div class="sourceCode" id="cb1379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1379-1"><a href="introduction-to-writing-functions.html#cb1379-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Take &quot;rank()&quot; for example, look at the ties.method argument</span></span>
<span id="cb1379-2"><a href="introduction-to-writing-functions.html#cb1379-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rank, <span class="dv">7</span>)</span></code></pre></div>
<pre><code>##                                                                    
## 1 function (x, na.last = TRUE, ties.method = c(&quot;average&quot;, &quot;first&quot;, 
## 2     &quot;last&quot;, &quot;random&quot;, &quot;max&quot;, &quot;min&quot;))                             
## 3 {                                                                
## 4     stopifnot(length(na.last) == 1L)                             
## 5     nas &lt;- is.na(x)                                              
## 6     nm &lt;- names(x)                                               
## 7     ties.method &lt;- match.arg(ties.method)</code></pre>
<div class="sourceCode" id="cb1381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1381-1"><a href="introduction-to-writing-functions.html#cb1381-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the categories for interval_type to &quot;(lo, hi]&quot; and &quot;[lo, hi)&quot;</span></span>
<span id="cb1381-2"><a href="introduction-to-writing-functions.html#cb1381-2" aria-hidden="true" tabindex="-1"></a>cut_by_quantile <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">labels =</span> <span class="cn">NULL</span>, </span>
<span id="cb1381-3"><a href="introduction-to-writing-functions.html#cb1381-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">interval_type =</span> <span class="fu">c</span>(<span class="st">&quot;(lo, hi]&quot;</span>, <span class="st">&quot;[lo, hi)&quot;</span>)) {</span>
<span id="cb1381-4"><a href="introduction-to-writing-functions.html#cb1381-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Match the interval_type argument</span></span>
<span id="cb1381-5"><a href="introduction-to-writing-functions.html#cb1381-5" aria-hidden="true" tabindex="-1"></a>  interval_type <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(interval_type)</span>
<span id="cb1381-6"><a href="introduction-to-writing-functions.html#cb1381-6" aria-hidden="true" tabindex="-1"></a>  probs <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">length.out =</span> n <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1381-7"><a href="introduction-to-writing-functions.html#cb1381-7" aria-hidden="true" tabindex="-1"></a>  qtiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(x, probs, <span class="at">na.rm =</span> na.rm, <span class="at">names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1381-8"><a href="introduction-to-writing-functions.html#cb1381-8" aria-hidden="true" tabindex="-1"></a>  right <span class="ot">&lt;-</span> <span class="cf">switch</span>(interval_type, <span class="st">&quot;(lo, hi]&quot;</span> <span class="ot">=</span> <span class="cn">TRUE</span>, <span class="st">&quot;[lo, hi)&quot;</span> <span class="ot">=</span> <span class="cn">FALSE</span>)</span>
<span id="cb1381-9"><a href="introduction-to-writing-functions.html#cb1381-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cut</span>(x, qtiles, <span class="at">labels =</span> labels, <span class="at">right =</span> right, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1381-10"><a href="introduction-to-writing-functions.html#cb1381-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1381-11"><a href="introduction-to-writing-functions.html#cb1381-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1381-12"><a href="introduction-to-writing-functions.html#cb1381-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the interval_type argument from the call</span></span>
<span id="cb1381-13"><a href="introduction-to-writing-functions.html#cb1381-13" aria-hidden="true" tabindex="-1"></a><span class="fu">cut_by_quantile</span>(n_visits)</span></code></pre></div>
<pre><code>##   [1] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
##   [8] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
##  [15] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    (10,35]  (35,350]
##  [22] (10,35]  [0,1]    (2,10]   (1,2]    [0,1]    [0,1]    [0,1]   
##  [29] [0,1]    [0,1]    [0,1]    (35,350] (35,350] (35,350] (35,350]
##  [36] (35,350] (10,35]  (35,350] (35,350] (35,350] (35,350] (35,350]
##  [43] (2,10]   (35,350] (35,350] (35,350] (2,10]   (2,10]   (1,2]   
##  [50] (10,35]  (10,35]  (10,35]  (35,350] (35,350] (10,35]  (10,35] 
##  [57] (35,350] (2,10]   (35,350] (10,35]  (2,10]   (10,35]  (35,350]
##  [64] (35,350] (35,350] (35,350] (10,35]  (10,35]  (35,350] (10,35] 
##  [71] [0,1]    (35,350] (10,35]  (10,35]  (2,10]   (10,35]  (10,35] 
##  [78] (10,35]  (2,10]   (35,350] (35,350] (35,350] (10,35]  (10,35] 
##  [85] (10,35]  [0,1]    (35,350] (2,10]   (10,35]  (35,350] (10,35] 
##  [92] (10,35]  (35,350] (10,35]  [0,1]    [0,1]    (2,10]   [0,1]   
##  [99] (2,10]   (2,10]   (35,350] (2,10]   (2,10]   (2,10]   (10,35] 
## [106] (1,2]    (10,35]  (35,350] (2,10]   (35,350] (2,10]   (35,350]
## [113] (1,2]    (35,350] (1,2]    (35,350] (10,35]  [0,1]    [0,1]   
## [120] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]   
## [127] [0,1]    [0,1]    (2,10]   [0,1]    [0,1]    (1,2]    (1,2]   
## [134] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    (1,2]   
## [141] (1,2]    (2,10]   (2,10]   (2,10]   (2,10]   (2,10]   [0,1]   
## [148] [0,1]    (1,2]    [0,1]    (1,2]    (2,10]   [0,1]    [0,1]   
## [155] [0,1]    [0,1]    (35,350] (10,35]  (35,350] (10,35]  (2,10]  
## [162] (35,350] (2,10]   [0,1]    (10,35]  (2,10]   (10,35]  (10,35] 
## [169] (35,350] (10,35]  (10,35]  (35,350] (35,350] (10,35]  (35,350]
## [176] (10,35]  (10,35]  (2,10]   (35,350] (10,35]  (10,35]  (10,35] 
## [183] (35,350] (35,350] [0,1]    (10,35]  (35,350] (10,35]  (10,35] 
## [190] (2,10]   (35,350] (10,35]  (35,350] (10,35]  (35,350] (10,35] 
## [197] (35,350] (10,35]  (35,350] [0,1]    (10,35]  (35,350] (35,350]
## [204] [0,1]    [0,1]    (2,10]   (35,350] (2,10]   (1,2]    (2,10]  
## [211] (10,35]  (2,10]   [0,1]    (2,10]   (35,350] (10,35]  (35,350]
## [218] (10,35]  (35,350] (10,35]  (1,2]    (10,35]  (2,10]   (35,350]
## [225] (2,10]   (10,35]  (10,35]  (10,35]  [0,1]    (10,35]  (10,35] 
## [232] (10,35]  (35,350] (10,35]  (2,10]   (2,10]   [0,1]    [0,1]   
## [239] [0,1]    [0,1]    (2,10]   (1,2]    [0,1]    [0,1]    [0,1]   
## [246] (2,10]   (10,35]  [0,1]    [0,1]    (2,10]   [0,1]    [0,1]   
## [253] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [260] [0,1]    (35,350] (2,10]   [0,1]    (35,350] (2,10]   (35,350]
## [267] (2,10]   (1,2]    (35,350] (2,10]   (2,10]   (2,10]   (1,2]   
## [274] (10,35]  (2,10]   (10,35]  (35,350] (2,10]   (35,350] (35,350]
## [281] (2,10]   (2,10]   (35,350] (10,35]  (2,10]   (35,350] (10,35] 
## [288] (2,10]   (1,2]    [0,1]    (2,10]   [0,1]    [0,1]    [0,1]   
## [295] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]   
## [302] [0,1]    [0,1]    [0,1]    [0,1]    (1,2]    [0,1]    [0,1]   
## [309] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    (1,2]    [0,1]   
## [316] [0,1]    [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]   
## [323] [0,1]    [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]   
## [330] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [337] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [344] [0,1]    [0,1]    (2,10]   [0,1]    [0,1]    [0,1]    [0,1]   
## [351] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [358] [0,1]    (1,2]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]   
## [365] [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    [0,1]    (1,2]   
## [372] [0,1]    [0,1]    [0,1]    (35,350] (10,35]  (35,350] (35,350]
## [379] (35,350] (10,35]  (35,350] (35,350] (35,350] (35,350] (2,10]  
## [386] (2,10]   (2,10]   (10,35]  (35,350] (10,35]  (10,35]  (10,35] 
## [393] (10,35]  (10,35]  (10,35]  (10,35]  (35,350] (10,35]  (35,350]
## [400] (2,10]   (10,35]  (1,2]    (10,35]  (35,350] (1,2]    [0,1]   
## [407] (2,10]   [0,1]    (2,10]   (1,2]   
## Levels: [0,1] (1,2] (2,10] (10,35] (35,350]</code></pre>
<p><code>match.arg()</code> handles throwing an error if the user types a value that wasn’t specified.</p>
</div>
</div>
<div id="pass-arguments-between-functions" class="section level3 hasAnchor" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> Pass arguments between functions<a href="introduction-to-writing-functions.html#pass-arguments-between-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="harmonic-mean" class="section level4 hasAnchor" number="12.2.2.1">
<h4><span class="header-section-number">12.2.2.1</span> Harmonic mean<a href="introduction-to-writing-functions.html#harmonic-mean" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The harmonic mean is the reciprocal of the arithmetic mean of the reciprocal of the data. The harmonic mean is often used to average ratio data.</p>
<p><img src="image/harmonic%20mean.png" /></p>
<p>You’ll be using it on the price/earnings ratio of stocks in the Standard and Poor’s 500 index, provided as <code>std_and_poor500</code>. Price/earnings ratio is a measure of how expensive a stock is.</p>
<div class="sourceCode" id="cb1383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1383-1"><a href="introduction-to-writing-functions.html#cb1383-1" aria-hidden="true" tabindex="-1"></a>std_and_poor500 <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/std_and_poor500_with_pe_2019-06-21.rds&quot;</span>)</span>
<span id="cb1383-2"><a href="introduction-to-writing-functions.html#cb1383-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(std_and_poor500)</span></code></pre></div>
<pre><code>## Rows: 505
## Columns: 5
## $ symbol   &lt;chr&gt; &quot;MMM&quot;, &quot;ABT&quot;, &quot;ABBV&quot;, &quot;ABMD&quot;, &quot;ACN&quot;, &quot;ATVI&quot;, &quot;ADBE&quot;, &quot;AM…
## $ company  &lt;chr&gt; &quot;3M Company&quot;, &quot;Abbott Laboratories&quot;, &quot;AbbVie Inc.&quot;, &quot;ABI…
## $ sector   &lt;chr&gt; &quot;Industrials&quot;, &quot;Health Care&quot;, &quot;Health Care&quot;, &quot;Health Car…
## $ industry &lt;chr&gt; &quot;Industrial Conglomerates&quot;, &quot;Health Care Equipment&quot;, &quot;Ph…
## $ pe_ratio &lt;dbl&gt; 18.32, 57.67, 22.44, 45.64, 27.00, 20.14, 55.94, 116.87,…</code></pre>
<div class="sourceCode" id="cb1385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1385-1"><a href="introduction-to-writing-functions.html#cb1385-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to calculate the reciprocal</span></span>
<span id="cb1385-2"><a href="introduction-to-writing-functions.html#cb1385-2" aria-hidden="true" tabindex="-1"></a>get_reciprocal <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1385-3"><a href="introduction-to-writing-functions.html#cb1385-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb1385-4"><a href="introduction-to-writing-functions.html#cb1385-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1385-5"><a href="introduction-to-writing-functions.html#cb1385-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1385-6"><a href="introduction-to-writing-functions.html#cb1385-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to calculate the harmonic mean</span></span>
<span id="cb1385-7"><a href="introduction-to-writing-functions.html#cb1385-7" aria-hidden="true" tabindex="-1"></a>calc_harmonic_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1385-8"><a href="introduction-to-writing-functions.html#cb1385-8" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb1385-9"><a href="introduction-to-writing-functions.html#cb1385-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1385-10"><a href="introduction-to-writing-functions.html#cb1385-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1385-11"><a href="introduction-to-writing-functions.html#cb1385-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1385-12"><a href="introduction-to-writing-functions.html#cb1385-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1385-13"><a href="introduction-to-writing-functions.html#cb1385-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1385-14"><a href="introduction-to-writing-functions.html#cb1385-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate each sector Price/earnings ratio</span></span>
<span id="cb1385-15"><a href="introduction-to-writing-functions.html#cb1385-15" aria-hidden="true" tabindex="-1"></a>std_and_poor500 <span class="sc">%&gt;%</span> </span>
<span id="cb1385-16"><a href="introduction-to-writing-functions.html#cb1385-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by sector</span></span>
<span id="cb1385-17"><a href="introduction-to-writing-functions.html#cb1385-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sector) <span class="sc">%&gt;%</span> </span>
<span id="cb1385-18"><a href="introduction-to-writing-functions.html#cb1385-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summarize, calculating harmonic mean of P/E ratio</span></span>
<span id="cb1385-19"><a href="introduction-to-writing-functions.html#cb1385-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hmean_pe_ratio =</span> <span class="fu">calc_harmonic_mean</span>(pe_ratio))</span></code></pre></div>
<p>It looks like we have a problem though: most sectors have missing values.</p>
</div>
<div id="handling-missing-values" class="section level4 hasAnchor" number="12.2.2.2">
<h4><span class="header-section-number">12.2.2.2</span> Handling missing values<a href="introduction-to-writing-functions.html#handling-missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It would be useful for your function to be able to remove missing values before calculating.</p>
<p>Rather than writing your own code for this, you can outsource this functionality to <code>mean()</code>.</p>
<div class="sourceCode" id="cb1386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1386-1"><a href="introduction-to-writing-functions.html#cb1386-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add an na.rm arg with a default, and pass it to mean()</span></span>
<span id="cb1386-2"><a href="introduction-to-writing-functions.html#cb1386-2" aria-hidden="true" tabindex="-1"></a>calc_harmonic_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb1386-3"><a href="introduction-to-writing-functions.html#cb1386-3" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb1386-4"><a href="introduction-to-writing-functions.html#cb1386-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1386-5"><a href="introduction-to-writing-functions.html#cb1386-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(<span class="at">na.rm =</span> na.rm) <span class="sc">%&gt;%</span></span>
<span id="cb1386-6"><a href="introduction-to-writing-functions.html#cb1386-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1386-7"><a href="introduction-to-writing-functions.html#cb1386-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1386-8"><a href="introduction-to-writing-functions.html#cb1386-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1386-9"><a href="introduction-to-writing-functions.html#cb1386-9" aria-hidden="true" tabindex="-1"></a>std_and_poor500 <span class="sc">%&gt;%</span> </span>
<span id="cb1386-10"><a href="introduction-to-writing-functions.html#cb1386-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by sector</span></span>
<span id="cb1386-11"><a href="introduction-to-writing-functions.html#cb1386-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sector) <span class="sc">%&gt;%</span> </span>
<span id="cb1386-12"><a href="introduction-to-writing-functions.html#cb1386-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summarize, calculating harmonic mean of P/E ratio, and remove missing value</span></span>
<span id="cb1386-13"><a href="introduction-to-writing-functions.html#cb1386-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hmean_pe_ratio =</span> <span class="fu">calc_harmonic_mean</span>(pe_ratio, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<div id="using-..." class="section level4 hasAnchor" number="12.2.2.3">
<h4><span class="header-section-number">12.2.2.3</span> Using <code>...</code><a href="introduction-to-writing-functions.html#using-..." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The tradeoff</p>
<ul>
<li><p>Benefits</p>
<ul>
<li><p>Less typing for you</p></li>
<li><p>No need to match signatures</p></li>
</ul></li>
<li><p>Drawbacks</p>
<ul>
<li><p>You need to trust the inner function</p></li>
<li><p>The interface is not as obvious to users</p></li>
</ul></li>
</ul>
<p>Rather than explicitly giving <code>calc_harmonic_mean()</code> and <code>na.rm</code> argument, you can use <code>...</code> to simply “pass other arguments” to <code>mean()</code>.</p>
<div class="sourceCode" id="cb1387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1387-1"><a href="introduction-to-writing-functions.html#cb1387-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Swap na.rm arg for ... in signature and body</span></span>
<span id="cb1387-2"><a href="introduction-to-writing-functions.html#cb1387-2" aria-hidden="true" tabindex="-1"></a>calc_harmonic_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...) {</span>
<span id="cb1387-3"><a href="introduction-to-writing-functions.html#cb1387-3" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb1387-4"><a href="introduction-to-writing-functions.html#cb1387-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1387-5"><a href="introduction-to-writing-functions.html#cb1387-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(...) <span class="sc">%&gt;%</span></span>
<span id="cb1387-6"><a href="introduction-to-writing-functions.html#cb1387-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1387-7"><a href="introduction-to-writing-functions.html#cb1387-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1387-8"><a href="introduction-to-writing-functions.html#cb1387-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1387-9"><a href="introduction-to-writing-functions.html#cb1387-9" aria-hidden="true" tabindex="-1"></a>std_and_poor500 <span class="sc">%&gt;%</span> </span>
<span id="cb1387-10"><a href="introduction-to-writing-functions.html#cb1387-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by sector</span></span>
<span id="cb1387-11"><a href="introduction-to-writing-functions.html#cb1387-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sector) <span class="sc">%&gt;%</span> </span>
<span id="cb1387-12"><a href="introduction-to-writing-functions.html#cb1387-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summarize, calculating harmonic mean of P/E ratio, and remove missing value</span></span>
<span id="cb1387-13"><a href="introduction-to-writing-functions.html#cb1387-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hmean_pe_ratio =</span> <span class="fu">calc_harmonic_mean</span>(pe_ratio, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>Using <code>...</code> doesn’t change how people use your function; it just means the function is more flexible.</p>
</div>
</div>
<div id="checking-arguments" class="section level3 hasAnchor" number="12.2.3">
<h3><span class="header-section-number">12.2.3</span> Checking arguments<a href="introduction-to-writing-functions.html#checking-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="throwing-errors" class="section level4 hasAnchor" number="12.2.3.1">
<h4><span class="header-section-number">12.2.3.1</span> Throwing errors<a href="introduction-to-writing-functions.html#throwing-errors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If a user provides a bad input to a function, the best course of action is to throw an error letting them know. The two rules are</p>
<ul>
<li><p>Throw the error message as soon as you realize there is a problem (typically at the start of the function).</p></li>
<li><p>Make the error message easily understandable.</p></li>
</ul>
<p>You can use the <code>assert()</code> functions from <code>assert</code> package to check inputs and throw errors when they fail. (no output means no problem)</p>
<div class="sourceCode" id="cb1388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1388-1"><a href="introduction-to-writing-functions.html#cb1388-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(assert)</span>
<span id="cb1388-2"><a href="introduction-to-writing-functions.html#cb1388-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1388-3"><a href="introduction-to-writing-functions.html#cb1388-3" aria-hidden="true" tabindex="-1"></a>calc_harmonic_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb1388-4"><a href="introduction-to-writing-functions.html#cb1388-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Assert that x is numeric</span></span>
<span id="cb1388-5"><a href="introduction-to-writing-functions.html#cb1388-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assert</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb1388-6"><a href="introduction-to-writing-functions.html#cb1388-6" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb1388-7"><a href="introduction-to-writing-functions.html#cb1388-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1388-8"><a href="introduction-to-writing-functions.html#cb1388-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(<span class="at">na.rm =</span> na.rm) <span class="sc">%&gt;%</span></span>
<span id="cb1388-9"><a href="introduction-to-writing-functions.html#cb1388-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1388-10"><a href="introduction-to-writing-functions.html#cb1388-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1388-11"><a href="introduction-to-writing-functions.html#cb1388-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1388-12"><a href="introduction-to-writing-functions.html#cb1388-12" aria-hidden="true" tabindex="-1"></a><span class="co"># See what happens when you pass it strings</span></span>
<span id="cb1388-13"><a href="introduction-to-writing-functions.html#cb1388-13" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_harmonic_mean</span>(std_and_poor500<span class="sc">$</span>sector)</span></code></pre></div>
<div class="sourceCode" id="cb1389" style="background: white; color: black"><pre class="sourceCode r output"><code class="sourceCode r"><span id="cb1389-1"><a href="introduction-to-writing-functions.html#cb1389-1" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> <span class="cf">in</span> <span class="fu">calc_harmonic_mean</span>(<span class="at">x =</span> std_and_poor500<span class="sc">$</span>sector)</span>
<span id="cb1389-2"><a href="introduction-to-writing-functions.html#cb1389-2" aria-hidden="true" tabindex="-1"></a> Failed checks<span class="sc">:</span></span>
<span id="cb1389-3"><a href="introduction-to-writing-functions.html#cb1389-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">is.numeric</span>(x)</span></code></pre></div>
</div>
<div id="custom-error-logic" class="section level4 hasAnchor" number="12.2.3.2">
<h4><span class="header-section-number">12.2.3.2</span> Custom error logic<a href="introduction-to-writing-functions.html#custom-error-logic" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes the <code>assert()</code> functions in assert don’t give the most informative error message. For example, won’t say why that’s a problem. In that case, you can use the <code>is_*()</code> functions in conjunction with messages, warnings, or errors to define custom feedback.</p>
<p>The harmonic mean only makes sense when x has all positive values.</p>
<div class="sourceCode" id="cb1390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1390-1"><a href="introduction-to-writing-functions.html#cb1390-1" aria-hidden="true" tabindex="-1"></a>calc_harmonic_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb1390-2"><a href="introduction-to-writing-functions.html#cb1390-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assert</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb1390-3"><a href="introduction-to-writing-functions.html#cb1390-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if any values of x are non-positive</span></span>
<span id="cb1390-4"><a href="introduction-to-writing-functions.html#cb1390-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1390-5"><a href="introduction-to-writing-functions.html#cb1390-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Throw an error</span></span>
<span id="cb1390-6"><a href="introduction-to-writing-functions.html#cb1390-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;x contains non-positive values, so the harmonic mean makes no sense.&quot;</span>)</span>
<span id="cb1390-7"><a href="introduction-to-writing-functions.html#cb1390-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1390-8"><a href="introduction-to-writing-functions.html#cb1390-8" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb1390-9"><a href="introduction-to-writing-functions.html#cb1390-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1390-10"><a href="introduction-to-writing-functions.html#cb1390-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(<span class="at">na.rm =</span> na.rm) <span class="sc">%&gt;%</span></span>
<span id="cb1390-11"><a href="introduction-to-writing-functions.html#cb1390-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1390-12"><a href="introduction-to-writing-functions.html#cb1390-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1390-13"><a href="introduction-to-writing-functions.html#cb1390-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1390-14"><a href="introduction-to-writing-functions.html#cb1390-14" aria-hidden="true" tabindex="-1"></a><span class="co"># See what happens when you pass it negative numbers</span></span>
<span id="cb1390-15"><a href="introduction-to-writing-functions.html#cb1390-15" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_harmonic_mean</span>(std_and_poor500<span class="sc">$</span>pe_ratio <span class="sc">-</span> <span class="dv">20</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1391" style="background: white; color: black"><pre class="sourceCode r output"><code class="sourceCode r"><span id="cb1391-1"><a href="introduction-to-writing-functions.html#cb1391-1" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">calc_harmonic_mean</span>(std_and_poor500<span class="sc">$</span>pe_ratio <span class="sc">-</span> <span class="dv">20</span>) <span class="sc">:</span></span>
<span id="cb1391-2"><a href="introduction-to-writing-functions.html#cb1391-2" aria-hidden="true" tabindex="-1"></a> x contains non<span class="sc">-</span>positive values, so the harmonic mean makes no sense.</span></code></pre></div>
<p>Explaining what went wrong is helpful to users. Explaining why it is wrong is even better!</p>
</div>
<div id="fixing-function-arguments" class="section level4 hasAnchor" number="12.2.3.3">
<h4><span class="header-section-number">12.2.3.3</span> Fixing function arguments<a href="introduction-to-writing-functions.html#fixing-function-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You still need to provide some checks on the <code>na.rm</code> argument. This time, rather than throwing errors when the input is in an incorrect form, you are going to try to fix it.</p>
<p><code>na.rm</code> should be a logical vector with one element.</p>
<p>Fix the <code>na.rm</code> argument by using <code>use_first()</code> to select the first <code>na.rm</code> element, and <code>coerce_to()</code> to change it to logical.</p>
<div class="sourceCode" id="cb1392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1392-1"><a href="introduction-to-writing-functions.html#cb1392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(assert)</span>
<span id="cb1392-2"><a href="introduction-to-writing-functions.html#cb1392-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(assertive.base)</span>
<span id="cb1392-3"><a href="introduction-to-writing-functions.html#cb1392-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1392-4"><a href="introduction-to-writing-functions.html#cb1392-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the function definition to fix the na.rm argument</span></span>
<span id="cb1392-5"><a href="introduction-to-writing-functions.html#cb1392-5" aria-hidden="true" tabindex="-1"></a>calc_harmonic_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb1392-6"><a href="introduction-to-writing-functions.html#cb1392-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assert</span>(<span class="fu">is.numeric</span>(x))</span>
<span id="cb1392-7"><a href="introduction-to-writing-functions.html#cb1392-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb1392-8"><a href="introduction-to-writing-functions.html#cb1392-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;x contains non-positive values, so the harmonic mean makes no sense.&quot;</span>)</span>
<span id="cb1392-9"><a href="introduction-to-writing-functions.html#cb1392-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1392-10"><a href="introduction-to-writing-functions.html#cb1392-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use the first value of na.rm, and coerce to logical</span></span>
<span id="cb1392-11"><a href="introduction-to-writing-functions.html#cb1392-11" aria-hidden="true" tabindex="-1"></a>  na.rm <span class="ot">&lt;-</span> <span class="fu">coerce_to</span>(<span class="fu">use_first</span>(na.rm), <span class="at">target_class =</span> <span class="st">&quot;logical&quot;</span>)</span>
<span id="cb1392-12"><a href="introduction-to-writing-functions.html#cb1392-12" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb1392-13"><a href="introduction-to-writing-functions.html#cb1392-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1392-14"><a href="introduction-to-writing-functions.html#cb1392-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(<span class="at">na.rm =</span> na.rm) <span class="sc">%&gt;%</span></span>
<span id="cb1392-15"><a href="introduction-to-writing-functions.html#cb1392-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1392-16"><a href="introduction-to-writing-functions.html#cb1392-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1392-17"><a href="introduction-to-writing-functions.html#cb1392-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1392-18"><a href="introduction-to-writing-functions.html#cb1392-18" aria-hidden="true" tabindex="-1"></a><span class="co"># See what happens when you pass it malformed na.rm</span></span>
<span id="cb1392-19"><a href="introduction-to-writing-functions.html#cb1392-19" aria-hidden="true" tabindex="-1"></a><span class="fu">calc_harmonic_mean</span>(std_and_poor500<span class="sc">$</span>pe_ratio, <span class="at">na.rm =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Warning: Only the first value of na.rm (= 1) will be used.</code></pre>
<pre><code>## Warning: Coercing use_first(na.rm) to class &#39;logical&#39;.</code></pre>
<pre><code>## [1] 18.2</code></pre>
</div>
</div>
</div>
<div id="return-values-and-scope" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Return Values and Scope<a href="introduction-to-writing-functions.html#return-values-and-scope" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="returning-values" class="section level3 hasAnchor" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> Returning values<a href="introduction-to-writing-functions.html#returning-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Reasons for returning early</p>
<ol style="list-style-type: decimal">
<li><p>You already know the answer.</p></li>
<li><p>The input is an edge case.</p></li>
</ol>
<div id="returning-early" class="section level4 hasAnchor" number="12.3.1.1">
<h4><span class="header-section-number">12.3.1.1</span> Returning early<a href="introduction-to-writing-functions.html#returning-early" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes, you don’t need to run through the whole body of a function to get the answer. In that case you can return early from that function using <code>return()</code>.</p>
<p>Returning early can often improve the performance of your functions considerably for some input values.</p>
<p>You need to know that a leap year is every 400th year (like the year 2000) or every 4th year that isn’t a century (like 1904 but not 1900 or 1905).</p>
<div class="sourceCode" id="cb1396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1396-1"><a href="introduction-to-writing-functions.html#cb1396-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking for the cases of year being divisible by 400, then 100, then 4, returning early from the function in each case.</span></span>
<span id="cb1396-2"><a href="introduction-to-writing-functions.html#cb1396-2" aria-hidden="true" tabindex="-1"></a>is_leap_year <span class="ot">&lt;-</span> <span class="cf">function</span>(year) {</span>
<span id="cb1396-3"><a href="introduction-to-writing-functions.html#cb1396-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If year is div. by 400 return TRUE</span></span>
<span id="cb1396-4"><a href="introduction-to-writing-functions.html#cb1396-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(year <span class="sc">%%</span> <span class="dv">400</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb1396-5"><a href="introduction-to-writing-functions.html#cb1396-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb1396-6"><a href="introduction-to-writing-functions.html#cb1396-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1396-7"><a href="introduction-to-writing-functions.html#cb1396-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If year is div. by 100 return FALSE</span></span>
<span id="cb1396-8"><a href="introduction-to-writing-functions.html#cb1396-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(year <span class="sc">%%</span> <span class="dv">100</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb1396-9"><a href="introduction-to-writing-functions.html#cb1396-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb1396-10"><a href="introduction-to-writing-functions.html#cb1396-10" aria-hidden="true" tabindex="-1"></a>  }  </span>
<span id="cb1396-11"><a href="introduction-to-writing-functions.html#cb1396-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If year is div. by 4 return TRUE</span></span>
<span id="cb1396-12"><a href="introduction-to-writing-functions.html#cb1396-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(year <span class="sc">%%</span> <span class="dv">4</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb1396-13"><a href="introduction-to-writing-functions.html#cb1396-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb1396-14"><a href="introduction-to-writing-functions.html#cb1396-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1396-15"><a href="introduction-to-writing-functions.html#cb1396-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1396-16"><a href="introduction-to-writing-functions.html#cb1396-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1396-17"><a href="introduction-to-writing-functions.html#cb1396-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Otherwise return FALSE</span></span>
<span id="cb1396-18"><a href="introduction-to-writing-functions.html#cb1396-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb1396-19"><a href="introduction-to-writing-functions.html#cb1396-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb1396-20"><a href="introduction-to-writing-functions.html#cb1396-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1396-21"><a href="introduction-to-writing-functions.html#cb1396-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="returning-invisibly" class="section level4 hasAnchor" number="12.3.1.2">
<h4><span class="header-section-number">12.3.1.2</span> Returning invisibly<a href="introduction-to-writing-functions.html#returning-invisibly" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When the main purpose of a function is to generate output, like drawing a plot or printing something in the console, you may not want a return value to be printed as well. In that case, the value should be <a href="https://www.rdocumentation.org/packages/base/topics/invisible"><strong>invisibly returned</strong></a>: <code>invisible()</code></p>
<p>The base R plot function returns <code>NULL</code>, since its main purpose is to draw a plot. Recall that <code>plot()</code> has a <a href="https://www.rdocumentation.org/packages/graphics/topics/plot.formula"><strong>formula interface</strong></a>: <code>plot(y ~ x, data = data)</code></p>
<div class="sourceCode" id="cb1397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1397-1"><a href="introduction-to-writing-functions.html#cb1397-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using cars, draw a scatter plot of dist vs. speed</span></span>
<span id="cb1397-2"><a href="introduction-to-writing-functions.html#cb1397-2" aria-hidden="true" tabindex="-1"></a>plt_dist_vs_speed <span class="ot">&lt;-</span> <span class="fu">plot</span>(dist <span class="sc">~</span> speed, <span class="at">data =</span> cars)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-565-1.png" width="672" /></p>
<div class="sourceCode" id="cb1398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1398-1"><a href="introduction-to-writing-functions.html#cb1398-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Oh no! The plot object is NULL</span></span>
<span id="cb1398-2"><a href="introduction-to-writing-functions.html#cb1398-2" aria-hidden="true" tabindex="-1"></a>plt_dist_vs_speed</span></code></pre></div>
<pre><code>## NULL</code></pre>
<p>This isn’t helpful if you want to use it in piped code: instead it should invisibly return the plot data to be piped on to the next step.</p>
<div class="sourceCode" id="cb1400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1400-1"><a href="introduction-to-writing-functions.html#cb1400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a pipeable plot fn with data and formula args</span></span>
<span id="cb1400-2"><a href="introduction-to-writing-functions.html#cb1400-2" aria-hidden="true" tabindex="-1"></a>pipeable_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, formula) {</span>
<span id="cb1400-3"><a href="introduction-to-writing-functions.html#cb1400-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Call plot() with the formula interface</span></span>
<span id="cb1400-4"><a href="introduction-to-writing-functions.html#cb1400-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(formula, data)</span>
<span id="cb1400-5"><a href="introduction-to-writing-functions.html#cb1400-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Invisibly return the input dataset</span></span>
<span id="cb1400-6"><a href="introduction-to-writing-functions.html#cb1400-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">invisible</span>(data)</span>
<span id="cb1400-7"><a href="introduction-to-writing-functions.html#cb1400-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1400-8"><a href="introduction-to-writing-functions.html#cb1400-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1400-9"><a href="introduction-to-writing-functions.html#cb1400-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw the scatter plot of dist vs. speed again</span></span>
<span id="cb1400-10"><a href="introduction-to-writing-functions.html#cb1400-10" aria-hidden="true" tabindex="-1"></a>plt_dist_vs_speed <span class="ot">&lt;-</span> cars <span class="sc">%&gt;%</span> </span>
<span id="cb1400-11"><a href="introduction-to-writing-functions.html#cb1400-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pipeable_plot</span>(dist <span class="sc">~</span> speed)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-566-1.png" width="672" /></p>
<div class="sourceCode" id="cb1401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1401-1"><a href="introduction-to-writing-functions.html#cb1401-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now the plot object has a value</span></span>
<span id="cb1401-2"><a href="introduction-to-writing-functions.html#cb1401-2" aria-hidden="true" tabindex="-1"></a>plt_dist_vs_speed</span></code></pre></div>
</div>
</div>
<div id="return-multiple-values" class="section level3 hasAnchor" number="12.3.2">
<h3><span class="header-section-number">12.3.2</span> Return multiple values<a href="introduction-to-writing-functions.html#return-multiple-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R functions can only return a single value, but there are two ways to get around this rule:</p>
<ol style="list-style-type: decimal">
<li><p>return several objects in a <strong>list</strong></p></li>
<li><p>store objects as <strong>attributes</strong></p></li>
</ol>
<p>When to use each technique:</p>
<ul>
<li><p>If you need the result to have a particular type, add additional return values as attributes.</p></li>
<li><p>Otherwise, collect all return values into a list</p></li>
</ul>
<div id="returning-many-things" class="section level4 hasAnchor" number="12.3.2.1">
<h4><span class="header-section-number">12.3.2.1</span> Returning many things<a href="introduction-to-writing-functions.html#returning-many-things" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Functions can only return one value. If you want to return multiple things, then you can store them all in a list.</p>
<p><strong>Multi-assignment</strong></p>
<p>If users want to have the list items as separate variables, they can assign each list element to its own variable.</p>
<p>Using <code>zeallot</code>’s multi-assignment operator, <code>%&lt;-%</code>, e.g, <code>c(a, b) %&lt;-% list(2 elements)</code></p>
<p><code>broom</code> package:</p>
<ul>
<li><p><code>glance()</code>: model</p></li>
<li><p><code>tidy()</code>: coefficient</p></li>
<li><p><code>augment()</code>: observation</p></li>
</ul>
<div class="sourceCode" id="cb1402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1402-1"><a href="introduction-to-writing-functions.html#cb1402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1402-2"><a href="introduction-to-writing-functions.html#cb1402-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zeallot)</span>
<span id="cb1402-3"><a href="introduction-to-writing-functions.html#cb1402-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1402-4"><a href="introduction-to-writing-functions.html#cb1402-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at the structure of model (it&#39;s a mess!)</span></span>
<span id="cb1402-5"><a href="introduction-to-writing-functions.html#cb1402-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(model)</span></code></pre></div>
<pre><code>## List of 31
##  $ coefficients     : Named num [1:7] 4.0864 0.374 -0.0199 -0.5807 -0.5782 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:7] &quot;(Intercept)&quot; &quot;genderfemale&quot; &quot;income($25k,$55k]&quot; &quot;income($55k,$95k]&quot; ...
##  $ residuals        : Named num [1:346] -0.535 -0.768 -0.944 -0.662 -0.767 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##  $ fitted.values    : Named num [1:346] 4.3 4.3 17.83 2.96 4.29 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##  $ effects          : Named num [1:346] -360 -29.2 20.3 -10 23.4 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;(Intercept)&quot; &quot;genderfemale&quot; &quot;income($25k,$55k]&quot; &quot;income($55k,$95k]&quot; ...
##  $ R                : num [1:7, 1:7] -97.4 0 0 0 0 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:7] &quot;(Intercept)&quot; &quot;genderfemale&quot; &quot;income($25k,$55k]&quot; &quot;income($55k,$95k]&quot; ...
##   .. ..$ : chr [1:7] &quot;(Intercept)&quot; &quot;genderfemale&quot; &quot;income($25k,$55k]&quot; &quot;income($55k,$95k]&quot; ...
##  $ rank             : int 7
##  $ qr               :List of 5
##   ..$ qr   : num [1:346, 1:7] -97.3861 0.0213 0.0434 0.0177 0.0213 ...
##   .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. ..$ : chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##   .. .. ..$ : chr [1:7] &quot;(Intercept)&quot; &quot;genderfemale&quot; &quot;income($25k,$55k]&quot; &quot;income($55k,$95k]&quot; ...
##   ..$ rank : int 7
##   ..$ qraux: num [1:7] 1.02 1.02 1.04 1.01 1 ...
##   ..$ pivot: int [1:7] 1 2 3 4 5 6 7
##   ..$ tol  : num 0.00000000001
##   ..- attr(*, &quot;class&quot;)= chr &quot;qr&quot;
##  $ family           :List of 13
##   ..$ family    : chr &quot;poisson&quot;
##   ..$ link      : chr &quot;log&quot;
##   ..$ linkfun   :function (mu)  
##   ..$ linkinv   :function (eta)  
##   ..$ variance  :function (mu)  
##   ..$ dev.resids:function (y, mu, wt)  
##   ..$ aic       :function (y, n, mu, wt, dev)  
##   ..$ mu.eta    :function (eta)  
##   ..$ initialize:  expression({  if (any(y &lt; 0))  stop(&quot;negative values not allowed for the &#39;Poisson&#39; family&quot;)  n &lt;- rep.int(1, nobs| __truncated__
##   ..$ validmu   :function (mu)  
##   ..$ valideta  :function (eta)  
##   ..$ simulate  :function (object, nsim)  
##   ..$ dispersion: num 1
##   ..- attr(*, &quot;class&quot;)= chr &quot;family&quot;
##  $ linear.predictors: Named num [1:346] 1.46 1.46 2.88 1.09 1.46 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##  $ deviance         : num 11529
##  $ aic              : num 12864
##  $ null.deviance    : num 18850
##  $ iter             : int 6
##  $ weights          : Named num [1:346] 4.3 4.3 17.83 2.96 4.29 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##  $ prior.weights    : Named num [1:346] 1 1 1 1 1 1 1 1 1 1 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##  $ df.residual      : int 339
##  $ df.null          : int 345
##  $ y                : Named num [1:346] 2 1 1 1 1 1 80 104 55 350 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:346] &quot;25&quot; &quot;26&quot; &quot;27&quot; &quot;29&quot; ...
##  $ converged        : logi TRUE
##  $ boundary         : logi FALSE
##  $ model            :&#39;data.frame&#39;:   346 obs. of  4 variables:
##   ..$ n_visits: num [1:346] 2 1 1 1 1 1 80 104 55 350 ...
##   ..$ gender  : Factor w/ 2 levels &quot;male&quot;,&quot;female&quot;: 2 2 1 1 2 1 2 2 1 2 ...
##   ..$ income  : Factor w/ 4 levels &quot;[$0,$25k]&quot;,&quot;($25k,$55k]&quot;,..: 4 4 4 4 3 1 1 4 2 2 ...
##   ..$ travel  : Factor w/ 3 levels &quot;[0h,0.25h]&quot;,&quot;(0.25h,4h]&quot;,..: 3 3 2 3 3 1 1 1 2 1 ...
##   ..- attr(*, &quot;terms&quot;)=Classes &#39;terms&#39;, &#39;formula&#39;  language n_visits ~ gender + income + travel
##   .. .. ..- attr(*, &quot;variables&quot;)= language list(n_visits, gender, income, travel)
##   .. .. ..- attr(*, &quot;factors&quot;)= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
##   .. .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. .. .. ..$ : chr [1:4] &quot;n_visits&quot; &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   .. .. .. .. ..$ : chr [1:3] &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   .. .. ..- attr(*, &quot;term.labels&quot;)= chr [1:3] &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   .. .. ..- attr(*, &quot;order&quot;)= int [1:3] 1 1 1
##   .. .. ..- attr(*, &quot;intercept&quot;)= int 1
##   .. .. ..- attr(*, &quot;response&quot;)= int 1
##   .. .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x00000286939bd5d0&gt; 
##   .. .. ..- attr(*, &quot;predvars&quot;)= language list(n_visits, gender, income, travel)
##   .. .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:4] &quot;numeric&quot; &quot;factor&quot; &quot;factor&quot; &quot;factor&quot;
##   .. .. .. ..- attr(*, &quot;names&quot;)= chr [1:4] &quot;n_visits&quot; &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   ..- attr(*, &quot;na.action&quot;)= &#39;omit&#39; Named int [1:64] 1 2 3 4 5 6 7 8 9 10 ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:64] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ na.action        : &#39;omit&#39; Named int [1:64] 1 2 3 4 5 6 7 8 9 10 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:64] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ call             : language glm(formula = formula, family = poisson, data = data)
##  $ formula          :Class &#39;formula&#39;  language n_visits ~ gender + income + travel
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x00000286939bd5d0&gt; 
##  $ terms            :Classes &#39;terms&#39;, &#39;formula&#39;  language n_visits ~ gender + income + travel
##   .. ..- attr(*, &quot;variables&quot;)= language list(n_visits, gender, income, travel)
##   .. ..- attr(*, &quot;factors&quot;)= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...
##   .. .. ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. .. .. ..$ : chr [1:4] &quot;n_visits&quot; &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   .. .. .. ..$ : chr [1:3] &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   .. ..- attr(*, &quot;term.labels&quot;)= chr [1:3] &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##   .. ..- attr(*, &quot;order&quot;)= int [1:3] 1 1 1
##   .. ..- attr(*, &quot;intercept&quot;)= int 1
##   .. ..- attr(*, &quot;response&quot;)= int 1
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x00000286939bd5d0&gt; 
##   .. ..- attr(*, &quot;predvars&quot;)= language list(n_visits, gender, income, travel)
##   .. ..- attr(*, &quot;dataClasses&quot;)= Named chr [1:4] &quot;numeric&quot; &quot;factor&quot; &quot;factor&quot; &quot;factor&quot;
##   .. .. ..- attr(*, &quot;names&quot;)= chr [1:4] &quot;n_visits&quot; &quot;gender&quot; &quot;income&quot; &quot;travel&quot;
##  $ data             :&#39;data.frame&#39;:   410 obs. of  4 variables:
##   ..$ n_visits: num [1:410] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ gender  : Factor w/ 2 levels &quot;male&quot;,&quot;female&quot;: 1 1 1 2 1 2 2 2 1 1 ...
##   ..$ income  : Factor w/ 4 levels &quot;[$0,$25k]&quot;,&quot;($25k,$55k]&quot;,..: 4 2 4 2 4 2 4 4 4 4 ...
##   ..$ travel  : Factor w/ 3 levels &quot;[0h,0.25h]&quot;,&quot;(0.25h,4h]&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
##  $ offset           : NULL
##  $ control          :List of 3
##   ..$ epsilon: num 0.00000001
##   ..$ maxit  : num 25
##   ..$ trace  : logi FALSE
##  $ method           : chr &quot;glm.fit&quot;
##  $ contrasts        :List of 3
##   ..$ gender: chr &quot;contr.treatment&quot;
##   ..$ income: chr &quot;contr.treatment&quot;
##   ..$ travel: chr &quot;contr.treatment&quot;
##  $ xlevels          :List of 3
##   ..$ gender: chr [1:2] &quot;male&quot; &quot;female&quot;
##   ..$ income: chr [1:4] &quot;[$0,$25k]&quot; &quot;($25k,$55k]&quot; &quot;($55k,$95k]&quot; &quot;($95k,$Inf)&quot;
##   ..$ travel: chr [1:3] &quot;[0h,0.25h]&quot; &quot;(0.25h,4h]&quot; &quot;(4h,Infh)&quot;
##  - attr(*, &quot;class&quot;)= chr [1:2] &quot;glm&quot; &quot;lm&quot;</code></pre>
<div class="sourceCode" id="cb1404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1404-1"><a href="introduction-to-writing-functions.html#cb1404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use broom tools to get a list of 3 data frames</span></span>
<span id="cb1404-2"><a href="introduction-to-writing-functions.html#cb1404-2" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb1404-3"><a href="introduction-to-writing-functions.html#cb1404-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get model-level values</span></span>
<span id="cb1404-4"><a href="introduction-to-writing-functions.html#cb1404-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> <span class="fu">glance</span>(model),</span>
<span id="cb1404-5"><a href="introduction-to-writing-functions.html#cb1404-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get coefficient-level values</span></span>
<span id="cb1404-6"><a href="introduction-to-writing-functions.html#cb1404-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">coefficients =</span> <span class="fu">tidy</span>(model),</span>
<span id="cb1404-7"><a href="introduction-to-writing-functions.html#cb1404-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get observation-level values</span></span>
<span id="cb1404-8"><a href="introduction-to-writing-functions.html#cb1404-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">observations =</span> <span class="fu">augment</span>(model)</span>
<span id="cb1404-9"><a href="introduction-to-writing-functions.html#cb1404-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## $model
## 
## $coefficients
## 
## $observations</code></pre>
<div class="sourceCode" id="cb1406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1406-1"><a href="introduction-to-writing-functions.html#cb1406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap this code into a function, groom_model</span></span>
<span id="cb1406-2"><a href="introduction-to-writing-functions.html#cb1406-2" aria-hidden="true" tabindex="-1"></a>groom_model <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb1406-3"><a href="introduction-to-writing-functions.html#cb1406-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb1406-4"><a href="introduction-to-writing-functions.html#cb1406-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">glance</span>(model),</span>
<span id="cb1406-5"><a href="introduction-to-writing-functions.html#cb1406-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">coefficients =</span> <span class="fu">tidy</span>(model),</span>
<span id="cb1406-6"><a href="introduction-to-writing-functions.html#cb1406-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">observations =</span> <span class="fu">augment</span>(model)</span>
<span id="cb1406-7"><a href="introduction-to-writing-functions.html#cb1406-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1406-8"><a href="introduction-to-writing-functions.html#cb1406-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1406-9"><a href="introduction-to-writing-functions.html#cb1406-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1406-10"><a href="introduction-to-writing-functions.html#cb1406-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Call groom_model on model, assigning to 3 variables</span></span>
<span id="cb1406-11"><a href="introduction-to-writing-functions.html#cb1406-11" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(mdl, cff, obs) <span class="sc">%&lt;-%</span> <span class="fu">groom_model</span>(model)</span>
<span id="cb1406-12"><a href="introduction-to-writing-functions.html#cb1406-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1406-13"><a href="introduction-to-writing-functions.html#cb1406-13" aria-hidden="true" tabindex="-1"></a><span class="co"># See these individual variables</span></span>
<span id="cb1406-14"><a href="introduction-to-writing-functions.html#cb1406-14" aria-hidden="true" tabindex="-1"></a>mdl; cff; obs</span></code></pre></div>
</div>
<div id="returning-metadata" class="section level4 hasAnchor" number="12.3.2.2">
<h4><span class="header-section-number">12.3.2.2</span> Returning metadata<a href="introduction-to-writing-functions.html#returning-metadata" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes you want to return multiple things from a function, but you want the result to have a particular class (for example, a data frame or a numeric vector), so returning a list isn’t appropriate.</p>
<p>This is common when you have a result plus metadata about the result. (Metadata is “data about the data”. For example, it could be the file a dataset was loaded from)</p>
<p>In that case, you can store the metadata in attributes.</p>
<div class="sourceCode" id="cb1407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1407-1"><a href="introduction-to-writing-functions.html#cb1407-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(object, <span class="st">&quot;attribute_name&quot;</span>) <span class="ot">&lt;-</span> attribute_value</span></code></pre></div>
<div class="sourceCode" id="cb1408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1408-1"><a href="introduction-to-writing-functions.html#cb1408-1" aria-hidden="true" tabindex="-1"></a>pipeable_plot <span class="ot">&lt;-</span> <span class="cf">function</span>(data, formula) {</span>
<span id="cb1408-2"><a href="introduction-to-writing-functions.html#cb1408-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(formula, data)</span>
<span id="cb1408-3"><a href="introduction-to-writing-functions.html#cb1408-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a &quot;formula&quot; attribute to data</span></span>
<span id="cb1408-4"><a href="introduction-to-writing-functions.html#cb1408-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(data, <span class="st">&quot;formula&quot;</span>) <span class="ot">&lt;-</span> formula</span>
<span id="cb1408-5"><a href="introduction-to-writing-functions.html#cb1408-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">invisible</span>(data)</span>
<span id="cb1408-6"><a href="introduction-to-writing-functions.html#cb1408-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1408-7"><a href="introduction-to-writing-functions.html#cb1408-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1408-8"><a href="introduction-to-writing-functions.html#cb1408-8" aria-hidden="true" tabindex="-1"></a><span class="co"># From previous exercise</span></span>
<span id="cb1408-9"><a href="introduction-to-writing-functions.html#cb1408-9" aria-hidden="true" tabindex="-1"></a>plt_dist_vs_speed <span class="ot">&lt;-</span> cars <span class="sc">%&gt;%</span> </span>
<span id="cb1408-10"><a href="introduction-to-writing-functions.html#cb1408-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pipeable_plot</span>(dist <span class="sc">~</span> speed)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-569-1.png" width="672" /></p>
<div class="sourceCode" id="cb1409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1409-1"><a href="introduction-to-writing-functions.html#cb1409-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the structure of the result</span></span>
<span id="cb1409-2"><a href="introduction-to-writing-functions.html#cb1409-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(plt_dist_vs_speed)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    50 obs. of  2 variables:
##  $ speed: num  4 4 7 7 8 9 10 10 10 11 ...
##  $ dist : num  2 10 4 22 16 10 18 26 34 17 ...
##  - attr(*, &quot;formula&quot;)=Class &#39;formula&#39;  language dist ~ speed
##   .. ..- attr(*, &quot;.Environment&quot;)=&lt;environment: 0x000002870aa75b20&gt;</code></pre>
</div>
</div>
<div id="environments" class="section level3 hasAnchor" number="12.3.3">
<h3><span class="header-section-number">12.3.3</span> Environments<a href="introduction-to-writing-functions.html#environments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Environments are a type of variable that is used to store other variables. Mostly, you can think of them as lists.</p>
<p>Every environment has a parent environment (except the empty environment, at the root of the environment tree). This determines which variables R know about at different places in your code.</p>
<div id="create-explore-environments" class="section level4 hasAnchor" number="12.3.3.1">
<h4><span class="header-section-number">12.3.3.1</span> Create &amp; explore environments<a href="introduction-to-writing-functions.html#create-explore-environments" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><code>ls.str(list)</code>: list the elements, give a compact summary of multiple variables at once.</p></li>
<li><p><code>list2env(list)</code>: convert the list to an environment.</p></li>
<li><p><code>environmentName(parent.env(env))</code>: find the parent of an environment, and display it.</p></li>
</ul>
<p>Facts about the Republic of South Africa are contained in <code>capitals</code>, <code>national_parks</code>, and <code>population</code>.</p>
<div class="sourceCode" id="cb1411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1411-1"><a href="introduction-to-writing-functions.html#cb1411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create capitals</span></span>
<span id="cb1411-2"><a href="introduction-to-writing-functions.html#cb1411-2" aria-hidden="true" tabindex="-1"></a>city <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Cape Town&quot;</span>, <span class="st">&quot;Bloemfontein&quot;</span>, <span class="st">&quot;Pretoria&quot;</span>)</span>
<span id="cb1411-3"><a href="introduction-to-writing-functions.html#cb1411-3" aria-hidden="true" tabindex="-1"></a>type_of_capital <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Legislative&quot;</span>, <span class="st">&quot;Judicial&quot;</span>, <span class="st">&quot;Administrative&quot;</span>)</span>
<span id="cb1411-4"><a href="introduction-to-writing-functions.html#cb1411-4" aria-hidden="true" tabindex="-1"></a>capitals <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(city, type_of_capital)</span>
<span id="cb1411-5"><a href="introduction-to-writing-functions.html#cb1411-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1411-6"><a href="introduction-to-writing-functions.html#cb1411-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create national_parks</span></span>
<span id="cb1411-7"><a href="introduction-to-writing-functions.html#cb1411-7" aria-hidden="true" tabindex="-1"></a>national_parks <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1411-8"><a href="introduction-to-writing-functions.html#cb1411-8" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Addo Elephant National Park&quot;</span>,</span>
<span id="cb1411-9"><a href="introduction-to-writing-functions.html#cb1411-9" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Agulhas National Park&quot;</span>,</span>
<span id="cb1411-10"><a href="introduction-to-writing-functions.html#cb1411-10" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Ai-Ais/Richtersveld Transfrontier Park&quot;</span>,</span>
<span id="cb1411-11"><a href="introduction-to-writing-functions.html#cb1411-11" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Augrabies Falls National Park&quot;</span>,</span>
<span id="cb1411-12"><a href="introduction-to-writing-functions.html#cb1411-12" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Bontebok National Park&quot;</span>,</span>
<span id="cb1411-13"><a href="introduction-to-writing-functions.html#cb1411-13" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Camdeboo National Park&quot;</span>,</span>
<span id="cb1411-14"><a href="introduction-to-writing-functions.html#cb1411-14" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Golden Gate Highlands National Park&quot;</span>,</span>
<span id="cb1411-15"><a href="introduction-to-writing-functions.html#cb1411-15" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Hluhluwe–Imfolozi Park&quot;</span>,</span>
<span id="cb1411-16"><a href="introduction-to-writing-functions.html#cb1411-16" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Karoo National Park&quot;</span>,</span>
<span id="cb1411-17"><a href="introduction-to-writing-functions.html#cb1411-17" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Kgalagadi Transfrontier Park&quot;</span>,</span>
<span id="cb1411-18"><a href="introduction-to-writing-functions.html#cb1411-18" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Knysna National Lake Area&quot;</span>,</span>
<span id="cb1411-19"><a href="introduction-to-writing-functions.html#cb1411-19" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Kruger National Park&quot;</span>,</span>
<span id="cb1411-20"><a href="introduction-to-writing-functions.html#cb1411-20" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Mapungubwe National Park&quot;</span>,</span>
<span id="cb1411-21"><a href="introduction-to-writing-functions.html#cb1411-21" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Marakele National Park&quot;</span>,</span>
<span id="cb1411-22"><a href="introduction-to-writing-functions.html#cb1411-22" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Mokala National Park&quot;</span>,</span>
<span id="cb1411-23"><a href="introduction-to-writing-functions.html#cb1411-23" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Mountain Zebra National Park&quot;</span>,</span>
<span id="cb1411-24"><a href="introduction-to-writing-functions.html#cb1411-24" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Namaqua National Park&quot;</span>,</span>
<span id="cb1411-25"><a href="introduction-to-writing-functions.html#cb1411-25" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Table Mountain National Park&quot;</span>,</span>
<span id="cb1411-26"><a href="introduction-to-writing-functions.html#cb1411-26" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Tankwa Karoo National Park&quot;</span>,</span>
<span id="cb1411-27"><a href="introduction-to-writing-functions.html#cb1411-27" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Tsitsikamma National Park&quot;</span>,</span>
<span id="cb1411-28"><a href="introduction-to-writing-functions.html#cb1411-28" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;West Coast National Park&quot;</span>,</span>
<span id="cb1411-29"><a href="introduction-to-writing-functions.html#cb1411-29" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Wilderness National Park&quot;</span>)</span>
<span id="cb1411-30"><a href="introduction-to-writing-functions.html#cb1411-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1411-31"><a href="introduction-to-writing-functions.html#cb1411-31" aria-hidden="true" tabindex="-1"></a><span class="co"># create population</span></span>
<span id="cb1411-32"><a href="introduction-to-writing-functions.html#cb1411-32" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="fu">c</span>(<span class="dv">40583573</span>, <span class="dv">44819778</span>, <span class="dv">47390900</span>, <span class="dv">51770560</span>, <span class="dv">55908900</span>), <span class="at">start =</span> <span class="dv">1996</span>, <span class="at">end =</span> <span class="dv">2016</span>, <span class="at">frequency =</span> <span class="fl">0.2</span>); population</span></code></pre></div>
<pre><code>## Time Series:
## Start = 1996 
## End = 2016 
## Frequency = 0.2 
## [1] 40583573 44819778 47390900 51770560 55908900</code></pre>
<div class="sourceCode" id="cb1413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1413-1"><a href="introduction-to-writing-functions.html#cb1413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add capitals, national_parks, &amp; population to a named list</span></span>
<span id="cb1413-2"><a href="introduction-to-writing-functions.html#cb1413-2" aria-hidden="true" tabindex="-1"></a>rsa_lst <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1413-3"><a href="introduction-to-writing-functions.html#cb1413-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">capitals =</span> capitals,</span>
<span id="cb1413-4"><a href="introduction-to-writing-functions.html#cb1413-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">national_parks =</span> national_parks,</span>
<span id="cb1413-5"><a href="introduction-to-writing-functions.html#cb1413-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">population =</span> population</span>
<span id="cb1413-6"><a href="introduction-to-writing-functions.html#cb1413-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1413-7"><a href="introduction-to-writing-functions.html#cb1413-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1413-8"><a href="introduction-to-writing-functions.html#cb1413-8" aria-hidden="true" tabindex="-1"></a><span class="co"># List the structure of each element of rsa_lst</span></span>
<span id="cb1413-9"><a href="introduction-to-writing-functions.html#cb1413-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ls.str</span>(rsa_lst)</span></code></pre></div>
<pre><code>## capitals : &#39;data.frame&#39;: 3 obs. of  2 variables:
##  $ city           : chr  &quot;Cape Town&quot; &quot;Bloemfontein&quot; &quot;Pretoria&quot;
##  $ type_of_capital: chr  &quot;Legislative&quot; &quot;Judicial&quot; &quot;Administrative&quot;
## national_parks :  chr [1:22] &quot;Addo Elephant National Park&quot; &quot;Agulhas National Park&quot; ...
## population :  Time-Series [1:5] from 1996 to 2016: 40583573 44819778 47390900 51770560 55908900</code></pre>
<div class="sourceCode" id="cb1415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1415-1"><a href="introduction-to-writing-functions.html#cb1415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the list to an environment</span></span>
<span id="cb1415-2"><a href="introduction-to-writing-functions.html#cb1415-2" aria-hidden="true" tabindex="-1"></a>rsa_env <span class="ot">&lt;-</span> <span class="fu">list2env</span>(rsa_lst)</span>
<span id="cb1415-3"><a href="introduction-to-writing-functions.html#cb1415-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1415-4"><a href="introduction-to-writing-functions.html#cb1415-4" aria-hidden="true" tabindex="-1"></a><span class="co"># List the structure of each variable</span></span>
<span id="cb1415-5"><a href="introduction-to-writing-functions.html#cb1415-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ls.str</span>(rsa_env)</span></code></pre></div>
<pre><code>## capitals : &#39;data.frame&#39;: 3 obs. of  2 variables:
##  $ city           : chr  &quot;Cape Town&quot; &quot;Bloemfontein&quot; &quot;Pretoria&quot;
##  $ type_of_capital: chr  &quot;Legislative&quot; &quot;Judicial&quot; &quot;Administrative&quot;
## national_parks :  chr [1:22] &quot;Addo Elephant National Park&quot; &quot;Agulhas National Park&quot; ...
## population :  Time-Series [1:5] from 1996 to 2016: 40583573 44819778 47390900 51770560 55908900</code></pre>
<div class="sourceCode" id="cb1417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1417-1"><a href="introduction-to-writing-functions.html#cb1417-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the parent environment of rsa_env</span></span>
<span id="cb1417-2"><a href="introduction-to-writing-functions.html#cb1417-2" aria-hidden="true" tabindex="-1"></a>parent <span class="ot">&lt;-</span> <span class="fu">parent.env</span>(rsa_env)</span>
<span id="cb1417-3"><a href="introduction-to-writing-functions.html#cb1417-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1417-4"><a href="introduction-to-writing-functions.html#cb1417-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print its name</span></span>
<span id="cb1417-5"><a href="introduction-to-writing-functions.html#cb1417-5" aria-hidden="true" tabindex="-1"></a><span class="fu">environmentName</span>(parent)</span></code></pre></div>
<pre><code>## [1] &quot;R_GlobalEnv&quot;</code></pre>
</div>
<div id="do-variables-exist" class="section level4 hasAnchor" number="12.3.3.2">
<h4><span class="header-section-number">12.3.3.2</span> Do variables exist?<a href="introduction-to-writing-functions.html#do-variables-exist" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If R cannot find a variable in the current environment, it will look in the parent environment, then the grandparent environment, and so on until it finds it.</p>
<ul>
<li><code>exists("variable", envir = env)</code></li>
</ul>
<p>You can force R to only look in the environment you asked for by setting <code>inherits</code> to <code>FALSE</code>.</p>
<ul>
<li><code>exists("variable", envir = env, inherits = FALSE)</code></li>
</ul>
<div class="sourceCode" id="cb1419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1419-1"><a href="introduction-to-writing-functions.html#cb1419-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare the contents of the global environment and rsa_env</span></span>
<span id="cb1419-2"><a href="introduction-to-writing-functions.html#cb1419-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls.str</span>(<span class="fu">globalenv</span>())</span></code></pre></div>
<pre><code>## a :  num 5
## account_offices : spc_tbl_ [98 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## accounts : tibble [97 × 5] (S3: tbl_df/tbl/data.frame)
## accounts_clean : tibble [88 × 6] (S3: tbl_df/tbl/data.frame)
## airquality : spc_tbl_ [153 × 7] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## akl_daily : tibble [3,661 × 10] (S3: tbl_df/tbl/data.frame)
## akl_daily_raw : spc_tbl_ [3,661 × 7] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## akl_day : tibble [10,905 × 15] (S3: tbl_df/tbl/data.frame)
## akl_hourly : tibble [17,454 × 13] (S3: tbl_df/tbl/data.frame)
## akl_hourly_raw : spc_tbl_ [17,454 × 10] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## all_deals : &#39;data.frame&#39;:    10548 obs. of  2 variables:
##  $ product  : int  3544 5073 6149 7863 14 10247 3544 5073 6149 7863 ...
##  $ num_users: int  19 43 87 83 17 2 29 13 80 23 ...
## all_wars_matrix :  num [1:6, 1:2] 461 290 309 474 311 ...
## amir_deals : &#39;data.frame&#39;:   178 obs. of  5 variables:
##  $ product  : Factor w/ 14 levels &quot;Product A&quot;,&quot;Product B&quot;,..: 6 3 2 9 5 2 3 13 6 2 ...
##  $ client   : Factor w/ 3 levels &quot;Current&quot;,&quot;New&quot;,..: 1 2 2 1 1 2 1 1 1 1 ...
##  $ status   : Factor w/ 2 levels &quot;Lost&quot;,&quot;Won&quot;: 2 2 2 2 2 2 2 2 2 2 ...
##  $ amount   : num  7390 4493 5738 2591 6623 ...
##  $ num_users: num  19 43 87 83 17 2 29 13 80 23 ...
## animals_vector :  chr [1:4] &quot;Elephant&quot; &quot;Giraffe&quot; &quot;Donkey&quot; &quot;Horse&quot;
## answer_counts : spc_tbl_ [227,452 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## answers : spc_tbl_ [451,118 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## answers_with_tags : spc_tbl_ [800,378 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## april_10_2014 :  Date[1:1], format: &quot;2014-04-10&quot;
## astro :  Named chr [1:4] &quot;20-Mar-2015&quot; &quot;25-Jun-2015&quot; &quot;23-Sep-2015&quot; ...
## astro_dates :  Date[1:4], format: &quot;2015-03-20&quot; &quot;2015-06-25&quot; &quot;2015-09-23&quot; &quot;2015-12-22&quot;
## avg_review :  num 4.72
## avg_sum :  num 22.3
## avg_sum_trimmed :  num 22.6
## awards :  chr [1:6] &quot;Won 1 Oscar.&quot; ...
## babynames_fraction : tibble [1,924,665 × 7] (S3: tbl_df/tbl/data.frame)
## babynames_ratios_filtered : gropd_df [541,903 × 8] (S3: grouped_df/tbl_df/tbl/data.frame)
## basics : function (x)  
## batman : tibble [10,111 × 13] (S3: tbl_df/tbl/data.frame)
## batman_colors : tibble [56 × 3] (S3: tbl_df/tbl/data.frame)
## batman_parts : tibble [3,455 × 3] (S3: tbl_df/tbl/data.frame)
## batmobile : tibble [173 × 5] (S3: tbl_df/tbl/data.frame)
## batwing : tibble [323 × 5] (S3: tbl_df/tbl/data.frame)
## below_zero : function (x)  
## bike_share_rides : spc_tbl_ [35,231 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## bike_share_rides_past : tibble [34,025 × 10] (S3: tbl_df/tbl/data.frame)
## bike_share_rides_unique : tibble [35,229 × 6] (S3: tbl_df/tbl/data.frame)
## blue_range : function (n)  
## blues :  chr [1:9] &quot;#F7FBFF&quot; &quot;#DEEBF7&quot; &quot;#C6DBEF&quot; &quot;#9ECAE1&quot; &quot;#6BAED6&quot; &quot;#4292C6&quot; ...
## box_office :  num [1:6] 461 314 290 248 309 ...
## breaks :  num [1:4] 2.27 0 1440 1668
## by_continent : tibble [5 × 2] (S3: tbl_df/tbl/data.frame)
## by_continent_2007 : tibble [5 × 3] (S3: tbl_df/tbl/data.frame)
## by_type_year_tag : tibble [57,331 × 4] (S3: tbl_df/tbl/data.frame)
## by_type_year_tag_filtered : tibble [38 × 4] (S3: tbl_df/tbl/data.frame)
## by_year : tibble [12 × 2] (S3: tbl_df/tbl/data.frame)
## by_year_continent : gropd_df [60 × 3] (S3: grouped_df/tbl_df/tbl/data.frame)
## c :  int 3
## calc_harmonic_mean : function (x, na.rm = FALSE)  
## capitals : &#39;data.frame&#39;: 3 obs. of  2 variables:
##  $ city           : chr  &quot;Cape Town&quot; &quot;Bloemfontein&quot; &quot;Pretoria&quot;
##  $ type_of_capital: chr  &quot;Legislative&quot; &quot;Judicial&quot; &quot;Administrative&quot;
## cff : tibble [7 × 5] (S3: tbl_df/tbl/data.frame)
## char :  chr &quot;u&quot;
## chars :  chr [1:40] &quot;r&quot; &quot;&#39;&quot; &quot;s&quot; &quot; &quot; &quot;i&quot; &quot;n&quot; &quot;t&quot; &quot;e&quot; &quot;r&quot; &quot;n&quot; &quot;a&quot; &quot;l&quot; &quot;s&quot; &quot; &quot; ...
## cities : &#39;data.frame&#39;:   5 obs. of  1 variable:
##  $ city_actual: chr  &quot;new york&quot; &quot;los angeles&quot; &quot;atlanta&quot; &quot;san francisco&quot; ...
## city :  chr [1:3] &quot;Cape Town&quot; &quot;Bloemfontein&quot; &quot;Pretoria&quot;
## coin_sides :  chr [1:2] &quot;head&quot; &quot;tail&quot;
## color_palette :  Named chr [1:42] &quot;#05131D&quot; &quot;#0055BF&quot; &quot;#237841&quot; &quot;#C91A09&quot; &quot;#F2CD37&quot; ...
## colors : spc_tbl_ [262 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## colors_joined : tibble [42 × 10] (S3: tbl_df/tbl/data.frame)
## cols :  chr [1:8] &quot;country&quot; &quot;year_1960&quot; &quot;year_1961&quot; &quot;year_1962&quot; &quot;year_1963&quot; ...
## comments :  chr [1:5] &quot;I would watch it again&quot; &quot;Amazing!&quot; &quot;I liked it&quot; ...
## counties : spc_tbl_ [3,138 × 40] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## counties_selected : tibble [3,138 × 5] (S3: tbl_df/tbl/data.frame)
## countries : &#39;data.frame&#39;:    209 obs. of  1 variable:
##  $ country: chr  &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;American Samoa&quot; ...
## cut_by_quantile : function (x, n = 5, na.rm = FALSE, labels = NULL, interval_type = c(&quot;(lo, hi]&quot;, 
##     &quot;[lo, hi)&quot;))  
## da2 :  Ord.factor w/ 3 levels &quot;slow&quot;&lt;&quot;medium&quot;&lt;..: 1
## da5 :  Ord.factor w/ 3 levels &quot;slow&quot;&lt;&quot;medium&quot;&lt;..: 3
## datacamp_light_blue :  chr &quot;#51A8C9&quot;
## date_difference : Formal class &#39;Interval&#39; [package &quot;lubridate&quot;] with 3 slots
## date_landing :  Date[1:1], format: &quot;1969-07-20&quot;
## date_stamp : function (x, locale = &quot;C&quot;)  
## date1 :  Date[1:1], format: &quot;1996-05-23&quot;
## date2 :  Date[1:1], format: &quot;2012-03-15&quot;
## date3 :  Date[1:1], format: &quot;2006-01-30&quot;
## dates :  chr [1:17454] &quot;2016-01-01T00:00:00Z&quot; &quot;2016-01-01T00:30:00Z&quot; ...
## day_diff :  &#39;difftime&#39; num [1:4] 2 5 6 5
## day1 :  Date[1:1], format: &quot;2023-09-15&quot;
## day2 :  Date[1:1], format: &quot;2023-09-17&quot;
## day3 :  Date[1:1], format: &quot;2023-09-22&quot;
## day4 :  Date[1:1], format: &quot;2023-09-28&quot;
## day5 :  Date[1:1], format: &quot;2023-10-03&quot;
## days_vector :  chr [1:5] &quot;Monday&quot; &quot;Tuesday&quot; &quot;Wednesday&quot; &quot;Thursday&quot; &quot;Friday&quot;
## deals :  int [1:52] 0 1 2 2 0 0 1 1 2 1 ...
## departed_list : List of 4
##  $ title  : chr &quot;The Departed&quot;
##  $ actors : chr [1:6] &quot;Leonardo DiCaprio&quot; &quot;Matt Damon&quot; &quot;Jack Nicholson&quot; &quot;Mark Wahlberg&quot; ...
##  $ reviews:&#39;data.frame&#39;: 5 obs. of  2 variables:
##  $ average: num 4.72
## dest_size :  chr [1:4] &quot;Small&quot; &quot;Medium&quot; &quot;Large&quot; &quot;Hub&quot;
## dest_sizes : &#39;data.frame&#39;:   4 obs. of  2 variables:
##  $ dest_size         : chr  &quot;Small&quot; &quot;Medium&quot; &quot;Large&quot; &quot;Hub&quot;
##  $ passengers_per_day: chr  &quot;0-20K&quot; &quot;20K-70K&quot; &quot;70K-100K&quot; &quot;100K+&quot;
## diameter :  num [1:8] 0.382 0.949 1 0.532 11.209 ...
## dims :  int [1:2, 1:3] 209 8 209 9 209 38
## eclipse_2017 :  POSIXct[1:1], format: &quot;2017-08-21 18:26:40&quot;
## emails :  chr [1:6] &quot;john.doe@ivyleague.edu&quot; &quot;education@world.gov&quot; ...
## emissions_by_country : tibble [130 × 2] (S3: tbl_df/tbl/data.frame)
## empire_strikes :  num [1:2] 290 248
## errors :  num [1:6] 1.9 -2.6 4 -9.5 -3.4 7.3
## europe_categories :  chr [1:3] &quot;EU&quot; &quot;eur&quot; &quot;Europ&quot;
## every_two_weeks : Formal class &#39;Period&#39; [package &quot;lubridate&quot;] with 6 slots
## expected_val :  num 2.9
## extremes : function (x)  
## extremes_avg : function (x)  
## fac : List of 3
##  $ levels    : chr [1:3] &quot;Beef&quot; &quot;Meat&quot; &quot;Poultry&quot;
##  $ ordered   : logi FALSE
##  $ include_na: logi FALSE
## facebook : List of 7
##  $ : num 17
##  $ : num 7
##  $ : num 5
##  $ : num 16
##  $ : num 8
##  $ : num 13
##  $ : num 14
## factor_animals_vector :  Factor w/ 4 levels &quot;Donkey&quot;,&quot;Elephant&quot;,..: 2 3 1 4
## factor_sex_vector :  Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 1 1 2 2
## factor_speed_vector :  Ord.factor w/ 3 levels &quot;slow&quot;&lt;&quot;medium&quot;&lt;..: 2 1 1 2 3
## factor_survey_vector :  Factor w/ 2 levels &quot;Female&quot;,&quot;Male&quot;: 2 1 1 2 2
## factor_temperature_vector :  Ord.factor w/ 3 levels &quot;Low&quot;&lt;&quot;Medium&quot;&lt;..: 3 1 3 1 2
## fb :  num 9
## fb_vec :  num [1:7] 17 7 5 16 8 13 14
## finished :  chr &quot;I finished &#39;Dates and Times in R&#39; on Thursday, September 4, 2017!&quot;
## fish :  chr [1:3] &quot;fish.species&quot; &quot;fish.year&quot; &quot;fish.tidy&quot;
## fish.species : &#39;data.frame&#39;: 61 obs. of  8 variables:
##  $ Year    : int  1950 1951 1952 1953 1954 1955 1956 1957 1958 1959 ...
##  $ Pink    : int  100600 259000 132600 235900 123400 244400 203400 270119 200798 200085 ...
##  $ Chum    : int  139300 155900 113800 99800 148700 143700 158480 125377 132407 113114 ...
##  $ Sockeye : int  64100 51200 58200 66100 83800 72000 84800 69676 100520 62472 ...
##  $ Coho    : int  30500 40900 33600 32400 38300 45100 40000 39900 39200 32865 ...
##  $ Rainbow : int  0 100 100 100 100 100 100 100 100 100 ...
##  $ Chinook : int  23200 25500 24900 25300 24500 27700 25300 21200 20900 20335 ...
##  $ Atlantic: int  10800 9701 9800 8800 9600 7800 8100 9000 8801 8700 ...
## fish.tidy : &#39;data.frame&#39;:    427 obs. of  3 variables:
##  $ Species: Factor w/ 7 levels &quot;Pink&quot;,&quot;Chum&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ Year   : int  1950 1951 1952 1953 1954 1955 1956 1957 1958 1959 ...
##  $ Capture: int  100600 259000 132600 235900 123400 244400 203400 270119 200798 200085 ...
## fish.year : &#39;data.frame&#39;:    7 obs. of  62 variables:
##  $ Species: Factor w/ 7 levels &quot;Pink&quot;,&quot;Chum&quot;,..: 1 2 3 4 5 6 7
##  $ 1950   : int  100600 139300 64100 30500 0 23200 10800
##  $ 1951   : int  259000 155900 51200 40900 100 25500 9701
##  $ 1952   : int  132600 113800 58200 33600 100 24900 9800
##  $ 1953   : int  235900 99800 66100 32400 100 25300 8800
##  $ 1954   : int  123400 148700 83800 38300 100 24500 9600
##  $ 1955   : int  244400 143700 72000 45100 100 27700 7800
##  $ 1956   : int  203400 158480 84800 40000 100 25300 8100
##  $ 1957   : int  270119 125377 69676 39900 100 21200 9000
##  $ 1958   : int  200798 132407 100520 39200 100 20900 8801
##  $ 1959   : int  200085 113114 62472 32865 100 20335 8700
##  $ 1960   : int  111880 120760 83171 26898 100 17412 8900
##  $ 1961   : int  178133 109053 93311 37524 200 18130 9400
##  $ 1962   : int  163558 110707 66126 39883 300 17489 11500
##  $ 1963   : int  222477 106491 53140 41547 1600 18928 10766
##  $ 1964   : int  143623 94498 56189 38948 2300 20932 14342
##  $ 1965   : int  161131 76503 94286 44207 1500 21197 12363
##  $ 1966   : int  174844 93949 81080 46874 900 21549 12337
##  $ 1967   : int  168960 88027 75582 43396 1700 21375 14411
##  $ 1968   : int  155729 95624 113332 46463 11200 20720 12823
##  $ 1969   : int  195169 67888 65106 30973 3000 21915 13316
##  $ 1970   : int  133466 113650 106436 44050 4400 24000 13457
##  $ 1971   : int  178823 105879 79160 43110 4600 25800 12397
##  $ 1972   : int  93852 137655 43932 33880 4900 24000 12665
##  $ 1973   : int  151180 125364 55637 38550 6900 27400 15387
##  $ 1974   : int  94026 121052 53027 42631 8099 24148 15158
##  $ 1975   : int  171012 127561 38615 31782 10302 24137 14736
##  $ 1976   : int  146895 125110 60357 36965 9492 24984 11372
##  $ 1977   : int  224475 118677 64651 30777 6166 26351 11491
##  $ 1978   : int  174314 129513 75737 30712 7219 25417 8948
##  $ 1979   : int  249558 150176 109439 34279 7036 25452 10259
##  $ 1980   : int  226191 166803 111830 30557 9027 23023 12965
##  $ 1981   : int  264855 186550 132651 28702 8819 22789 12425
##  $ 1982   : int  170373 182561 128176 42281 6839 25147 10326
##  $ 1983   : int  255129 196414 163790 30291 7473 18926 10862
##  $ 1984   : int  210511 210507 126834 40834 7977 18449 10562
##  $ 1985   : int  300987 267794 150860 38823 9373 20318 12422
##  $ 1986   : int  211685 239065 136452 42825 9709 21187 11739
##  $ 1987   : int  218121 217129 131135 28173 12196 25475 11413
##  $ 1988   : int  165236 286572 107361 32245 11872 31338 10093
##  $ 1989   : int  363456 243728 169410 31614 12249 20725 15795
##  $ 1990   : int  235190 299438 198168 34635 12529 18249 10860
##  $ 1991   : int  438998 266940 161218 38078 12545 15373 9793
##  $ 1992   : int  216110 238427 199709 38433 9731 15093 9308
##  $ 1993   : int  302568 286996 242613 25451 19091 15036 8161
##  $ 1994   : int  326065 328765 183686 45602 12624 13623 7231
##  $ 1995   : int  394735 424595 189612 28922 13450 13801 6819
##  $ 1996   : int  294915 411395 188584 28201 12407 10509 6493
##  $ 1997   : int  318717 347560 132075 13191 13147 13000 5579
##  $ 1998   : int  371552 311965 78972 19386 18940 9840 4744
##  $ 1999   : int  386928 281260 130128 15449 15874 8735 4107
##  $ 2000   : int  285338 276355 124782 18035 14918 8437 4710
##  $ 2001   : int  360973 307662 108618 20006 14927 8771 4772
##  $ 2002   : int  268544 314098 103325 20757 12241 13911 4139
##  $ 2003   : int  377749 360429 109822 16995 17128 15046 3648
##  $ 2004   : int  266554 351188 142385 24546 16601 15899 4082
##  $ 2005   : int  456350 318389 147151 18791 16886 13571 3727
##  $ 2006   : int  316205 361561 151523 18275 17079 10497 3087
##  $ 2007   : int  506343 331266 164609 17228 14844 8900 3014
##  $ 2008   : int  294876 295819 138896 21280 16819 6443 3002
##  $ 2009   : int  591654 359908 150040 19725 17884 6303 2373
##  $ 2010   : int  370044 143959 170972 20770 20754 7968 2363
## fodors : &#39;data.frame&#39;:   533 obs. of  7 variables:
##  $ id   : int  0 1 2 3 4 5 6 7 8 9 ...
##  $ name : chr  &quot;arnie morton&#39;s of chicago&quot; &quot;art&#39;s delicatessen&quot; &quot;hotel bel-air&quot; &quot;cafe bizou&quot; ...
##  $ addr : chr  &quot;435 s. la cienega blv .&quot; &quot;12224 ventura blvd.&quot; &quot;701 stone canyon rd.&quot; &quot;14016 ventura blvd.&quot; ...
##  $ city : Factor w/ 5 levels &quot;atlanta&quot;,&quot;los angeles&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
##  $ phone: chr  &quot;310-246-1501&quot; &quot;818-762-1221&quot; &quot;310-472-1211&quot; &quot;818-788-3536&quot; ...
##  $ type : chr  &quot;american&quot; &quot;american&quot; &quot;californian&quot; &quot;french&quot; ...
##  $ class: int  0 1 2 3 4 5 6 7 8 9 ...
## food_consumption : spc_tbl_ [1,430 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## formats :  chr [1:2] &quot;%Y-%m-%d&quot; &quot;%B %d, %Y&quot;
## freezing_l : List of 7
##  $ : num -1
##  $ : num(0) 
##  $ : num [1:2] -1 -3
##  $ : num -2
##  $ : num(0) 
##  $ : num -3
##  $ : num(0) 
## freezing_s : List of 7
##  $ : num -1
##  $ : num(0) 
##  $ : num [1:2] -1 -3
##  $ : num -2
##  $ : num(0) 
##  $ : num -3
##  $ : num(0) 
## game2 :  POSIXct[1:1], format: &quot;2015-06-11 19:00:00&quot;
## game2_local :  POSIXct[1:1], format: &quot;2015-06-11 19:00:00&quot;
## game3 :  POSIXct[1:1], format: &quot;2015-06-15 18:30:00&quot;
## game3_local :  POSIXct[1:1], format: &quot;2015-06-15 18:30:00&quot;
## gapminder_1952 : tibble [142 × 6] (S3: tbl_df/tbl/data.frame)
## get_reciprocal : function (x)  
## global_mean :  num 67
## gm2007 : spc_tbl_ [20 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## gm2007_full : spc_tbl_ [142 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## groom_model : function (model)  
## group_id :  chr [1:10] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot;
## group_size :  num [1:10] 2 4 6 2 2 2 3 2 4 2
## growth_by_dose : List of 9
##  $ data       : spc_tbl_ [60 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ layers     :List of 2
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      :List of 97
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 3
## halleys : tibble [27 × 7] (S3: tbl_df/tbl/data.frame)
## halleys_1066 : tibble [1 × 7] (S3: tbl_df/tbl/data.frame)
## hello : function ()  
## hits :  int [1:2] 1 5
## hits_w :  int [1:4] 1 2 4 5
## hotdogs : &#39;data.frame&#39;:  54 obs. of  3 variables:
##  $ type    : chr  &quot;Beef&quot; &quot;Beef&quot; &quot;Beef&quot; &quot;Beef&quot; ...
##  $ calories: int  186 181 176 149 184 190 158 139 175 148 ...
##  $ sodium  : int  495 477 425 322 482 587 370 322 479 375 ...
## hotdogs_factor : spc_tbl_ [54 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## hotdogs2 : &#39;data.frame&#39;: 54 obs. of  2 variables:
##  $ type  : Factor w/ 3 levels &quot;Beef&quot;,&quot;Meat&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ sodium: num  495 477 425 322 482 587 370 322 479 375 ...
## i :  int 6
## index2 :  int 7
## int :  list()
## interpret : function (num_views)  
## interpret_all : function (views, return_sum = T)  
## inventories : spc_tbl_ [37,233 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## inventory_parts : spc_tbl_ [1,179,869 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## inventory_parts_joined : tibble [1,179,869 × 6] (S3: tbl_df/tbl/data.frame)
## inventory_parts_themes : tibble [1,113,729 × 13] (S3: tbl_df/tbl/data.frame)
## inventory_sets_themes : tibble [1,113,729 × 13] (S3: tbl_df/tbl/data.frame)
## inventory_version_1 : spc_tbl_ [35,612 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## iqr :  Named num 664
## is_leap_year : function (year)  
## jan_31 :  Date[1:1], format: &quot;2023-01-31&quot;
## last :  num 14
## last_release : spc_tbl_ [1 × 7] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## last_release_date :  Date[1:1], format: &quot;2017-06-30&quot;
## last2 :  num [1:2] 17 14
## li :  num 17
## li_vec :  num [1:7] 16 9 13 5 2 17 14
## lily : &#39;data.frame&#39;: 1 obs. of  3 variables:
##  $ type    : chr &quot;Poultry&quot;
##  $ calories: int 86
##  $ sodium  : int 358
## linkedin : List of 7
##  $ : num 16
##  $ : num 9
##  $ : num 13
##  $ : num 5
##  $ : num 2
##  $ : num 17
##  $ : num 14
## login :  POSIXct[1:5], format: &quot;2023-09-19 10:18:04&quot; &quot;2023-09-24 09:14:18&quot; ...
## logout :  POSIXct[1:5], format: &quot;2023-09-19 10:56:29&quot; &quot;2023-09-24 09:14:52&quot; ...
## logs : spc_tbl_ [100,000 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## lower :  Named num -550
## mar_11 :  POSIXct[1:1], format: &quot;2017-03-11 12:00:00&quot;
## mar_12 :  POSIXct[1:1], format: &quot;2017-03-12 12:00:00&quot;
## mar_13 :  POSIXct[1:1], format: &quot;2017-03-13 12:00:00&quot;
## matrix2_rowname :  chr [1:3] &quot;The Phantom Menace&quot; &quot;Attack of the Clones&quot; ...
## max :  num 30
## mdl : tibble [1 × 8] (S3: tbl_df/tbl/data.frame)
## medium :  chr &quot;LinkedIn&quot;
## meteo :  Named chr [1:4] &quot;March 1, 15&quot; &quot;June 1, 15&quot; &quot;September 1, 15&quot; ...
## meteo_dates :  Date[1:4], format: &quot;2015-03-01&quot; &quot;2015-06-01&quot; &quot;2015-09-01&quot; &quot;2015-12-01&quot;
## millennium_falcon : tibble [239 × 6] (S3: tbl_df/tbl/data.frame)
## millennium_falcon_colors : tibble [19 × 2] (S3: tbl_df/tbl/data.frame)
## min :  num 0
## model : List of 31
##  $ coefficients     : Named num [1:7] 4.0864 0.374 -0.0199 -0.5807 -0.5782 ...
##  $ residuals        : Named num [1:346] -0.535 -0.768 -0.944 -0.662 -0.767 ...
##  $ fitted.values    : Named num [1:346] 4.3 4.3 17.83 2.96 4.29 ...
##  $ effects          : Named num [1:346] -360 -29.2 20.3 -10 23.4 ...
##  $ R                : num [1:7, 1:7] -97.4 0 0 0 0 ...
##  $ rank             : int 7
##  $ qr               :List of 5
##  $ family           :List of 13
##  $ linear.predictors: Named num [1:346] 1.46 1.46 2.88 1.09 1.46 ...
##  $ deviance         : num 11529
##  $ aic              : num 12864
##  $ null.deviance    : num 18850
##  $ iter             : int 6
##  $ weights          : Named num [1:346] 4.3 4.3 17.83 2.96 4.29 ...
##  $ prior.weights    : Named num [1:346] 1 1 1 1 1 1 1 1 1 1 ...
##  $ df.residual      : int 339
##  $ df.null          : int 345
##  $ y                : Named num [1:346] 2 1 1 1 1 1 80 104 55 350 ...
##  $ converged        : logi TRUE
##  $ boundary         : logi FALSE
##  $ model            :&#39;data.frame&#39;:   346 obs. of  4 variables:
##  $ na.action        : &#39;omit&#39; Named int [1:64] 1 2 3 4 5 6 7 8 9 10 ...
##  $ call             : language glm(formula = formula, family = poisson, data = data)
##  $ formula          :Class &#39;formula&#39;  language n_visits ~ gender + income + travel
##  $ terms            :Classes &#39;terms&#39;, &#39;formula&#39;  language n_visits ~ gender + income + travel
##  $ data             :&#39;data.frame&#39;:   410 obs. of  4 variables:
##  $ offset           : NULL
##  $ control          :List of 3
##  $ method           : chr &quot;glm.fit&quot;
##  $ contrasts        :List of 3
##  $ xlevels          :List of 3
## moment_step :  POSIXct[1:1], format: &quot;1969-07-20 02:56:15&quot;
## mon_2pm :  POSIXct[1:1], format: &quot;2018-08-27 14:00:00&quot;
## monarchs : tibble [131 × 7] (S3: tbl_df/tbl/data.frame)
## month_seq : Formal class &#39;Period&#39; [package &quot;lubridate&quot;] with 6 slots
## movie_actors :  chr [1:6] &quot;Leonardo DiCaprio&quot; &quot;Matt Damon&quot; &quot;Jack Nicholson&quot; ...
## movie_title :  chr &quot;The Departed&quot;
## mtcars : &#39;data.frame&#39;:   32 obs. of  16 variables:
##  $ mpg     : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl     : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp    : num  160 160 108 258 360 ...
##  $ hp      : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat    : num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt      : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec    : num  16.5 17 18.6 19.4 17 ...
##  $ vs      : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am      : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear    : num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb    : num  4 4 1 1 2 1 4 2 2 4 ...
##  $ fcyl    : Factor w/ 3 levels &quot;4&quot;,&quot;6&quot;,&quot;8&quot;: 2 2 1 2 3 2 3 1 1 2 ...
##  $ fam     : Factor w/ 2 levels &quot;manual&quot;,&quot;automatic&quot;: 1 1 1 2 2 2 2 2 2 2 ...
##  $ car     : chr  &quot;Mazda RX4&quot; &quot;Mazda RX4 Wag&quot; &quot;Datsun 710&quot; &quot;Hornet 4 Drive&quot; ...
##  $ fcyl_fam: Factor w/ 6 levels &quot;4:0&quot;,&quot;6:0&quot;,&quot;8:0&quot;,..: 5 5 4 2 3 2 3 1 1 2 ...
##  $ fvs     : Factor w/ 2 levels &quot;V-shaped&quot;,&quot;straight&quot;: 1 1 2 2 1 2 1 2 2 2 ...
## mtcars_by_cyl : tibble [3 × 5] (S3: tbl_df/tbl/data.frame)
## mtcars_by_cyl1 : tibble [3 × 3] (S3: tbl_df/tbl/data.frame)
## mtcars_by_cyl2 : &#39;data.frame&#39;:   3 obs. of  3 variables:
##  $ cyl : num  4 6 8
##  $ n_wt: int  11 7 14
##  $ prop: num  0.344 0.219 0.438
## my_blue :  chr &quot;#4ABEFF&quot;
## my_book : Formal class &#39;workbook&#39; [package &quot;XLConnect&quot;] with 2 slots
## my_character :  chr &quot;universe&quot;
## my_df : &#39;data.frame&#39;:    10 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1
##  $ am  : num  1 1 1 0 0 0 0 0 0 0
##  $ gear: num  4 4 4 3 3 3 3 4 4 4
##  $ carb: num  4 4 1 1 2 1 4 2 2 4
## my_list : List of 3
##  $ vec: int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ mat: int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
##  $ df :&#39;data.frame&#39;: 10 obs. of  11 variables:
## my_logical :  logi FALSE
## my_matrix :  int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
## my_numeric :  num 42
## my_vector :  int [1:10] 1 2 3 4 5 6 7 8 9 10
## n_flips :  num 10
## n_visits :  num [1:410] 0 0 0 0 0 0 0 0 0 0 ...
## name :  chr [1:8] &quot;Mercury&quot; &quot;Venus&quot; &quot;Earth&quot; &quot;Mars&quot; &quot;Jupiter&quot; &quot;Saturn&quot; ...
## names : List of 4
##  $ : chr &quot;gauss&quot;
##  $ : chr &quot;bayes&quot;
##  $ : chr &quot;pascal&quot;
##  $ : chr &quot;pearson&quot;
## names_ad :  chr [1:4] &quot;gauss&quot; &quot;bayes&quot; &quot;pascal&quot; &quot;pearson&quot;
## names_an :  chr [1:4] &quot;gauss&quot; &quot;bayes&quot; &quot;pascal&quot; &quot;pearson&quot;
## names_filtered : tibble [414 × 8] (S3: tbl_df/tbl/data.frame)
## names_normalized : tibble [1,924,665 × 8] (S3: tbl_df/tbl/data.frame)
## national_parks :  chr [1:22] &quot;Addo Elephant National Park&quot; &quot;Agulhas National Park&quot; ...
## new_hope :  num [1:2] 461 314
## new_mean :  num 6000
## new_sales : &#39;data.frame&#39;:    36 obs. of  2 variables:
##  $ sale_num: int  1 2 3 4 5 6 7 8 9 10 ...
##  $ amount  : num  2960 8305 9084 3168 5660 ...
## new_sd :  num 2600
## non_us_all :  Named num [1:6] 314 248 166 552 339 ...
## non_us_some :  Named num [1:2] 314 248
## now :  POSIXct[1:1], format: &quot;2024-01-14 14:15:10&quot;
## num :  num 2500
## num_chars :  int [1:6] 8 5 6 5 14 9
## num_views :  num 14
## number :  num 2500
## nyc : List of 3
##  $ pop     : num 8405837
##  $ boroughs: chr [1:5] &quot;Manhattan&quot; &quot;Bronx&quot; &quot;Brooklyn&quot; &quot;Queens&quot; ...
##  $ capital : logi FALSE
## nyc_ind :  int 3
## nyc_val :  logi FALSE
## obs : tibble [346 × 11] (S3: tbl_df/tbl/data.frame)
## oceania_1952 : tibble [2 × 6] (S3: tbl_df/tbl/data.frame)
## p_head :  num 0.8
## p_wt_vs_fcyl_by_fam : List of 9
##  $ data       :&#39;data.frame&#39;: 32 obs. of  13 variables:
##  $ layers     : list()
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: NULL
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 3
## p_wt_vs_fcyl_by_fam_jit : List of 9
##  $ data       :&#39;data.frame&#39;: 32 obs. of  13 variables:
##  $ layers     :List of 1
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 3
## pairs : Classes &#39;pairs&#39;, &#39;data.table&#39; and &#39;data.frame&#39;:  40532 obs. of  5 variables:
##  $ .x     : int  125 125 125 125 125 125 125 125 125 125 ...
##  $ .y     : int  75 76 77 78 79 80 81 82 83 84 ...
##  $ name   : num  0 0 0.489 0.381 0.281 ...
##  $ addr   : num  0.562 0.56 0.537 0.553 0.507 ...
##  $ weights: num  -1.3486 -1.3558 0.0967 -0.1716 -0.6351 ...
## palette :  chr [1:2] &quot;#D7191C&quot; &quot;#2C7BB6&quot;
## parent : &lt;environment: R_GlobalEnv&gt; 
## part_categories : spc_tbl_ [66 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## parts : spc_tbl_ [52,600 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## parts_joined : tibble [9,964 × 4] (S3: tbl_df/tbl/data.frame)
## passengers_per_day :  chr [1:4] &quot;0-20K&quot; &quot;20K-70K&quot; &quot;70K-100K&quot; &quot;100K+&quot;
## path :  chr &quot;data/hotdogs.txt&quot;
## phone_no_parens :  chr [1:2809] &quot;858 990 5153&quot; &quot;731-813-2043&quot; &quot;563-732-6802&quot; ...
## pioneers :  chr [1:4] &quot;GAUSS:1777&quot; &quot;BAYES:1702&quot; &quot;PASCAL:1623&quot; &quot;PEARSON:1857&quot;
## pipeable_plot : function (data, formula)  
## pizza :  Date[1:5], format: &quot;2023-09-15&quot; &quot;2023-09-17&quot; &quot;2023-09-22&quot; &quot;2023-09-28&quot; &quot;2023-10-03&quot;
## planets_df : &#39;data.frame&#39;:   8 obs. of  5 variables:
##  $ name    : chr  &quot;Mercury&quot; &quot;Venus&quot; &quot;Earth&quot; &quot;Mars&quot; ...
##  $ type    : chr  &quot;Terrestrial planet&quot; &quot;Terrestrial planet&quot; &quot;Terrestrial planet&quot; &quot;Terrestrial planet&quot; ...
##  $ diameter: num  0.382 0.949 1 0.532 11.209 ...
##  $ rotation: num  58.64 -243.02 1 1.03 0.41 ...
##  $ rings   : logi  FALSE FALSE FALSE FALSE TRUE TRUE ...
## plt_country_vs_lifeExp : List of 9
##  $ data       : spc_tbl_ [20 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ layers     :List of 3
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 8
## plt_dist_vs_speed : &#39;data.frame&#39;:    50 obs. of  2 variables:
##  $ speed: num  4 4 7 7 8 9 10 10 10 11 ...
##  $ dist : num  2 10 4 22 16 10 18 26 34 17 ...
## plt_mpg_vs_fcyl_by_fam : List of 9
##  $ data       :&#39;data.frame&#39;: 32 obs. of  13 variables:
##  $ layers     : list()
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: NULL
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 3
## plt_mpg_vs_wt : List of 9
##  $ data       :&#39;data.frame&#39;: 32 obs. of  13 variables:
##  $ layers     : list()
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: NULL
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 2
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 2
## plt_mpg_vs_wt_by_cyl : List of 9
##  $ data       :&#39;data.frame&#39;: 32 obs. of  13 variables:
##  $ layers     :List of 1
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      :List of 3
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 3
## plt_price_vs_carat : List of 9
##  $ data       : tibble [53,940 × 10] (S3: tbl_df/tbl/data.frame)
##  $ layers     : list()
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: NULL
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 2
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 2
## plt_price_vs_carat_by_clarity : List of 9
##  $ data       : tibble [53,940 × 10] (S3: tbl_df/tbl/data.frame)
##  $ layers     : list()
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: NULL
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 3
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 3
## plt_price_vs_carat_transparent : List of 9
##  $ data       : tibble [53,940 × 10] (S3: tbl_df/tbl/data.frame)
##  $ layers     :List of 1
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 2
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 2
## plt_prop_unemployed_over_time : List of 9
##  $ data       : spc_tbl_ [574 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ layers     :List of 1
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 2
##  $ theme      :List of 1
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 4
## poker_midweek :  Named num [1:3] -50 20 -120
## poker_midweek_name :  Named num [1:3] -50 20 -120
## poker_two :  Named num [1:2] 140 240
## poker_two_name :  Named num [1:2] 140 240
## poker_vector :  Named num [1:5] 140 -50 20 -120 240
## poker_wednesday :  Named num 20
## poker_winning_days :  Named num [1:3] 140 20 240
## pools : &#39;data.frame&#39;:    20 obs. of  4 variables:
##  $ Name     : chr  &quot;Acacia Ridge Leisure Centre&quot; &quot;Bellbowrie Pool&quot; &quot;Carole Park&quot; &quot;Centenary Pool (inner City)&quot; ...
##  $ Address  : chr  &quot;1391 Beaudesert Road, Acacia Ridge&quot; &quot;Sugarwood Street, Bellbowrie&quot; &quot;Cnr Boundary Road and Waterford Road Wacol&quot; &quot;400 Gregory Terrace, Spring Hill&quot; ...
##  $ Latitude : num  -27.6 -27.6 -27.6 -27.5 -27.4 ...
##  $ Longitude: num  153 153 153 153 153 ...
## pop_1 : tibble [209 × 8] (S3: tbl_df/tbl/data.frame)
## pop_2 : tibble [209 × 9] (S3: tbl_df/tbl/data.frame)
## pop_3 : tibble [209 × 38] (S3: tbl_df/tbl/data.frame)
## pop_a : tibble [209 × 8] (S3: tbl_df/tbl/data.frame)
## pop_b : tibble [209 × 8] (S3: tbl_df/tbl/data.frame)
## pop_list : List of 3
##  $ : tibble [209 × 8] (S3: tbl_df/tbl/data.frame)
##  $ : tibble [209 × 9] (S3: tbl_df/tbl/data.frame)
##  $ : tibble [209 × 38] (S3: tbl_df/tbl/data.frame)
## population :  Time-Series [1:5] from 1996 to 2016: 40583573 44819778 47390900 51770560 55908900
## positions :  int [1:8] 1 4 2 3 8 7 6 5
## posn_d : Classes &#39;PositionDodge&#39;, &#39;Position&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class PositionDodge, Position, gg&gt;
##     compute_layer: function
##     compute_panel: function
##     preserve: total
##     required_aes: 
##     setup_data: function
##     setup_params: function
##     width: 0.9
##     super:  &lt;ggproto object: Class PositionDodge, Position, gg&gt; 
## posn_j : Classes &#39;PositionJitter&#39;, &#39;Position&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class PositionJitter, Position, gg&gt;
##     compute_layer: function
##     compute_panel: function
##     height: NULL
##     required_aes: x y
##     seed: NA
##     setup_data: function
##     setup_params: function
##     width: 0.2
##     super:  &lt;ggproto object: Class PositionJitter, Position, gg&gt; 
## posn_jd : Classes &#39;PositionJitterdodge&#39;, &#39;Position&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class PositionJitterdodge, Position, gg&gt;
##     compute_layer: function
##     compute_panel: function
##     dodge.width: 0.1
##     jitter.height: 0
##     jitter.width: 0.2
##     required_aes: x y
##     seed: 289023666
##     setup_data: function
##     setup_params: function
##     super:  &lt;ggproto object: Class PositionJitterdodge, Position, gg&gt; 
## posts_with_tags : tibble [1,546,174 × 7] (S3: tbl_df/tbl/data.frame)
## potatoes : Classes &#39;data.table&#39; and &#39;data.frame&#39;:    160 obs. of  8 variables:
##  $ area     : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ temp     : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ size     : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ storage  : int  1 1 1 1 1 2 2 2 2 2 ...
##  $ method   : int  1 2 3 4 5 1 2 3 4 5 ...
##  $ texture  : num  2.9 2.3 2.5 2.1 1.9 1.8 2.6 3 2.2 2 ...
##  $ flavor   : num  3.2 2.5 2.8 2.9 2.8 3 3.1 3 3.2 2.8 ...
##  $ moistness: num  3 2.6 2.8 2.4 2.2 1.7 2.4 2.9 2.5 1.9 ...
## potatoes_char : spc_tbl_ [160 × 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## potatoes_fragment : spc_tbl_ [5 × 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## potatoes_fread : Classes &#39;data.table&#39; and &#39;data.frame&#39;:  160 obs. of  2 variables:
##  $ texture  : num  2.9 2.3 2.5 2.1 1.9 1.8 2.6 3 2.2 2 ...
##  $ moistness: num  3 2.6 2.8 2.4 2.2 1.7 2.4 2.9 2.5 1.9 ...
## pow_two : function (x, print_info = T)  
## print_info : function (x)  
## prob_between_10_and_20 :  num 0.333
## prob_greater_than_5 :  num 0.833
## prob_less_than_5 :  num 0.167
## properties :  chr [1:8] &quot;area&quot; &quot;temp&quot; &quot;size&quot; &quot;storage&quot; &quot;method&quot; &quot;texture&quot; &quot;flavor&quot; ...
## q1 :  Named num 447
## q3 :  Named num 1111
## question_answer_counts : spc_tbl_ [394,732 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## question_tags : spc_tbl_ [572,153 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## questions : spc_tbl_ [394,732 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## questions_with_tags : spc_tbl_ [745,796 × 5] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## r :  int 3
## r_3_4_1 :  POSIXct[1:1], format: &quot;2016-05-03 07:13:28&quot;
## rainy_days : gropd_df [366 × 3] (S3: grouped_df/tbl_df/tbl/data.frame)
## rcount :  num 5
## red_brewer_palette :  chr [1:9] &quot;#FFF5F0&quot; &quot;#FEE0D2&quot; &quot;#FCBBA1&quot; &quot;#FC9272&quot; &quot;#FB6A4A&quot; &quot;#EF3B2C&quot; ...
## region :  chr [1:2] &quot;US&quot; &quot;non-US&quot;
## release_time :  POSIXct[1:105], format: &quot;1997-12-04 08:47:58&quot; &quot;1997-12-21 13:09:22&quot; ...
## releases : spc_tbl_ [105 × 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## restaurant_groups : &#39;data.frame&#39;:    10 obs. of  2 variables:
##  $ group_id  : chr  &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; ...
##  $ group_size: num  2 4 6 2 2 2 3 2 4 2
## result :  chr &quot;large&quot;
## return_jedi :  num [1:2] 309 166
## reviews_df : &#39;data.frame&#39;:   5 obs. of  2 variables:
##  $ scores  : num  4.2 4.6 4.8 5 5
##  $ comments: chr  &quot;Fascinating plot&quot; &quot;I would watch it again&quot; &quot;I liked it&quot; &quot;Amazing!&quot; ...
## rings :  logi [1:8] FALSE FALSE FALSE FALSE TRUE TRUE ...
## rings_vector :  logi [1:8] FALSE FALSE FALSE FALSE TRUE TRUE ...
## rotation :  num [1:8] 58.64 -243.02 1 1.03 0.41 ...
## roulette_vector :  Named num [1:5] -24 -50 100 -350 10
## rquote :  chr &quot;r&#39;s internals are irrefutably intriguing&quot;
## rsa_env : &lt;environment: 0x00000286c1272330&gt; 
## rsa_lst : List of 3
##  $ capitals      :&#39;data.frame&#39;:  3 obs. of  2 variables:
##  $ national_parks: chr [1:22] &quot;Addo Elephant National Park&quot; &quot;Agulhas National Park&quot; &quot;Ai-Ais/Richtersveld Transfrontier Park&quot; &quot;Augrabies Falls National Park&quot; ...
##  $ population    : Time-Series [1:5] from 1996 to 2016: 40583573 44819778 47390900 51770560 55908900
## run_poisson_regression : function (data, formula)  
## sample_means :  num [1:30] 38.1 28.9 26.2 32.9 38.4 ...
## samples : &#39;data.frame&#39;:  100 obs. of  1 variable:
##  $ mean: num  38 43.4 42 47.2 41.2 ...
## saros : Formal class &#39;Duration&#39; [package &quot;lubridate&quot;] with 1 slot
## scores :  num [1:5] 4.6 5 4.8 5 4.2
## secondary_y_axis : Classes &#39;AxisSecondary&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class AxisSecondary, gg&gt;
##     axis: NULL
##     break_info: function
##     breaks: 59 68 77 86 95 104
##     create_scale: function
##     detail: 1000
##     empty: function
##     guide: waiver
##     init: function
##     labels: 15 20 25 30 35 40
##     make_title: function
##     mono_test: function
##     name: Celsius
##     trans: function
##     transform_range: function
##     super:  &lt;ggproto object: Class AxisSecondary, gg&gt; 
## select_el : function (x, index)  
## select_first : function (x)  
## select_second : function (x)  
## selected_names : tibble [281 × 5] (S3: tbl_df/tbl/data.frame)
## selection : &#39;data.frame&#39;:    209 obs. of  4 variables:
##  $ country: chr  &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;American Samoa&quot; ...
##  $ X1968  : num  1182159 639964 5017299 17996 16727 ...
##  $ X1969  : num  1248901 658853 5219332 18619 18088 ...
##  $ X1970  : num  1319849 677839 5429743 19206 19529 ...
## selection_vector :  Named logi [1:5] TRUE FALSE TRUE FALSE TRUE
## sep_10_2009 :  chr [1:4] &quot;September 10 2009&quot; &quot;2009-09-10&quot; &quot;10 Sep 2009&quot; &quot;09-10-2009&quot;
## seq1 :  num [1:167] 1 4 7 10 13 16 19 22 25 28 ...
## seq2 :  num [1:43] 1200 1193 1186 1179 1172 ...
## sets : spc_tbl_ [21,857 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## sex_vector :  chr [1:5] &quot;Male&quot; &quot;Female&quot; &quot;Female&quot; &quot;Male&quot; &quot;Male&quot;
## sfo_survey : tibble [2,809 × 6] (S3: tbl_df/tbl/data.frame)
## sheets :  chr [1:3] &quot;1960-1966&quot; &quot;1967-1974&quot; &quot;1975-2011&quot;
## short_dates :  chr [1:3] &quot;11 December 1282&quot; &quot;May 1372&quot; &quot;1253&quot;
## size_distribution : &#39;data.frame&#39;:    4 obs. of  3 variables:
##  $ group_size : num  2 3 4 6
##  $ n          : int  6 1 2 1
##  $ probability: num  0.6 0.1 0.2 0.1
## sms :  num 24
## snake_river_visits : &#39;data.frame&#39;:   410 obs. of  4 variables:
##  $ n_visits: num  0 0 0 0 0 0 0 0 0 0 ...
##  $ gender  : Factor w/ 2 levels &quot;male&quot;,&quot;female&quot;: 1 1 1 2 1 2 2 2 1 1 ...
##  $ income  : Factor w/ 4 levels &quot;[$0,$25k]&quot;,&quot;($25k,$55k]&quot;,..: 4 2 4 2 4 2 4 4 4 4 ...
##  $ travel  : Factor w/ 3 levels &quot;[0h,0.25h]&quot;,&quot;(0.25h,4h]&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
## social_vec :  num [1:14] 16 9 13 5 2 17 14 17 7 5 ...
## speed :  num 88
## speed_vector :  chr [1:5] &quot;medium&quot; &quot;slow&quot; &quot;slow&quot; &quot;medium&quot; &quot;fast&quot;
## split_low : List of 4
##  $ : chr [1:2] &quot;gauss&quot; &quot;1777&quot;
##  $ : chr [1:2] &quot;bayes&quot; &quot;1702&quot;
##  $ : chr [1:2] &quot;pascal&quot; &quot;1623&quot;
##  $ : chr [1:2] &quot;pearson&quot; &quot;1857&quot;
## split_math : List of 4
##  $ : chr [1:2] &quot;GAUSS&quot; &quot;1777&quot;
##  $ : chr [1:2] &quot;BAYES&quot; &quot;1702&quot;
##  $ : chr [1:2] &quot;PASCAL&quot; &quot;1623&quot;
##  $ : chr [1:2] &quot;PEARSON&quot; &quot;1857&quot;
## star_destroyer : tibble [293 × 6] (S3: tbl_df/tbl/data.frame)
## star_destroyer_colors : tibble [16 × 2] (S3: tbl_df/tbl/data.frame)
## star_wars : tibble [80,843 × 13] (S3: tbl_df/tbl/data.frame)
## star_wars_colors : tibble [81 × 3] (S3: tbl_df/tbl/data.frame)
## star_wars_matrix :  num [1:3, 1:2] 461 290 309 314 248 ...
## star_wars_matrix_dim :  num [1:3, 1:2] 461 290 309 314 248 ...
## star_wars_matrix2 :  num [1:3, 1:2] 474 311 380 552 339 ...
## star_wars_parts : tibble [9,081 × 3] (S3: tbl_df/tbl/data.frame)
## std_and_poor500 : &#39;data.frame&#39;:  505 obs. of  5 variables:
##  $ symbol  : chr  &quot;MMM&quot; &quot;ABT&quot; &quot;ABBV&quot; &quot;ABMD&quot; ...
##  $ company : chr  &quot;3M Company&quot; &quot;Abbott Laboratories&quot; &quot;AbbVie Inc.&quot; &quot;ABIOMED Inc&quot; ...
##  $ sector  : chr  &quot;Industrials&quot; &quot;Health Care&quot; &quot;Health Care&quot; &quot;Health Care&quot; ...
##  $ industry: chr  &quot;Industrial Conglomerates&quot; &quot;Health Care Equipment&quot; &quot;Pharmaceuticals&quot; &quot;Health Care Equipment&quot; ...
##  $ pe_ratio: num  18.3 57.7 22.4 45.6 27 ...
## str1 :  chr &quot;May 23, &#39;96 hours:23 minutes:01 seconds:45&quot;
## str2 :  chr &quot;2012-3-12 14:23:08&quot;
## str3 :  chr &quot;30/January/2006&quot;
## sum_abs : function (b, c)  
## summ : &#39;data.frame&#39;: 3 obs. of  3 variables:
##  $ sheets: chr  &quot;1960-1966&quot; &quot;1967-1974&quot; &quot;1975-2011&quot;
##  $ nrows : int  209 209 209
##  $ ncols : int  8 9 38
## sun_plot : List of 9
##  $ data       :&#39;data.frame&#39;: 3177 obs. of  2 variables:
##  $ layers     :List of 1
##  $ scales     :Classes &#39;ScalesList&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class ScalesList, gg&gt;
##     add: function
##     clone: function
##     find: function
##     get_scales: function
##     has_scale: function
##     input: function
##     n: function
##     non_position_scales: function
##     scales: list
##     super:  &lt;ggproto object: Class ScalesList, gg&gt; 
##  $ mapping    :List of 2
##  $ theme      : list()
##  $ coordinates:Classes &#39;CoordCartesian&#39;, &#39;Coord&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class CoordCartesian, Coord, gg&gt;
##     aspect: function
##     backtransform_range: function
##     clip: on
##     default: TRUE
##     distance: function
##     expand: TRUE
##     is_free: function
##     is_linear: function
##     labels: function
##     limits: list
##     modify_scales: function
##     range: function
##     render_axis_h: function
##     render_axis_v: function
##     render_bg: function
##     render_fg: function
##     setup_data: function
##     setup_layout: function
##     setup_panel_guides: function
##     setup_panel_params: function
##     setup_params: function
##     train_panel_guides: function
##     transform: function
##     super:  &lt;ggproto object: Class CoordCartesian, Coord, gg&gt; 
##  $ facet      :Classes &#39;FacetNull&#39;, &#39;Facet&#39;, &#39;ggproto&#39;, &#39;gg&#39; &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt; 
##  $ plot_env   :&lt;environment: R_GlobalEnv&gt; 
##  $ labels     :List of 2
## sunspots.m : &#39;data.frame&#39;:   3177 obs. of  2 variables:
##  $ year : num  1749 1749 1749 1749 1749 ...
##  $ value: Time-Series  from 1749 to 2014: 58 62.6 70 55.7 85 83.5 94.8 66.3 75.9 75.5 ...
## survey_vector :  chr [1:5] &quot;M&quot; &quot;F&quot; &quot;F&quot; &quot;M&quot; &quot;M&quot;
## synodic : Formal class &#39;Duration&#39; [package &quot;lubridate&quot;] with 1 slot
## tagged_answers : spc_tbl_ [745,796 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## tags : spc_tbl_ [48,299 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## temp : List of 7
##  $ : num [1:5] 3 7 9 6 -1
##  $ : num [1:5] 6 9 12 13 5
##  $ : num [1:5] 4 8 3 -1 -3
##  $ : num [1:5] 1 4 7 2 -2
##  $ : num [1:5] 5 7 9 4 2
##  $ : num [1:5] -3 5 8 9 4
##  $ : num [1:5] 3 6 9 4 1
## temperature_vector :  chr [1:5] &quot;High&quot; &quot;Low&quot; &quot;High&quot; &quot;Low&quot; &quot;Medium&quot;
## TG : spc_tbl_ [60 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## theme_recession : List of 8
##  $ rect              :List of 5
##  $ axis.text         :List of 11
##  $ axis.ticks        : list()
##  $ legend.key        :List of 5
##  $ legend.position   : num [1:2] 0.6 0.1
##  $ panel.grid        : list()
##  $ panel.grid.major.y:List of 6
##  $ plot.title        :List of 11
## theme_tufte_recession : List of 97
##  $ line                      :List of 6
##  $ rect                      :List of 5
##  $ text                      :List of 11
##  $ title                     : NULL
##  $ aspect.ratio              : NULL
##  $ axis.title                : NULL
##  $ axis.title.x              :List of 11
##  $ axis.title.x.top          :List of 11
##  $ axis.title.x.bottom       : NULL
##  $ axis.title.y              :List of 11
##  $ axis.title.y.left         : NULL
##  $ axis.title.y.right        :List of 11
##  $ axis.text                 :List of 11
##  $ axis.text.x               :List of 11
##  $ axis.text.x.top           :List of 11
##  $ axis.text.x.bottom        : NULL
##  $ axis.text.y               :List of 11
##  $ axis.text.y.left          : NULL
##  $ axis.text.y.right         :List of 11
##  $ axis.ticks                : list()
##  $ axis.ticks.x              : NULL
##  $ axis.ticks.x.top          : NULL
##  $ axis.ticks.x.bottom       : NULL
##  $ axis.ticks.y              : NULL
##  $ axis.ticks.y.left         : NULL
##  $ axis.ticks.y.right        : NULL
##  $ axis.ticks.length         : &#39;simpleUnit&#39; num 2.75points
##  $ axis.ticks.length.x       : NULL
##  $ axis.ticks.length.x.top   : NULL
##  $ axis.ticks.length.x.bottom: NULL
##  $ axis.ticks.length.y       : NULL
##  $ axis.ticks.length.y.left  : NULL
##  $ axis.ticks.length.y.right : NULL
##  $ axis.line                 : list()
##  $ axis.line.x               : NULL
##  $ axis.line.x.top           : NULL
##  $ axis.line.x.bottom        : NULL
##  $ axis.line.y               : NULL
##  $ axis.line.y.left          : NULL
##  $ axis.line.y.right         : NULL
##  $ legend.background         : list()
##  $ legend.margin             : &#39;margin&#39; num [1:4] 5.5points 5.5points 5.5points 5.5points
##  $ legend.spacing            : &#39;simpleUnit&#39; num 11points
##  $ legend.spacing.x          : NULL
##  $ legend.spacing.y          : NULL
##  $ legend.key                :List of 5
##  $ legend.key.size           : &#39;simpleUnit&#39; num 1.2lines
##  $ legend.key.height         : NULL
##  $ legend.key.width          : NULL
##  $ legend.text               :List of 11
##  $ legend.text.align         : NULL
##  $ legend.title              :List of 11
##  $ legend.title.align        : NULL
##  $ legend.position           : num [1:2] 0.6 0.1
##  $ legend.direction          : NULL
##  $ legend.justification      : chr &quot;center&quot;
##  $ legend.box                : NULL
##  $ legend.box.just           : NULL
##  $ legend.box.margin         : &#39;margin&#39; num [1:4] 0cm 0cm 0cm 0cm
##  $ legend.box.background     : list()
##  $ legend.box.spacing        : &#39;simpleUnit&#39; num 11points
##  $ panel.background          : list()
##  $ panel.border              : list()
##  $ panel.spacing             : &#39;simpleUnit&#39; num 5.5points
##  $ panel.spacing.x           : NULL
##  $ panel.spacing.y           : NULL
##  $ panel.grid                : list()
##  $ panel.grid.major          : NULL
##  $ panel.grid.minor          :List of 6
##  $ panel.grid.major.x        : NULL
##  $ panel.grid.major.y        :List of 6
##  $ panel.grid.minor.x        : NULL
##  $ panel.grid.minor.y        : NULL
##  $ panel.ontop               : logi FALSE
##  $ plot.background           : list()
##  $ plot.title                :List of 11
##  $ plot.title.position       : chr &quot;panel&quot;
##  $ plot.subtitle             :List of 11
##  $ plot.caption              :List of 11
##  $ plot.caption.position     : chr &quot;panel&quot;
##  $ plot.tag                  :List of 11
##  $ plot.tag.position         : chr &quot;topleft&quot;
##  $ plot.margin               : &#39;margin&#39; num [1:4] 5.5points 5.5points 5.5points 5.5points
##  $ strip.background          : list()
##  $ strip.background.x        : NULL
##  $ strip.background.y        : NULL
##  $ strip.clip                : chr &quot;inherit&quot;
##  $ strip.placement           : chr &quot;inside&quot;
##  $ strip.text                :List of 11
##  $ strip.text.x              : NULL
##  $ strip.text.x.bottom       : NULL
##  $ strip.text.x.top          : NULL
##  $ strip.text.y              :List of 11
##  $ strip.text.y.left         :List of 11
##  $ strip.text.y.right        : NULL
##  $ strip.switch.pad.grid     : &#39;simpleUnit&#39; num 2.75points
##  $ strip.switch.pad.wrap     : &#39;simpleUnit&#39; num 2.75points
## themes : spc_tbl_ [467 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## throw_die : function ()  
## ticket_prices_matrix :  num [1:6, 1:2] 5 6 7 4 4.5 4.9 5 6 7 4 ...
## ticket_rowname :  chr [1:6] &quot;A New Hope&quot; &quot;The Empire Strikes Back&quot; &quot;Return of the Jedi&quot; ...
## time_online :  &#39;difftime&#39; num [1:5] 2305 34 837 2398 ...
## time1 :  POSIXct[1:1], format: &quot;1996-05-23 23:01:45&quot;
## time2 :  POSIXct[1:1], format: &quot;2012-03-12 14:23:08&quot;
## titles :  chr [1:3] &quot;A New Hope&quot; &quot;The Empire Strikes Back&quot; &quot;Return of the Jedi&quot;
## today :  Date[1:1], format: &quot;2024-01-14&quot;
## today_8am :  POSIXct[1:1], format: &quot;2024-01-14 08:00:00&quot;
## tom : &#39;data.frame&#39;:  1 obs. of  3 variables:
##  $ type    : chr &quot;Beef&quot;
##  $ calories: int 190
##  $ sodium  : int 645
## toss_coin : function (n_flips, p_head)  
## total_poker :  num 230
## total_roulette :  num -314
## total_week :  num -84
## triple : function (x)  
## ttt :  chr [1:3, 1:3] &quot;O&quot; NA &quot;X&quot; NA &quot;O&quot; NA &quot;X&quot; &quot;O&quot; &quot;X&quot;
## tue_9am :  POSIXct[1:1], format: &quot;2018-08-28 09:00:00&quot;
## two_orders :  chr [1:5] &quot;October 7, 2001&quot; &quot;October 13, 2002&quot; &quot;April 13, 2003&quot; ...
## type :  chr [1:8] &quot;Terrestrial planet&quot; &quot;Terrestrial planet&quot; ...
## type_of_capital :  chr [1:3] &quot;Legislative&quot; &quot;Judicial&quot; &quot;Administrative&quot;
## upper :  Named num 2108
## urban : &#39;data.frame&#39;:    209 obs. of  53 variables:
##  $ country: chr  &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;American Samoa&quot; ...
##  $ 1960   : num  769308 494443 3293999 NA NA ...
##  $ 1961   : num  814923 511803 3515148 13660 8724 ...
##  $ 1962   : num  858522 529439 3739963 14166 9700 ...
##  $ 1963   : num  903914 547377 3973289 14759 10748 ...
##  $ 1964   : num  951226 565572 4220987 15396 11866 ...
##  $ 1965   : num  1000582 583983 4488176 16045 13053 ...
##  $ 1966   : num  1058743 602512 4649105 16693 14217 ...
##  $ 1967   : num  1119067 621180 4826104 17349 15440 ...
##  $ 1968   : num  1182159 639964 5017299 17996 16727 ...
##  $ 1969   : num  1248901 658853 5219332 18619 18088 ...
##  $ 1970   : num  1319849 677839 5429743 19206 19529 ...
##  $ 1971   : num  1409001 698932 5619042 19752 20929 ...
##  $ 1972   : num  1502402 720207 5815734 20263 22406 ...
##  $ 1973   : num  1598835 741681 6020647 20742 23937 ...
##  $ 1974   : num  1696445 763385 6235114 21194 25482 ...
##  $ 1975   : num  1793266 785350 6460138 21632 27019 ...
##  $ 1976   : num  1905033 807990 6774099 22047 28366 ...
##  $ 1977   : num  2021308 830959 7102902 22452 29677 ...
##  $ 1978   : num  2142248 854262 7447728 22899 31037 ...
##  $ 1979   : num  2268015 877898 7810073 23457 32572 ...
##  $ 1980   : num  2398775 901884 8190772 24177 34366 ...
##  $ 1981   : num  2493265 927224 8637724 25173 36356 ...
##  $ 1982   : num  2590846 952447 9105820 26342 38618 ...
##  $ 1983   : num  2691612 978476 9591900 27655 40983 ...
##  $ 1984   : num  2795656 1006613 10091289 29062 43207 ...
##  $ 1985   : num  2903078 1037541 10600112 30524 45119 ...
##  $ 1986   : num  3006983 1072365 11101757 32014 46254 ...
##  $ 1987   : num  3113957 1109954 11609104 33548 47019 ...
##  $ 1988   : num  3224082 1146633 12122941 35095 47669 ...
##  $ 1989   : num  3337444 1177286 12645263 36618 48577 ...
##  $ 1990   : num  3454129 1198293 13177079 38088 49982 ...
##  $ 1991   : num  3617842 1215445 13708813 39600 51972 ...
##  $ 1992   : num  3788685 1222544 14248297 41049 54469 ...
##  $ 1993   : num  3966956 1222812 14789176 42443 57079 ...
##  $ 1994   : num  4152960 1221364 15322651 43798 59243 ...
##  $ 1995   : num  4347018 1222234 15842442 45129 60598 ...
##  $ 1996   : num  4531285 1228760 16395553 46343 60927 ...
##  $ 1997   : num  4722603 1238090 16935451 47527 60462 ...
##  $ 1998   : num  4921227 1250366 17469200 48705 59685 ...
##  $ 1999   : num  5127421 1265195 18007937 49906 59281 ...
##  $ 2000   : num  5341456 1282223 18560597 51151 59719 ...
##  $ 2001   : num  5564492 1315690 19198872 52341 61062 ...
##  $ 2002   : num  5795940 1352278 19854835 53583 63212 ...
##  $ 2003   : num  6036100 1391143 20529356 54864 65802 ...
##  $ 2004   : num  6285281 1430918 21222198 56166 68301 ...
##  $ 2005   : num  6543804 1470488 21932978 57474 70329 ...
##  $ 2006   : num  6812538 1512255 22625052 58679 71726 ...
##  $ 2007   : num  7091245 1553491 23335543 59894 72684 ...
##  $ 2008   : num  7380272 1594351 24061749 61118 73335 ...
##  $ 2009   : num  7679982 1635262 24799591 62357 73897 ...
##  $ 2010   : num  7990746 1676545 25545622 63616 74525 ...
##  $ 2011   : num  8316976 1716842 26216968 64817 75207 ...
## urban_clean : &#39;data.frame&#39;:  197 obs. of  53 variables:
##  $ country: chr  &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;Angola&quot; ...
##  $ 1960   : num  769308 494443 3293999 521205 21699 ...
##  $ 1961   : num  814923 511803 3515148 548265 21635 ...
##  $ 1962   : num  858522 529439 3739963 579695 21664 ...
##  $ 1963   : num  903914 547377 3973289 612087 21741 ...
##  $ 1964   : num  951226 565572 4220987 645262 21830 ...
##  $ 1965   : num  1000582 583983 4488176 679109 21909 ...
##  $ 1966   : num  1058743 602512 4649105 717833 22003 ...
##  $ 1967   : num  1119067 621180 4826104 757496 22086 ...
##  $ 1968   : num  1182159 639964 5017299 798459 22149 ...
##  $ 1969   : num  1248901 658853 5219332 841262 22183 ...
##  $ 1970   : num  1319849 677839 5429743 886402 22181 ...
##  $ 1971   : num  1409001 698932 5619042 955010 22561 ...
##  $ 1972   : num  1502402 720207 5815734 1027397 22908 ...
##  $ 1973   : num  1598835 741681 6020647 1103830 23221 ...
##  $ 1974   : num  1696445 763385 6235114 1184486 23503 ...
##  $ 1975   : num  1793266 785350 6460138 1269606 23753 ...
##  $ 1976   : num  1905033 807990 6774099 1372800 23977 ...
##  $ 1977   : num  2021308 830959 7102902 1481598 24168 ...
##  $ 1978   : num  2142248 854262 7447728 1597267 24304 ...
##  $ 1979   : num  2268015 877898 7810073 1721590 24358 ...
##  $ 1980   : num  2398775 901884 8190772 1855983 24312 ...
##  $ 1981   : num  2493265 927224 8637724 2015833 24164 ...
##  $ 1982   : num  2590846 952447 9105820 2188351 23929 ...
##  $ 1983   : num  2691612 978476 9591900 2371047 23632 ...
##  $ 1984   : num  2795656 1006613 10091289 2559552 23306 ...
##  $ 1985   : num  2903078 1037541 10600112 2750310 22979 ...
##  $ 1986   : num  3006983 1072365 11101757 2955174 22654 ...
##  $ 1987   : num  3113957 1109954 11609104 3161499 22345 ...
##  $ 1988   : num  3224082 1146633 12122941 3373207 22100 ...
##  $ 1989   : num  3337444 1177286 12645263 3597090 21982 ...
##  $ 1990   : num  3454129 1198293 13177079 3838852 22036 ...
##  $ 1991   : num  3617842 1215445 13708813 4102967 22047 ...
##  $ 1992   : num  3788685 1222544 14248297 4388137 22229 ...
##  $ 1993   : num  3966956 1222812 14789176 4690892 22538 ...
##  $ 1994   : num  4152960 1221364 15322651 5004756 22914 ...
##  $ 1995   : num  4347018 1222234 15842442 5324794 23312 ...
##  $ 1996   : num  4531285 1228760 16395553 5602207 23667 ...
##  $ 1997   : num  4722603 1238090 16935451 5882843 24031 ...
##  $ 1998   : num  4921227 1250366 17469200 6173329 24379 ...
##  $ 1999   : num  5127421 1265195 18007937 6483827 24690 ...
##  $ 2000   : num  5341456 1282223 18560597 6822112 24949 ...
##  $ 2001   : num  5564492 1315690 19198872 7190985 25197 ...
##  $ 2002   : num  5795940 1352278 19854835 7589585 25383 ...
##  $ 2003   : num  6036100 1391143 20529356 8012295 25520 ...
##  $ 2004   : num  6285281 1430918 21222198 8449762 25623 ...
##  $ 2005   : num  6543804 1470488 21932978 8894673 25706 ...
##  $ 2006   : num  6812538 1512255 22625052 9326818 25896 ...
##  $ 2007   : num  7091245 1553491 23335543 9764679 26066 ...
##  $ 2008   : num  7380272 1594351 24061749 10210317 26223 ...
##  $ 2009   : num  7679982 1635262 24799591 10667670 26369 ...
##  $ 2010   : num  7990746 1676545 25545622 11139829 26508 ...
##  $ 2011   : num  8316976 1716842 26216968 11602851 26771 ...
## urbanpop_sel : &#39;data.frame&#39;: 209 obs. of  3 variables:
##  $ X1968: num  1182159 639964 5017299 17996 16727 ...
##  $ X1969: num  1248901 658853 5219332 18619 18088 ...
##  $ X1970: num  1319849 677839 5429743 19206 19529 ...
## us_visitors :  Named num [1:6] 92.2 48.4 44.2 118.6 69 ...
## val :  num 14
## version_1_inventories : spc_tbl_ [35,612 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
## view_true :  logi [1:2, 1:7] FALSE FALSE FALSE FALSE TRUE FALSE ...
## views :  num [1:2, 1:7] 16 17 9 7 13 5 5 16 2 8 ...
## visitors :  num [1:6, 1:2] 92.2 48.4 44.2 118.6 69 ...
## Vocab : tibble [21,638 × 5] (S3: tbl_df/tbl/data.frame)
## wait_times : &#39;data.frame&#39;:   1000 obs. of  1 variable:
##  $ simulation_nb: int  1 2 3 4 5 6 7 8 9 10 ...
## weights :  num [1:2] 0.8 0.2
## wind : &#39;data.frame&#39;: 8753 obs. of  3 variables:
##  $ date: POSIXct, format: &quot;2003-01-01 00:00:00&quot; &quot;2003-01-01 01:00:00&quot; ...
##  $ ws  : Factor w/ 7 levels &quot;0 - 2&quot;,&quot;10 - 12&quot;,..: 5 5 4 5 5 5 5 5 4 4 ...
##  $ wd  : Factor w/ 16 levels &quot;E&quot;,&quot;ENE&quot;,&quot;ESE&quot;,..: 11 10 10 10 10 10 11 11 11 11 ...
## won_25pct :  num 0.75
## won_30pct :  num 0.9
## won_35pct :  num 1.05
## world_happiness : &#39;data.frame&#39;:  133 obs. of  10 variables:
##  $ country            : chr  &quot;Finland&quot; &quot;Denmark&quot; &quot;Norway&quot; &quot;Iceland&quot; ...
##  $ social_support     : int  2 4 3 1 15 13 25 5 20 31 ...
##  $ freedom            : int  5 6 3 7 19 11 10 8 9 26 ...
##  $ corruption         : int  4 3 8 45 12 7 6 5 11 19 ...
##  $ generosity         : int  47 22 11 3 7 16 17 8 14 25 ...
##  $ gdp_per_cap        : int  42400 48300 66300 47900 50500 59000 47200 36500 44200 46900 ...
##  $ life_exp           : num  81.8 81 82.6 83 81.8 84.3 82.8 81.9 82.2 82 ...
##  $ happiness_score    : num  155 154 153 152 151 150 149 148 147 146 ...
##  $ grams_sugar_per_day: num  86.8 152 120 132 122 166 115 162 132 124 ...
##  $ log_gdp_per_cap    : num  10.7 10.8 11.1 10.8 10.8 ...
## worldwide_vector :  Named num [1:3] 775 538 475
## worldwide_vector_col :  Named num [1:2] 1061 728
## x :  chr &quot;Monday June 1st 2010 at 4pm&quot;
## x_date :  Date[1:1], format: &quot;2013-04-03&quot;
## x_end :  num 67
## x_start :  num 71
## y :  chr &quot;02.01.2010&quot;
## y_breaks :  num [1:6] 59 68 77 86 95 104
## y_end :  num 7.5
## y_labels :  num [1:6] 15 20 25 30 35 40
## y_start :  num 5.5
## years : List of 4
##  $ : chr &quot;1777&quot;
##  $ : chr &quot;1702&quot;
##  $ : chr &quot;1623&quot;
##  $ : chr &quot;1857&quot;
## years_ad :  chr [1:4] &quot;1777&quot; &quot;1702&quot; &quot;1623&quot; &quot;1857&quot;
## years_an :  chr [1:4] &quot;1777&quot; &quot;1702&quot; &quot;1623&quot; &quot;1857&quot;
## z :  chr &quot;Sep, 12th 2010 14:00&quot;
## zagat : &#39;data.frame&#39;:    310 obs. of  7 variables:
##  $ id   : int  0 1 2 3 4 5 6 8 9 11 ...
##  $ name : chr  &quot;apple pan the&quot; &quot;asahi ramen&quot; &quot;baja fresh&quot; &quot;belvedere the&quot; ...
##  $ addr : chr  &quot;10801 w. pico blvd.&quot; &quot;2027 sawtelle blvd.&quot; &quot;3345 kimber dr.&quot; &quot;9882 little santa monica blvd.&quot; ...
##  $ city : Factor w/ 26 levels &quot;atlanta&quot;,&quot;los angeles&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
##  $ phone: Factor w/ 329 levels &quot;100-813-8212&quot;,..: 143 145 312 155 139 96 323 125 150 132 ...
##  $ type : chr  &quot;american&quot; &quot;noodle shops&quot; &quot;mexican&quot; &quot;pacific new wave&quot; ...
##  $ class: int  534 535 536 537 538 539 540 542 543 545 ...</code></pre>
<div class="sourceCode" id="cb1421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1421-1"><a href="introduction-to-writing-functions.html#cb1421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls.str</span>(rsa_env)</span></code></pre></div>
<pre><code>## capitals : &#39;data.frame&#39;: 3 obs. of  2 variables:
##  $ city           : chr  &quot;Cape Town&quot; &quot;Bloemfontein&quot; &quot;Pretoria&quot;
##  $ type_of_capital: chr  &quot;Legislative&quot; &quot;Judicial&quot; &quot;Administrative&quot;
## national_parks :  chr [1:22] &quot;Addo Elephant National Park&quot; &quot;Agulhas National Park&quot; ...
## population :  Time-Series [1:5] from 1996 to 2016: 40583573 44819778 47390900 51770560 55908900</code></pre>
<div class="sourceCode" id="cb1423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1423-1"><a href="introduction-to-writing-functions.html#cb1423-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Does groom_model exist in rsa_env?</span></span>
<span id="cb1423-2"><a href="introduction-to-writing-functions.html#cb1423-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;groom_model&quot;</span>, <span class="at">envir =</span> rsa_env)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1425-1"><a href="introduction-to-writing-functions.html#cb1425-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Does groom_model exist in rsa_env, ignoring inheritance?</span></span>
<span id="cb1425-2"><a href="introduction-to-writing-functions.html#cb1425-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">&quot;groom_model&quot;</span>, <span class="at">envir =</span> rsa_env, <span class="at">inherits =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>R searches for variables in all the parent environments, unless you explicitly tell it not to (<code>inherits = FALSE</code>).</p>
</div>
</div>
<div id="scope-and-precedence" class="section level3 hasAnchor" number="12.3.4">
<h3><span class="header-section-number">12.3.4</span> Scope and precedence<a href="introduction-to-writing-functions.html#scope-and-precedence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you call a function, R gives it an environment to store its variables.</p>
<p><strong>Accessing variables outside functions</strong></p>
<p>When R couldn’t find variable inside the function’s environment, it looked in the parent environment. And variable can still be used inside the function.</p>
<div class="sourceCode" id="cb1427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1427-1"><a href="introduction-to-writing-functions.html#cb1427-1" aria-hidden="true" tabindex="-1"></a>x_times_y <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1427-2"><a href="introduction-to-writing-functions.html#cb1427-2" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">*</span> y</span>
<span id="cb1427-3"><a href="introduction-to-writing-functions.html#cb1427-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1427-4"><a href="introduction-to-writing-functions.html#cb1427-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1427-5"><a href="introduction-to-writing-functions.html#cb1427-5" aria-hidden="true" tabindex="-1"></a><span class="fu">x_times_y</span>(<span class="dv">10</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1428" style="background: white; color: black"><pre class="sourceCode r print"><code class="sourceCode r"><span id="cb1428-1"><a href="introduction-to-writing-functions.html#cb1428-1" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">x_times_y</span>(<span class="dv">10</span>) <span class="sc">:</span> object <span class="st">&#39;y&#39;</span> not found</span></code></pre></div>
<div class="sourceCode" id="cb1429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1429-1"><a href="introduction-to-writing-functions.html#cb1429-1" aria-hidden="true" tabindex="-1"></a>x_times_y <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1429-2"><a href="introduction-to-writing-functions.html#cb1429-2" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">*</span> y</span>
<span id="cb1429-3"><a href="introduction-to-writing-functions.html#cb1429-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1429-4"><a href="introduction-to-writing-functions.html#cb1429-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1429-5"><a href="introduction-to-writing-functions.html#cb1429-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb1429-6"><a href="introduction-to-writing-functions.html#cb1429-6" aria-hidden="true" tabindex="-1"></a><span class="fu">x_times_y</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 40</code></pre>
<p><strong>Accessing function variables from outside</strong></p>
<p>But you can’t look inside the function’s environment from outside.</p>
<div class="sourceCode" id="cb1431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1431-1"><a href="introduction-to-writing-functions.html#cb1431-1" aria-hidden="true" tabindex="-1"></a>x_times_y <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1431-2"><a href="introduction-to-writing-functions.html#cb1431-2" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">*</span> y</span>
<span id="cb1431-3"><a href="introduction-to-writing-functions.html#cb1431-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1431-4"><a href="introduction-to-writing-functions.html#cb1431-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1431-5"><a href="introduction-to-writing-functions.html#cb1431-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb1431-6"><a href="introduction-to-writing-functions.html#cb1431-6" aria-hidden="true" tabindex="-1"></a><span class="fu">x_times_y</span>(<span class="dv">10</span>)</span>
<span id="cb1431-7"><a href="introduction-to-writing-functions.html#cb1431-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1431-8"><a href="introduction-to-writing-functions.html#cb1431-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<div class="sourceCode" id="cb1432" style="background: white; color: black"><pre class="sourceCode r print"><code class="sourceCode r"><span id="cb1432-1"><a href="introduction-to-writing-functions.html#cb1432-1" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> object <span class="st">&#39;x&#39;</span> not found</span></code></pre></div>
<p>Although x is defined inside the function, you can’t access it from outside the function.</p>
<p><strong>Variable precedence</strong></p>
<p>Variables inside functions take precedence over variables outside functions.</p>
<p>So, R will search for variables inside the function first. If it finds y there, it doesn’t need to look in the parent environment.</p>
<div class="sourceCode" id="cb1433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1433-1"><a href="introduction-to-writing-functions.html#cb1433-1" aria-hidden="true" tabindex="-1"></a>x_times_y <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1433-2"><a href="introduction-to-writing-functions.html#cb1433-2" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb1433-3"><a href="introduction-to-writing-functions.html#cb1433-3" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">*</span> y</span>
<span id="cb1433-4"><a href="introduction-to-writing-functions.html#cb1433-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1433-5"><a href="introduction-to-writing-functions.html#cb1433-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1433-6"><a href="introduction-to-writing-functions.html#cb1433-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb1433-7"><a href="introduction-to-writing-functions.html#cb1433-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1433-8"><a href="introduction-to-writing-functions.html#cb1433-8" aria-hidden="true" tabindex="-1"></a><span class="fu">x_times_y</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 60</code></pre>
<p>Values defined inside the function take precedence over values passed into the function.</p>
<div class="sourceCode" id="cb1435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1435-1"><a href="introduction-to-writing-functions.html#cb1435-1" aria-hidden="true" tabindex="-1"></a>x_times_y <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb1435-2"><a href="introduction-to-writing-functions.html#cb1435-2" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb1435-3"><a href="introduction-to-writing-functions.html#cb1435-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb1435-4"><a href="introduction-to-writing-functions.html#cb1435-4" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">*</span> y</span>
<span id="cb1435-5"><a href="introduction-to-writing-functions.html#cb1435-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1435-6"><a href="introduction-to-writing-functions.html#cb1435-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1435-7"><a href="introduction-to-writing-functions.html#cb1435-7" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb1435-8"><a href="introduction-to-writing-functions.html#cb1435-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1435-9"><a href="introduction-to-writing-functions.html#cb1435-9" aria-hidden="true" tabindex="-1"></a><span class="fu">x_times_y</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 54</code></pre>
</div>
</div>
<div id="case-study-on-grain-yields" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Case Study on Grain Yields<a href="introduction-to-writing-functions.html#case-study-on-grain-yields" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="grain-yields-unit-conversion" class="section level3 hasAnchor" number="12.4.1">
<h3><span class="header-section-number">12.4.1</span> Grain yields &amp; unit conversion<a href="introduction-to-writing-functions.html#grain-yields-unit-conversion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="convert-areas-to-metric-1" class="section level4 hasAnchor" number="12.4.1.1">
<h4><span class="header-section-number">12.4.1.1</span> Convert areas to metric 1<a href="introduction-to-writing-functions.html#convert-areas-to-metric-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this chapter, you’ll be working with <a href="https://www.rdocumentation.org/packages/agridat/topics/nass.corn"><strong>grain yield data</strong></a> from the <a href="https://quickstats.nass.usda.gov/"><strong>United States Department of Agriculture, National Agricultural Statistics Service</strong></a>. Unfortunately, they report all areas in acres.</p>
<p>So, the first thing you need to do is write some utility functions to <em>convert areas in acres to areas in hectares</em>.</p>
<p>To solve this exercise, you need to know the following:</p>
<ol style="list-style-type: decimal">
<li><p>There are 4840 square yards in an acre.</p></li>
<li><p>There are 36 inches in a yard and one inch is 0.0254 meters.</p></li>
<li><p>There are 10000 square meters in a hectare.</p></li>
</ol>
<div class="sourceCode" id="cb1437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1437-1"><a href="introduction-to-writing-functions.html#cb1437-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert areas in acres to areas in square yards.</span></span>
<span id="cb1437-2"><a href="introduction-to-writing-functions.html#cb1437-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert acres to sq. yards</span></span>
<span id="cb1437-3"><a href="introduction-to-writing-functions.html#cb1437-3" aria-hidden="true" tabindex="-1"></a>acres_to_sq_yards <span class="ot">&lt;-</span> <span class="cf">function</span>(acres) {</span>
<span id="cb1437-4"><a href="introduction-to-writing-functions.html#cb1437-4" aria-hidden="true" tabindex="-1"></a>  acres <span class="sc">*</span> <span class="dv">4840</span></span>
<span id="cb1437-5"><a href="introduction-to-writing-functions.html#cb1437-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1437-6"><a href="introduction-to-writing-functions.html#cb1437-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1437-7"><a href="introduction-to-writing-functions.html#cb1437-7" aria-hidden="true" tabindex="-1"></a><span class="co"># convert distances in yards to distances in meters.</span></span>
<span id="cb1437-8"><a href="introduction-to-writing-functions.html#cb1437-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert yards to meters</span></span>
<span id="cb1437-9"><a href="introduction-to-writing-functions.html#cb1437-9" aria-hidden="true" tabindex="-1"></a>yards_to_meters <span class="ot">&lt;-</span> <span class="cf">function</span>(yards) {</span>
<span id="cb1437-10"><a href="introduction-to-writing-functions.html#cb1437-10" aria-hidden="true" tabindex="-1"></a>    yards <span class="sc">*</span> <span class="dv">36</span> <span class="sc">*</span> <span class="fl">0.0254</span></span>
<span id="cb1437-11"><a href="introduction-to-writing-functions.html#cb1437-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1437-12"><a href="introduction-to-writing-functions.html#cb1437-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1437-13"><a href="introduction-to-writing-functions.html#cb1437-13" aria-hidden="true" tabindex="-1"></a><span class="co"># convert areas in square meters to areas in hectares.</span></span>
<span id="cb1437-14"><a href="introduction-to-writing-functions.html#cb1437-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert sq. meters to hectares</span></span>
<span id="cb1437-15"><a href="introduction-to-writing-functions.html#cb1437-15" aria-hidden="true" tabindex="-1"></a>sq_meters_to_hectares <span class="ot">&lt;-</span> <span class="cf">function</span>(sq_meters) {</span>
<span id="cb1437-16"><a href="introduction-to-writing-functions.html#cb1437-16" aria-hidden="true" tabindex="-1"></a>    sq_meters <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb1437-17"><a href="introduction-to-writing-functions.html#cb1437-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="convert-areas-to-metric-2" class="section level4 hasAnchor" number="12.4.1.2">
<h4><span class="header-section-number">12.4.1.2</span> Convert areas to metric 2<a href="introduction-to-writing-functions.html#convert-areas-to-metric-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You need another utility function to deal with getting from square yards to square meters. Then, you can bring everything together to write the overall acres-to-hectares conversion function.</p>
<p>magrittr’s pipeable operator replacements</p>
<ul>
<li><p><code>x * y</code> = <code>x %&gt;% multiply_by(y)</code></p></li>
<li><p><code>x ^ y</code> = <code>x %&gt;% raise_to_power(y)</code></p></li>
<li><p><code>x[y]</code> = <code>x %&gt;% extract2("y")</code></p></li>
</ul>
<div class="sourceCode" id="cb1438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1438-1"><a href="introduction-to-writing-functions.html#cb1438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1438-2"><a href="introduction-to-writing-functions.html#cb1438-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1438-3"><a href="introduction-to-writing-functions.html#cb1438-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert distance in square yards to square meters</span></span>
<span id="cb1438-4"><a href="introduction-to-writing-functions.html#cb1438-4" aria-hidden="true" tabindex="-1"></a>sq_yards_to_sq_meters <span class="ot">&lt;-</span> <span class="cf">function</span>(sq_yards) {</span>
<span id="cb1438-5"><a href="introduction-to-writing-functions.html#cb1438-5" aria-hidden="true" tabindex="-1"></a>  sq_yards <span class="sc">%&gt;%</span></span>
<span id="cb1438-6"><a href="introduction-to-writing-functions.html#cb1438-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Take the square root</span></span>
<span id="cb1438-7"><a href="introduction-to-writing-functions.html#cb1438-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1438-8"><a href="introduction-to-writing-functions.html#cb1438-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert yards to meters</span></span>
<span id="cb1438-9"><a href="introduction-to-writing-functions.html#cb1438-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">yards_to_meters</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1438-10"><a href="introduction-to-writing-functions.html#cb1438-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Square it</span></span>
<span id="cb1438-11"><a href="introduction-to-writing-functions.html#cb1438-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">raise_to_power</span>(<span class="dv">2</span>)</span>
<span id="cb1438-12"><a href="introduction-to-writing-functions.html#cb1438-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1438-13"><a href="introduction-to-writing-functions.html#cb1438-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1438-14"><a href="introduction-to-writing-functions.html#cb1438-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert areas in acres to hectares</span></span>
<span id="cb1438-15"><a href="introduction-to-writing-functions.html#cb1438-15" aria-hidden="true" tabindex="-1"></a>acres_to_hectares <span class="ot">&lt;-</span> <span class="cf">function</span>(acres) {</span>
<span id="cb1438-16"><a href="introduction-to-writing-functions.html#cb1438-16" aria-hidden="true" tabindex="-1"></a>  acres <span class="sc">%&gt;%</span></span>
<span id="cb1438-17"><a href="introduction-to-writing-functions.html#cb1438-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert acres to sq yards</span></span>
<span id="cb1438-18"><a href="introduction-to-writing-functions.html#cb1438-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">acres_to_sq_yards</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1438-19"><a href="introduction-to-writing-functions.html#cb1438-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert sq yards to sq meters</span></span>
<span id="cb1438-20"><a href="introduction-to-writing-functions.html#cb1438-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sq_yards_to_sq_meters</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1438-21"><a href="introduction-to-writing-functions.html#cb1438-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert sq meters to hectares</span></span>
<span id="cb1438-22"><a href="introduction-to-writing-functions.html#cb1438-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sq_meters_to_hectares</span>()</span>
<span id="cb1438-23"><a href="introduction-to-writing-functions.html#cb1438-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1438-24"><a href="introduction-to-writing-functions.html#cb1438-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1438-25"><a href="introduction-to-writing-functions.html#cb1438-25" aria-hidden="true" tabindex="-1"></a><span class="co"># harmonically convert areas in acres to hectares.</span></span>
<span id="cb1438-26"><a href="introduction-to-writing-functions.html#cb1438-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a harmonic acres to hectares function</span></span>
<span id="cb1438-27"><a href="introduction-to-writing-functions.html#cb1438-27" aria-hidden="true" tabindex="-1"></a>harmonic_acres_to_hectares <span class="ot">&lt;-</span> <span class="cf">function</span>(acres) {</span>
<span id="cb1438-28"><a href="introduction-to-writing-functions.html#cb1438-28" aria-hidden="true" tabindex="-1"></a>  acres <span class="sc">%&gt;%</span> </span>
<span id="cb1438-29"><a href="introduction-to-writing-functions.html#cb1438-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the reciprocal</span></span>
<span id="cb1438-30"><a href="introduction-to-writing-functions.html#cb1438-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1438-31"><a href="introduction-to-writing-functions.html#cb1438-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert acres to hectares</span></span>
<span id="cb1438-32"><a href="introduction-to-writing-functions.html#cb1438-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">acres_to_hectares</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1438-33"><a href="introduction-to-writing-functions.html#cb1438-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the reciprocal again</span></span>
<span id="cb1438-34"><a href="introduction-to-writing-functions.html#cb1438-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_reciprocal</span>()</span>
<span id="cb1438-35"><a href="introduction-to-writing-functions.html#cb1438-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>By breaking down this conversion into lots of simple functions, you have easy to read code, which helps guard against bugs.</p>
</div>
<div id="convert-yields-to-metric" class="section level4 hasAnchor" number="12.4.1.3">
<h4><span class="header-section-number">12.4.1.3</span> Convert yields to metric<a href="introduction-to-writing-functions.html#convert-yields-to-metric" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The yields in the NASS corn data are also given in US units, namely bushels per acre.</p>
<p>You’ll need to write some more utility functions to convert this unit to the metric unit of kg per hectare.</p>
<p>Bushels historically meant a volume of 8 gallons, but in the context of grain, they are now defined as masses. This mass differs for each grain! To solve this exercise, you need to know these facts.</p>
<ol style="list-style-type: decimal">
<li>One pound (lb) is 0.45359237 kilograms (kg).</li>
<li>One bushel is 48 lbs of barley, 56 lbs of corn, or 60 lbs of wheat.</li>
</ol>
<div class="sourceCode" id="cb1439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1439-1"><a href="introduction-to-writing-functions.html#cb1439-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert lb to kg</span></span>
<span id="cb1439-2"><a href="introduction-to-writing-functions.html#cb1439-2" aria-hidden="true" tabindex="-1"></a>lbs_to_kgs <span class="ot">&lt;-</span> <span class="cf">function</span>(lbs) {</span>
<span id="cb1439-3"><a href="introduction-to-writing-functions.html#cb1439-3" aria-hidden="true" tabindex="-1"></a>    lbs <span class="sc">*</span> <span class="fl">0.45359237</span></span>
<span id="cb1439-4"><a href="introduction-to-writing-functions.html#cb1439-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1439-5"><a href="introduction-to-writing-functions.html#cb1439-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1439-6"><a href="introduction-to-writing-functions.html#cb1439-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert bushels to lbs</span></span>
<span id="cb1439-7"><a href="introduction-to-writing-functions.html#cb1439-7" aria-hidden="true" tabindex="-1"></a>bushels_to_lbs <span class="ot">&lt;-</span> <span class="cf">function</span>(bushels, crop) {</span>
<span id="cb1439-8"><a href="introduction-to-writing-functions.html#cb1439-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define a lookup table of scale factors</span></span>
<span id="cb1439-9"><a href="introduction-to-writing-functions.html#cb1439-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">barley =</span> <span class="dv">48</span>, <span class="at">corn =</span> <span class="dv">56</span>, <span class="at">wheat =</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1439-10"><a href="introduction-to-writing-functions.html#cb1439-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the value for the crop</span></span>
<span id="cb1439-11"><a href="introduction-to-writing-functions.html#cb1439-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">extract2</span>(crop) <span class="sc">%&gt;%</span></span>
<span id="cb1439-12"><a href="introduction-to-writing-functions.html#cb1439-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Multiply by the no. of bushels</span></span>
<span id="cb1439-13"><a href="introduction-to-writing-functions.html#cb1439-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">multiply_by</span>(bushels)</span>
<span id="cb1439-14"><a href="introduction-to-writing-functions.html#cb1439-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1439-15"><a href="introduction-to-writing-functions.html#cb1439-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1439-16"><a href="introduction-to-writing-functions.html#cb1439-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert bushels to kg</span></span>
<span id="cb1439-17"><a href="introduction-to-writing-functions.html#cb1439-17" aria-hidden="true" tabindex="-1"></a>bushels_to_kgs <span class="ot">&lt;-</span> <span class="cf">function</span>(bushels, crop) {</span>
<span id="cb1439-18"><a href="introduction-to-writing-functions.html#cb1439-18" aria-hidden="true" tabindex="-1"></a>  bushels <span class="sc">%&gt;%</span></span>
<span id="cb1439-19"><a href="introduction-to-writing-functions.html#cb1439-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert bushels to lbs for this crop</span></span>
<span id="cb1439-20"><a href="introduction-to-writing-functions.html#cb1439-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bushels_to_lbs</span>(crop) <span class="sc">%&gt;%</span></span>
<span id="cb1439-21"><a href="introduction-to-writing-functions.html#cb1439-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert lbs to kgs</span></span>
<span id="cb1439-22"><a href="introduction-to-writing-functions.html#cb1439-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lbs_to_kgs</span>()</span>
<span id="cb1439-23"><a href="introduction-to-writing-functions.html#cb1439-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1439-24"><a href="introduction-to-writing-functions.html#cb1439-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1439-25"><a href="introduction-to-writing-functions.html#cb1439-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function to convert bushels/acre to kg/ha</span></span>
<span id="cb1439-26"><a href="introduction-to-writing-functions.html#cb1439-26" aria-hidden="true" tabindex="-1"></a>bushels_per_acre_to_kgs_per_hectare <span class="ot">&lt;-</span> <span class="cf">function</span>(bushels_per_acre, <span class="at">crop =</span> <span class="fu">c</span>(<span class="st">&quot;barley&quot;</span>, <span class="st">&quot;corn&quot;</span>, <span class="st">&quot;wheat&quot;</span>)) {</span>
<span id="cb1439-27"><a href="introduction-to-writing-functions.html#cb1439-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Match the crop argument</span></span>
<span id="cb1439-28"><a href="introduction-to-writing-functions.html#cb1439-28" aria-hidden="true" tabindex="-1"></a>  crop <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(crop)</span>
<span id="cb1439-29"><a href="introduction-to-writing-functions.html#cb1439-29" aria-hidden="true" tabindex="-1"></a>  bushels_per_acre <span class="sc">%&gt;%</span></span>
<span id="cb1439-30"><a href="introduction-to-writing-functions.html#cb1439-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert bushels to kgs for this crop</span></span>
<span id="cb1439-31"><a href="introduction-to-writing-functions.html#cb1439-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bushels_to_kgs</span>(crop) <span class="sc">%&gt;%</span></span>
<span id="cb1439-32"><a href="introduction-to-writing-functions.html#cb1439-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert harmonic acres to ha</span></span>
<span id="cb1439-33"><a href="introduction-to-writing-functions.html#cb1439-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">harmonic_acres_to_hectares</span>()</span>
<span id="cb1439-34"><a href="introduction-to-writing-functions.html#cb1439-34" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>You now have a full stack of functions for converting the units.</p>
</div>
<div id="apply-the-unit-conversion" class="section level4 hasAnchor" number="12.4.1.4">
<h4><span class="header-section-number">12.4.1.4</span> Apply the unit conversion<a href="introduction-to-writing-functions.html#apply-the-unit-conversion" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now that you’ve written some functions, it’s time to apply them! The NASS <code>corn</code> dataset is available, and you can fortify it (jargon for “adding new columns”) with metrics areas and yields.</p>
<p>This fortification process can also be turned into a function, so you’ll define a function for this, and test it on the NASS <code>wheat</code> dataset.</p>
<div class="sourceCode" id="cb1440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1440-1"><a href="introduction-to-writing-functions.html#cb1440-1" aria-hidden="true" tabindex="-1"></a>corn <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/nass.corn.rds&quot;</span>)</span>
<span id="cb1440-2"><a href="introduction-to-writing-functions.html#cb1440-2" aria-hidden="true" tabindex="-1"></a>wheat <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/nass.wheat.rds&quot;</span>)</span>
<span id="cb1440-3"><a href="introduction-to-writing-functions.html#cb1440-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1440-4"><a href="introduction-to-writing-functions.html#cb1440-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the corn dataset</span></span>
<span id="cb1440-5"><a href="introduction-to-writing-functions.html#cb1440-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(corn)</span></code></pre></div>
<pre><code>## Rows: 6,381
## Columns: 4
## $ year                   &lt;int&gt; 1866, 1866, 1866, 1866, 1866, 1866, 1866, …
## $ state                  &lt;chr&gt; &quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;California&quot;, &quot;Conn…
## $ farmed_area_acres      &lt;dbl&gt; 1050000, 280000, 42000, 57000, 200000, 125…
## $ yield_bushels_per_acre &lt;dbl&gt; 9.0, 18.0, 28.0, 34.0, 23.0, 9.0, 6.0, 29.…</code></pre>
<div class="sourceCode" id="cb1442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1442-1"><a href="introduction-to-writing-functions.html#cb1442-1" aria-hidden="true" tabindex="-1"></a>corn <span class="ot">&lt;-</span> corn <span class="sc">%&gt;%</span></span>
<span id="cb1442-2"><a href="introduction-to-writing-functions.html#cb1442-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add some columns</span></span>
<span id="cb1442-3"><a href="introduction-to-writing-functions.html#cb1442-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1442-4"><a href="introduction-to-writing-functions.html#cb1442-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert farmed area from acres to ha</span></span>
<span id="cb1442-5"><a href="introduction-to-writing-functions.html#cb1442-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">farmed_area_ha =</span> <span class="fu">acres_to_hectares</span>(farmed_area_acres),</span>
<span id="cb1442-6"><a href="introduction-to-writing-functions.html#cb1442-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert yield from bushels/acre to kg/ha</span></span>
<span id="cb1442-7"><a href="introduction-to-writing-functions.html#cb1442-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">yield_kg_per_ha =</span> <span class="fu">bushels_per_acre_to_kgs_per_hectare</span>(</span>
<span id="cb1442-8"><a href="introduction-to-writing-functions.html#cb1442-8" aria-hidden="true" tabindex="-1"></a>      yield_bushels_per_acre,</span>
<span id="cb1442-9"><a href="introduction-to-writing-functions.html#cb1442-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span></span>
<span id="cb1442-10"><a href="introduction-to-writing-functions.html#cb1442-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1442-11"><a href="introduction-to-writing-functions.html#cb1442-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1442-12"><a href="introduction-to-writing-functions.html#cb1442-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1442-13"><a href="introduction-to-writing-functions.html#cb1442-13" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(corn)</span></code></pre></div>
<pre><code>## Rows: 6,381
## Columns: 6
## $ year                   &lt;int&gt; 1866, 1866, 1866, 1866, 1866, 1866, 1866, …
## $ state                  &lt;chr&gt; &quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;California&quot;, &quot;Conn…
## $ farmed_area_acres      &lt;dbl&gt; 1050000, 280000, 42000, 57000, 200000, 125…
## $ yield_bushels_per_acre &lt;dbl&gt; 9.0, 18.0, 28.0, 34.0, 23.0, 9.0, 6.0, 29.…
## $ farmed_area_ha         &lt;dbl&gt; 424920, 113312, 16997, 23067, 80937, 50586…
## $ yield_kg_per_ha        &lt;dbl&gt; 565, 1130, 1757, 2134, 1444, 565, 377, 182…</code></pre>
<div class="sourceCode" id="cb1444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1444-1"><a href="introduction-to-writing-functions.html#cb1444-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap this code into a function</span></span>
<span id="cb1444-2"><a href="introduction-to-writing-functions.html#cb1444-2" aria-hidden="true" tabindex="-1"></a>fortify_with_metric_units <span class="ot">&lt;-</span> <span class="cf">function</span>(data, crop) {</span>
<span id="cb1444-3"><a href="introduction-to-writing-functions.html#cb1444-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb1444-4"><a href="introduction-to-writing-functions.html#cb1444-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb1444-5"><a href="introduction-to-writing-functions.html#cb1444-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">farmed_area_ha =</span> <span class="fu">acres_to_hectares</span>(farmed_area_acres),</span>
<span id="cb1444-6"><a href="introduction-to-writing-functions.html#cb1444-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">yield_kg_per_ha =</span> <span class="fu">bushels_per_acre_to_kgs_per_hectare</span>(</span>
<span id="cb1444-7"><a href="introduction-to-writing-functions.html#cb1444-7" aria-hidden="true" tabindex="-1"></a>        yield_bushels_per_acre, </span>
<span id="cb1444-8"><a href="introduction-to-writing-functions.html#cb1444-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">crop =</span> crop</span>
<span id="cb1444-9"><a href="introduction-to-writing-functions.html#cb1444-9" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1444-10"><a href="introduction-to-writing-functions.html#cb1444-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1444-11"><a href="introduction-to-writing-functions.html#cb1444-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1444-12"><a href="introduction-to-writing-functions.html#cb1444-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1444-13"><a href="introduction-to-writing-functions.html#cb1444-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Try it on the wheat dataset</span></span>
<span id="cb1444-14"><a href="introduction-to-writing-functions.html#cb1444-14" aria-hidden="true" tabindex="-1"></a>wheat <span class="ot">&lt;-</span> <span class="fu">fortify_with_metric_units</span>(wheat, <span class="st">&quot;wheat&quot;</span>)</span>
<span id="cb1444-15"><a href="introduction-to-writing-functions.html#cb1444-15" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wheat)</span></code></pre></div>
<pre><code>## Rows: 5,963
## Columns: 6
## $ year                   &lt;int&gt; 1866, 1866, 1866, 1866, 1866, 1866, 1866, …
## $ state                  &lt;chr&gt; &quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;California&quot;, &quot;Conn…
## $ farmed_area_acres      &lt;dbl&gt; 125000, 50000, 650000, 2000, 59000, 245000…
## $ yield_bushels_per_acre &lt;dbl&gt; 5.0, 6.5, 18.0, 17.5, 11.0, 4.0, 10.5, 10.…
## $ farmed_area_ha         &lt;dbl&gt; 50586, 20234, 263046, 809, 23876, 99148, 9…
## $ yield_kg_per_ha        &lt;dbl&gt; 336, 437, 1211, 1177, 740, 269, 706, 673, …</code></pre>
</div>
</div>
<div id="visualizing-grain-yields" class="section level3 hasAnchor" number="12.4.2">
<h3><span class="header-section-number">12.4.2</span> Visualizing grain yields<a href="introduction-to-writing-functions.html#visualizing-grain-yields" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="plot-yields-over-time" class="section level4 hasAnchor" number="12.4.2.1">
<h4><span class="header-section-number">12.4.2.1</span> Plot yields over time<a href="introduction-to-writing-functions.html#plot-yields-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>An obvious question to ask about each crop is, “how do the yields change over time in each US state?”</p>
<div class="sourceCode" id="cb1446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1446-1"><a href="introduction-to-writing-functions.html#cb1446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using corn, plot yield (kg/ha) vs. year</span></span>
<span id="cb1446-2"><a href="introduction-to-writing-functions.html#cb1446-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(corn, <span class="fu">aes</span>(year, yield_kg_per_ha)) <span class="sc">+</span></span>
<span id="cb1446-3"><a href="introduction-to-writing-functions.html#cb1446-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a line layer, grouped by state</span></span>
<span id="cb1446-4"><a href="introduction-to-writing-functions.html#cb1446-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> state)) <span class="sc">+</span></span>
<span id="cb1446-5"><a href="introduction-to-writing-functions.html#cb1446-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a smooth trend layer</span></span>
<span id="cb1446-6"><a href="introduction-to-writing-functions.html#cb1446-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-584-1.png" width="672" /></p>
<p>Turn the plotting code into a function.</p>
<div class="sourceCode" id="cb1448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1448-1"><a href="introduction-to-writing-functions.html#cb1448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap this plotting code into a function</span></span>
<span id="cb1448-2"><a href="introduction-to-writing-functions.html#cb1448-2" aria-hidden="true" tabindex="-1"></a>plot_yield_vs_year <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb1448-3"><a href="introduction-to-writing-functions.html#cb1448-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(year, yield_kg_per_ha)) <span class="sc">+</span></span>
<span id="cb1448-4"><a href="introduction-to-writing-functions.html#cb1448-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> state)) <span class="sc">+</span></span>
<span id="cb1448-5"><a href="introduction-to-writing-functions.html#cb1448-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>()</span>
<span id="cb1448-6"><a href="introduction-to-writing-functions.html#cb1448-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1448-7"><a href="introduction-to-writing-functions.html#cb1448-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1448-8"><a href="introduction-to-writing-functions.html#cb1448-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Test it on the wheat dataset</span></span>
<span id="cb1448-9"><a href="introduction-to-writing-functions.html#cb1448-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_yield_vs_year</span>(wheat)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-585-1.png" width="672" /></p>
<p>Look at the huge increase in yields from the time of the Green Revolution in the 1950s.</p>
</div>
<div id="a-nation-divided" class="section level4 hasAnchor" number="12.4.2.2">
<h4><span class="header-section-number">12.4.2.2</span> A nation divided<a href="introduction-to-writing-functions.html#a-nation-divided" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The USA has a varied climate, so we might expect yields to differ between states. Rather than trying to reason about 50 states separately, we can use the USA Census Regions to get 9 groups.</p>
<p>The “Corn Belt”, where most US corn is grown is in the “West North Central” and “East North Central” regions. The “Wheat Belt” is in the “West South Central” region.</p>
<div class="sourceCode" id="cb1450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1450-1"><a href="introduction-to-writing-functions.html#cb1450-1" aria-hidden="true" tabindex="-1"></a>usa_census_regions <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/usa_census_regions.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb1450-2"><a href="introduction-to-writing-functions.html#cb1450-2" aria-hidden="true" tabindex="-1"></a>usa_census_regions</span></code></pre></div>
<div class="sourceCode" id="cb1451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1451-1"><a href="introduction-to-writing-functions.html#cb1451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner join the corn dataset to usa_census_regions by state</span></span>
<span id="cb1451-2"><a href="introduction-to-writing-functions.html#cb1451-2" aria-hidden="true" tabindex="-1"></a>corn <span class="ot">&lt;-</span> corn <span class="sc">%&gt;%</span></span>
<span id="cb1451-3"><a href="introduction-to-writing-functions.html#cb1451-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(usa_census_regions, <span class="at">by =</span> <span class="st">&quot;state&quot;</span>)</span>
<span id="cb1451-4"><a href="introduction-to-writing-functions.html#cb1451-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1451-5"><a href="introduction-to-writing-functions.html#cb1451-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(corn)</span></code></pre></div>
<pre><code>## Rows: 6,381
## Columns: 7
## $ year                   &lt;int&gt; 1866, 1866, 1866, 1866, 1866, 1866, 1866, …
## $ state                  &lt;chr&gt; &quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;California&quot;, &quot;Conn…
## $ farmed_area_acres      &lt;dbl&gt; 1050000, 280000, 42000, 57000, 200000, 125…
## $ yield_bushels_per_acre &lt;dbl&gt; 9.0, 18.0, 28.0, 34.0, 23.0, 9.0, 6.0, 29.…
## $ farmed_area_ha         &lt;dbl&gt; 424920, 113312, 16997, 23067, 80937, 50586…
## $ yield_kg_per_ha        &lt;dbl&gt; 565, 1130, 1757, 2134, 1444, 565, 377, 182…
## $ census_region          &lt;chr&gt; &quot;East South Central&quot;, &quot;West South Central&quot;…</code></pre>
<p>Turn the code into a function.</p>
<div class="sourceCode" id="cb1453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1453-1"><a href="introduction-to-writing-functions.html#cb1453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap this code into a function</span></span>
<span id="cb1453-2"><a href="introduction-to-writing-functions.html#cb1453-2" aria-hidden="true" tabindex="-1"></a>fortify_with_census_region <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb1453-3"><a href="introduction-to-writing-functions.html#cb1453-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span></span>
<span id="cb1453-4"><a href="introduction-to-writing-functions.html#cb1453-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(usa_census_regions, <span class="at">by =</span> <span class="st">&quot;state&quot;</span>)</span>
<span id="cb1453-5"><a href="introduction-to-writing-functions.html#cb1453-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1453-6"><a href="introduction-to-writing-functions.html#cb1453-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1453-7"><a href="introduction-to-writing-functions.html#cb1453-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Try it on the wheat dataset</span></span>
<span id="cb1453-8"><a href="introduction-to-writing-functions.html#cb1453-8" aria-hidden="true" tabindex="-1"></a>wheat <span class="ot">&lt;-</span> <span class="fu">fortify_with_census_region</span>(wheat)</span>
<span id="cb1453-9"><a href="introduction-to-writing-functions.html#cb1453-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(wheat)</span></code></pre></div>
<pre><code>## Rows: 5,963
## Columns: 7
## $ year                   &lt;int&gt; 1866, 1866, 1866, 1866, 1866, 1866, 1866, …
## $ state                  &lt;chr&gt; &quot;Alabama&quot;, &quot;Arkansas&quot;, &quot;California&quot;, &quot;Conn…
## $ farmed_area_acres      &lt;dbl&gt; 125000, 50000, 650000, 2000, 59000, 245000…
## $ yield_bushels_per_acre &lt;dbl&gt; 5.0, 6.5, 18.0, 17.5, 11.0, 4.0, 10.5, 10.…
## $ farmed_area_ha         &lt;dbl&gt; 50586, 20234, 263046, 809, 23876, 99148, 9…
## $ yield_kg_per_ha        &lt;dbl&gt; 336, 437, 1211, 1177, 740, 269, 706, 673, …
## $ census_region          &lt;chr&gt; &quot;East South Central&quot;, &quot;West South Central&quot;…</code></pre>
<p>With the census data incorporated into the crop datasets, you can now look at yield differences between the regions.</p>
</div>
<div id="plot-yields-over-time-by-region" class="section level4 hasAnchor" number="12.4.2.3">
<h4><span class="header-section-number">12.4.2.3</span> Plot yields over time by region<a href="introduction-to-writing-functions.html#plot-yields-over-time-by-region" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now you are ready to look at how the yields change over time in each region of the USA.</p>
<p>Use the function you wrote to plot yield versus year for the <code>corn</code> dataset, then facet the plot, wrapped by <code>census_region</code>.</p>
<div class="sourceCode" id="cb1455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1455-1"><a href="introduction-to-writing-functions.html#cb1455-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot yield vs. year for the corn dataset</span></span>
<span id="cb1455-2"><a href="introduction-to-writing-functions.html#cb1455-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_yield_vs_year</span>(corn) <span class="sc">+</span></span>
<span id="cb1455-3"><a href="introduction-to-writing-functions.html#cb1455-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet, wrapped by census region</span></span>
<span id="cb1455-4"><a href="introduction-to-writing-functions.html#cb1455-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(census_region))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-589-1.png" width="672" /></p>
<p>The corn yields are highest in the West North Central region, the heart of the Corn Belt.</p>
<p>Turn the code into a function.</p>
<div class="sourceCode" id="cb1457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1457-1"><a href="introduction-to-writing-functions.html#cb1457-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap this code into a function</span></span>
<span id="cb1457-2"><a href="introduction-to-writing-functions.html#cb1457-2" aria-hidden="true" tabindex="-1"></a>plot_yield_vs_year_by_region <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb1457-3"><a href="introduction-to-writing-functions.html#cb1457-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_yield_vs_year</span>(data) <span class="sc">+</span></span>
<span id="cb1457-4"><a href="introduction-to-writing-functions.html#cb1457-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(census_region))</span>
<span id="cb1457-5"><a href="introduction-to-writing-functions.html#cb1457-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1457-6"><a href="introduction-to-writing-functions.html#cb1457-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1457-7"><a href="introduction-to-writing-functions.html#cb1457-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Try it on the wheat dataset</span></span>
<span id="cb1457-8"><a href="introduction-to-writing-functions.html#cb1457-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_yield_vs_year_by_region</span>(wheat)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-590-1.png" width="672" /></p>
<p>For wheat, it looks like the yields are highest in the Wheat Belt (West South Central region) have been overtaken by some other regions.</p>
</div>
</div>
<div id="modeling-grain-yields" class="section level3 hasAnchor" number="12.4.3">
<h3><span class="header-section-number">12.4.3</span> Modeling grain yields<a href="introduction-to-writing-functions.html#modeling-grain-yields" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="running-a-model" class="section level4 hasAnchor" number="12.4.3.1">
<h4><span class="header-section-number">12.4.3.1</span> Running a model<a href="introduction-to-writing-functions.html#running-a-model" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Notice that the lines on the plot aren’t straight. This means that we need to choose a model that handles <em>nonlinear</em> responses. <code>geom_smooth</code> creates the smooth trend lines by using <em>generalized additive models (gam)</em>.</p>
<p><strong>generalized additive model</strong></p>
<p><code>mgcv</code> package GAM syntax:</p>
<p><code>gam(response ~ s(explanatory_var1) + explanatory_var2, data = dataset)</code></p>
<p>Here, <code>s()</code> means “make the variable smooth”, where smooth very roughly means nonlinear.</p>
<div class="sourceCode" id="cb1459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1459-1"><a href="introduction-to-writing-functions.html#cb1459-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb1459-2"><a href="introduction-to-writing-functions.html#cb1459-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1459-3"><a href="introduction-to-writing-functions.html#cb1459-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a generalized additive model of yield vs. smoothed year and census region</span></span>
<span id="cb1459-4"><a href="introduction-to-writing-functions.html#cb1459-4" aria-hidden="true" tabindex="-1"></a>corn_model <span class="ot">&lt;-</span> <span class="fu">gam</span>(yield_kg_per_ha <span class="sc">~</span> <span class="fu">s</span>(year) <span class="sc">+</span> census_region, <span class="at">data =</span> corn)</span>
<span id="cb1459-5"><a href="introduction-to-writing-functions.html#cb1459-5" aria-hidden="true" tabindex="-1"></a>corn_model</span></code></pre></div>
<pre><code>## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## yield_kg_per_ha ~ s(year) + census_region
## 
## Estimated degrees of freedom:
## 7.64  total = 16.6 
## 
## GCV score: 836963</code></pre>
<p>Wrap the modeling code into a function.</p>
<div class="sourceCode" id="cb1461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1461-1"><a href="introduction-to-writing-functions.html#cb1461-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap the model code into a function</span></span>
<span id="cb1461-2"><a href="introduction-to-writing-functions.html#cb1461-2" aria-hidden="true" tabindex="-1"></a>run_gam_yield_vs_year_by_region <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb1461-3"><a href="introduction-to-writing-functions.html#cb1461-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gam</span>(yield_kg_per_ha <span class="sc">~</span> <span class="fu">s</span>(year) <span class="sc">+</span> census_region, <span class="at">data =</span> data)</span>
<span id="cb1461-4"><a href="introduction-to-writing-functions.html#cb1461-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1461-5"><a href="introduction-to-writing-functions.html#cb1461-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1461-6"><a href="introduction-to-writing-functions.html#cb1461-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Try it on the wheat dataset</span></span>
<span id="cb1461-7"><a href="introduction-to-writing-functions.html#cb1461-7" aria-hidden="true" tabindex="-1"></a>wheat_model <span class="ot">&lt;-</span> <span class="fu">run_gam_yield_vs_year_by_region</span>(wheat)</span>
<span id="cb1461-8"><a href="introduction-to-writing-functions.html#cb1461-8" aria-hidden="true" tabindex="-1"></a>wheat_model</span></code></pre></div>
<pre><code>## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## yield_kg_per_ha ~ s(year) + census_region
## 
## Estimated degrees of freedom:
## 7.03  total = 16 
## 
## GCV score: 316685</code></pre>
</div>
<div id="making-yield-predictions" class="section level4 hasAnchor" number="12.4.3.2">
<h4><span class="header-section-number">12.4.3.2</span> Making yield predictions<a href="introduction-to-writing-functions.html#making-yield-predictions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Using the models to make predictions. You can do this using a call to <code>predict()</code>, in the following form:</p>
<p><code>predict(model, cases_to_predict, type = "response")</code></p>
<p>GAMs of the <code>corn</code> and <code>wheat</code> datasets are available as <code>corn_model</code> and <code>wheat_model</code>. A character vector of census regions is stored as <code>census_regions</code>.</p>
<div class="sourceCode" id="cb1463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1463-1"><a href="introduction-to-writing-functions.html#cb1463-1" aria-hidden="true" tabindex="-1"></a>census_regions <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;New England&quot;</span>, <span class="st">&quot;Mid-Atlantic&quot;</span>, <span class="st">&quot;East North Central&quot;</span>, <span class="st">&quot;West North Central&quot;</span>, <span class="st">&quot;South Atlantic&quot;</span>, <span class="st">&quot;East South Central&quot;</span>, <span class="st">&quot;West South Central&quot;</span>, <span class="st">&quot;Mountain&quot;</span>, <span class="st">&quot;Pacific&quot;</span> )</span>
<span id="cb1463-2"><a href="introduction-to-writing-functions.html#cb1463-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1463-3"><a href="introduction-to-writing-functions.html#cb1463-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions in 2050  </span></span>
<span id="cb1463-4"><a href="introduction-to-writing-functions.html#cb1463-4" aria-hidden="true" tabindex="-1"></a>predict_this <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1463-5"><a href="introduction-to-writing-functions.html#cb1463-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2050</span>,</span>
<span id="cb1463-6"><a href="introduction-to-writing-functions.html#cb1463-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">census_region =</span> census_regions</span>
<span id="cb1463-7"><a href="introduction-to-writing-functions.html#cb1463-7" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb1463-8"><a href="introduction-to-writing-functions.html#cb1463-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1463-9"><a href="introduction-to-writing-functions.html#cb1463-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict the yield</span></span>
<span id="cb1463-10"><a href="introduction-to-writing-functions.html#cb1463-10" aria-hidden="true" tabindex="-1"></a>pred_yield_kg_per_ha <span class="ot">&lt;-</span> <span class="fu">predict</span>(corn_model, predict_this, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)</span>
<span id="cb1463-11"><a href="introduction-to-writing-functions.html#cb1463-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1463-12"><a href="introduction-to-writing-functions.html#cb1463-12" aria-hidden="true" tabindex="-1"></a>predict_this <span class="sc">%&gt;%</span></span>
<span id="cb1463-13"><a href="introduction-to-writing-functions.html#cb1463-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the prediction as a column of predict_this </span></span>
<span id="cb1463-14"><a href="introduction-to-writing-functions.html#cb1463-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pred_yield_kg_per_ha =</span> pred_yield_kg_per_ha) <span class="sc">%&gt;%</span></span>
<span id="cb1463-15"><a href="introduction-to-writing-functions.html#cb1463-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pred_yield_kg_per_ha))</span></code></pre></div>
<p>Wrap the script into a function.</p>
<div class="sourceCode" id="cb1464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1464-1"><a href="introduction-to-writing-functions.html#cb1464-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Wrap this prediction code into a function</span></span>
<span id="cb1464-2"><a href="introduction-to-writing-functions.html#cb1464-2" aria-hidden="true" tabindex="-1"></a>predict_yields <span class="ot">&lt;-</span> <span class="cf">function</span>(model, year) {</span>
<span id="cb1464-3"><a href="introduction-to-writing-functions.html#cb1464-3" aria-hidden="true" tabindex="-1"></a>  predict_this <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1464-4"><a href="introduction-to-writing-functions.html#cb1464-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> year,</span>
<span id="cb1464-5"><a href="introduction-to-writing-functions.html#cb1464-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">census_region =</span> census_regions</span>
<span id="cb1464-6"><a href="introduction-to-writing-functions.html#cb1464-6" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb1464-7"><a href="introduction-to-writing-functions.html#cb1464-7" aria-hidden="true" tabindex="-1"></a>  pred_yield_kg_per_ha <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, predict_this, <span class="at">type =</span> <span class="st">&quot;response&quot;</span>)</span>
<span id="cb1464-8"><a href="introduction-to-writing-functions.html#cb1464-8" aria-hidden="true" tabindex="-1"></a>  predict_this <span class="sc">%&gt;%</span></span>
<span id="cb1464-9"><a href="introduction-to-writing-functions.html#cb1464-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pred_yield_kg_per_ha =</span> pred_yield_kg_per_ha) <span class="sc">%&gt;%</span></span>
<span id="cb1464-10"><a href="introduction-to-writing-functions.html#cb1464-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(pred_yield_kg_per_ha))</span>
<span id="cb1464-11"><a href="introduction-to-writing-functions.html#cb1464-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1464-12"><a href="introduction-to-writing-functions.html#cb1464-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1464-13"><a href="introduction-to-writing-functions.html#cb1464-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Try it on the wheat dataset</span></span>
<span id="cb1464-14"><a href="introduction-to-writing-functions.html#cb1464-14" aria-hidden="true" tabindex="-1"></a><span class="fu">predict_yields</span>(wheat_model, <span class="dv">2050</span>)</span></code></pre></div>
<p>The models predict that in 2050, the highest yields will be in the Pacific region for both corn and wheat.</p>
</div>
<div id="do-it-all-over-again" class="section level4 hasAnchor" number="12.4.3.3">
<h4><span class="header-section-number">12.4.3.3</span> Do it all over again<a href="introduction-to-writing-functions.html#do-it-all-over-again" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now you are going to rerun the whole analysis from this chapter on a new crop, barley.</p>
<p>Barley prefers a cooler climate compared to corn and wheat and is commonly grown in the US mountain states of Idaho and Montana.</p>
<p>Since all the infrastructure is in place,</p>
<p><code>fortify_with_metric_units()</code>, <code>fortify_with_census_region()</code>, <code>plot_yield_vs_year_by_region()</code>, <code>run_gam_yield_vs_year_by_region()</code>, and <code>predict_yields()</code></p>
<p>that’s less effort than it sounds!</p>
<div class="sourceCode" id="cb1465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1465-1"><a href="introduction-to-writing-functions.html#cb1465-1" aria-hidden="true" tabindex="-1"></a>barley <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/nass.barley.rds&quot;</span>)</span>
<span id="cb1465-2"><a href="introduction-to-writing-functions.html#cb1465-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(barley)</span></code></pre></div>
<p>Fortify the <code>barley</code> data with metric units, then with census regions.</p>
<div class="sourceCode" id="cb1466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1466-1"><a href="introduction-to-writing-functions.html#cb1466-1" aria-hidden="true" tabindex="-1"></a>fortified_barley <span class="ot">&lt;-</span> barley <span class="sc">%&gt;%</span> </span>
<span id="cb1466-2"><a href="introduction-to-writing-functions.html#cb1466-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fortify with metric units</span></span>
<span id="cb1466-3"><a href="introduction-to-writing-functions.html#cb1466-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fortify_with_metric_units</span>(<span class="st">&quot;barley&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1466-4"><a href="introduction-to-writing-functions.html#cb1466-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fortify with census regions</span></span>
<span id="cb1466-5"><a href="introduction-to-writing-functions.html#cb1466-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fortify_with_census_region</span>()</span>
<span id="cb1466-6"><a href="introduction-to-writing-functions.html#cb1466-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1466-7"><a href="introduction-to-writing-functions.html#cb1466-7" aria-hidden="true" tabindex="-1"></a><span class="co"># See the result</span></span>
<span id="cb1466-8"><a href="introduction-to-writing-functions.html#cb1466-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(fortified_barley)</span></code></pre></div>
<pre><code>## Rows: 4,839
## Columns: 7
## $ year                   &lt;int&gt; 1866, 1866, 1866, 1866, 1866, 1866, 1866, …
## $ state                  &lt;chr&gt; &quot;Connecticut&quot;, &quot;Illinois&quot;, &quot;Indiana&quot;, &quot;Iow…
## $ farmed_area_acres      &lt;dbl&gt; 1000, 96000, 11000, 66000, 2000, 10000, 34…
## $ yield_bushels_per_acre &lt;dbl&gt; 22.5, 23.4, 23.0, 22.0, 23.0, 23.5, 21.5, …
## $ farmed_area_ha         &lt;dbl&gt; 405, 38850, 4452, 26709, 809, 4047, 13759,…
## $ yield_kg_per_ha        &lt;dbl&gt; 1211, 1259, 1237, 1184, 1237, 1264, 1157, …
## $ census_region          &lt;chr&gt; &quot;New England&quot;, &quot;East North Central&quot;, &quot;East…</code></pre>
<p>Plot the yield versus year by census region.</p>
<div class="sourceCode" id="cb1468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1468-1"><a href="introduction-to-writing-functions.html#cb1468-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot yield vs. year by region</span></span>
<span id="cb1468-2"><a href="introduction-to-writing-functions.html#cb1468-2" aria-hidden="true" tabindex="-1"></a>fortified_barley <span class="sc">%&gt;%</span> <span class="fu">plot_yield_vs_year_by_region</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-597-1.png" width="672" /></p>
<p>Run a GAM of yield versus year by census region, then predict the yields in 2050.</p>
<div class="sourceCode" id="cb1470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1470-1"><a href="introduction-to-writing-functions.html#cb1470-1" aria-hidden="true" tabindex="-1"></a>fortified_barley <span class="sc">%&gt;%</span> </span>
<span id="cb1470-2"><a href="introduction-to-writing-functions.html#cb1470-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Run a GAM of yield vs. year by region</span></span>
<span id="cb1470-3"><a href="introduction-to-writing-functions.html#cb1470-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">run_gam_yield_vs_year_by_region</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1470-4"><a href="introduction-to-writing-functions.html#cb1470-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make predictions of yields in 2050</span></span>
<span id="cb1470-5"><a href="introduction-to-writing-functions.html#cb1470-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict_yields</span>(<span class="dv">2050</span>)</span></code></pre></div>
<p>Since all your analysis code was contained in functions, it was really simple to apply it to another dataset. Here you can see that yields are highest in the Mountain region, and the model predicts that this will still be the case in 2050.</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-dates-and-times-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/12-Introduction-to-Writing-Functions-in-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
