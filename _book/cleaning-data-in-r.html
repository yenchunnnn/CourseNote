<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Cleaning Data in R | Data Scientist with R</title>
  <meta name="description" content="This is a notebook about the data science courses took from the datacamp." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Cleaning Data in R | Data Scientist with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a notebook about the data science courses took from the datacamp." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Cleaning Data in R | Data Scientist with R" />
  
  <meta name="twitter:description" content="This is a notebook about the data science courses took from the datacamp." />
  

<meta name="author" content="Yen Chun Chen" />


<meta name="date" content="2024-01-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-importing-data-in-r.html"/>
<link rel="next" href="working-with-dates-and-times-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Scientist with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-arithmetic"><i class="fa fa-check"></i><b>1.1</b> Basic arithmetic</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-data-types"><i class="fa fa-check"></i><b>1.2</b> Basic data types</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vector"><i class="fa fa-check"></i><b>1.3</b> Vector</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function"><i class="fa fa-check"></i><b>1.3.1</b> Useful function</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-brackets-or-names"><i class="fa fa-check"></i><b>1.3.2</b> Selection - by brackets or names</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---operators"><i class="fa fa-check"></i><b>1.3.3</b> Selection - by comparison - operators</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---values"><i class="fa fa-check"></i><b>1.3.4</b> Selection - by comparison - values</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#matrix"><i class="fa fa-check"></i><b>1.4</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-function"><i class="fa fa-check"></i><b>1.4.1</b> Construct function</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-by-vector"><i class="fa fa-check"></i><b>1.4.2</b> Construct by vector</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#naming-a-matrix"><i class="fa fa-check"></i><b>1.4.3</b> Naming a matrix</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---sum-of-each-row-column"><i class="fa fa-check"></i><b>1.4.4</b> Manipulating - sum of each row &amp; column</a></li>
<li class="chapter" data-level="1.4.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-columns"><i class="fa fa-check"></i><b>1.4.5</b> Manipulating - add columns</a></li>
<li class="chapter" data-level="1.4.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-rows"><i class="fa fa-check"></i><b>1.4.6</b> Manipulating - add rows</a></li>
<li class="chapter" data-level="1.4.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection-of-matrix-elements"><i class="fa fa-check"></i><b>1.4.7</b> Selection of matrix elements</a></li>
<li class="chapter" data-level="1.4.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---1"><i class="fa fa-check"></i><b>1.4.8</b> Arithmetic - 1</a></li>
<li class="chapter" data-level="1.4.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---2"><i class="fa fa-check"></i><b>1.4.9</b> Arithmetic - 2</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor"><i class="fa fa-check"></i><b>1.5</b> Factor</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function-1"><i class="fa fa-check"></i><b>1.5.1</b> Useful function</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#nominal-ordinal-categorical-variable"><i class="fa fa-check"></i><b>1.5.2</b> Nominal &amp; Ordinal categorical variable</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor-levels"><i class="fa fa-check"></i><b>1.5.3</b> Factor levels</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#summarizing-a-factor"><i class="fa fa-check"></i><b>1.5.4</b> Summarizing a factor</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ordered-factors"><i class="fa fa-check"></i><b>1.5.5</b> Ordered factors</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frame"><i class="fa fa-check"></i><b>1.6</b> Data Frame</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#quick-look-at-dataset"><i class="fa fa-check"></i><b>1.6.1</b> Quick look at dataset</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-data-frame"><i class="fa fa-check"></i><b>1.6.2</b> Creating a data frame</a></li>
<li class="chapter" data-level="1.6.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---brackets"><i class="fa fa-check"></i><b>1.6.3</b> Selection - brackets</a></li>
<li class="chapter" data-level="1.6.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---names"><i class="fa fa-check"></i><b>1.6.4</b> Selection - names</a></li>
<li class="chapter" data-level="1.6.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection--"><i class="fa fa-check"></i><b>1.6.5</b> Selection - $</a></li>
<li class="chapter" data-level="1.6.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---subset"><i class="fa fa-check"></i><b>1.6.6</b> Selection - subset</a></li>
<li class="chapter" data-level="1.6.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#sorting"><i class="fa fa-check"></i><b>1.6.7</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#list"><i class="fa fa-check"></i><b>1.7</b> List</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-list"><i class="fa fa-check"></i><b>1.7.1</b> Creating a list</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-named-list"><i class="fa fa-check"></i><b>1.7.2</b> Creating a named list</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection"><i class="fa fa-check"></i><b>1.7.3</b> Selection</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#bring-it-all-together"><i class="fa fa-check"></i><b>1.8</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>2</b> Intermediate R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#conditionals-and-control-flow"><i class="fa fa-check"></i><b>2.1</b> Conditionals and Control Flow</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intermediate-r.html"><a href="intermediate-r.html#relational-operators"><i class="fa fa-check"></i><b>2.1.1</b> Relational operators</a></li>
<li class="chapter" data-level="2.1.2" data-path="intermediate-r.html"><a href="intermediate-r.html#conditional-statements"><i class="fa fa-check"></i><b>2.1.2</b> Conditional statements</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#loops"><i class="fa fa-check"></i><b>2.2</b> Loops</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#while-loop"><i class="fa fa-check"></i><b>2.2.1</b> While loop</a></li>
<li class="chapter" data-level="2.2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loop"><i class="fa fa-check"></i><b>2.2.2</b> For loop</a></li>
<li class="chapter" data-level="2.2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#bring-it-all-together-1"><i class="fa fa-check"></i><b>2.2.3</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#function"><i class="fa fa-check"></i><b>2.3</b> Function</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#introduction-to-function"><i class="fa fa-check"></i><b>2.3.1</b> Introduction to function</a></li>
<li class="chapter" data-level="2.3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#writing-functions"><i class="fa fa-check"></i><b>2.3.2</b> Writing functions</a></li>
<li class="chapter" data-level="2.3.3" data-path="intermediate-r.html"><a href="intermediate-r.html#packages"><i class="fa fa-check"></i><b>2.3.3</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intermediate-r.html"><a href="intermediate-r.html#the-apply-family"><i class="fa fa-check"></i><b>2.4</b> The apply family</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply"><i class="fa fa-check"></i><b>2.4.1</b> lapply</a></li>
<li class="chapter" data-level="2.4.2" data-path="intermediate-r.html"><a href="intermediate-r.html#sapply"><i class="fa fa-check"></i><b>2.4.2</b> sapply</a></li>
<li class="chapter" data-level="2.4.3" data-path="intermediate-r.html"><a href="intermediate-r.html#vapply"><i class="fa fa-check"></i><b>2.4.3</b> vapply</a></li>
<li class="chapter" data-level="2.4.4" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply-vs-sapply-vs-vapply"><i class="fa fa-check"></i><b>2.4.4</b> lapply vs sapply vs vapply</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intermediate-r.html"><a href="intermediate-r.html#utilities"><i class="fa fa-check"></i><b>2.5</b> Utilities</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="intermediate-r.html"><a href="intermediate-r.html#mathematical-utilities"><i class="fa fa-check"></i><b>2.5.1</b> Mathematical utilities</a></li>
<li class="chapter" data-level="2.5.2" data-path="intermediate-r.html"><a href="intermediate-r.html#data-structures-utilities"><i class="fa fa-check"></i><b>2.5.2</b> Data structures utilities</a></li>
<li class="chapter" data-level="2.5.3" data-path="intermediate-r.html"><a href="intermediate-r.html#regular-expressions"><i class="fa fa-check"></i><b>2.5.3</b> Regular Expressions</a></li>
<li class="chapter" data-level="2.5.4" data-path="intermediate-r.html"><a href="intermediate-r.html#dates-times"><i class="fa fa-check"></i><b>2.5.4</b> Dates &amp; Times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Introduction to the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-wrangling"><i class="fa fa-check"></i><b>3.1</b> Data wrangling</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#load-dataset"><i class="fa fa-check"></i><b>3.1.1</b> Load dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#filtering"><i class="fa fa-check"></i><b>3.1.2</b> Filtering</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.1.3</b> Arrange</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.1.4</b> Mutate</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-visualization"><i class="fa fa-check"></i><b>3.2</b> Data visualization</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#subset-df-variable"><i class="fa fa-check"></i><b>3.2.1</b> Subset df variable</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#ggplot-aesthetics"><i class="fa fa-check"></i><b>3.2.2</b> ggplot aesthetics</a></li>
<li class="chapter" data-level="3.2.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#faceting"><i class="fa fa-check"></i><b>3.2.3</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grouping-summarizing"><i class="fa fa-check"></i><b>3.3</b> Grouping &amp; summarizing</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#summarize"><i class="fa fa-check"></i><b>3.3.1</b> Summarize</a></li>
<li class="chapter" data-level="3.3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#group-by"><i class="fa fa-check"></i><b>3.3.2</b> Group by</a></li>
<li class="chapter" data-level="3.3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#visualizing-summarized-data"><i class="fa fa-check"></i><b>3.3.3</b> Visualizing summarized data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#types-of-visualizations"><i class="fa fa-check"></i><b>3.4</b> Types of visualizations</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#line-plots"><i class="fa fa-check"></i><b>3.4.1</b> Line plots</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#bar-plots"><i class="fa fa-check"></i><b>3.4.2</b> Bar plots</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#histograms"><i class="fa fa-check"></i><b>3.4.3</b> Histograms</a></li>
<li class="chapter" data-level="3.4.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#box-plots"><i class="fa fa-check"></i><b>3.4.4</b> Box plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#transforming-data"><i class="fa fa-check"></i><b>4.1</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data"><i class="fa fa-check"></i><b>4.1.1</b> Exploring data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#aggregating-data"><i class="fa fa-check"></i><b>4.2</b> Aggregating Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#count"><i class="fa fa-check"></i><b>4.2.1</b> Count</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#group_by-summarize-ungroup"><i class="fa fa-check"></i><b>4.2.2</b> group_by, summarize, ungroup</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#slice_min-slice_max"><i class="fa fa-check"></i><b>4.2.3</b> slice_min, slice_max</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#selecting-and-transforming-data"><i class="fa fa-check"></i><b>4.3</b> Selecting and Transforming Data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#select"><i class="fa fa-check"></i><b>4.3.1</b> Select</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#rename"><i class="fa fa-check"></i><b>4.3.2</b> Rename</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-manipulation.html"><a href="data-manipulation.html#transmute"><i class="fa fa-check"></i><b>4.3.3</b> Transmute</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#case-study-the-babynames-dataset"><i class="fa fa-check"></i><b>4.4</b> Case Study: The babynames Dataset</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#load-dataset-1"><i class="fa fa-check"></i><b>4.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data-1"><i class="fa fa-check"></i><b>4.4.2</b> Exploring data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="joining-data.html"><a href="joining-data.html"><i class="fa fa-check"></i><b>5</b> Joining Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="joining-data.html"><a href="joining-data.html#inner-join"><i class="fa fa-check"></i><b>5.1</b> Inner join</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="joining-data.html"><a href="joining-data.html#join-by-keys"><i class="fa fa-check"></i><b>5.1.1</b> Join by keys</a></li>
<li class="chapter" data-level="5.1.2" data-path="joining-data.html"><a href="joining-data.html#join-with-a-one-to-many-relationship"><i class="fa fa-check"></i><b>5.1.2</b> Join with a one-to-many relationship</a></li>
<li class="chapter" data-level="5.1.3" data-path="joining-data.html"><a href="joining-data.html#join-in-either-direction"><i class="fa fa-check"></i><b>5.1.3</b> Join in either direction</a></li>
<li class="chapter" data-level="5.1.4" data-path="joining-data.html"><a href="joining-data.html#join-three-or-more-tables"><i class="fa fa-check"></i><b>5.1.4</b> Join three or more tables</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="joining-data.html"><a href="joining-data.html#left-right-joins"><i class="fa fa-check"></i><b>5.2</b> Left &amp; Right Joins</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="joining-data.html"><a href="joining-data.html#left-join"><i class="fa fa-check"></i><b>5.2.1</b> Left join</a></li>
<li class="chapter" data-level="5.2.2" data-path="joining-data.html"><a href="joining-data.html#right-join"><i class="fa fa-check"></i><b>5.2.2</b> Right join</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="joining-data.html"><a href="joining-data.html#full-semi-anti-joins"><i class="fa fa-check"></i><b>5.3</b> Full, Semi &amp; Anti Joins</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="joining-data.html"><a href="joining-data.html#full-join"><i class="fa fa-check"></i><b>5.3.1</b> Full join</a></li>
<li class="chapter" data-level="5.3.2" data-path="joining-data.html"><a href="joining-data.html#semi-anti-joins"><i class="fa fa-check"></i><b>5.3.2</b> Semi &amp; Anti joins</a></li>
<li class="chapter" data-level="5.3.3" data-path="joining-data.html"><a href="joining-data.html#visualizing-set-differences"><i class="fa fa-check"></i><b>5.3.3</b> Visualizing set differences</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="joining-data.html"><a href="joining-data.html#case-study-joins-on-stack-overflow-data"><i class="fa fa-check"></i><b>5.4</b> Case study: Joins on Stack Overflow Data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="joining-data.html"><a href="joining-data.html#load-dataset-2"><i class="fa fa-check"></i><b>5.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="5.4.2" data-path="joining-data.html"><a href="joining-data.html#stack-overflow-questions"><i class="fa fa-check"></i><b>5.4.2</b> Stack Overflow questions</a></li>
<li class="chapter" data-level="5.4.3" data-path="joining-data.html"><a href="joining-data.html#joining-questions-and-answers"><i class="fa fa-check"></i><b>5.4.3</b> Joining questions and answers</a></li>
<li class="chapter" data-level="5.4.4" data-path="joining-data.html"><a href="joining-data.html#the-bind_rows-verb"><i class="fa fa-check"></i><b>5.4.4</b> The bind_rows verb</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>6</b> Introduction to Statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#summary-statistics"><i class="fa fa-check"></i><b>6.1</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-center"><i class="fa fa-check"></i><b>6.1.1</b> Measures of center</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-spread"><i class="fa fa-check"></i><b>6.1.2</b> Measures of spread</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#random-numbers-and-probability"><i class="fa fa-check"></i><b>6.2</b> Random Numbers and Probability</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chances"><i class="fa fa-check"></i><b>6.2.1</b> Chances</a></li>
<li class="chapter" data-level="6.2.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#discrete-distributions"><i class="fa fa-check"></i><b>6.2.2</b> Discrete distributions</a></li>
<li class="chapter" data-level="6.2.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#continuous-distributions"><i class="fa fa-check"></i><b>6.2.3</b> Continuous distributions</a></li>
<li class="chapter" data-level="6.2.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#binomial-distribution"><i class="fa fa-check"></i><b>6.2.4</b> Binomial distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#more-distributions-central-limit-theorem"><i class="fa fa-check"></i><b>6.3</b> More Distributions &amp; Central Limit Theorem</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#normal-distribution"><i class="fa fa-check"></i><b>6.3.1</b> Normal distribution</a></li>
<li class="chapter" data-level="6.3.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>6.3.2</b> Central limit theorem</a></li>
<li class="chapter" data-level="6.3.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#poisson-distribution"><i class="fa fa-check"></i><b>6.3.3</b> Poisson distribution</a></li>
<li class="chapter" data-level="6.3.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#exponential-distribution"><i class="fa fa-check"></i><b>6.3.4</b> Exponential distribution</a></li>
<li class="chapter" data-level="6.3.5" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#students-t-distribution"><i class="fa fa-check"></i><b>6.3.5</b> (Student’s) t-distribution</a></li>
<li class="chapter" data-level="6.3.6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#log-normal-distribution"><i class="fa fa-check"></i><b>6.3.6</b> Log-normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-and-experimental-design"><i class="fa fa-check"></i><b>6.4</b> Correlation and Experimental Design</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation"><i class="fa fa-check"></i><b>6.4.1</b> Correlation</a></li>
<li class="chapter" data-level="6.4.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-caveats"><i class="fa fa-check"></i><b>6.4.2</b> Correlation caveats</a></li>
<li class="chapter" data-level="6.4.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#design-of-experiments"><i class="fa fa-check"></i><b>6.4.3</b> Design of experiments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Introduction to Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#data-columns-types-affect-plot-types"><i class="fa fa-check"></i><b>7.1.1</b> Data columns types affect plot types</a></li>
<li class="chapter" data-level="7.1.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1.2</b> The grammar of graphics</a></li>
<li class="chapter" data-level="7.1.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#ggplot2-layers"><i class="fa fa-check"></i><b>7.1.3</b> ggplot2 layers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>7.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#visible-aesthetics"><i class="fa fa-check"></i><b>7.2.1</b> Visible aesthetics</a></li>
<li class="chapter" data-level="7.2.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#using-attributes"><i class="fa fa-check"></i><b>7.2.2</b> Using attributes</a></li>
<li class="chapter" data-level="7.2.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#modifying-aesthetics"><i class="fa fa-check"></i><b>7.2.3</b> Modifying aesthetics</a></li>
<li class="chapter" data-level="7.2.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics-best-practices"><i class="fa fa-check"></i><b>7.2.4</b> Aesthetics best practices</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#geometries"><i class="fa fa-check"></i><b>7.3</b> Geometries</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#scatter-plots"><i class="fa fa-check"></i><b>7.3.1</b> Scatter plots</a></li>
<li class="chapter" data-level="7.3.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#histograms-1"><i class="fa fa-check"></i><b>7.3.2</b> Histograms</a></li>
<li class="chapter" data-level="7.3.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#bar-plots-1"><i class="fa fa-check"></i><b>7.3.3</b> Bar plots</a></li>
<li class="chapter" data-level="7.3.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#line-plots-1"><i class="fa fa-check"></i><b>7.3.4</b> Line plots</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>7.4</b> Themes</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes-from-scratch"><i class="fa fa-check"></i><b>7.4.1</b> Themes from scratch</a></li>
<li class="chapter" data-level="7.4.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#theme-flexibility"><i class="fa fa-check"></i><b>7.4.2</b> Theme flexibility</a></li>
<li class="chapter" data-level="7.4.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#effective-explanatory-plots"><i class="fa fa-check"></i><b>7.4.3</b> Effective explanatory plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Intermediate Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#statistics"><i class="fa fa-check"></i><b>8.1</b> Statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-with-geoms"><i class="fa fa-check"></i><b>8.1.1</b> Stats with geoms</a></li>
<li class="chapter" data-level="8.1.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-sum-quantile"><i class="fa fa-check"></i><b>8.1.2</b> Stats: sum &amp; quantile</a></li>
<li class="chapter" data-level="8.1.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-outside-geoms"><i class="fa fa-check"></i><b>8.1.3</b> Stats outside geoms</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>8.2</b> Coordinates</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>8.2.1</b> Coordinates layer</a></li>
<li class="chapter" data-level="8.2.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-vs.-scales"><i class="fa fa-check"></i><b>8.2.2</b> Coordinates vs. scales</a></li>
<li class="chapter" data-level="8.2.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#double-flipped-axes"><i class="fa fa-check"></i><b>8.2.3</b> Double &amp; flipped axes</a></li>
<li class="chapter" data-level="8.2.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#polar-coordinates"><i class="fa fa-check"></i><b>8.2.4</b> Polar coordinates</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>8.3</b> Facets</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#the-facets-layer"><i class="fa fa-check"></i><b>8.3.1</b> The facets layer</a></li>
<li class="chapter" data-level="8.3.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-labels-order"><i class="fa fa-check"></i><b>8.3.2</b> Facet labels &amp; order</a></li>
<li class="chapter" data-level="8.3.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-plotting-spaces"><i class="fa fa-check"></i><b>8.3.3</b> Facet plotting spaces</a></li>
<li class="chapter" data-level="8.3.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-wrap-margins"><i class="fa fa-check"></i><b>8.3.4</b> Facet wrap &amp; margins</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#best-practices"><i class="fa fa-check"></i><b>8.4</b> Best Practices</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#bar-plots-2"><i class="fa fa-check"></i><b>8.4.1</b> Bar plots</a></li>
<li class="chapter" data-level="8.4.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#heatmaps-use-case-scenario"><i class="fa fa-check"></i><b>8.4.2</b> Heatmaps use case scenario</a></li>
<li class="chapter" data-level="8.4.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#when-good-data-makes-bad-plots"><i class="fa fa-check"></i><b>8.4.3</b> When good data makes bad plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html"><i class="fa fa-check"></i><b>9</b> Introduction to Importing Data in R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#flat-files-with-utils"><i class="fa fa-check"></i><b>9.1</b> Flat files with utils</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.csv"><i class="fa fa-check"></i><b>9.1.1</b> read.csv</a></li>
<li class="chapter" data-level="9.1.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.delim"><i class="fa fa-check"></i><b>9.1.2</b> read.delim</a></li>
<li class="chapter" data-level="9.1.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.table"><i class="fa fa-check"></i><b>9.1.3</b> read.table</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr-data.table"><i class="fa fa-check"></i><b>9.2</b> readr &amp; data.table</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr"><i class="fa fa-check"></i><b>9.2.1</b> readr</a></li>
<li class="chapter" data-level="9.2.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#data.table"><i class="fa fa-check"></i><b>9.2.2</b> data.table</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#excel-data"><i class="fa fa-check"></i><b>9.3</b> Excel data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#list-the-sheets-of-xls-file"><i class="fa fa-check"></i><b>9.3.1</b> List the sheets of xls file</a></li>
<li class="chapter" data-level="9.3.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#import-an-excel-sheet"><i class="fa fa-check"></i><b>9.3.2</b> Import an Excel sheet</a></li>
<li class="chapter" data-level="9.3.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#col_names-skip-argument"><i class="fa fa-check"></i><b>9.3.3</b> col_names &amp; skip argument</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#reproducible-excel-work---xlconnect"><i class="fa fa-check"></i><b>9.4</b> Reproducible Excel work - XLConnect</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets"><i class="fa fa-check"></i><b>9.4.1</b> Adapting sheets</a></li>
<li class="chapter" data-level="9.4.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets-1"><i class="fa fa-check"></i><b>9.4.2</b> Adapting sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html"><i class="fa fa-check"></i><b>10</b> Cleaning Data in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#common-data-problems"><i class="fa fa-check"></i><b>10.1</b> Common Data Problems</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#data-type-constraints"><i class="fa fa-check"></i><b>10.1.1</b> Data type constraints</a></li>
<li class="chapter" data-level="10.1.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#range-constraints"><i class="fa fa-check"></i><b>10.1.2</b> Range constraints</a></li>
<li class="chapter" data-level="10.1.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniqueness-constraints"><i class="fa fa-check"></i><b>10.1.3</b> Uniqueness constraints</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-and-text-data"><i class="fa fa-check"></i><b>10.2</b> Categorical and Text Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#checking-membership"><i class="fa fa-check"></i><b>10.2.1</b> Checking membership</a></li>
<li class="chapter" data-level="10.2.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-data-problems"><i class="fa fa-check"></i><b>10.2.2</b> Categorical data problems</a></li>
<li class="chapter" data-level="10.2.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cleaning-text-data"><i class="fa fa-check"></i><b>10.2.3</b> Cleaning text data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#advanced-data-problems"><i class="fa fa-check"></i><b>10.3</b> Advanced Data Problems</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniformity"><i class="fa fa-check"></i><b>10.3.1</b> Uniformity</a></li>
<li class="chapter" data-level="10.3.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cross-field-validation"><i class="fa fa-check"></i><b>10.3.2</b> Cross field validation</a></li>
<li class="chapter" data-level="10.3.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#completeness"><i class="fa fa-check"></i><b>10.3.3</b> Completeness</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#record-linkage"><i class="fa fa-check"></i><b>10.4</b> Record Linkage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#comparing-strings"><i class="fa fa-check"></i><b>10.4.1</b> Comparing strings</a></li>
<li class="chapter" data-level="10.4.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#generating-and-comparing-pairs"><i class="fa fa-check"></i><b>10.4.2</b> Generating and comparing pairs</a></li>
<li class="chapter" data-level="10.4.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#scoring-and-linking"><i class="fa fa-check"></i><b>10.4.3</b> Scoring and linking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html"><i class="fa fa-check"></i><b>11</b> Working with Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#dates-and-times-in-r"><i class="fa fa-check"></i><b>11.1</b> Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#introduction-to-dates"><i class="fa fa-check"></i><b>11.1.1</b> Introduction to dates</a></li>
<li class="chapter" data-level="11.1.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#why-use-dates"><i class="fa fa-check"></i><b>11.1.2</b> Why use dates?</a></li>
<li class="chapter" data-level="11.1.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#what-about-times"><i class="fa fa-check"></i><b>11.1.3</b> What about times?</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-manipulating-with-lubridate"><i class="fa fa-check"></i><b>11.2</b> Parsing &amp; Manipulating with lubridate</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-dates"><i class="fa fa-check"></i><b>11.2.1</b> Parsing dates</a></li>
<li class="chapter" data-level="11.2.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#manipulating-dates"><i class="fa fa-check"></i><b>11.2.2</b> Manipulating dates</a></li>
<li class="chapter" data-level="11.2.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#extracting-parts-of-a-datetime"><i class="fa fa-check"></i><b>11.2.3</b> Extracting parts of a datetime</a></li>
<li class="chapter" data-level="11.2.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#rounding-datetimes"><i class="fa fa-check"></i><b>11.2.4</b> Rounding datetimes</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#arithmetic-with-dates-and-times"><i class="fa fa-check"></i><b>11.3</b> Arithmetic with Dates and Times</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#taking-differences-of-datetimes"><i class="fa fa-check"></i><b>11.3.1</b> Taking differences of datetimes</a></li>
<li class="chapter" data-level="11.3.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-spans"><i class="fa fa-check"></i><b>11.3.2</b> Time spans</a></li>
<li class="chapter" data-level="11.3.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#intervals"><i class="fa fa-check"></i><b>11.3.3</b> Intervals</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#problems-in-practice"><i class="fa fa-check"></i><b>11.4</b> Problems in practice</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-zones"><i class="fa fa-check"></i><b>11.4.1</b> Time zones</a></li>
<li class="chapter" data-level="11.4.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#more-on-import-and-export-datetimes"><i class="fa fa-check"></i><b>11.4.2</b> More on import and export datetimes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html"><i class="fa fa-check"></i><b>12</b> Introduction to Writing Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#write-a-function"><i class="fa fa-check"></i><b>12.1</b> Write a Function</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#why-write-function"><i class="fa fa-check"></i><b>12.1.1</b> Why write function?</a></li>
<li class="chapter" data-level="12.1.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#convert-scripts-into-functions"><i class="fa fa-check"></i><b>12.1.2</b> Convert scripts into functions</a></li>
<li class="chapter" data-level="12.1.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#readable-code"><i class="fa fa-check"></i><b>12.1.3</b> Readable code</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#all-about-arguments"><i class="fa fa-check"></i><b>12.2</b> All About Arguments</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#default-arguments"><i class="fa fa-check"></i><b>12.2.1</b> Default arguments</a></li>
<li class="chapter" data-level="12.2.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#pass-arguments-between-functions"><i class="fa fa-check"></i><b>12.2.2</b> Pass arguments between functions</a></li>
<li class="chapter" data-level="12.2.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#checking-arguments"><i class="fa fa-check"></i><b>12.2.3</b> Checking arguments</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-values-and-scope"><i class="fa fa-check"></i><b>12.3</b> Return Values and Scope</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#returning-values"><i class="fa fa-check"></i><b>12.3.1</b> Returning values</a></li>
<li class="chapter" data-level="12.3.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-multiple-values"><i class="fa fa-check"></i><b>12.3.2</b> Return multiple values</a></li>
<li class="chapter" data-level="12.3.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#environments"><i class="fa fa-check"></i><b>12.3.3</b> Environments</a></li>
<li class="chapter" data-level="12.3.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#scope-and-precedence"><i class="fa fa-check"></i><b>12.3.4</b> Scope and precedence</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#case-study-on-grain-yields"><i class="fa fa-check"></i><b>12.4</b> Case Study on Grain Yields</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#grain-yields-unit-conversion"><i class="fa fa-check"></i><b>12.4.1</b> Grain yields &amp; unit conversion</a></li>
<li class="chapter" data-level="12.4.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#visualizing-grain-yields"><i class="fa fa-check"></i><b>12.4.2</b> Visualizing grain yields</a></li>
<li class="chapter" data-level="12.4.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#modeling-grain-yields"><i class="fa fa-check"></i><b>12.4.3</b> Modeling grain yields</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html"><i class="fa fa-check"></i><b>13</b> Exploratory Data Analysis in R</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-categorical-data"><i class="fa fa-check"></i><b>13.1</b> Exploring Categorical Data</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#categorical-data"><i class="fa fa-check"></i><b>13.1.1</b> Categorical data</a></li>
<li class="chapter" data-level="13.1.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#counts-vs.-proportions"><i class="fa fa-check"></i><b>13.1.2</b> Counts vs. proportions</a></li>
<li class="chapter" data-level="13.1.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable"><i class="fa fa-check"></i><b>13.1.3</b> Distribution of one variable</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-numerical-data"><i class="fa fa-check"></i><b>13.2</b> Exploring numerical data</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-data"><i class="fa fa-check"></i><b>13.2.1</b> Numerical Data</a></li>
<li class="chapter" data-level="13.2.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable-1"><i class="fa fa-check"></i><b>13.2.2</b> Distribution of one variable</a></li>
<li class="chapter" data-level="13.2.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#box-plots-1"><i class="fa fa-check"></i><b>13.2.3</b> Box plots</a></li>
<li class="chapter" data-level="13.2.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#visual-in-higher-dimensions"><i class="fa fa-check"></i><b>13.2.4</b> Visual in higher dimensions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-summaries"><i class="fa fa-check"></i><b>13.3</b> Numerical Summaries</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-center-1"><i class="fa fa-check"></i><b>13.3.1</b> Measures of center</a></li>
<li class="chapter" data-level="13.3.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-variability"><i class="fa fa-check"></i><b>13.3.2</b> Measures of variability</a></li>
<li class="chapter" data-level="13.3.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#shape-transformations"><i class="fa fa-check"></i><b>13.3.3</b> Shape &amp; transformations</a></li>
<li class="chapter" data-level="13.3.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#outliers"><i class="fa fa-check"></i><b>13.3.4</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#case-study"><i class="fa fa-check"></i><b>13.4</b> Case Study</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#new-data"><i class="fa fa-check"></i><b>13.4.1</b> New data</a></li>
<li class="chapter" data-level="13.4.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-1"><i class="fa fa-check"></i><b>13.4.2</b> Check-in 1</a></li>
<li class="chapter" data-level="13.4.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-2"><i class="fa fa-check"></i><b>13.4.3</b> Check-in 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html"><i class="fa fa-check"></i><b>14</b> Introduction to Regression</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>14.1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#tale-of-two-variables"><i class="fa fa-check"></i><b>14.1.1</b> Tale of two variables</a></li>
<li class="chapter" data-level="14.1.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#fitting-a-linear-regression"><i class="fa fa-check"></i><b>14.1.2</b> Fitting a linear regression</a></li>
<li class="chapter" data-level="14.1.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#categorical-explanatory-variables"><i class="fa fa-check"></i><b>14.1.3</b> Categorical explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-model-objects"><i class="fa fa-check"></i><b>14.2</b> Predictions &amp; model objects</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#making-predictions"><i class="fa fa-check"></i><b>14.2.1</b> Making predictions</a></li>
<li class="chapter" data-level="14.2.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#working-with-model-objects"><i class="fa fa-check"></i><b>14.2.2</b> Working with model objects</a></li>
<li class="chapter" data-level="14.2.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>14.2.3</b> Regression to the mean</a></li>
<li class="chapter" data-level="14.2.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#transforming-variables"><i class="fa fa-check"></i><b>14.2.4</b> Transforming variables</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#assessing-model-fit"><i class="fa fa-check"></i><b>14.3</b> Assessing model fit</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantifying-model-fit"><i class="fa fa-check"></i><b>14.3.1</b> Quantifying model fit</a></li>
<li class="chapter" data-level="14.3.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#visualizing-model-fit"><i class="fa fa-check"></i><b>14.3.2</b> Visualizing model fit</a></li>
<li class="chapter" data-level="14.3.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#outliers-leverage-influence"><i class="fa fa-check"></i><b>14.3.3</b> Outliers, leverage, influence</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-logistic-regression"><i class="fa fa-check"></i><b>14.4</b> Simple logistic regression</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#why-need-logistic-regression"><i class="fa fa-check"></i><b>14.4.1</b> Why need logistic regression</a></li>
<li class="chapter" data-level="14.4.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-odds-ratios"><i class="fa fa-check"></i><b>14.4.2</b> Predictions &amp; odds ratios</a></li>
<li class="chapter" data-level="14.4.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantify-logistic-regression-fit"><i class="fa fa-check"></i><b>14.4.3</b> Quantify logistic regression fit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="intermediate-regression.html"><a href="intermediate-regression.html"><i class="fa fa-check"></i><b>15</b> Intermediate Regression</a>
<ul>
<li class="chapter" data-level="15.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes"><i class="fa fa-check"></i><b>15.1</b> Parallel Slopes</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes-linear-regression"><i class="fa fa-check"></i><b>15.1.1</b> Parallel slopes linear regression</a></li>
<li class="chapter" data-level="15.1.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predicting-parallel-slopes"><i class="fa fa-check"></i><b>15.1.2</b> Predicting parallel slopes</a></li>
<li class="chapter" data-level="15.1.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#assessing-model-performance"><i class="fa fa-check"></i><b>15.1.3</b> Assessing model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#interactions"><i class="fa fa-check"></i><b>15.2</b> Interactions</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#models-for-each-category"><i class="fa fa-check"></i><b>15.2.1</b> Models for each category</a></li>
<li class="chapter" data-level="15.2.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#one-model-with-an-interaction"><i class="fa fa-check"></i><b>15.2.2</b> One model with an interaction</a></li>
<li class="chapter" data-level="15.2.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predict-with-interactions"><i class="fa fa-check"></i><b>15.2.3</b> Predict with interactions</a></li>
<li class="chapter" data-level="15.2.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#simpsons-paradox"><i class="fa fa-check"></i><b>15.2.4</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>15.3</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#two-numeric-ivs"><i class="fa fa-check"></i><b>15.3.1</b> Two numeric IVs</a></li>
<li class="chapter" data-level="15.3.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#more-than-2-ivs"><i class="fa fa-check"></i><b>15.3.2</b> More than 2 IVs</a></li>
<li class="chapter" data-level="15.3.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance"><i class="fa fa-check"></i><b>15.3.3</b> Model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression"><i class="fa fa-check"></i><b>15.4</b> Multiple Logistic Regression</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression-1"><i class="fa fa-check"></i><b>15.4.1</b> Multiple Logistic Regression</a></li>
<li class="chapter" data-level="15.4.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#logistic-distribution"><i class="fa fa-check"></i><b>15.4.2</b> Logistic distribution</a></li>
<li class="chapter" data-level="15.4.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance-1"><i class="fa fa-check"></i><b>15.4.3</b> Model performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sampling-in-r.html"><a href="sampling-in-r.html"><i class="fa fa-check"></i><b>16</b> Sampling in R</a>
<ul>
<li class="chapter" data-level="16.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-sampling"><i class="fa fa-check"></i><b>16.1</b> Introduction to Sampling</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-point-estimates"><i class="fa fa-check"></i><b>16.1.1</b> Sampling &amp; point estimates</a></li>
<li class="chapter" data-level="16.1.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#convenience-sampling"><i class="fa fa-check"></i><b>16.1.2</b> Convenience sampling</a></li>
<li class="chapter" data-level="16.1.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#pseudo-random-number-generation"><i class="fa fa-check"></i><b>16.1.3</b> Pseudo-random number generation</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-methods"><i class="fa fa-check"></i><b>16.2</b> Sampling Methods</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#simple-random-systematic-sampling"><i class="fa fa-check"></i><b>16.2.1</b> Simple random &amp; systematic sampling</a></li>
<li class="chapter" data-level="16.2.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#stratified-weighted-random-sampling"><i class="fa fa-check"></i><b>16.2.2</b> Stratified &amp; weighted random sampling</a></li>
<li class="chapter" data-level="16.2.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#cluster-sampling"><i class="fa fa-check"></i><b>16.2.3</b> Cluster sampling</a></li>
<li class="chapter" data-level="16.2.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-methods"><i class="fa fa-check"></i><b>16.2.4</b> Comparing sampling methods</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-distributions"><i class="fa fa-check"></i><b>16.3</b> Sampling Distributions</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#relative-error-of-point-estimates"><i class="fa fa-check"></i><b>16.3.1</b> Relative error of point estimates</a></li>
<li class="chapter" data-level="16.3.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#creating-a-sampling-distribution"><i class="fa fa-check"></i><b>16.3.2</b> Creating a sampling distribution</a></li>
<li class="chapter" data-level="16.3.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#approximate-sampling-distributions"><i class="fa fa-check"></i><b>16.3.3</b> Approximate sampling distributions</a></li>
<li class="chapter" data-level="16.3.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#standard-errors-clt"><i class="fa fa-check"></i><b>16.3.4</b> Standard errors &amp; CLT</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#bootstrap-distributions"><i class="fa fa-check"></i><b>16.4</b> Bootstrap Distributions</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-bootstrapping"><i class="fa fa-check"></i><b>16.4.1</b> Introduction to bootstrapping</a></li>
<li class="chapter" data-level="16.4.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-bootstrap-distributions"><i class="fa fa-check"></i><b>16.4.2</b> Comparing sampling &amp; bootstrap distributions</a></li>
<li class="chapter" data-level="16.4.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#confidence-intervals"><i class="fa fa-check"></i><b>16.4.3</b> Confidence intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>17</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction-to-hypothesis-testing"><i class="fa fa-check"></i><b>17.1</b> Introduction to Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#hypothesis-tests-z-scores"><i class="fa fa-check"></i><b>17.1.1</b> Hypothesis tests &amp; z-scores</a></li>
<li class="chapter" data-level="17.1.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#p-values"><i class="fa fa-check"></i><b>17.1.2</b> p-values</a></li>
<li class="chapter" data-level="17.1.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#statistical-significance"><i class="fa fa-check"></i><b>17.1.3</b> Statistical significance</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-anova-tests"><i class="fa fa-check"></i><b>17.2</b> Two-Sample &amp; ANOVA Tests</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#performing-t-tests"><i class="fa fa-check"></i><b>17.2.1</b> Performing t-tests</a></li>
<li class="chapter" data-level="17.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#calculating-p-values-from-t-statistics"><i class="fa fa-check"></i><b>17.2.2</b> Calculating p-values from t-statistics</a></li>
<li class="chapter" data-level="17.2.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#paired-t-tests"><i class="fa fa-check"></i><b>17.2.3</b> Paired t-tests</a></li>
<li class="chapter" data-level="17.2.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#anova-tests"><i class="fa fa-check"></i><b>17.2.4</b> ANOVA tests</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#proportion-tests"><i class="fa fa-check"></i><b>17.3</b> Proportion Tests</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.1</b> One-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.2</b> Two-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>17.3.3</b> Chi-square test of independence</a></li>
<li class="chapter" data-level="17.3.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-goodness-of-fit-tests"><i class="fa fa-check"></i><b>17.3.4</b> Chi-square goodness of fit tests</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-tests"><i class="fa fa-check"></i><b>17.4</b> Non-Parametric Tests</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#assumptions-in-hypothesis-testing"><i class="fa fa-check"></i><b>17.4.1</b> Assumptions in hypothesis testing</a></li>
<li class="chapter" data-level="17.4.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#simulation-based-infer-pipeline"><i class="fa fa-check"></i><b>17.4.2</b> Simulation-based infer pipeline</a></li>
<li class="chapter" data-level="17.4.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-anova-unpaired-t-tests"><i class="fa fa-check"></i><b>17.4.3</b> Non-parametric ANOVA &amp; unpaired t-tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i><b>18</b> Experimental Design</a>
<ul>
<li class="chapter" data-level="18.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-to-experimental-design"><i class="fa fa-check"></i><b>18.1</b> Introduction to experimental design</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-1"><i class="fa fa-check"></i><b>18.1.1</b> Introduction</a></li>
<li class="chapter" data-level="18.1.2" data-path="experimental-design.html"><a href="experimental-design.html#replication-blocking"><i class="fa fa-check"></i><b>18.1.2</b> Replication &amp; blocking</a></li>
<li class="chapter" data-level="18.1.3" data-path="experimental-design.html"><a href="experimental-design.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>18.1.3</b> Hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="experimental-design.html"><a href="experimental-design.html#basic-experiments"><i class="fa fa-check"></i><b>18.2</b> Basic Experiments</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="experimental-design.html"><a href="experimental-design.html#anova-factor-experiments"><i class="fa fa-check"></i><b>18.2.1</b> ANOVA &amp; factor experiments</a></li>
<li class="chapter" data-level="18.2.2" data-path="experimental-design.html"><a href="experimental-design.html#model-validation"><i class="fa fa-check"></i><b>18.2.2</b> Model validation</a></li>
<li class="chapter" data-level="18.2.3" data-path="experimental-design.html"><a href="experimental-design.html#ab-testing"><i class="fa fa-check"></i><b>18.2.3</b> A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="experimental-design.html"><a href="experimental-design.html#block-designs"><i class="fa fa-check"></i><b>18.3</b> Block Designs</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="experimental-design.html"><a href="experimental-design.html#intro-to-sampling"><i class="fa fa-check"></i><b>18.3.1</b> Intro to sampling</a></li>
<li class="chapter" data-level="18.3.2" data-path="experimental-design.html"><a href="experimental-design.html#randomized-complete-block-designs-rcbd"><i class="fa fa-check"></i><b>18.3.2</b> Randomized Complete Block Designs (RCBD)</a></li>
<li class="chapter" data-level="18.3.3" data-path="experimental-design.html"><a href="experimental-design.html#balanced-incomplete-block-designs-bibd"><i class="fa fa-check"></i><b>18.3.3</b> Balanced Incomplete Block Designs (BIBD)</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="experimental-design.html"><a href="experimental-design.html#squares-factorial-experiments"><i class="fa fa-check"></i><b>18.4</b> Squares &amp; Factorial Experiments</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="experimental-design.html"><a href="experimental-design.html#latin-squares"><i class="fa fa-check"></i><b>18.4.1</b> Latin squares</a></li>
<li class="chapter" data-level="18.4.2" data-path="experimental-design.html"><a href="experimental-design.html#graeco-latin-squares"><i class="fa fa-check"></i><b>18.4.2</b> Graeco-Latin squares</a></li>
<li class="chapter" data-level="18.4.3" data-path="experimental-design.html"><a href="experimental-design.html#factorial-experiments"><i class="fa fa-check"></i><b>18.4.3</b> Factorial experiments</a></li>
<li class="chapter" data-level="18.4.4" data-path="experimental-design.html"><a href="experimental-design.html#other-experimental-designs"><i class="fa fa-check"></i><b>18.4.4</b> Other experimental designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html"><i class="fa fa-check"></i><b>19</b> Supervised Learning: Classification</a>
<ul>
<li class="chapter" data-level="19.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-nearest-neighbors-knn"><i class="fa fa-check"></i><b>19.1</b> k-Nearest Neighbors (kNN)</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-with-nearest-neighbors"><i class="fa fa-check"></i><b>19.1.1</b> Classification with Nearest Neighbors</a></li>
<li class="chapter" data-level="19.1.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-in-knn"><i class="fa fa-check"></i><b>19.1.2</b> ‘k’ in kNN</a></li>
<li class="chapter" data-level="19.1.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#data-preparation-for-knn"><i class="fa fa-check"></i><b>19.1.3</b> 1-3.Data preparation for kNN</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#naive-bayes"><i class="fa fa-check"></i><b>19.2</b> Naive Bayes</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-bayesian-methods"><i class="fa fa-check"></i><b>19.2.1</b> Understanding Bayesian methods</a></li>
<li class="chapter" data-level="19.2.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-nbs-naivety"><i class="fa fa-check"></i><b>19.2.2</b> Understanding NB’s “naivety”</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#logistic-regression"><i class="fa fa-check"></i><b>19.3</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-binary-predictions-with-regression"><i class="fa fa-check"></i><b>19.3.1</b> Making binary predictions with regression</a></li>
<li class="chapter" data-level="19.3.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#model-performance-tradeoffs"><i class="fa fa-check"></i><b>19.3.2</b> Model performance tradeoffs</a></li>
<li class="chapter" data-level="19.3.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#dummy-variables-missing-data-and-interactions"><i class="fa fa-check"></i><b>19.3.3</b> Dummy variables, missing data, and interactions</a></li>
<li class="chapter" data-level="19.3.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#automatic-feature-selection"><i class="fa fa-check"></i><b>19.3.4</b> Automatic feature selection</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-trees"><i class="fa fa-check"></i><b>19.4</b> Classification Trees</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-decisions-with-trees"><i class="fa fa-check"></i><b>19.4.1</b> Making decisions with trees</a></li>
<li class="chapter" data-level="19.4.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#growing-larger-classification-trees"><i class="fa fa-check"></i><b>19.4.2</b> Growing larger classification trees</a></li>
<li class="chapter" data-level="19.4.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#tending-to-classification-trees"><i class="fa fa-check"></i><b>19.4.3</b> Tending to classification trees</a></li>
<li class="chapter" data-level="19.4.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#seeing-the-forest-from-the-trees"><i class="fa fa-check"></i><b>19.4.4</b> Seeing the forest from the trees</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html"><i class="fa fa-check"></i><b>20</b> Supervised Learning: Regression</a>
<ul>
<li class="chapter" data-level="20.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#what-is-regression"><i class="fa fa-check"></i><b>20.1</b> What is Regression?</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#introduction-2"><i class="fa fa-check"></i><b>20.1.1</b> Introduction</a></li>
<li class="chapter" data-level="20.1.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#linear-regression"><i class="fa fa-check"></i><b>20.1.2</b> Linear regression</a></li>
<li class="chapter" data-level="20.1.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#predicting-model"><i class="fa fa-check"></i><b>20.1.3</b> Predicting model</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-and-evaluating-models"><i class="fa fa-check"></i><b>20.2</b> Training and Evaluating Models</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#graphically"><i class="fa fa-check"></i><b>20.2.1</b> Graphically</a></li>
<li class="chapter" data-level="20.2.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#root-mean-squared-error"><i class="fa fa-check"></i><b>20.2.2</b> Root Mean Squared Error</a></li>
<li class="chapter" data-level="20.2.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#r-squared"><i class="fa fa-check"></i><b>20.2.3</b> R-squared</a></li>
<li class="chapter" data-level="20.2.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-a-model"><i class="fa fa-check"></i><b>20.2.4</b> Training a Model</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#issues-to-consider"><i class="fa fa-check"></i><b>20.3</b> Issues to Consider</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#categorical-iv"><i class="fa fa-check"></i><b>20.3.1</b> Categorical IV</a></li>
<li class="chapter" data-level="20.3.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#interactions-1"><i class="fa fa-check"></i><b>20.3.2</b> Interactions</a></li>
<li class="chapter" data-level="20.3.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-dv-before-modeling"><i class="fa fa-check"></i><b>20.3.3</b> Transforming DV before modeling</a></li>
<li class="chapter" data-level="20.3.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-iv-before-modeling"><i class="fa fa-check"></i><b>20.3.4</b> Transforming IV before modeling</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#dealing-with-non-linear-responses"><i class="fa fa-check"></i><b>20.4</b> Dealing with Non-Linear Responses</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#logistic-regression-to-predict-probabilities"><i class="fa fa-check"></i><b>20.4.1</b> Logistic regression to predict probabilities</a></li>
<li class="chapter" data-level="20.4.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#poisson-and-quasipoisson-regression-to-predict-counts"><i class="fa fa-check"></i><b>20.4.2</b> Poisson and quasipoisson regression to predict counts</a></li>
<li class="chapter" data-level="20.4.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gam-to-learn-non-linear-transforms"><i class="fa fa-check"></i><b>20.4.3</b> GAM to learn non-linear transforms</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#tree-based-methods"><i class="fa fa-check"></i><b>20.5</b> Tree-Based Methods</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#random-forests"><i class="fa fa-check"></i><b>20.5.1</b> Random forests</a></li>
<li class="chapter" data-level="20.5.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#one-hot-encoding"><i class="fa fa-check"></i><b>20.5.2</b> One-Hot-Encoding</a></li>
<li class="chapter" data-level="20.5.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gradient-boosting"><i class="fa fa-check"></i><b>20.5.3</b> Gradient boosting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>21</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="21.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>21.1</b> k-means clustering</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#types-of-machine-learning"><i class="fa fa-check"></i><b>21.1.1</b> Types of machine learning</a></li>
<li class="chapter" data-level="21.1.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-to-k-means"><i class="fa fa-check"></i><b>21.1.2</b> Introduction to k-means</a></li>
<li class="chapter" data-level="21.1.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#model-selection"><i class="fa fa-check"></i><b>21.1.3</b> Model selection</a></li>
<li class="chapter" data-level="21.1.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#pokemon-data"><i class="fa fa-check"></i><b>21.1.4</b> Pokemon data</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>21.2</b> Hierarchical clustering</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-3"><i class="fa fa-check"></i><b>21.2.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#selecting-number-of-clusters-1"><i class="fa fa-check"></i><b>21.2.2</b> Selecting number of clusters</a></li>
<li class="chapter" data-level="21.2.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-linkage"><i class="fa fa-check"></i><b>21.2.3</b> Clustering linkage</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction---pca"><i class="fa fa-check"></i><b>21.3</b> Dimensionality reduction - PCA</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-4"><i class="fa fa-check"></i><b>21.3.1</b> Introduction</a></li>
<li class="chapter" data-level="21.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#visualizing-and-interpreting-1"><i class="fa fa-check"></i><b>21.3.2</b> Visualizing and interpreting</a></li>
<li class="chapter" data-level="21.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#practical-issues"><i class="fa fa-check"></i><b>21.3.3</b> Practical issues</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#case-study-1"><i class="fa fa-check"></i><b>21.4</b> Case study</a>
<ul>
<li class="chapter" data-level="21.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-5"><i class="fa fa-check"></i><b>21.4.1</b> Introduction</a></li>
<li class="chapter" data-level="21.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#next-steps"><i class="fa fa-check"></i><b>21.4.2</b> Next steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html"><i class="fa fa-check"></i><b>22</b> Intermediate Importing Data in R</a>
<ul>
<li class="chapter" data-level="22.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-1"><i class="fa fa-check"></i><b>22.1</b> Import from databases-1</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#connect-to-a-database"><i class="fa fa-check"></i><b>22.1.1</b> Connect to a database</a></li>
<li class="chapter" data-level="22.1.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-table-data"><i class="fa fa-check"></i><b>22.1.2</b> Import table data</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-2"><i class="fa fa-check"></i><b>22.2</b> Import from databases-2</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#sql-queries-from-inside-r"><i class="fa fa-check"></i><b>22.2.1</b> SQL Queries from inside R</a></li>
<li class="chapter" data-level="22.2.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#dbi-internals"><i class="fa fa-check"></i><b>22.2.2</b> DBI internals</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-1"><i class="fa fa-check"></i><b>22.3</b> Import from the web-1</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#http"><i class="fa fa-check"></i><b>22.3.1</b> HTTP</a></li>
<li class="chapter" data-level="22.3.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#downloading-files"><i class="fa fa-check"></i><b>22.3.2</b> Downloading files</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-2"><i class="fa fa-check"></i><b>22.4</b> Import from the web-2</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#apis-json"><i class="fa fa-check"></i><b>22.4.1</b> APIs &amp; JSON</a></li>
<li class="chapter" data-level="22.4.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#json-jsonlite"><i class="fa fa-check"></i><b>22.4.2</b> JSON &amp; jsonlite</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-statistical-software"><i class="fa fa-check"></i><b>22.5</b> Import from statistical software</a>
<ul>
<li class="chapter" data-level="22.5.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#haven-package"><i class="fa fa-check"></i><b>22.5.1</b> haven package</a></li>
<li class="chapter" data-level="22.5.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#foreign-package"><i class="fa fa-check"></i><b>22.5.2</b> foreign package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html"><i class="fa fa-check"></i><b>23</b> Introduction to SQL</a>
<ul>
<li class="chapter" data-level="23.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#relational-databases"><i class="fa fa-check"></i><b>23.1</b> Relational Databases</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#databases"><i class="fa fa-check"></i><b>23.1.1</b> Databases</a></li>
<li class="chapter" data-level="23.1.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#tables"><i class="fa fa-check"></i><b>23.1.2</b> Tables</a></li>
<li class="chapter" data-level="23.1.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#data"><i class="fa fa-check"></i><b>23.1.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#querying"><i class="fa fa-check"></i><b>23.2</b> Querying</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#introducing"><i class="fa fa-check"></i><b>23.2.1</b> Introducing</a></li>
<li class="chapter" data-level="23.2.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#writing-queries"><i class="fa fa-check"></i><b>23.2.2</b> Writing queries</a></li>
<li class="chapter" data-level="23.2.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#sql-flavors"><i class="fa fa-check"></i><b>23.2.3</b> SQL flavors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="intermediate-sql.html"><a href="intermediate-sql.html"><i class="fa fa-check"></i><b>24</b> Intermediate SQL</a>
<ul>
<li class="chapter" data-level="24.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#selecting-data"><i class="fa fa-check"></i><b>24.1</b> Selecting Data</a>
<ul>
<li class="chapter" data-level="24.1.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#querying-a-database"><i class="fa fa-check"></i><b>24.1.1</b> Querying a database</a></li>
<li class="chapter" data-level="24.1.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#query-execution"><i class="fa fa-check"></i><b>24.1.2</b> Query execution</a></li>
<li class="chapter" data-level="24.1.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sql-style"><i class="fa fa-check"></i><b>24.1.3</b> SQL style</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-records"><i class="fa fa-check"></i><b>24.2</b> Filtering Records</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-numbers"><i class="fa fa-check"></i><b>24.2.1</b> Filtering numbers</a></li>
<li class="chapter" data-level="24.2.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#multiple-criteria"><i class="fa fa-check"></i><b>24.2.2</b> Multiple criteria</a></li>
<li class="chapter" data-level="24.2.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-text"><i class="fa fa-check"></i><b>24.2.3</b> Filtering text</a></li>
<li class="chapter" data-level="24.2.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#null-values"><i class="fa fa-check"></i><b>24.2.4</b> NULL values</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aggregate-functions"><i class="fa fa-check"></i><b>24.3</b> Aggregate Functions</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-data"><i class="fa fa-check"></i><b>24.3.1</b> Summarizing data</a></li>
<li class="chapter" data-level="24.3.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-subsets"><i class="fa fa-check"></i><b>24.3.2</b> Summarizing subsets</a></li>
<li class="chapter" data-level="24.3.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aliasing-and-arithmetic"><i class="fa fa-check"></i><b>24.3.3</b> Aliasing and arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-and-grouping"><i class="fa fa-check"></i><b>24.4</b> Sorting and Grouping</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-results"><i class="fa fa-check"></i><b>24.4.1</b> Sorting results</a></li>
<li class="chapter" data-level="24.4.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#grouping-data"><i class="fa fa-check"></i><b>24.4.2</b> Grouping data</a></li>
<li class="chapter" data-level="24.4.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-grouped-data"><i class="fa fa-check"></i><b>24.4.3</b> Filtering grouped data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html"><i class="fa fa-check"></i><b>25</b> Joining Data in SQL</a>
<ul>
<li class="chapter" data-level="25.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inner-joins"><i class="fa fa-check"></i><b>25.1</b> Inner Joins</a>
<ul>
<li class="chapter" data-level="25.1.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#ins-outs-of-inner-join"><i class="fa fa-check"></i><b>25.1.1</b> ins &amp; outs of INNER JOIN</a></li>
<li class="chapter" data-level="25.1.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#defining-relationships"><i class="fa fa-check"></i><b>25.1.2</b> Defining relationships</a></li>
<li class="chapter" data-level="25.1.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#multiple-joins"><i class="fa fa-check"></i><b>25.1.3</b> Multiple joins</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#outer-cross-self-joins"><i class="fa fa-check"></i><b>25.2</b> Outer, Cross &amp; Self Joins</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#left-right-joins-1"><i class="fa fa-check"></i><b>25.2.1</b> LEFT &amp; RIGHT JOINs</a></li>
<li class="chapter" data-level="25.2.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#full-join-1"><i class="fa fa-check"></i><b>25.2.2</b> FULL JOIN</a></li>
<li class="chapter" data-level="25.2.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#cross-join"><i class="fa fa-check"></i><b>25.2.3</b> CROSS JOIN</a></li>
<li class="chapter" data-level="25.2.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#self-joins"><i class="fa fa-check"></i><b>25.2.4</b> Self joins</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#set-theory-for-sql-joins"><i class="fa fa-check"></i><b>25.3</b> Set Theory for SQL Joins</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#union-vs.-union-all"><i class="fa fa-check"></i><b>25.3.1</b> UNION vs. UNION ALL</a></li>
<li class="chapter" data-level="25.3.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#intersect"><i class="fa fa-check"></i><b>25.3.2</b> INTERSECT</a></li>
<li class="chapter" data-level="25.3.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#except"><i class="fa fa-check"></i><b>25.3.3</b> EXCEPT</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#subqueries"><i class="fa fa-check"></i><b>25.4</b> Subqueries</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#with-semi-joins-anti-joins"><i class="fa fa-check"></i><b>25.4.1</b> With semi joins &amp; anti joins</a></li>
<li class="chapter" data-level="25.4.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-where-select"><i class="fa fa-check"></i><b>25.4.2</b> Inside WHERE &amp; SELECT</a></li>
<li class="chapter" data-level="25.4.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-from"><i class="fa fa-check"></i><b>25.4.3</b> Inside FROM</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="introduction-to-git.html"><a href="introduction-to-git.html"><i class="fa fa-check"></i><b>26</b> Introduction to Git</a>
<ul>
<li class="chapter" data-level="26.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#introduction-6"><i class="fa fa-check"></i><b>26.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="26.1.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#useful-shell-commands"><i class="fa fa-check"></i><b>26.1.1</b> Useful shell commands</a></li>
<li class="chapter" data-level="26.1.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#saving-files"><i class="fa fa-check"></i><b>26.1.2</b> Saving files</a></li>
<li class="chapter" data-level="26.1.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-files"><i class="fa fa-check"></i><b>26.1.3</b> Comparing files</a></li>
</ul></li>
<li class="chapter" data-level="26.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#making-changes"><i class="fa fa-check"></i><b>26.2</b> Making changes</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#storing-data-with-git"><i class="fa fa-check"></i><b>26.2.1</b> Storing data with Git</a></li>
<li class="chapter" data-level="26.2.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#viewing-changes"><i class="fa fa-check"></i><b>26.2.2</b> Viewing changes</a></li>
<li class="chapter" data-level="26.2.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#undoing-changes-before-committing"><i class="fa fa-check"></i><b>26.2.3</b> Undoing changes before committing</a></li>
<li class="chapter" data-level="26.2.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#restoring-and-reverting"><i class="fa fa-check"></i><b>26.2.4</b> Restoring and reverting</a></li>
</ul></li>
<li class="chapter" data-level="26.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#git-workflows"><i class="fa fa-check"></i><b>26.3</b> Git workflows</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#configuring-git"><i class="fa fa-check"></i><b>26.3.1</b> Configuring Git</a></li>
<li class="chapter" data-level="26.3.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#branches"><i class="fa fa-check"></i><b>26.3.2</b> Branches</a></li>
<li class="chapter" data-level="26.3.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-branches"><i class="fa fa-check"></i><b>26.3.3</b> Working with branches</a></li>
<li class="chapter" data-level="26.3.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#handling-conflict"><i class="fa fa-check"></i><b>26.3.4</b> Handling conflict</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#collaborating-with-git"><i class="fa fa-check"></i><b>26.4</b> Collaborating with Git</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#creating-repos"><i class="fa fa-check"></i><b>26.4.1</b> Creating repos</a></li>
<li class="chapter" data-level="26.4.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-remotes"><i class="fa fa-check"></i><b>26.4.2</b> Working with remotes</a></li>
<li class="chapter" data-level="26.4.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pulling-from-a-remote"><i class="fa fa-check"></i><b>26.4.3</b> Pulling from a remote</a></li>
<li class="chapter" data-level="26.4.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pushing-to-a-remote"><i class="fa fa-check"></i><b>26.4.4</b> Pushing to a remote</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Scientist with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cleaning-data-in-r" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Chapter 10</span> Cleaning Data in R<a href="cleaning-data-in-r.html#cleaning-data-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="common-data-problems" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Common Data Problems<a href="cleaning-data-in-r.html#common-data-problems" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="data-type-constraints" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Data type constraints<a href="cleaning-data-in-r.html#data-type-constraints" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Glimpsing at data types</p></li>
<li><p>Checking data types:</p>
<ul>
<li><p><code>is.*()</code>, return <code>TRUE</code>/<code>FALSE</code></p></li>
<li><p><code>class(), return data type</code></p></li>
</ul></li>
<li><p>Converting data types</p>
<ul>
<li><p><code>as.*()</code></p></li>
<li><p>notice for factor to numeric: <code>as.numeric(as.character())</code></p></li>
</ul></li>
</ul>
<div id="converting-data-types" class="section level4 hasAnchor" number="10.1.1.1">
<h4><span class="header-section-number">10.1.1.1</span> Converting data types<a href="cleaning-data-in-r.html#converting-data-types" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Throughout this chapter, you’ll be working with San Francisco bike share ride data called <code>bike_share_rides</code>. It contains information on start and end stations of each trip, the trip duration, and some user information.</p>
<div class="sourceCode" id="cb1055"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1055-1"><a href="cleaning-data-in-r.html#cb1055-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1055-2"><a href="cleaning-data-in-r.html#cb1055-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/bike_share_rides_ch1_1.rds&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1056"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1056-1"><a href="cleaning-data-in-r.html#cb1056-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Glimpse at bike_share_rides</span></span>
<span id="cb1056-2"><a href="cleaning-data-in-r.html#cb1056-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(bike_share_rides)</span></code></pre></div>
<pre><code>## Rows: 35,229
## Columns: 10
## $ ride_id         &lt;int&gt; 52797, 54540, 87695, 45619, 70832, 96135, 29928, …
## $ date            &lt;chr&gt; &quot;2017-04-15&quot;, &quot;2017-04-19&quot;, &quot;2017-04-14&quot;, &quot;2017-0…
## $ duration        &lt;chr&gt; &quot;1316.15 minutes&quot;, &quot;8.13 minutes&quot;, &quot;24.85 minutes…
## $ station_A_id    &lt;dbl&gt; 67, 21, 16, 58, 16, 6, 5, 16, 5, 81, 30, 16, 16, …
## $ station_A_name  &lt;chr&gt; &quot;San Francisco Caltrain Station 2  (Townsend St a…
## $ station_B_id    &lt;dbl&gt; 89, 64, 355, 368, 81, 66, 350, 91, 62, 81, 109, 1…
## $ station_B_name  &lt;chr&gt; &quot;Division St at Potrero Ave&quot;, &quot;5th St at Brannan …
## $ bike_id         &lt;dbl&gt; 1974, 860, 2263, 1417, 507, 75, 388, 239, 1449, 3…
## $ user_gender     &lt;chr&gt; &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;…
## $ user_birth_year &lt;dbl&gt; 1972, 1986, 1993, 1981, 1981, 1988, 1993, 1996, 1…</code></pre>
<div class="sourceCode" id="cb1058"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1058-1"><a href="cleaning-data-in-r.html#cb1058-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of user_birth_year</span></span>
<span id="cb1058-2"><a href="cleaning-data-in-r.html#cb1058-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bike_share_rides<span class="sc">$</span>user_birth_year)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1900    1979    1986    1984    1991    2001</code></pre>
<div class="sourceCode" id="cb1060"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1060-1"><a href="cleaning-data-in-r.html#cb1060-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert user_birth_year to factor: user_birth_year_fct</span></span>
<span id="cb1060-2"><a href="cleaning-data-in-r.html#cb1060-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1060-3"><a href="cleaning-data-in-r.html#cb1060-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">user_birth_year_fct =</span> <span class="fu">as.factor</span>(user_birth_year))</span>
<span id="cb1060-4"><a href="cleaning-data-in-r.html#cb1060-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-5"><a href="cleaning-data-in-r.html#cb1060-5" aria-hidden="true" tabindex="-1"></a><span class="co"># check user_birth_year_fct is a factor</span></span>
<span id="cb1060-6"><a href="cleaning-data-in-r.html#cb1060-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(bike_share_rides<span class="sc">$</span>user_birth_year_fct)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1062"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1062-1"><a href="cleaning-data-in-r.html#cb1062-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of user_birth_year_fct</span></span>
<span id="cb1062-2"><a href="cleaning-data-in-r.html#cb1062-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bike_share_rides<span class="sc">$</span>user_birth_year_fct)</span></code></pre></div>
<pre><code>## 1900 1902 1923 1931 1938 1939 1941 1942 1943 1945 1946 1947 1948 1949 1950 
##    1    7    2   23    2    1    3   10    4   16    5   24    9   30   37 
## 1951 1952 1953 1954 1955 1956 1957 1958 1959 1960 1961 1962 1963 1964 1965 
##   25   70   49   65   66  112   62  156   99  196  161  256  237  245  349 
## 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 
##  225  363  365  331  370  548  529  527  563  601  481  541  775  876  825 
## 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 
## 1016 1056 1262 1157 1318 1606 1672 2135 1872 2062 1582 1703 1498 1476 1185 
## 1996 1997 1998 1999 2000 2001 
##  813  358  365  348  473   30</code></pre>
</div>
<div id="trimming-strings" class="section level4 hasAnchor" number="10.1.1.2">
<h4><span class="header-section-number">10.1.1.2</span> Trimming strings<a href="cleaning-data-in-r.html#trimming-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Another common dirty data problem is having extra bits like percent signs or periods in numbers, causing them to be read in as <code>characters</code>. In order to be able to crunch these numbers, the extra bits need to be removed and the numbers need to be converted from <code>character</code> to <code>numeric</code>.</p>
<div class="sourceCode" id="cb1064"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1064-1"><a href="cleaning-data-in-r.html#cb1064-1" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1064-2"><a href="cleaning-data-in-r.html#cb1064-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove &#39;minutes&#39; from duration: duration_trimmed</span></span>
<span id="cb1064-3"><a href="cleaning-data-in-r.html#cb1064-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration_trimmed =</span> <span class="fu">str_remove</span>(duration, <span class="st">&quot;minutes&quot;</span>),</span>
<span id="cb1064-4"><a href="cleaning-data-in-r.html#cb1064-4" aria-hidden="true" tabindex="-1"></a>         <span class="co"># Convert duration_trimmed to numeric: duration_mins</span></span>
<span id="cb1064-5"><a href="cleaning-data-in-r.html#cb1064-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">duration_mins =</span> <span class="fu">as.numeric</span>(duration_trimmed))</span>
<span id="cb1064-6"><a href="cleaning-data-in-r.html#cb1064-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1064-7"><a href="cleaning-data-in-r.html#cb1064-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Glimpse at bike_share_rides</span></span>
<span id="cb1064-8"><a href="cleaning-data-in-r.html#cb1064-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(bike_share_rides)</span></code></pre></div>
<pre><code>## Rows: 35,229
## Columns: 13
## $ ride_id             &lt;int&gt; 52797, 54540, 87695, 45619, 70832, 96135, 299…
## $ date                &lt;chr&gt; &quot;2017-04-15&quot;, &quot;2017-04-19&quot;, &quot;2017-04-14&quot;, &quot;20…
## $ duration            &lt;chr&gt; &quot;1316.15 minutes&quot;, &quot;8.13 minutes&quot;, &quot;24.85 min…
## $ station_A_id        &lt;dbl&gt; 67, 21, 16, 58, 16, 6, 5, 16, 5, 81, 30, 16, …
## $ station_A_name      &lt;chr&gt; &quot;San Francisco Caltrain Station 2  (Townsend …
## $ station_B_id        &lt;dbl&gt; 89, 64, 355, 368, 81, 66, 350, 91, 62, 81, 10…
## $ station_B_name      &lt;chr&gt; &quot;Division St at Potrero Ave&quot;, &quot;5th St at Bran…
## $ bike_id             &lt;dbl&gt; 1974, 860, 2263, 1417, 507, 75, 388, 239, 144…
## $ user_gender         &lt;chr&gt; &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Male…
## $ user_birth_year     &lt;dbl&gt; 1972, 1986, 1993, 1981, 1981, 1988, 1993, 199…
## $ user_birth_year_fct &lt;fct&gt; 1972, 1986, 1993, 1981, 1981, 1988, 1993, 199…
## $ duration_trimmed    &lt;chr&gt; &quot;1316.15 &quot;, &quot;8.13 &quot;, &quot;24.85 &quot;, &quot;6.35 &quot;, &quot;9.8 …
## $ duration_mins       &lt;dbl&gt; 1316.15, 8.13, 24.85, 6.35, 9.80, 17.47, 16.5…</code></pre>
<div class="sourceCode" id="cb1066"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1066-1"><a href="cleaning-data-in-r.html#cb1066-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assert duration_mins is numeric</span></span>
<span id="cb1066-2"><a href="cleaning-data-in-r.html#cb1066-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(bike_share_rides<span class="sc">$</span>duration_mins)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb1068"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1068-1"><a href="cleaning-data-in-r.html#cb1068-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean duration</span></span>
<span id="cb1068-2"><a href="cleaning-data-in-r.html#cb1068-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(bike_share_rides<span class="sc">$</span>duration_mins)</span></code></pre></div>
<pre><code>## [1] 13.1</code></pre>
</div>
</div>
<div id="range-constraints" class="section level3 hasAnchor" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span> Range constraints<a href="cleaning-data-in-r.html#range-constraints" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Finding out of range values (不可能出現的值)</p>
<p>For example:</p>
<ul>
<li>SAT score: 400-1600 -&gt; 352 or 1700 are out of range</li>
<li>Adult heart rate: 60-100 beats per minute</li>
</ul></li>
<li><p>Handling out of range values</p>
<ul>
<li><p>Remove rows</p></li>
<li><p>Treat as missing ( <code>NA</code> )</p></li>
<li><p>Replace with range limit</p></li>
<li><p>Replace with other value based on domain knowledge and/or knowledge of dataset</p></li>
</ul></li>
</ul>
<div id="numerical-data-constraints" class="section level4 hasAnchor" number="10.1.2.1">
<h4><span class="header-section-number">10.1.2.1</span> Numerical data constraints<a href="cleaning-data-in-r.html#numerical-data-constraints" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Bikes are not allowed to be kept out for more than 24 hours, or 1440 minutes at a time, but issues with some of the bikes caused inaccurate recording of the time they were returned. In this exercise, you’ll replace erroneous data with the range limit (1440 minutes).</p>
<div class="sourceCode" id="cb1070"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1070-1"><a href="cleaning-data-in-r.html#cb1070-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset</span></span>
<span id="cb1070-2"><a href="cleaning-data-in-r.html#cb1070-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/bike_share_rides_duration.csv&quot;</span>)</span>
<span id="cb1070-3"><a href="cleaning-data-in-r.html#cb1070-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1070-4"><a href="cleaning-data-in-r.html#cb1070-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create breaks</span></span>
<span id="cb1070-5"><a href="cleaning-data-in-r.html#cb1070-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">min</span>(bike_share_rides<span class="sc">$</span>duration_min), <span class="dv">0</span>, <span class="dv">1440</span>, </span>
<span id="cb1070-6"><a href="cleaning-data-in-r.html#cb1070-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">max</span>(bike_share_rides<span class="sc">$</span>duration_min))</span>
<span id="cb1070-7"><a href="cleaning-data-in-r.html#cb1070-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1070-8"><a href="cleaning-data-in-r.html#cb1070-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a histogram of duration_min</span></span>
<span id="cb1070-9"><a href="cleaning-data-in-r.html#cb1070-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bike_share_rides, <span class="fu">aes</span>(duration_min)) <span class="sc">+</span></span>
<span id="cb1070-10"><a href="cleaning-data-in-r.html#cb1070-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">breaks =</span> breaks)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-436-1.png" width="672" /></p>
<div class="sourceCode" id="cb1071"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1071-1"><a href="cleaning-data-in-r.html#cb1071-1" aria-hidden="true" tabindex="-1"></a><span class="co"># duration_min_const: replace vals of duration_min &gt; 1440 with 1440</span></span>
<span id="cb1071-2"><a href="cleaning-data-in-r.html#cb1071-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1071-3"><a href="cleaning-data-in-r.html#cb1071-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration_min_const =</span> <span class="fu">replace</span>(duration_min, duration_min <span class="sc">&gt;</span> <span class="dv">1440</span>, <span class="dv">1440</span>))</span>
<span id="cb1071-4"><a href="cleaning-data-in-r.html#cb1071-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1071-5"><a href="cleaning-data-in-r.html#cb1071-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure all values of duration_min_const are between 0 and 1440</span></span>
<span id="cb1071-6"><a href="cleaning-data-in-r.html#cb1071-6" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(bike_share_rides<span class="sc">$</span>duration_min_const)</span></code></pre></div>
<pre><code>## [1]    2.27 1440.00</code></pre>
</div>
<div id="date-constraints" class="section level4 hasAnchor" number="10.1.2.2">
<h4><span class="header-section-number">10.1.2.2</span> Date constraints<a href="cleaning-data-in-r.html#date-constraints" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’ll need to remove any rides from the dataset that have a <code>date</code> in the future.</p>
<p>Before you can do this, the <code>date</code> column needs to be converted from a <code>character</code> to a <code>Date</code>. R makes it easy to check if one <code>Date</code> object is before (<code>&lt;</code>) or after (<code>&gt;</code>) another.</p>
<div class="sourceCode" id="cb1073"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1073-1"><a href="cleaning-data-in-r.html#cb1073-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset again and create future data</span></span>
<span id="cb1073-2"><a href="cleaning-data-in-r.html#cb1073-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/bike_share_rides_ch1_1.rds&quot;</span>)</span>
<span id="cb1073-3"><a href="cleaning-data-in-r.html#cb1073-3" aria-hidden="true" tabindex="-1"></a>bike_share_rides<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(bike_share_rides<span class="sc">$</span>date, <span class="st">&quot;2017-04-25&quot;</span>, <span class="st">&quot;2043-02-17&quot;</span>)</span>
<span id="cb1073-4"><a href="cleaning-data-in-r.html#cb1073-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1073-5"><a href="cleaning-data-in-r.html#cb1073-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert date to Date type </span></span>
<span id="cb1073-6"><a href="cleaning-data-in-r.html#cb1073-6" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1073-7"><a href="cleaning-data-in-r.html#cb1073-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))</span>
<span id="cb1073-8"><a href="cleaning-data-in-r.html#cb1073-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1073-9"><a href="cleaning-data-in-r.html#cb1073-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure all dates are in the past</span></span>
<span id="cb1073-10"><a href="cleaning-data-in-r.html#cb1073-10" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="sc">%&gt;%</span> <span class="fu">filter</span>(date <span class="sc">&gt;</span> <span class="fu">today</span>())</span>
<span id="cb1073-11"><a href="cleaning-data-in-r.html#cb1073-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1073-12"><a href="cleaning-data-in-r.html#cb1073-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for rides that occurred before or on today&#39;s date</span></span>
<span id="cb1073-13"><a href="cleaning-data-in-r.html#cb1073-13" aria-hidden="true" tabindex="-1"></a>bike_share_rides_past <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1073-14"><a href="cleaning-data-in-r.html#cb1073-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&lt;=</span> <span class="fu">today</span>())</span>
<span id="cb1073-15"><a href="cleaning-data-in-r.html#cb1073-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1073-16"><a href="cleaning-data-in-r.html#cb1073-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure all dates from bike_share_rides_past are in the past</span></span>
<span id="cb1073-17"><a href="cleaning-data-in-r.html#cb1073-17" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(bike_share_rides_past<span class="sc">$</span>date)</span></code></pre></div>
<pre><code>## [1] &quot;2017-04-30&quot;</code></pre>
</div>
</div>
<div id="uniqueness-constraints" class="section level3 hasAnchor" number="10.1.3">
<h3><span class="header-section-number">10.1.3</span> Uniqueness constraints<a href="cleaning-data-in-r.html#uniqueness-constraints" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="full-duplicates" class="section level4 hasAnchor" number="10.1.3.1">
<h4><span class="header-section-number">10.1.3.1</span> Full duplicates<a href="cleaning-data-in-r.html#full-duplicates" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A full duplicate occurs when there are multiple rows that have the same value in every column.</p>
<p>Removing duplicates like this is important, since having the same value repeated multiple times can alter summary statistics like the mean and median.</p>
<div class="sourceCode" id="cb1075"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1075-1"><a href="cleaning-data-in-r.html#cb1075-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count duplicate</span></span>
<span id="cb1075-2"><a href="cleaning-data-in-r.html#cb1075-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">duplicated</span>(dataframe))</span>
<span id="cb1075-3"><a href="cleaning-data-in-r.html#cb1075-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1075-4"><a href="cleaning-data-in-r.html#cb1075-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove full duplicate</span></span>
<span id="cb1075-5"><a href="cleaning-data-in-r.html#cb1075-5" aria-hidden="true" tabindex="-1"></a>dataframe <span class="sc">%&gt;%</span></span>
<span id="cb1075-6"><a href="cleaning-data-in-r.html#cb1075-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(<span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1076"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1076-1"><a href="cleaning-data-in-r.html#cb1076-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset</span></span>
<span id="cb1076-2"><a href="cleaning-data-in-r.html#cb1076-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/bike_share_rides_full_duplicated.csv&quot;</span>)</span>
<span id="cb1076-3"><a href="cleaning-data-in-r.html#cb1076-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1076-4"><a href="cleaning-data-in-r.html#cb1076-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of full duplicates</span></span>
<span id="cb1076-5"><a href="cleaning-data-in-r.html#cb1076-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">duplicated</span>(bike_share_rides))</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb1078"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1078-1"><a href="cleaning-data-in-r.html#cb1078-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates</span></span>
<span id="cb1078-2"><a href="cleaning-data-in-r.html#cb1078-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides_unique <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1078-3"><a href="cleaning-data-in-r.html#cb1078-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(<span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1078-4"><a href="cleaning-data-in-r.html#cb1078-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1078-5"><a href="cleaning-data-in-r.html#cb1078-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the full duplicates in bike_share_rides_unique</span></span>
<span id="cb1078-6"><a href="cleaning-data-in-r.html#cb1078-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">duplicated</span>(bike_share_rides_unique))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
</div>
<div id="partial-duplicates" class="section level4 hasAnchor" number="10.1.3.2">
<h4><span class="header-section-number">10.1.3.2</span> Partial duplicates<a href="cleaning-data-in-r.html#partial-duplicates" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Partial duplicates are rows of data that have much of the same information and refer to the same data point, but there may be some columns that differ between them.</p>
<p><code>ride_id</code> should be unique</p>
<div class="sourceCode" id="cb1080"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1080-1"><a href="cleaning-data-in-r.html#cb1080-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset</span></span>
<span id="cb1080-2"><a href="cleaning-data-in-r.html#cb1080-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/bike_share_rides_partial_duplicated.csv&quot;</span>)</span>
<span id="cb1080-3"><a href="cleaning-data-in-r.html#cb1080-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1080-4"><a href="cleaning-data-in-r.html#cb1080-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Find duplicated ride_ids</span></span>
<span id="cb1080-5"><a href="cleaning-data-in-r.html#cb1080-5" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="sc">%&gt;%</span> </span>
<span id="cb1080-6"><a href="cleaning-data-in-r.html#cb1080-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count the number of occurrences of each ride_id</span></span>
<span id="cb1080-7"><a href="cleaning-data-in-r.html#cb1080-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ride_id) <span class="sc">%&gt;%</span> </span>
<span id="cb1080-8"><a href="cleaning-data-in-r.html#cb1080-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for rows with a count &gt; 1</span></span>
<span id="cb1080-9"><a href="cleaning-data-in-r.html#cb1080-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<p><strong>Removing partial duplicates</strong></p>
<div class="sourceCode" id="cb1081"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1081-1"><a href="cleaning-data-in-r.html#cb1081-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove partial duplicate</span></span>
<span id="cb1081-2"><a href="cleaning-data-in-r.html#cb1081-2" aria-hidden="true" tabindex="-1"></a>dataframe <span class="sc">%&gt;%</span></span>
<span id="cb1081-3"><a href="cleaning-data-in-r.html#cb1081-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>(column, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1082"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1082-1"><a href="cleaning-data-in-r.html#cb1082-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove full and partial duplicates</span></span>
<span id="cb1082-2"><a href="cleaning-data-in-r.html#cb1082-2" aria-hidden="true" tabindex="-1"></a>bike_share_rides_unique <span class="ot">&lt;-</span> bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1082-3"><a href="cleaning-data-in-r.html#cb1082-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only based on ride_id instead of all cols</span></span>
<span id="cb1082-4"><a href="cleaning-data-in-r.html#cb1082-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(ride_id, <span class="at">.keep_all =</span> T)</span>
<span id="cb1082-5"><a href="cleaning-data-in-r.html#cb1082-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1082-6"><a href="cleaning-data-in-r.html#cb1082-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Find duplicated ride_ids in bike_share_rides_unique</span></span>
<span id="cb1082-7"><a href="cleaning-data-in-r.html#cb1082-7" aria-hidden="true" tabindex="-1"></a>bike_share_rides_unique <span class="sc">%&gt;%</span></span>
<span id="cb1082-8"><a href="cleaning-data-in-r.html#cb1082-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count the number of occurrences of each ride_id</span></span>
<span id="cb1082-9"><a href="cleaning-data-in-r.html#cb1082-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ride_id) <span class="sc">%&gt;%</span></span>
<span id="cb1082-10"><a href="cleaning-data-in-r.html#cb1082-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for rows with a count &gt; 1</span></span>
<span id="cb1082-11"><a href="cleaning-data-in-r.html#cb1082-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code></pre></div>
<p><strong>Aggregating partial duplicates</strong></p>
<p>Another way of handling partial duplicates is to compute a summary statistic of the values that differ between partial duplicates, such as mean, median, maximum, or minimum. This can come in handy when you’re not sure how your data was collected and want an average, or if based on domain knowledge, you’d rather have too high of an estimate than too low of an estimate (or vice versa).</p>
<div class="sourceCode" id="cb1083"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1083-1"><a href="cleaning-data-in-r.html#cb1083-1" aria-hidden="true" tabindex="-1"></a>bike_share_rides <span class="sc">%&gt;%</span></span>
<span id="cb1083-2"><a href="cleaning-data-in-r.html#cb1083-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by ride_id and date</span></span>
<span id="cb1083-3"><a href="cleaning-data-in-r.html#cb1083-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ride_id, date) <span class="sc">%&gt;%</span></span>
<span id="cb1083-4"><a href="cleaning-data-in-r.html#cb1083-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add duration_min_avg column</span></span>
<span id="cb1083-5"><a href="cleaning-data-in-r.html#cb1083-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duration_min_avg =</span> <span class="fu">mean</span>(duration_min)) <span class="sc">%&gt;%</span></span>
<span id="cb1083-6"><a href="cleaning-data-in-r.html#cb1083-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove duplicates based on ride_id and date, keep all cols</span></span>
<span id="cb1083-7"><a href="cleaning-data-in-r.html#cb1083-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(ride_id, date, <span class="at">.keep_all =</span> T) <span class="sc">%&gt;%</span></span>
<span id="cb1083-8"><a href="cleaning-data-in-r.html#cb1083-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove duration_min column</span></span>
<span id="cb1083-9"><a href="cleaning-data-in-r.html#cb1083-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>duration_min)</span></code></pre></div>
</div>
</div>
</div>
<div id="categorical-and-text-data" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Categorical and Text Data<a href="cleaning-data-in-r.html#categorical-and-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="checking-membership" class="section level3 hasAnchor" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Checking membership<a href="cleaning-data-in-r.html#checking-membership" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Filtering joins: Keeps or removes observations from the first table without adding columns.</p>
<ul>
<li>Anti-joins: help you <em>identify</em> the rows that are causing issues</li>
<li>semi-joins: <em>remove</em> the issue-causing rows.</li>
</ul>
<p><img src="image/filter%20join_semi%20&amp;%20anti.png" width="398" /></p>
<p><code>sfo_survey</code> containing survey responses from passengers taking flights from San Francisco International Airport (SFO).</p>
<p><code>dest_sizes</code> is available that contains all the possible destination sizes.</p>
<p>Your mission is to find rows with invalid dest_sizes and remove them from the data frame.</p>
<div class="sourceCode" id="cb1084"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1084-1"><a href="cleaning-data-in-r.html#cb1084-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset</span></span>
<span id="cb1084-2"><a href="cleaning-data-in-r.html#cb1084-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/sfo_survey_ch2_1.rds&quot;</span>)</span>
<span id="cb1084-3"><a href="cleaning-data-in-r.html#cb1084-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sfo_survey)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    2809 obs. of  12 variables:
##  $ id           : int  1842 1844 1840 1837 1833 3010 1838 1845 2097 1846 ...
##  $ day          : chr  &quot;Monday&quot; &quot;Monday&quot; &quot;Monday&quot; &quot;Monday&quot; ...
##  $ airline      : chr  &quot;TURKISH AIRLINES&quot; &quot;TURKISH AIRLINES&quot; &quot;TURKISH AIRLINES&quot; &quot;TURKISH AIRLINES&quot; ...
##  $ destination  : chr  &quot;ISTANBUL&quot; &quot;ISTANBUL&quot; &quot;ISTANBUL&quot; &quot;ISTANBUL&quot; ...
##  $ dest_region  : chr  &quot;Middle East&quot; &quot;Middle East&quot; &quot;Middle East&quot; &quot;Middle East&quot; ...
##  $ dest_size    : chr  &quot;Hub&quot; &quot;Hub&quot; &quot;Hub&quot; &quot;Hub&quot; ...
##  $ boarding_area: chr  &quot;Gates 91-102&quot; &quot;Gates 91-102&quot; &quot;Gates 91-102&quot; &quot;Gates 91-102&quot; ...
##  $ dept_time    : chr  &quot;2018-12-31&quot; &quot;2018-12-31&quot; &quot;2018-12-31&quot; &quot;2018-12-31&quot; ...
##  $ wait_min     : num  255 315 165 225 175 ...
##  $ cleanliness  : chr  &quot;Average&quot; &quot;Somewhat clean&quot; &quot;Average&quot; &quot;Somewhat clean&quot; ...
##  $ safety       : chr  &quot;Neutral&quot; &quot;Somewhat safe&quot; &quot;Somewhat safe&quot; &quot;Somewhat safe&quot; ...
##  $ satisfaction : chr  &quot;Somewhat satsified&quot; &quot;Somewhat satsified&quot; &quot;Somewhat satsified&quot; &quot;Somewhat satsified&quot; ...</code></pre>
<div class="sourceCode" id="cb1086"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1086-1"><a href="cleaning-data-in-r.html#cb1086-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dest_sizes dataframe for validation </span></span>
<span id="cb1086-2"><a href="cleaning-data-in-r.html#cb1086-2" aria-hidden="true" tabindex="-1"></a>dest_size <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Small&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;Large&quot;</span>, <span class="st">&quot;Hub&quot;</span>)</span>
<span id="cb1086-3"><a href="cleaning-data-in-r.html#cb1086-3" aria-hidden="true" tabindex="-1"></a>passengers_per_day <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;0-20K&quot;</span>, <span class="st">&quot;20K-70K&quot;</span>, <span class="st">&quot;70K-100K&quot;</span>, <span class="st">&quot;100K+&quot;</span>)</span>
<span id="cb1086-4"><a href="cleaning-data-in-r.html#cb1086-4" aria-hidden="true" tabindex="-1"></a>dest_sizes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(dest_size, passengers_per_day)</span>
<span id="cb1086-5"><a href="cleaning-data-in-r.html#cb1086-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dest_sizes)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  2 variables:
##  $ dest_size         : chr  &quot;Small&quot; &quot;Medium&quot; &quot;Large&quot; &quot;Hub&quot;
##  $ passengers_per_day: chr  &quot;0-20K&quot; &quot;20K-70K&quot; &quot;70K-100K&quot; &quot;100K+&quot;</code></pre>
<div class="sourceCode" id="cb1088"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1088-1"><a href="cleaning-data-in-r.html#cb1088-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of occurrences of dest_size</span></span>
<span id="cb1088-2"><a href="cleaning-data-in-r.html#cb1088-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1088-3"><a href="cleaning-data-in-r.html#cb1088-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_size)</span></code></pre></div>
<div class="sourceCode" id="cb1089"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1089-1"><a href="cleaning-data-in-r.html#cb1089-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find bad dest_size rows</span></span>
<span id="cb1089-2"><a href="cleaning-data-in-r.html#cb1089-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span> </span>
<span id="cb1089-3"><a href="cleaning-data-in-r.html#cb1089-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Join with dest_sizes data frame to get bad dest_size rows</span></span>
<span id="cb1089-4"><a href="cleaning-data-in-r.html#cb1089-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(dest_sizes, <span class="at">by =</span> <span class="st">&quot;dest_size&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1089-5"><a href="cleaning-data-in-r.html#cb1089-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select id, airline, destination, and dest_size cols</span></span>
<span id="cb1089-6"><a href="cleaning-data-in-r.html#cb1089-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, airline, destination, dest_size)</span></code></pre></div>
<div class="sourceCode" id="cb1090"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1090-1"><a href="cleaning-data-in-r.html#cb1090-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove bad dest_size rows</span></span>
<span id="cb1090-2"><a href="cleaning-data-in-r.html#cb1090-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span> </span>
<span id="cb1090-3"><a href="cleaning-data-in-r.html#cb1090-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Join with dest_sizes</span></span>
<span id="cb1090-4"><a href="cleaning-data-in-r.html#cb1090-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(dest_sizes, <span class="at">by =</span> <span class="st">&quot;dest_size&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1090-5"><a href="cleaning-data-in-r.html#cb1090-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count the number of each dest_size</span></span>
<span id="cb1090-6"><a href="cleaning-data-in-r.html#cb1090-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_size)</span></code></pre></div>
</div>
<div id="categorical-data-problems" class="section level3 hasAnchor" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> Categorical data problems<a href="cleaning-data-in-r.html#categorical-data-problems" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Inconsistency within a category</p>
<ul>
<li>Case inconsistency: <code>str_to_lower()</code>, <code>str_to_upper()</code></li>
<li>Whitespace inconsistency: <code>str_trim()</code></li>
</ul></li>
<li><p>Too many categories</p>
<ul>
<li>Collapsing categories: <code>fct_collapse()</code></li>
</ul></li>
</ul>
<div id="identifying-inconsistency" class="section level4 hasAnchor" number="10.2.2.1">
<h4><span class="header-section-number">10.2.2.1</span> Identifying inconsistency<a href="cleaning-data-in-r.html#identifying-inconsistency" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’ll examine the <code>dest_size</code> column again as well as the <code>cleanliness</code> column and determine what kind of issues.</p>
<div class="sourceCode" id="cb1091"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1091-1"><a href="cleaning-data-in-r.html#cb1091-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load uncleaned data</span></span>
<span id="cb1091-2"><a href="cleaning-data-in-r.html#cb1091-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/sfo_survey_not_clean.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb1091-3"><a href="cleaning-data-in-r.html#cb1091-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">col_select =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">13</span>)</span></code></pre></div>
<pre><code>## New names:
## Rows: 2809 Columns: 12
## ── Column specification
## ─────────────────────────────────────────────────── Delimiter: &quot;,&quot; chr
## (9): day, airline, destination, dest_region, dest_size, boarding_a... dbl
## (2): id, wait_min date (1): dept_time
## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
## Specify the column types or set `show_col_types = FALSE` to quiet this
## message.
## • `` -&gt; `...1`</code></pre>
<div class="sourceCode" id="cb1093"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1093-1"><a href="cleaning-data-in-r.html#cb1093-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count dest_size</span></span>
<span id="cb1093-2"><a href="cleaning-data-in-r.html#cb1093-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1093-3"><a href="cleaning-data-in-r.html#cb1093-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_size)</span>
<span id="cb1093-4"><a href="cleaning-data-in-r.html#cb1093-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1093-5"><a href="cleaning-data-in-r.html#cb1093-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Count cleanliness</span></span>
<span id="cb1093-6"><a href="cleaning-data-in-r.html#cb1093-6" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1093-7"><a href="cleaning-data-in-r.html#cb1093-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(cleanliness)</span></code></pre></div>
</div>
<div id="correcting-inconsistency" class="section level4 hasAnchor" number="10.2.2.2">
<h4><span class="header-section-number">10.2.2.2</span> Correcting inconsistency<a href="cleaning-data-in-r.html#correcting-inconsistency" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now that you’ve identified that <code>dest_size</code> has whitespace inconsistencies and <code>cleanliness</code> has capitalization inconsistencies, you’ll fix the inconsistent values in <code>sfo_survey</code>.</p>
<div class="sourceCode" id="cb1094"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1094-1"><a href="cleaning-data-in-r.html#cb1094-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add new columns to sfo_survey</span></span>
<span id="cb1094-2"><a href="cleaning-data-in-r.html#cb1094-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="ot">&lt;-</span> sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1094-3"><a href="cleaning-data-in-r.html#cb1094-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dest_size_trimmed: dest_size without whitespace</span></span>
<span id="cb1094-4"><a href="cleaning-data-in-r.html#cb1094-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest_size_trimmed =</span> <span class="fu">str_trim</span>(dest_size),</span>
<span id="cb1094-5"><a href="cleaning-data-in-r.html#cb1094-5" aria-hidden="true" tabindex="-1"></a>         <span class="co"># cleanliness_lower: cleanliness converted to lowercase</span></span>
<span id="cb1094-6"><a href="cleaning-data-in-r.html#cb1094-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cleanliness_lower =</span> <span class="fu">str_to_lower</span>(cleanliness))</span>
<span id="cb1094-7"><a href="cleaning-data-in-r.html#cb1094-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1094-8"><a href="cleaning-data-in-r.html#cb1094-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Count values of dest_size_trimmed</span></span>
<span id="cb1094-9"><a href="cleaning-data-in-r.html#cb1094-9" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1094-10"><a href="cleaning-data-in-r.html#cb1094-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_size_trimmed)</span>
<span id="cb1094-11"><a href="cleaning-data-in-r.html#cb1094-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1094-12"><a href="cleaning-data-in-r.html#cb1094-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Count values of cleanliness_lower</span></span>
<span id="cb1094-13"><a href="cleaning-data-in-r.html#cb1094-13" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1094-14"><a href="cleaning-data-in-r.html#cb1094-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(cleanliness_lower)</span></code></pre></div>
</div>
<div id="collapsing-categories" class="section level4 hasAnchor" number="10.2.2.3">
<h4><span class="header-section-number">10.2.2.3</span> Collapsing categories<a href="cleaning-data-in-r.html#collapsing-categories" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Allowing the response for <code>dest_region</code> to be free text instead of a dropdown menu. This resulted in some inconsistencies in the <code>dest_region</code> variable</p>
<div class="sourceCode" id="cb1095"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1095-1"><a href="cleaning-data-in-r.html#cb1095-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count categories of dest_region</span></span>
<span id="cb1095-2"><a href="cleaning-data-in-r.html#cb1095-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1095-3"><a href="cleaning-data-in-r.html#cb1095-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_region)</span>
<span id="cb1095-4"><a href="cleaning-data-in-r.html#cb1095-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1095-5"><a href="cleaning-data-in-r.html#cb1095-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Categories to map to Europe</span></span>
<span id="cb1095-6"><a href="cleaning-data-in-r.html#cb1095-6" aria-hidden="true" tabindex="-1"></a>europe_categories <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;EU&quot;</span>, <span class="st">&quot;eur&quot;</span>, <span class="st">&quot;Europ&quot;</span>)</span>
<span id="cb1095-7"><a href="cleaning-data-in-r.html#cb1095-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1095-8"><a href="cleaning-data-in-r.html#cb1095-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new col dest_region_collapsed</span></span>
<span id="cb1095-9"><a href="cleaning-data-in-r.html#cb1095-9" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1095-10"><a href="cleaning-data-in-r.html#cb1095-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Map all categories in europe_categories to Europe</span></span>
<span id="cb1095-11"><a href="cleaning-data-in-r.html#cb1095-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest_region_collapsed =</span> <span class="fu">fct_collapse</span>(dest_region, </span>
<span id="cb1095-12"><a href="cleaning-data-in-r.html#cb1095-12" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">Europe =</span> europe_categories)) <span class="sc">%&gt;%</span></span>
<span id="cb1095-13"><a href="cleaning-data-in-r.html#cb1095-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Count categories of dest_region_collapsed</span></span>
<span id="cb1095-14"><a href="cleaning-data-in-r.html#cb1095-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest_region_collapsed)</span></code></pre></div>
<p>You’ve reduced the number of categories from 12 to 9, and you can now be confident that 401 of the survey participants were heading to Europe.</p>
</div>
</div>
<div id="cleaning-text-data" class="section level3 hasAnchor" number="10.2.3">
<h3><span class="header-section-number">10.2.3</span> Cleaning text data<a href="cleaning-data-in-r.html#cleaning-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Unstructured data problems</strong></p>
<ul>
<li><p>Formatting inconsistency</p>
<ul>
<li><p><code>"6171679912"</code> vs. <code>"(868) 949-4489"</code></p></li>
<li><p><code>"9239 5849 3712 0039"</code> vs. <code>"4490459957881031"</code></p></li>
</ul></li>
<li><p>Information inconsistency</p>
<ul>
<li><p><code>+1 617-167-9912</code> vs. <code>617-167-9912</code></p></li>
<li><p><code>"Veronica Hopkins"</code> vs. <code>"Josiah"</code></p></li>
</ul></li>
<li><p>Invalid data</p>
<ul>
<li><p>Phone number <code>"0492"</code> is too short</p></li>
<li><p>Zip code <code>"19888"</code> doesn’t exist</p></li>
</ul></li>
</ul>
<p><strong>Useful stringr function</strong></p>
<ul>
<li><code>str_detect()</code></li>
<li><code>str_replace_all()</code></li>
<li><code>str_remove_all()</code></li>
<li><code>str_length()</code></li>
</ul>
<div id="detecting-inconsistent-text-data" class="section level4 hasAnchor" number="10.2.3.1">
<h4><span class="header-section-number">10.2.3.1</span> Detecting inconsistent text data<a href="cleaning-data-in-r.html#detecting-inconsistent-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1096"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1096-1"><a href="cleaning-data-in-r.html#cb1096-1" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/sfo_survey_phone.csv&quot;</span>)</span>
<span id="cb1096-2"><a href="cleaning-data-in-r.html#cb1096-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sfo_survey)</span></code></pre></div>
<pre><code>## spc_tbl_ [2,809 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ id         : num [1:2809] 1842 1844 1840 1837 1833 ...
##  $ airline    : chr [1:2809] &quot;TURKISH AIRLINES&quot; &quot;TURKISH AIRLINES&quot; &quot;TURKISH AIRLINES&quot; &quot;TURKISH AIRLINES&quot; ...
##  $ destination: chr [1:2809] &quot;ISTANBUL&quot; &quot;ISTANBUL&quot; &quot;ISTANBUL&quot; &quot;ISTANBUL&quot; ...
##  $ phone      : chr [1:2809] &quot;858 990 5153&quot; &quot;731-813-2043&quot; &quot;563-732-6802&quot; &quot;145 725 4021&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   id = col_double(),
##   ..   airline = col_character(),
##   ..   destination = col_character(),
##   ..   phone = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<p>You found that some phone numbers are written with hyphens (<code>-</code>) and some are written with parentheses (<code>()</code>). In this exercise, you’ll figure out which phone numbers have these issues so that you know which ones need fixing.</p>
<div class="sourceCode" id="cb1098"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1098-1"><a href="cleaning-data-in-r.html#cb1098-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for rows with &quot;-&quot; in the phone column</span></span>
<span id="cb1098-2"><a href="cleaning-data-in-r.html#cb1098-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1098-3"><a href="cleaning-data-in-r.html#cb1098-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(phone, <span class="st">&quot;-&quot;</span>))</span></code></pre></div>
<p>Searching for special characters requires using <code>fixed()</code> :</p>
<p><code>str_detect(column, fixed("$"))</code></p>
<div class="sourceCode" id="cb1099"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1099-1"><a href="cleaning-data-in-r.html#cb1099-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for rows with &quot;(&quot; or &quot;)&quot; in the phone column</span></span>
<span id="cb1099-2"><a href="cleaning-data-in-r.html#cb1099-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1099-3"><a href="cleaning-data-in-r.html#cb1099-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(phone, <span class="fu">fixed</span>(<span class="st">&quot;(&quot;</span>)) <span class="sc">|</span> <span class="fu">str_detect</span>(phone, <span class="fu">fixed</span>(<span class="st">&quot;)&quot;</span>)))</span></code></pre></div>
</div>
<div id="replacing-and-removing" class="section level4 hasAnchor" number="10.2.3.2">
<h4><span class="header-section-number">10.2.3.2</span> Replacing and removing<a href="cleaning-data-in-r.html#replacing-and-removing" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The customer support team has requested that all phone numbers be in the format <code>"123 456 7890"</code>.</p>
<div class="sourceCode" id="cb1100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1100-1"><a href="cleaning-data-in-r.html#cb1100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove parentheses from phone column</span></span>
<span id="cb1100-2"><a href="cleaning-data-in-r.html#cb1100-2" aria-hidden="true" tabindex="-1"></a>phone_no_parens <span class="ot">&lt;-</span> sfo_survey<span class="sc">$</span>phone <span class="sc">%&gt;%</span></span>
<span id="cb1100-3"><a href="cleaning-data-in-r.html#cb1100-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove &quot;(&quot;s</span></span>
<span id="cb1100-4"><a href="cleaning-data-in-r.html#cb1100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_remove_all</span>(<span class="fu">fixed</span>(<span class="st">&quot;(&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1100-5"><a href="cleaning-data-in-r.html#cb1100-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove &quot;)&quot;s</span></span>
<span id="cb1100-6"><a href="cleaning-data-in-r.html#cb1100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_remove_all</span>(<span class="fu">fixed</span>(<span class="st">&quot;)&quot;</span>))</span>
<span id="cb1100-7"><a href="cleaning-data-in-r.html#cb1100-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1100-8"><a href="cleaning-data-in-r.html#cb1100-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add phone_no_parens as column</span></span>
<span id="cb1100-9"><a href="cleaning-data-in-r.html#cb1100-9" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="ot">&lt;-</span> sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1100-10"><a href="cleaning-data-in-r.html#cb1100-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">phone_no_parens =</span> phone_no_parens,</span>
<span id="cb1100-11"><a href="cleaning-data-in-r.html#cb1100-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Replace all hyphens in phone_no_parens with spaces</span></span>
<span id="cb1100-12"><a href="cleaning-data-in-r.html#cb1100-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">phone_clean =</span> <span class="fu">str_replace_all</span>(phone_no_parens, <span class="st">&quot;-&quot;</span>, <span class="st">&quot; &quot;</span>))</span>
<span id="cb1100-13"><a href="cleaning-data-in-r.html#cb1100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1100-14"><a href="cleaning-data-in-r.html#cb1100-14" aria-hidden="true" tabindex="-1"></a>sfo_survey</span></code></pre></div>
</div>
<div id="invalid-text-data" class="section level4 hasAnchor" number="10.2.3.3">
<h4><span class="header-section-number">10.2.3.3</span> Invalid text data<a href="cleaning-data-in-r.html#invalid-text-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this exercise, you’ll remove any rows with invalid phone numbers.</p>
<div class="sourceCode" id="cb1101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1101-1"><a href="cleaning-data-in-r.html#cb1101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check out the invalid numbers</span></span>
<span id="cb1101-2"><a href="cleaning-data-in-r.html#cb1101-2" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1101-3"><a href="cleaning-data-in-r.html#cb1101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(phone_clean) <span class="sc">!=</span> <span class="dv">12</span>)</span>
<span id="cb1101-4"><a href="cleaning-data-in-r.html#cb1101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1101-5"><a href="cleaning-data-in-r.html#cb1101-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with invalid numbers</span></span>
<span id="cb1101-6"><a href="cleaning-data-in-r.html#cb1101-6" aria-hidden="true" tabindex="-1"></a>sfo_survey <span class="sc">%&gt;%</span></span>
<span id="cb1101-7"><a href="cleaning-data-in-r.html#cb1101-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(phone_clean) <span class="sc">==</span> <span class="dv">12</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="advanced-data-problems" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Advanced Data Problems<a href="cleaning-data-in-r.html#advanced-data-problems" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="uniformity" class="section level3 hasAnchor" number="10.3.1">
<h3><span class="header-section-number">10.3.1</span> Uniformity<a href="cleaning-data-in-r.html#uniformity" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>continuous data points have different units or formats</p>
<ul>
<li><p>Temperature: <code>°C</code> vs. <code>°F</code></p></li>
<li><p>Weight: <code>kg</code> vs. <code>g</code> vs. <code>lb</code></p></li>
<li><p>Money: USD <code>$</code> vs. GBP <code>£</code> vs. JPY <code>¥</code></p></li>
<li><p>Date: <code>DD-MM-YYYY</code> vs. <code>MM-DD-YYYY</code> vs. <code>YYYY-MM-DD</code></p></li>
</ul></li>
<li><p>Solution:</p>
<ul>
<li><p>Finding uniformity issues: plot or statistic</p></li>
<li><p>Unit conversion</p>
<ul>
<li><p><code>ifelse(condition, value_if_true, value_if_false)</code></p></li>
<li><p><code>parse_date_time(date_col, orders = c("format_1", "format_2", …))</code></p></li>
</ul></li>
</ul></li>
</ul>
<div id="date-uniformity" class="section level4 hasAnchor" number="10.3.1.1">
<h4><span class="header-section-number">10.3.1.1</span> Date uniformity<a href="cleaning-data-in-r.html#date-uniformity" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>accounts</code> dataset, which contains information about each customer, the amount in their account, and the date their account was opened.</p>
<p>Your boss has asked you to calculate some summary statistics about the average value of each account and whether the age of the account is associated with a higher or lower account value.</p>
<p>In this exercise, you’ll investigate the <code>date_opened</code> column and clean it up so that all the dates are in the same format.</p>
<div class="sourceCode" id="cb1102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1102-1"><a href="cleaning-data-in-r.html#cb1102-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/ch3_1_accounts.rds&quot;</span>)</span>
<span id="cb1102-2"><a href="cleaning-data-in-r.html#cb1102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(accounts)</span></code></pre></div>
<div class="sourceCode" id="cb1103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1103-1"><a href="cleaning-data-in-r.html#cb1103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the date formats</span></span>
<span id="cb1103-2"><a href="cleaning-data-in-r.html#cb1103-2" aria-hidden="true" tabindex="-1"></a>formats <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;%Y-%m-%d&quot;</span>, <span class="st">&quot;%B %d, %Y&quot;</span>)</span>
<span id="cb1103-3"><a href="cleaning-data-in-r.html#cb1103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1103-4"><a href="cleaning-data-in-r.html#cb1103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert dates to the same format</span></span>
<span id="cb1103-5"><a href="cleaning-data-in-r.html#cb1103-5" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1103-6"><a href="cleaning-data-in-r.html#cb1103-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_opened_clean =</span> <span class="fu">parse_date_time</span>(date_opened, <span class="at">orders =</span> formats))</span></code></pre></div>
</div>
<div id="currency-uniformity" class="section level4 hasAnchor" number="10.3.1.2">
<h4><span class="header-section-number">10.3.1.2</span> Currency uniformity<a href="cleaning-data-in-r.html#currency-uniformity" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When you first plot the data, you’ll notice that there’s a group of very high values, and a group of relatively lower values.</p>
<p>The bank has two different offices - one in New York, and one in Tokyo, so you suspect that the accounts managed by the Tokyo office are in Japanese yen instead of U.S. dollars.</p>
<div class="sourceCode" id="cb1104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1104-1"><a href="cleaning-data-in-r.html#cb1104-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> accounts <span class="sc">%&gt;%</span></span>
<span id="cb1104-2"><a href="cleaning-data-in-r.html#cb1104-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date_opened =</span> <span class="fu">parse_date_time</span>(date_opened, <span class="at">orders =</span> formats))</span>
<span id="cb1104-3"><a href="cleaning-data-in-r.html#cb1104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1104-4"><a href="cleaning-data-in-r.html#cb1104-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Scatter plot of opening date and total amount</span></span>
<span id="cb1104-5"><a href="cleaning-data-in-r.html#cb1104-5" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1104-6"><a href="cleaning-data-in-r.html#cb1104-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date_opened, <span class="at">y =</span> total)) <span class="sc">+</span></span>
<span id="cb1104-7"><a href="cleaning-data-in-r.html#cb1104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-456-1.png" width="672" /></p>
<p>You have a data frame called <code>account_offices</code> that indicates which office manages each customer’s account, so you can use this information to figure out which <code>total</code>s need to be converted from yen to dollars.</p>
<p>The formula to convert yen to dollars is <code>USD = JPY / 104</code>.</p>
<div class="sourceCode" id="cb1105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1105-1"><a href="cleaning-data-in-r.html#cb1105-1" aria-hidden="true" tabindex="-1"></a>account_offices <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/account_offices.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 98 Columns: 2
## ── Column specification ───────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (2): id, office
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1107-1"><a href="cleaning-data-in-r.html#cb1107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Left join accounts and account_offices by id</span></span>
<span id="cb1107-2"><a href="cleaning-data-in-r.html#cb1107-2" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1107-3"><a href="cleaning-data-in-r.html#cb1107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(account_offices, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1107-4"><a href="cleaning-data-in-r.html#cb1107-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert totals from the Tokyo office to USD</span></span>
<span id="cb1107-5"><a href="cleaning-data-in-r.html#cb1107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_usd =</span> <span class="fu">ifelse</span>(office <span class="sc">==</span> <span class="st">&quot;Tokyo&quot;</span>, total<span class="sc">/</span><span class="dv">104</span>, total))</span></code></pre></div>
<div class="sourceCode" id="cb1108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1108-1"><a href="cleaning-data-in-r.html#cb1108-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1108-2"><a href="cleaning-data-in-r.html#cb1108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(account_offices, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1108-3"><a href="cleaning-data-in-r.html#cb1108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_usd =</span> <span class="fu">ifelse</span>(office <span class="sc">==</span> <span class="st">&quot;Tokyo&quot;</span>, total <span class="sc">/</span> <span class="dv">104</span>, total)) <span class="sc">%&gt;%</span></span>
<span id="cb1108-4"><a href="cleaning-data-in-r.html#cb1108-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Scatter plot of opening date vs total_usd</span></span>
<span id="cb1108-5"><a href="cleaning-data-in-r.html#cb1108-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date_opened, <span class="at">y =</span> total_usd)) <span class="sc">+</span></span>
<span id="cb1108-6"><a href="cleaning-data-in-r.html#cb1108-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 2 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-458-1.png" width="672" /></p>
</div>
</div>
<div id="cross-field-validation" class="section level3 hasAnchor" number="10.3.2">
<h3><span class="header-section-number">10.3.2</span> Cross field validation<a href="cleaning-data-in-r.html#cross-field-validation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>a sanity check on your data to check that one value makes sense based on other values in your dataset.</li>
</ul>
<div id="validating-totals" class="section level4 hasAnchor" number="10.3.2.1">
<h4><span class="header-section-number">10.3.2.1</span> Validating totals<a href="cleaning-data-in-r.html#validating-totals" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You have a bit more information about each account. There are three different funds that account holders can store their money in.</p>
<p>You’ll validate whether the <code>total</code> amount in each account is equal to the sum of the amount in <code>fund_A</code>, <code>fund_B</code>, and <code>fund_C</code>.</p>
<div class="sourceCode" id="cb1110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1110-1"><a href="cleaning-data-in-r.html#cb1110-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/accounts_fund_ages.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1110-2"><a href="cleaning-data-in-r.html#cb1110-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1110-3"><a href="cleaning-data-in-r.html#cb1110-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date_opened =</span> <span class="fu">as.Date</span>(date_opened, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>))</span>
<span id="cb1110-4"><a href="cleaning-data-in-r.html#cb1110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1110-5"><a href="cleaning-data-in-r.html#cb1110-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(accounts)</span></code></pre></div>
<div class="sourceCode" id="cb1111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1111-1"><a href="cleaning-data-in-r.html#cb1111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find invalid totals</span></span>
<span id="cb1111-2"><a href="cleaning-data-in-r.html#cb1111-2" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1111-3"><a href="cleaning-data-in-r.html#cb1111-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># theoretical_total: sum of the three funds</span></span>
<span id="cb1111-4"><a href="cleaning-data-in-r.html#cb1111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">theoretical_total =</span> fund_A <span class="sc">+</span> fund_B <span class="sc">+</span> fund_C) <span class="sc">%&gt;%</span></span>
<span id="cb1111-5"><a href="cleaning-data-in-r.html#cb1111-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find accounts where total doesn&#39;t match theoretical_total</span></span>
<span id="cb1111-6"><a href="cleaning-data-in-r.html#cb1111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total <span class="sc">!=</span> theoretical_total)</span></code></pre></div>
</div>
<div id="validating-age" class="section level4 hasAnchor" number="10.3.2.2">
<h4><span class="header-section-number">10.3.2.2</span> Validating age<a href="cleaning-data-in-r.html#validating-age" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’re suspicious that there may also be inconsistencies in the <code>acct_age</code> column, and you want to see if these inconsistencies are related.</p>
<p>You’ll need to validate the age of each account and see if rows with inconsistent <code>acct_ages</code> are the same ones that had inconsistent <code>total</code>s.</p>
<div class="sourceCode" id="cb1112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1112-1"><a href="cleaning-data-in-r.html#cb1112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb1112-2"><a href="cleaning-data-in-r.html#cb1112-2" aria-hidden="true" tabindex="-1"></a>date_difference <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;2015-09-04&quot;</span>) <span class="sc">%--%</span> <span class="fu">today</span>(); date_difference</span></code></pre></div>
<pre><code>## [1] 2015-09-04 UTC--2024-01-14 UTC</code></pre>
<div class="sourceCode" id="cb1114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1114-1"><a href="cleaning-data-in-r.html#cb1114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(date_difference, <span class="st">&quot;years&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 8.36</code></pre>
<div class="sourceCode" id="cb1116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1116-1"><a href="cleaning-data-in-r.html#cb1116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(<span class="fu">as.numeric</span>(date_difference, <span class="st">&quot;years&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb1118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1118-1"><a href="cleaning-data-in-r.html#cb1118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find invalid acct_age</span></span>
<span id="cb1118-2"><a href="cleaning-data-in-r.html#cb1118-2" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1118-3"><a href="cleaning-data-in-r.html#cb1118-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># theoretical_age: age of acct based on date_opened</span></span>
<span id="cb1118-4"><a href="cleaning-data-in-r.html#cb1118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">theoretical_age =</span> <span class="fu">floor</span>(<span class="fu">as.numeric</span>(date_opened <span class="sc">%--%</span> <span class="fu">today</span>(), <span class="st">&quot;years&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1118-5"><a href="cleaning-data-in-r.html#cb1118-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for rows where acct_age is different from theoretical_age</span></span>
<span id="cb1118-6"><a href="cleaning-data-in-r.html#cb1118-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(acct_age <span class="sc">!=</span> theoretical_age)</span></code></pre></div>
<p>There are three accounts that all have ages off by one year, but none of them are the same as the accounts that had <code>total</code> inconsistencies, so it looks like these two bookkeeping errors may not be related.</p>
</div>
</div>
<div id="completeness" class="section level3 hasAnchor" number="10.3.3">
<h3><span class="header-section-number">10.3.3</span> Completeness<a href="cleaning-data-in-r.html#completeness" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Types of missing data</strong></p>
<p><img src="image/type%20of%20missing%20data.png" width="548" /></p>
<p>(“Missing at random” is actually a misleading name, since there’s nothing random about this type of missing data.)</p>
<p><strong>Dealing with missing data</strong></p>
<ul>
<li>Simple approaches:</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Drop missing data</p></li>
<li><p>Impute (fill in) with statistical measures (mean, median, mode..) or domain knowledge</p></li>
</ol>
<ul>
<li>More complex approaches:</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Impute using an algorithmic approach</p></li>
<li><p>Impute with machine learning models</p></li>
</ol>
<div id="visualizing-missing-data" class="section level4 hasAnchor" number="10.3.3.1">
<h4><span class="header-section-number">10.3.3.1</span> Visualizing missing data<a href="cleaning-data-in-r.html#visualizing-missing-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You just received a new version of the <code>accounts</code> data frame containing data on the amount held and amount invested for new and existing customers. However, there are rows with missing <code>inv_amount</code> values.</p>
<p>You know for a fact that most customers below 25 do not have investment accounts yet, and suspect it could be driving the missingness.</p>
<div class="sourceCode" id="cb1119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1119-1"><a href="cleaning-data-in-r.html#cb1119-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/accounts_missing_values.csv&quot;</span>)</span>
<span id="cb1119-2"><a href="cleaning-data-in-r.html#cb1119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(accounts)</span></code></pre></div>
<pre><code>## spc_tbl_ [97 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ cust_id         : chr [1:97] &quot;8C35540A&quot; &quot;D5536652&quot; &quot;A631984D&quot; &quot;93F2F951&quot; ...
##  $ age             : num [1:97] 54 36 49 56 21 47 53 29 58 53 ...
##  $ acct_amount     : num [1:97] 44245 86507 77799 93875 99998 ...
##  $ inv_amount      : num [1:97] 35501 81922 46412 76563 NA ...
##  $ account_opened  : chr [1:97] &quot;3/5/2018&quot; &quot;21-01-18&quot; &quot;26-01-18&quot; &quot;21-08-17&quot; ...
##  $ last_transaction: chr [1:97] &quot;30-09-19&quot; &quot;14-01-19&quot; &quot;6/10/2019&quot; &quot;10/7/2019&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   cust_id = col_character(),
##   ..   age = col_double(),
##   ..   acct_amount = col_double(),
##   ..   inv_amount = col_double(),
##   ..   account_opened = col_character(),
##   ..   last_transaction = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb1121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1121-1"><a href="cleaning-data-in-r.html#cb1121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(visdat)</span>
<span id="cb1121-2"><a href="cleaning-data-in-r.html#cb1121-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1121-3"><a href="cleaning-data-in-r.html#cb1121-3" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(accounts)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-464-1.png" width="672" /></p>
<p>Investigating summary statistics based on missingness is a great way to determine if data is missing completely at random or missing at random.</p>
<div class="sourceCode" id="cb1122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1122-1"><a href="cleaning-data-in-r.html#cb1122-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1122-2"><a href="cleaning-data-in-r.html#cb1122-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># missing_inv: Is inv_amount missing?</span></span>
<span id="cb1122-3"><a href="cleaning-data-in-r.html#cb1122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing_inv =</span> <span class="fu">is.na</span>(inv_amount)) <span class="sc">%&gt;%</span></span>
<span id="cb1122-4"><a href="cleaning-data-in-r.html#cb1122-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by missing_inv</span></span>
<span id="cb1122-5"><a href="cleaning-data-in-r.html#cb1122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(missing_inv) <span class="sc">%&gt;%</span></span>
<span id="cb1122-6"><a href="cleaning-data-in-r.html#cb1122-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate mean age for each missing_inv group</span></span>
<span id="cb1122-7"><a href="cleaning-data-in-r.html#cb1122-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<p>Since the average age for <code>TRUE</code> and <code>FALSE</code> groups, it is likely that the <code>inv_amount</code> is missing mostly in young customers.</p>
<div class="sourceCode" id="cb1123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1123-1"><a href="cleaning-data-in-r.html#cb1123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by age and visualize missing vals</span></span>
<span id="cb1123-2"><a href="cleaning-data-in-r.html#cb1123-2" aria-hidden="true" tabindex="-1"></a>accounts <span class="sc">%&gt;%</span></span>
<span id="cb1123-3"><a href="cleaning-data-in-r.html#cb1123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(age) <span class="sc">%&gt;%</span></span>
<span id="cb1123-4"><a href="cleaning-data-in-r.html#cb1123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">vis_miss</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-466-1.png" width="672" /></p>
</div>
<div id="treating-missing-data" class="section level4 hasAnchor" number="10.3.3.2">
<h4><span class="header-section-number">10.3.3.2</span> Treating missing data<a href="cleaning-data-in-r.html#treating-missing-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’re working with another version of the accounts data that contains missing values for both the <code>cust_id</code> and <code>acct_amount</code> columns.</p>
<div class="sourceCode" id="cb1124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1124-1"><a href="cleaning-data-in-r.html#cb1124-1" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/accounts_treat_missing_data.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>, <span class="at">col_select =</span> <span class="sc">-</span><span class="dv">1</span>) </span>
<span id="cb1124-2"><a href="cleaning-data-in-r.html#cb1124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1124-3"><a href="cleaning-data-in-r.html#cb1124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(accounts)</span></code></pre></div>
<pre><code>## tibble [97 × 5] (S3: tbl_df/tbl/data.frame)
##  $ cust_id         : chr [1:97] &quot;8C35540A&quot; &quot;D5536652&quot; &quot;A631984D&quot; &quot;93F2F951&quot; ...
##  $ acct_amount     : num [1:97] 44245 NA NA NA NA ...
##  $ inv_amount      : num [1:97] 35501 81922 46412 76563 18669 ...
##  $ account_opened  : chr [1:97] &quot;03-05-18&quot; &quot;21-01-18&quot; &quot;26-01-18&quot; &quot;21-08-17&quot; ...
##  $ last_transaction: chr [1:97] &quot;30-09-19&quot; &quot;14-01-19&quot; &quot;06-10-19&quot; &quot;10-07-19&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   ...1 = col_skip(),
##   ..   cust_id = col_character(),
##   ..   acct_amount = col_double(),
##   ..   inv_amount = col_double(),
##   ..   account_opened = col_character(),
##   ..   last_transaction = col_character()
##   .. )</code></pre>
<div class="sourceCode" id="cb1126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1126-1"><a href="cleaning-data-in-r.html#cb1126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">c</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(accounts<span class="sc">$</span>cust_id)), <span class="fu">sum</span>(<span class="fu">is.na</span>(accounts<span class="sc">$</span>acct_amount))))</span></code></pre></div>
<pre><code>## [1]  9 14</code></pre>
<p>You want to figure out how many unique customers the bank has, as well as the average amount held by customers.</p>
<p>You know that rows with missing <code>cust_id</code> don’t really help you, you will drop rows of <code>accounts</code> with missing <code>cust_id</code>s.</p>
<div class="sourceCode" id="cb1128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1128-1"><a href="cleaning-data-in-r.html#cb1128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create accounts_clean</span></span>
<span id="cb1128-2"><a href="cleaning-data-in-r.html#cb1128-2" aria-hidden="true" tabindex="-1"></a>accounts_clean <span class="ot">&lt;-</span> accounts <span class="sc">%&gt;%</span></span>
<span id="cb1128-3"><a href="cleaning-data-in-r.html#cb1128-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter to remove rows with missing cust_id</span></span>
<span id="cb1128-4"><a href="cleaning-data-in-r.html#cb1128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cust_id))</span>
<span id="cb1128-5"><a href="cleaning-data-in-r.html#cb1128-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1128-6"><a href="cleaning-data-in-r.html#cb1128-6" aria-hidden="true" tabindex="-1"></a>accounts_clean</span></code></pre></div>
<p>And impute missing values of <code>inv_amount</code> with some domain knowledge, which is that on average, the <code>acct_amount</code> is usually 5 times the amount of <code>inv_amount</code>.</p>
<div class="sourceCode" id="cb1129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1129-1"><a href="cleaning-data-in-r.html#cb1129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create accounts_clean</span></span>
<span id="cb1129-2"><a href="cleaning-data-in-r.html#cb1129-2" aria-hidden="true" tabindex="-1"></a>accounts_clean <span class="ot">&lt;-</span> accounts <span class="sc">%&gt;%</span></span>
<span id="cb1129-3"><a href="cleaning-data-in-r.html#cb1129-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter to remove rows with missing cust_id</span></span>
<span id="cb1129-4"><a href="cleaning-data-in-r.html#cb1129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(cust_id)) <span class="sc">%&gt;%</span></span>
<span id="cb1129-5"><a href="cleaning-data-in-r.html#cb1129-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add new col acct_amount_filled with replaced NAs</span></span>
<span id="cb1129-6"><a href="cleaning-data-in-r.html#cb1129-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">acct_amount_filled =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(acct_amount), inv_amount <span class="sc">*</span> <span class="dv">5</span>, acct_amount))</span>
<span id="cb1129-7"><a href="cleaning-data-in-r.html#cb1129-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1129-8"><a href="cleaning-data-in-r.html#cb1129-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Assert that cust_id has no missing vals</span></span>
<span id="cb1129-9"><a href="cleaning-data-in-r.html#cb1129-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(accounts_clean<span class="sc">$</span>cust_id))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb1131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1131-1"><a href="cleaning-data-in-r.html#cb1131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assert that acct_amount_filled has no missing vals</span></span>
<span id="cb1131-2"><a href="cleaning-data-in-r.html#cb1131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(accounts_clean<span class="sc">$</span>acct_amount_filled))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
</div>
</div>
</div>
<div id="record-linkage" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Record Linkage<a href="cleaning-data-in-r.html#record-linkage" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="comparing-strings" class="section level3 hasAnchor" number="10.4.1">
<h3><span class="header-section-number">10.4.1</span> Comparing strings<a href="cleaning-data-in-r.html#comparing-strings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Comparing strings to clean data</strong></p>
<ul>
<li><p>In Chapter 2:</p>
<ul>
<li><code>"EU"</code> , <code>"eur"</code> , <code>"Europ"</code> → <code>"Europe"</code></li>
</ul></li>
<li><p>What if there are too many variations?</p>
<ul>
<li><p><code>"EU"</code> , <code>"eur"</code> , <code>"Europ"</code> , <code>"Europa"</code> , <code>"Erope"</code> , <code>"Evropa"</code> , … → <code>"Europe"</code> ?</p></li>
<li><p>Use string distance!</p></li>
</ul></li>
</ul>
<p><strong>Types of edit distance</strong></p>
<ul>
<li><p>Damerau-Levenshtein (<code>method = "dl"</code>)</p>
<ul>
<li><p>the <u>minimum number of steps</u> needed to get from <em>String A</em> to <em>String B</em></p>
<ul>
<li><p><strong>Insertion</strong> of a new character.</p></li>
<li><p><strong>Deletion</strong> of an existing character.</p></li>
<li><p><strong>Substitution</strong> of an existing character.</p></li>
<li><p><strong>Transposition</strong> of two existing consecutive characters.</p>
<p><img src="image/string_edit_distance.png" width="166" /><img src="image/string_edit_distance1_example.png" width="294" /></p>
<p><img src="image/string_edit_distance_complex_example.png" width="460" /></p></li>
</ul></li>
</ul></li>
<li><p>Levenshtein</p>
<ul>
<li>Considers only substitution, insertion, and deletion</li>
</ul></li>
<li><p>LCS (Longest Common Subsequence, <code>method = "lcs"</code>)</p>
<ul>
<li>Considers only insertion and deletion</li>
</ul></li>
<li><p>Others</p>
<ul>
<li><p>Jaro-Winkler</p></li>
<li><p>Jaccard (<code>method = "jaccard"</code>)</p></li>
</ul></li>
</ul>
<div id="small-distance-small-difference" class="section level4 hasAnchor" number="10.4.1.1">
<h4><span class="header-section-number">10.4.1.1</span> Small distance, small difference<a href="cleaning-data-in-r.html#small-distance-small-difference" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now you’ll practice using the stringdist package to compute string distances using various methods.</p>
<p>It’s important to be familiar with different methods, as some methods work better on certain datasets, while others work better on other datasets.</p>
<div class="sourceCode" id="cb1133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1133-1"><a href="cleaning-data-in-r.html#cb1133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringdist)</span>
<span id="cb1133-2"><a href="cleaning-data-in-r.html#cb1133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1133-3"><a href="cleaning-data-in-r.html#cb1133-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Damerau-Levenshtein distance</span></span>
<span id="cb1133-4"><a href="cleaning-data-in-r.html#cb1133-4" aria-hidden="true" tabindex="-1"></a><span class="fu">stringdist</span>(<span class="st">&quot;las angelos&quot;</span>, <span class="st">&quot;los angeles&quot;</span>, <span class="at">method =</span> <span class="st">&quot;dl&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb1135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1135-1"><a href="cleaning-data-in-r.html#cb1135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate LCS distance</span></span>
<span id="cb1135-2"><a href="cleaning-data-in-r.html#cb1135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stringdist</span>(<span class="st">&quot;las angelos&quot;</span>, <span class="st">&quot;los angeles&quot;</span>, <span class="at">method =</span> <span class="st">&quot;lcs&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb1137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1137-1"><a href="cleaning-data-in-r.html#cb1137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Jaccard distance</span></span>
<span id="cb1137-2"><a href="cleaning-data-in-r.html#cb1137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stringdist</span>(<span class="st">&quot;las angelos&quot;</span>, <span class="st">&quot;los angeles&quot;</span>, <span class="at">method =</span> <span class="st">&quot;jaccard&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
</div>
<div id="fixing-typos-with-string-distance" class="section level4 hasAnchor" number="10.4.1.2">
<h4><span class="header-section-number">10.4.1.2</span> Fixing typos with string distance<a href="cleaning-data-in-r.html#fixing-typos-with-string-distance" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>zagat</code>, is a set of restaurants in New York, Los Angeles, Atlanta, San Francisco, and Las Vegas. The data is from Zagat, a company that collects restaurant reviews, and includes the restaurant names, addresses, phone numbers, as well as other restaurant information.</p>
<div class="sourceCode" id="cb1139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1139-1"><a href="cleaning-data-in-r.html#cb1139-1" aria-hidden="true" tabindex="-1"></a>zagat <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/zagat_unclean.txt&quot;</span>, <span class="at">delim =</span> <span class="st">&quot;,&quot;</span>, <span class="at">col_select =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb1139-2"><a href="cleaning-data-in-r.html#cb1139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(zagat)</span></code></pre></div>
<pre><code>## tibble [310 × 6] (S3: tbl_df/tbl/data.frame)
##  $ id   : num [1:310] 0 1 2 3 4 5 6 8 9 11 ...
##  $ name : chr [1:310] &quot;apple pan the&quot; &quot;asahi ramen&quot; &quot;baja fresh&quot; &quot;belvedere the&quot; ...
##  $ addr : chr [1:310] &quot;10801 w. pico blvd.&quot; &quot;2027 sawtelle blvd.&quot; &quot;3345 kimber dr.&quot; &quot;9882 little santa monica blvd.&quot; ...
##  $ city : chr [1:310] &quot;llos angeles&quot; &quot;los angeles&quot; &quot;los angeles&quot; &quot;los angeles&quot; ...
##  $ phone: chr [1:310] &quot;310-475-3585&quot; &quot;310-479-2231&quot; &quot;805-498-4049&quot; &quot;310-788-2306&quot; ...
##  $ type : chr [1:310] &quot;american&quot; &quot;noodle shops&quot; &quot;mexican&quot; &quot;pacific new wave&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   ...1 = col_skip(),
##   ..   id = col_double(),
##   ..   name = col_character(),
##   ..   addr = col_character(),
##   ..   city = col_character(),
##   ..   phone = col_character(),
##   ..   type = col_character()
##   .. )</code></pre>
<p>The <code>city</code> column contains the name of the city that the restaurant is located in. However, there are a number of typos throughout the column.</p>
<p>Your task is to map each <code>city</code> to one of the five correctly-spelled cities contained in the <code>cities</code> data frame.</p>
<div class="sourceCode" id="cb1141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1141-1"><a href="cleaning-data-in-r.html#cb1141-1" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">city_actual =</span> <span class="fu">c</span>(<span class="st">&quot;new york&quot;</span>, <span class="st">&quot;los angeles&quot;</span>, <span class="st">&quot;atlanta&quot;</span>, <span class="st">&quot;san francisco&quot;</span>, <span class="st">&quot;las vegas&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb1142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1142-1"><a href="cleaning-data-in-r.html#cb1142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of each city variation</span></span>
<span id="cb1142-2"><a href="cleaning-data-in-r.html#cb1142-2" aria-hidden="true" tabindex="-1"></a>zagat <span class="sc">%&gt;%</span></span>
<span id="cb1142-3"><a href="cleaning-data-in-r.html#cb1142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(city)</span></code></pre></div>
<div class="sourceCode" id="cb1143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1143-1"><a href="cleaning-data-in-r.html#cb1143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fuzzyjoin)</span>
<span id="cb1143-2"><a href="cleaning-data-in-r.html#cb1143-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1143-3"><a href="cleaning-data-in-r.html#cb1143-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Join zagat and cities and look at results</span></span>
<span id="cb1143-4"><a href="cleaning-data-in-r.html#cb1143-4" aria-hidden="true" tabindex="-1"></a>zagat <span class="sc">%&gt;%</span></span>
<span id="cb1143-5"><a href="cleaning-data-in-r.html#cb1143-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Left join based on stringdist using city and city_actual cols</span></span>
<span id="cb1143-6"><a href="cleaning-data-in-r.html#cb1143-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stringdist_left_join</span>(cities, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;city&quot;</span> <span class="ot">=</span> <span class="st">&quot;city_actual&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1143-7"><a href="cleaning-data-in-r.html#cb1143-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select the name, city, and city_actual cols</span></span>
<span id="cb1143-8"><a href="cleaning-data-in-r.html#cb1143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, city, city_actual)</span></code></pre></div>
</div>
</div>
<div id="generating-and-comparing-pairs" class="section level3 hasAnchor" number="10.4.2">
<h3><span class="header-section-number">10.4.2</span> Generating and comparing pairs<a href="cleaning-data-in-r.html#generating-and-comparing-pairs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Record linkage</strong> involves linking data together that comes from multiple sources that don’t share a common identifier (a regular join won’t work), but contain data on the same entity.</p>
<p><strong>Steps</strong> :</p>
<ol style="list-style-type: decimal">
<li><p><strong>Clean</strong> the different datasets</p></li>
<li><p><strong>Generate</strong> pairs (rows)</p>
<ul>
<li><p>In order to figure out whether any of the rows are matches, we’ll need to compare every single row in table A with every single row in table B.</p>
<ul>
<li><code>reclin2</code> package, <code>pair(df_A, df_B)</code></li>
</ul></li>
</ul></li>
<li><p>But there may be too many pairs if we have thousand rows in each table. Solve:</p>
<ul>
<li><p><u>Blocking</u>: Only consider pairs when they agree on the blocking variable</p>
<ul>
<li><code>pair_blocking(df_A, df_B, on = "common_variable")</code></li>
</ul></li>
</ul></li>
<li><p><strong>Compare</strong> pairs</p>
<ul>
<li><p><code>compare_pairs(on = "variable", default_comparator = method)</code></p>
<ul>
<li><p><code>on</code> argument : indicate the column of each data frame should be compared (multiple columns by passing a vector of columns)</p></li>
<li><p><code>default_comparator</code> argument : indicate how strings should be compared (?cmp_identical)</p>
<ul>
<li><code>default_comparator = cmp_lcs()</code></li>
<li><code>default_comparator = cmp_jaccard()</code></li>
<li><code>default_comparator = cmp_jarowinkler()</code></li>
</ul></li>
</ul></li>
</ul></li>
<li><p><strong>Score</strong> pairs based on how similar they are</p></li>
<li><p><strong>Link</strong> the most similar pairs together</p></li>
</ol>
<div id="pair-blocking" class="section level4 hasAnchor" number="10.4.2.1">
<h4><span class="header-section-number">10.4.2.1</span> Pair blocking<a href="cleaning-data-in-r.html#pair-blocking" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>zagat</code> and <code>fodors</code> datasets both contain information about various restaurants, including addresses, phone numbers, and cuisine types.</p>
<p>Some restaurants appear in both datasets, but don’t necessarily have the same exact name or phone number written down.</p>
<p>In this chapter, you’ll work towards figuring out which restaurants appear in both datasets.</p>
<div class="sourceCode" id="cb1144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1144-1"><a href="cleaning-data-in-r.html#cb1144-1" aria-hidden="true" tabindex="-1"></a>zagat <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/zagat.rds&quot;</span>)</span>
<span id="cb1144-2"><a href="cleaning-data-in-r.html#cb1144-2" aria-hidden="true" tabindex="-1"></a>fodors <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;data/fodors.rds&quot;</span>)</span>
<span id="cb1144-3"><a href="cleaning-data-in-r.html#cb1144-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(zagat)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    310 obs. of  7 variables:
##  $ id   : int  0 1 2 3 4 5 6 8 9 11 ...
##  $ name : chr  &quot;apple pan the&quot; &quot;asahi ramen&quot; &quot;baja fresh&quot; &quot;belvedere the&quot; ...
##  $ addr : chr  &quot;10801 w. pico blvd.&quot; &quot;2027 sawtelle blvd.&quot; &quot;3345 kimber dr.&quot; &quot;9882 little santa monica blvd.&quot; ...
##  $ city : Factor w/ 26 levels &quot;atlanta&quot;,&quot;los angeles&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
##  $ phone: Factor w/ 329 levels &quot;100-813-8212&quot;,..: 143 145 312 155 139 96 323 125 150 132 ...
##  $ type : chr  &quot;american&quot; &quot;noodle shops&quot; &quot;mexican&quot; &quot;pacific new wave&quot; ...
##  $ class: int  534 535 536 537 538 539 540 542 543 545 ...</code></pre>
<div class="sourceCode" id="cb1146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1146-1"><a href="cleaning-data-in-r.html#cb1146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(fodors)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    533 obs. of  7 variables:
##  $ id   : int  0 1 2 3 4 5 6 7 8 9 ...
##  $ name : chr  &quot;arnie morton&#39;s of chicago&quot; &quot;art&#39;s delicatessen&quot; &quot;hotel bel-air&quot; &quot;cafe bizou&quot; ...
##  $ addr : chr  &quot;435 s. la cienega blv .&quot; &quot;12224 ventura blvd.&quot; &quot;701 stone canyon rd.&quot; &quot;14016 ventura blvd.&quot; ...
##  $ city : Factor w/ 5 levels &quot;atlanta&quot;,&quot;los angeles&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...
##  $ phone: chr  &quot;310-246-1501&quot; &quot;818-762-1221&quot; &quot;310-472-1211&quot; &quot;818-788-3536&quot; ...
##  $ type : chr  &quot;american&quot; &quot;american&quot; &quot;californian&quot; &quot;french&quot; ...
##  $ class: int  0 1 2 3 4 5 6 7 8 9 ...</code></pre>
<p>The first step towards this goal is to generate pairs of records so that you can compare them. You’ll first generate all possible pairs, and then use your newly-cleaned <code>city</code> column as a blocking variable.</p>
<div class="sourceCode" id="cb1148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1148-1"><a href="cleaning-data-in-r.html#cb1148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load reclin</span></span>
<span id="cb1148-2"><a href="cleaning-data-in-r.html#cb1148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reclin2)</span>
<span id="cb1148-3"><a href="cleaning-data-in-r.html#cb1148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1148-4"><a href="cleaning-data-in-r.html#cb1148-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate all possible pairs</span></span>
<span id="cb1148-5"><a href="cleaning-data-in-r.html#cb1148-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pair</span>(zagat, fodors)</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 165 230 pairs</code></pre>
<div class="sourceCode" id="cb1150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1150-1"><a href="cleaning-data-in-r.html#cb1150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate pairs with same city</span></span>
<span id="cb1150-2"><a href="cleaning-data-in-r.html#cb1150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pair_blocking</span>(zagat, fodors, <span class="at">on =</span> <span class="st">&quot;city&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>()</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 40 532 pairs
##   Blocking on: &#39;city&#39;</code></pre>
<p>By using <code>city</code> as a blocking variable, you were able to reduce the number of pairs you’ll need to compare from 165,230 pairs to 40,532.</p>
</div>
<div id="comparing-pairs" class="section level4 hasAnchor" number="10.4.2.2">
<h4><span class="header-section-number">10.4.2.2</span> Comparing pairs<a href="cleaning-data-in-r.html#comparing-pairs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Choosing a comparator and the columns to compare is highly dataset-dependent, so it’s best to try out different combinations to see which works best on the dataset you’re working with.</p>
<div class="sourceCode" id="cb1152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1152-1"><a href="cleaning-data-in-r.html#cb1152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate pairs</span></span>
<span id="cb1152-2"><a href="cleaning-data-in-r.html#cb1152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pair_blocking</span>(zagat, fodors, <span class="at">on =</span> <span class="st">&quot;city&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1152-3"><a href="cleaning-data-in-r.html#cb1152-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compare pairs by name using lcs()</span></span>
<span id="cb1152-4"><a href="cleaning-data-in-r.html#cb1152-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">compare_pairs</span>(<span class="at">on =</span> <span class="st">&quot;name&quot;</span>, <span class="at">default_comparator =</span> <span class="fu">cmp_lcs</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb1152-5"><a href="cleaning-data-in-r.html#cb1152-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 40 532 pairs
##   Blocking on: &#39;city&#39;</code></pre>
<div class="sourceCode" id="cb1154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1154-1"><a href="cleaning-data-in-r.html#cb1154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate pairs</span></span>
<span id="cb1154-2"><a href="cleaning-data-in-r.html#cb1154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pair_blocking</span>(zagat, fodors, <span class="at">on =</span> <span class="st">&quot;city&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1154-3"><a href="cleaning-data-in-r.html#cb1154-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compare pairs by name, phone, addr</span></span>
<span id="cb1154-4"><a href="cleaning-data-in-r.html#cb1154-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">compare_pairs</span>(<span class="at">on =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;phone&quot;</span>, <span class="st">&quot;addr&quot;</span>), </span>
<span id="cb1154-5"><a href="cleaning-data-in-r.html#cb1154-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">default_comparator =</span> <span class="fu">cmp_jarowinkler</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb1154-6"><a href="cleaning-data-in-r.html#cb1154-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 40 532 pairs
##   Blocking on: &#39;city&#39;</code></pre>
</div>
</div>
<div id="scoring-and-linking" class="section level3 hasAnchor" number="10.4.3">
<h3><span class="header-section-number">10.4.3</span> Scoring and linking<a href="cleaning-data-in-r.html#scoring-and-linking" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol start="5" style="list-style-type: decimal">
<li><p><strong>Score</strong> pairs based on how similar they are</p></li>
<li><p><strong>Link</strong> the most similar pairs together</p></li>
</ol>
<p>The end is near - all that’s left to do is:</p>
<ul>
<li><p>score and select pairs</p></li>
<li><p>link the data together</p></li>
</ul>
<div class="sourceCode" id="cb1156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1156-1"><a href="cleaning-data-in-r.html#cb1156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create pairs</span></span>
<span id="cb1156-2"><a href="cleaning-data-in-r.html#cb1156-2" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> <span class="fu">pair_blocking</span>(zagat, fodors, <span class="at">on =</span> <span class="st">&quot;city&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1156-3"><a href="cleaning-data-in-r.html#cb1156-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Compare pairs</span></span>
<span id="cb1156-4"><a href="cleaning-data-in-r.html#cb1156-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">compare_pairs</span>(<span class="at">on =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;addr&quot;</span>), </span>
<span id="cb1156-5"><a href="cleaning-data-in-r.html#cb1156-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">default_comparator =</span> <span class="fu">cmp_jarowinkler</span>())</span>
<span id="cb1156-6"><a href="cleaning-data-in-r.html#cb1156-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1156-7"><a href="cleaning-data-in-r.html#cb1156-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pairs)</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 6 pairs
##   Blocking on: &#39;city&#39;</code></pre>
<div class="sourceCode" id="cb1158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1158-1"><a href="cleaning-data-in-r.html#cb1158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Score pairs</span></span>
<span id="cb1158-2"><a href="cleaning-data-in-r.html#cb1158-2" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> <span class="fu">problink_em</span>(<span class="sc">~</span> name <span class="sc">+</span> addr, <span class="at">data =</span> pairs) <span class="sc">%&gt;%</span></span>
<span id="cb1158-3"><a href="cleaning-data-in-r.html#cb1158-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">predict</span>(<span class="at">pairs =</span> pairs, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1158-4"><a href="cleaning-data-in-r.html#cb1158-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1158-5"><a href="cleaning-data-in-r.html#cb1158-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pairs)</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 6 pairs
##   Blocking on: &#39;city&#39;</code></pre>
<div class="sourceCode" id="cb1160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1160-1"><a href="cleaning-data-in-r.html#cb1160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select pairs</span></span>
<span id="cb1160-2"><a href="cleaning-data-in-r.html#cb1160-2" aria-hidden="true" tabindex="-1"></a>pairs <span class="sc">%&gt;%</span></span>
<span id="cb1160-3"><a href="cleaning-data-in-r.html#cb1160-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select_n_to_m</span>(<span class="at">score =</span> <span class="st">&quot;weights&quot;</span>, <span class="at">variable =</span> <span class="st">&quot;select&quot;</span>, <span class="at">threshold =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>##   First data set:  310 records
##   Second data set: 533 records
##   Total number of pairs: 40 532 pairs
##   Blocking on: &#39;city&#39;</code></pre>
<div class="sourceCode" id="cb1162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1162-1"><a href="cleaning-data-in-r.html#cb1162-1" aria-hidden="true" tabindex="-1"></a>pairs <span class="sc">%&gt;%</span></span>
<span id="cb1162-2"><a href="cleaning-data-in-r.html#cb1162-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select_n_to_m</span>(<span class="at">score =</span> <span class="st">&quot;weights&quot;</span>, <span class="at">variable =</span> <span class="st">&quot;select&quot;</span>, <span class="at">threshold =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1162-3"><a href="cleaning-data-in-r.html#cb1162-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Link data </span></span>
<span id="cb1162-4"><a href="cleaning-data-in-r.html#cb1162-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">link</span>(<span class="at">selection =</span> <span class="st">&quot;select&quot;</span>)</span></code></pre></div>
<pre><code>##   Total number of pairs: 308 pairs</code></pre>
<div class="sourceCode" id="cb1164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1164-1"><a href="cleaning-data-in-r.html#cb1164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># More clearly to see what happen</span></span>
<span id="cb1164-2"><a href="cleaning-data-in-r.html#cb1164-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1164-3"><a href="cleaning-data-in-r.html#cb1164-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create and compare pairs</span></span>
<span id="cb1164-4"><a href="cleaning-data-in-r.html#cb1164-4" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> <span class="fu">pair_blocking</span>(zagat, fodors, <span class="at">on =</span> <span class="st">&quot;city&quot;</span>)</span>
<span id="cb1164-5"><a href="cleaning-data-in-r.html#cb1164-5" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> <span class="fu">compare_pairs</span>(pairs, <span class="at">on =</span> <span class="fu">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;addr&quot;</span>), </span>
<span id="cb1164-6"><a href="cleaning-data-in-r.html#cb1164-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">default_comparator =</span> <span class="fu">cmp_jarowinkler</span>())</span>
<span id="cb1164-7"><a href="cleaning-data-in-r.html#cb1164-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1164-8"><a href="cleaning-data-in-r.html#cb1164-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Scoring probabilistically</span></span>
<span id="cb1164-9"><a href="cleaning-data-in-r.html#cb1164-9" aria-hidden="true" tabindex="-1"></a><span class="co"># m- and u-probabilities for each of the linkage variables</span></span>
<span id="cb1164-10"><a href="cleaning-data-in-r.html#cb1164-10" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">problink_em</span>(<span class="sc">~</span> name <span class="sc">+</span> addr, <span class="at">data =</span> pairs)</span>
<span id="cb1164-11"><a href="cleaning-data-in-r.html#cb1164-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(m)</span>
<span id="cb1164-12"><a href="cleaning-data-in-r.html#cb1164-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1164-13"><a href="cleaning-data-in-r.html#cb1164-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Then score the pairs</span></span>
<span id="cb1164-14"><a href="cleaning-data-in-r.html#cb1164-14" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> <span class="fu">predict</span>(m, <span class="at">pairs =</span> pairs, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1164-15"><a href="cleaning-data-in-r.html#cb1164-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1164-16"><a href="cleaning-data-in-r.html#cb1164-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Select pairs</span></span>
<span id="cb1164-17"><a href="cleaning-data-in-r.html#cb1164-17" aria-hidden="true" tabindex="-1"></a>pairs <span class="ot">&lt;-</span> <span class="fu">select_n_to_m</span>(pairs, <span class="at">score =</span> <span class="st">&quot;weights&quot;</span>, <span class="at">variable =</span> <span class="st">&quot;select&quot;</span>, <span class="at">threshold =</span> <span class="dv">0</span>)</span>
<span id="cb1164-18"><a href="cleaning-data-in-r.html#cb1164-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1164-19"><a href="cleaning-data-in-r.html#cb1164-19" aria-hidden="true" tabindex="-1"></a><span class="co"># link pairs</span></span>
<span id="cb1164-20"><a href="cleaning-data-in-r.html#cb1164-20" aria-hidden="true" tabindex="-1"></a>linked_data_set <span class="ot">&lt;-</span> <span class="fu">link</span>(pairs, <span class="at">selection =</span> <span class="st">&quot;select&quot;</span>)</span>
<span id="cb1164-21"><a href="cleaning-data-in-r.html#cb1164-21" aria-hidden="true" tabindex="-1"></a>linked_data_set</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-importing-data-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-dates-and-times-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/10-Cleaning-Data-in-R.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
