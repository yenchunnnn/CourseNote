<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 25 Joining Data in SQL | Data Scientist with R</title>
  <meta name="description" content="This is a notebook about the data science courses took from the datacamp." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 25 Joining Data in SQL | Data Scientist with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a notebook about the data science courses took from the datacamp." />
  <meta name="github-repo" content="yenchunnnn/CourseNote" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 25 Joining Data in SQL | Data Scientist with R" />
  
  <meta name="twitter:description" content="This is a notebook about the data science courses took from the datacamp." />
  

<meta name="author" content="Yen Chun Chen" />


<meta name="date" content="2024-01-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intermediate-sql.html"/>
<link rel="next" href="introduction-to-git.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Scientist with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-arithmetic"><i class="fa fa-check"></i><b>1.1</b> Basic arithmetic</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-data-types"><i class="fa fa-check"></i><b>1.2</b> Basic data types</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vector"><i class="fa fa-check"></i><b>1.3</b> Vector</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function"><i class="fa fa-check"></i><b>1.3.1</b> Useful function</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-brackets-or-names"><i class="fa fa-check"></i><b>1.3.2</b> Selection - by brackets or names</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---operators"><i class="fa fa-check"></i><b>1.3.3</b> Selection - by comparison - operators</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---values"><i class="fa fa-check"></i><b>1.3.4</b> Selection - by comparison - values</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#matrix"><i class="fa fa-check"></i><b>1.4</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-function"><i class="fa fa-check"></i><b>1.4.1</b> Construct function</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-by-vector"><i class="fa fa-check"></i><b>1.4.2</b> Construct by vector</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#naming-a-matrix"><i class="fa fa-check"></i><b>1.4.3</b> Naming a matrix</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---sum-of-each-row-column"><i class="fa fa-check"></i><b>1.4.4</b> Manipulating - sum of each row &amp; column</a></li>
<li class="chapter" data-level="1.4.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-columns"><i class="fa fa-check"></i><b>1.4.5</b> Manipulating - add columns</a></li>
<li class="chapter" data-level="1.4.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-rows"><i class="fa fa-check"></i><b>1.4.6</b> Manipulating - add rows</a></li>
<li class="chapter" data-level="1.4.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection-of-matrix-elements"><i class="fa fa-check"></i><b>1.4.7</b> Selection of matrix elements</a></li>
<li class="chapter" data-level="1.4.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---1"><i class="fa fa-check"></i><b>1.4.8</b> Arithmetic - 1</a></li>
<li class="chapter" data-level="1.4.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---2"><i class="fa fa-check"></i><b>1.4.9</b> Arithmetic - 2</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor"><i class="fa fa-check"></i><b>1.5</b> Factor</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function-1"><i class="fa fa-check"></i><b>1.5.1</b> Useful function</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#nominal-ordinal-categorical-variable"><i class="fa fa-check"></i><b>1.5.2</b> Nominal &amp; Ordinal categorical variable</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor-levels"><i class="fa fa-check"></i><b>1.5.3</b> Factor levels</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#summarizing-a-factor"><i class="fa fa-check"></i><b>1.5.4</b> Summarizing a factor</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ordered-factors"><i class="fa fa-check"></i><b>1.5.5</b> Ordered factors</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frame"><i class="fa fa-check"></i><b>1.6</b> Data Frame</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#quick-look-at-dataset"><i class="fa fa-check"></i><b>1.6.1</b> Quick look at dataset</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-data-frame"><i class="fa fa-check"></i><b>1.6.2</b> Creating a data frame</a></li>
<li class="chapter" data-level="1.6.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---brackets"><i class="fa fa-check"></i><b>1.6.3</b> Selection - brackets</a></li>
<li class="chapter" data-level="1.6.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---names"><i class="fa fa-check"></i><b>1.6.4</b> Selection - names</a></li>
<li class="chapter" data-level="1.6.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection--"><i class="fa fa-check"></i><b>1.6.5</b> Selection - $</a></li>
<li class="chapter" data-level="1.6.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---subset"><i class="fa fa-check"></i><b>1.6.6</b> Selection - subset</a></li>
<li class="chapter" data-level="1.6.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#sorting"><i class="fa fa-check"></i><b>1.6.7</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#list"><i class="fa fa-check"></i><b>1.7</b> List</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-list"><i class="fa fa-check"></i><b>1.7.1</b> Creating a list</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-named-list"><i class="fa fa-check"></i><b>1.7.2</b> Creating a named list</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection"><i class="fa fa-check"></i><b>1.7.3</b> Selection</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#bring-it-all-together"><i class="fa fa-check"></i><b>1.8</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>2</b> Intermediate R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#conditionals-and-control-flow"><i class="fa fa-check"></i><b>2.1</b> Conditionals and Control Flow</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intermediate-r.html"><a href="intermediate-r.html#relational-operators"><i class="fa fa-check"></i><b>2.1.1</b> Relational operators</a></li>
<li class="chapter" data-level="2.1.2" data-path="intermediate-r.html"><a href="intermediate-r.html#conditional-statements"><i class="fa fa-check"></i><b>2.1.2</b> Conditional statements</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#loops"><i class="fa fa-check"></i><b>2.2</b> Loops</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#while-loop"><i class="fa fa-check"></i><b>2.2.1</b> While loop</a></li>
<li class="chapter" data-level="2.2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loop"><i class="fa fa-check"></i><b>2.2.2</b> For loop</a></li>
<li class="chapter" data-level="2.2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#bring-it-all-together-1"><i class="fa fa-check"></i><b>2.2.3</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#function"><i class="fa fa-check"></i><b>2.3</b> Function</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#introduction-to-function"><i class="fa fa-check"></i><b>2.3.1</b> Introduction to function</a></li>
<li class="chapter" data-level="2.3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#writing-functions"><i class="fa fa-check"></i><b>2.3.2</b> Writing functions</a></li>
<li class="chapter" data-level="2.3.3" data-path="intermediate-r.html"><a href="intermediate-r.html#packages"><i class="fa fa-check"></i><b>2.3.3</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intermediate-r.html"><a href="intermediate-r.html#the-apply-family"><i class="fa fa-check"></i><b>2.4</b> The apply family</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply"><i class="fa fa-check"></i><b>2.4.1</b> lapply</a></li>
<li class="chapter" data-level="2.4.2" data-path="intermediate-r.html"><a href="intermediate-r.html#sapply"><i class="fa fa-check"></i><b>2.4.2</b> sapply</a></li>
<li class="chapter" data-level="2.4.3" data-path="intermediate-r.html"><a href="intermediate-r.html#vapply"><i class="fa fa-check"></i><b>2.4.3</b> vapply</a></li>
<li class="chapter" data-level="2.4.4" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply-vs-sapply-vs-vapply"><i class="fa fa-check"></i><b>2.4.4</b> lapply vs sapply vs vapply</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intermediate-r.html"><a href="intermediate-r.html#utilities"><i class="fa fa-check"></i><b>2.5</b> Utilities</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="intermediate-r.html"><a href="intermediate-r.html#mathematical-utilities"><i class="fa fa-check"></i><b>2.5.1</b> Mathematical utilities</a></li>
<li class="chapter" data-level="2.5.2" data-path="intermediate-r.html"><a href="intermediate-r.html#data-structures-utilities"><i class="fa fa-check"></i><b>2.5.2</b> Data structures utilities</a></li>
<li class="chapter" data-level="2.5.3" data-path="intermediate-r.html"><a href="intermediate-r.html#regular-expressions"><i class="fa fa-check"></i><b>2.5.3</b> Regular Expressions</a></li>
<li class="chapter" data-level="2.5.4" data-path="intermediate-r.html"><a href="intermediate-r.html#dates-times"><i class="fa fa-check"></i><b>2.5.4</b> Dates &amp; Times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Introduction to the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-wrangling"><i class="fa fa-check"></i><b>3.1</b> Data wrangling</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#load-dataset"><i class="fa fa-check"></i><b>3.1.1</b> Load dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#filtering"><i class="fa fa-check"></i><b>3.1.2</b> Filtering</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.1.3</b> Arrange</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.1.4</b> Mutate</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-visualization"><i class="fa fa-check"></i><b>3.2</b> Data visualization</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#subset-df-variable"><i class="fa fa-check"></i><b>3.2.1</b> Subset df variable</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#ggplot-aesthetics"><i class="fa fa-check"></i><b>3.2.2</b> ggplot aesthetics</a></li>
<li class="chapter" data-level="3.2.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#faceting"><i class="fa fa-check"></i><b>3.2.3</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grouping-summarizing"><i class="fa fa-check"></i><b>3.3</b> Grouping &amp; summarizing</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#summarize"><i class="fa fa-check"></i><b>3.3.1</b> Summarize</a></li>
<li class="chapter" data-level="3.3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#group-by"><i class="fa fa-check"></i><b>3.3.2</b> Group by</a></li>
<li class="chapter" data-level="3.3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#visualizing-summarized-data"><i class="fa fa-check"></i><b>3.3.3</b> Visualizing summarized data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#types-of-visualizations"><i class="fa fa-check"></i><b>3.4</b> Types of visualizations</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#line-plots"><i class="fa fa-check"></i><b>3.4.1</b> Line plots</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#bar-plots"><i class="fa fa-check"></i><b>3.4.2</b> Bar plots</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#histograms"><i class="fa fa-check"></i><b>3.4.3</b> Histograms</a></li>
<li class="chapter" data-level="3.4.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#box-plots"><i class="fa fa-check"></i><b>3.4.4</b> Box plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#transforming-data"><i class="fa fa-check"></i><b>4.1</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data"><i class="fa fa-check"></i><b>4.1.1</b> Exploring data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#aggregating-data"><i class="fa fa-check"></i><b>4.2</b> Aggregating Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#count"><i class="fa fa-check"></i><b>4.2.1</b> Count</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#group_by-summarize-ungroup"><i class="fa fa-check"></i><b>4.2.2</b> group_by, summarize, ungroup</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#slice_min-slice_max"><i class="fa fa-check"></i><b>4.2.3</b> slice_min, slice_max</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#selecting-and-transforming-data"><i class="fa fa-check"></i><b>4.3</b> Selecting and Transforming Data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#select"><i class="fa fa-check"></i><b>4.3.1</b> Select</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#rename"><i class="fa fa-check"></i><b>4.3.2</b> Rename</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-manipulation.html"><a href="data-manipulation.html#transmute"><i class="fa fa-check"></i><b>4.3.3</b> Transmute</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#case-study-the-babynames-dataset"><i class="fa fa-check"></i><b>4.4</b> Case Study: The babynames Dataset</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#load-dataset-1"><i class="fa fa-check"></i><b>4.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data-1"><i class="fa fa-check"></i><b>4.4.2</b> Exploring data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="joining-data.html"><a href="joining-data.html"><i class="fa fa-check"></i><b>5</b> Joining Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="joining-data.html"><a href="joining-data.html#inner-join"><i class="fa fa-check"></i><b>5.1</b> Inner join</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="joining-data.html"><a href="joining-data.html#join-by-keys"><i class="fa fa-check"></i><b>5.1.1</b> Join by keys</a></li>
<li class="chapter" data-level="5.1.2" data-path="joining-data.html"><a href="joining-data.html#join-with-a-one-to-many-relationship"><i class="fa fa-check"></i><b>5.1.2</b> Join with a one-to-many relationship</a></li>
<li class="chapter" data-level="5.1.3" data-path="joining-data.html"><a href="joining-data.html#join-in-either-direction"><i class="fa fa-check"></i><b>5.1.3</b> Join in either direction</a></li>
<li class="chapter" data-level="5.1.4" data-path="joining-data.html"><a href="joining-data.html#join-three-or-more-tables"><i class="fa fa-check"></i><b>5.1.4</b> Join three or more tables</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="joining-data.html"><a href="joining-data.html#left-right-joins"><i class="fa fa-check"></i><b>5.2</b> Left &amp; Right Joins</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="joining-data.html"><a href="joining-data.html#left-join"><i class="fa fa-check"></i><b>5.2.1</b> Left join</a></li>
<li class="chapter" data-level="5.2.2" data-path="joining-data.html"><a href="joining-data.html#right-join"><i class="fa fa-check"></i><b>5.2.2</b> Right join</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="joining-data.html"><a href="joining-data.html#full-semi-anti-joins"><i class="fa fa-check"></i><b>5.3</b> Full, Semi &amp; Anti Joins</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="joining-data.html"><a href="joining-data.html#full-join"><i class="fa fa-check"></i><b>5.3.1</b> Full join</a></li>
<li class="chapter" data-level="5.3.2" data-path="joining-data.html"><a href="joining-data.html#semi-anti-joins"><i class="fa fa-check"></i><b>5.3.2</b> Semi &amp; Anti joins</a></li>
<li class="chapter" data-level="5.3.3" data-path="joining-data.html"><a href="joining-data.html#visualizing-set-differences"><i class="fa fa-check"></i><b>5.3.3</b> Visualizing set differences</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="joining-data.html"><a href="joining-data.html#case-study-joins-on-stack-overflow-data"><i class="fa fa-check"></i><b>5.4</b> Case study: Joins on Stack Overflow Data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="joining-data.html"><a href="joining-data.html#load-dataset-2"><i class="fa fa-check"></i><b>5.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="5.4.2" data-path="joining-data.html"><a href="joining-data.html#stack-overflow-questions"><i class="fa fa-check"></i><b>5.4.2</b> Stack Overflow questions</a></li>
<li class="chapter" data-level="5.4.3" data-path="joining-data.html"><a href="joining-data.html#joining-questions-and-answers"><i class="fa fa-check"></i><b>5.4.3</b> Joining questions and answers</a></li>
<li class="chapter" data-level="5.4.4" data-path="joining-data.html"><a href="joining-data.html#the-bind_rows-verb"><i class="fa fa-check"></i><b>5.4.4</b> The bind_rows verb</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>6</b> Introduction to Statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#summary-statistics"><i class="fa fa-check"></i><b>6.1</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-center"><i class="fa fa-check"></i><b>6.1.1</b> Measures of center</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-spread"><i class="fa fa-check"></i><b>6.1.2</b> Measures of spread</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#random-numbers-and-probability"><i class="fa fa-check"></i><b>6.2</b> Random Numbers and Probability</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chances"><i class="fa fa-check"></i><b>6.2.1</b> Chances</a></li>
<li class="chapter" data-level="6.2.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#discrete-distributions"><i class="fa fa-check"></i><b>6.2.2</b> Discrete distributions</a></li>
<li class="chapter" data-level="6.2.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#continuous-distributions"><i class="fa fa-check"></i><b>6.2.3</b> Continuous distributions</a></li>
<li class="chapter" data-level="6.2.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#binomial-distribution"><i class="fa fa-check"></i><b>6.2.4</b> Binomial distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#more-distributions-central-limit-theorem"><i class="fa fa-check"></i><b>6.3</b> More Distributions &amp; Central Limit Theorem</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#normal-distribution"><i class="fa fa-check"></i><b>6.3.1</b> Normal distribution</a></li>
<li class="chapter" data-level="6.3.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>6.3.2</b> Central limit theorem</a></li>
<li class="chapter" data-level="6.3.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#poisson-distribution"><i class="fa fa-check"></i><b>6.3.3</b> Poisson distribution</a></li>
<li class="chapter" data-level="6.3.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#exponential-distribution"><i class="fa fa-check"></i><b>6.3.4</b> Exponential distribution</a></li>
<li class="chapter" data-level="6.3.5" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#students-t-distribution"><i class="fa fa-check"></i><b>6.3.5</b> (Student’s) t-distribution</a></li>
<li class="chapter" data-level="6.3.6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#log-normal-distribution"><i class="fa fa-check"></i><b>6.3.6</b> Log-normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-and-experimental-design"><i class="fa fa-check"></i><b>6.4</b> Correlation and Experimental Design</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation"><i class="fa fa-check"></i><b>6.4.1</b> Correlation</a></li>
<li class="chapter" data-level="6.4.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-caveats"><i class="fa fa-check"></i><b>6.4.2</b> Correlation caveats</a></li>
<li class="chapter" data-level="6.4.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#design-of-experiments"><i class="fa fa-check"></i><b>6.4.3</b> Design of experiments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Introduction to Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#data-columns-types-affect-plot-types"><i class="fa fa-check"></i><b>7.1.1</b> Data columns types affect plot types</a></li>
<li class="chapter" data-level="7.1.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1.2</b> The grammar of graphics</a></li>
<li class="chapter" data-level="7.1.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#ggplot2-layers"><i class="fa fa-check"></i><b>7.1.3</b> ggplot2 layers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>7.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#visible-aesthetics"><i class="fa fa-check"></i><b>7.2.1</b> Visible aesthetics</a></li>
<li class="chapter" data-level="7.2.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#using-attributes"><i class="fa fa-check"></i><b>7.2.2</b> Using attributes</a></li>
<li class="chapter" data-level="7.2.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#modifying-aesthetics"><i class="fa fa-check"></i><b>7.2.3</b> Modifying aesthetics</a></li>
<li class="chapter" data-level="7.2.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics-best-practices"><i class="fa fa-check"></i><b>7.2.4</b> Aesthetics best practices</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#geometries"><i class="fa fa-check"></i><b>7.3</b> Geometries</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#scatter-plots"><i class="fa fa-check"></i><b>7.3.1</b> Scatter plots</a></li>
<li class="chapter" data-level="7.3.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#histograms-1"><i class="fa fa-check"></i><b>7.3.2</b> Histograms</a></li>
<li class="chapter" data-level="7.3.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#bar-plots-1"><i class="fa fa-check"></i><b>7.3.3</b> Bar plots</a></li>
<li class="chapter" data-level="7.3.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#line-plots-1"><i class="fa fa-check"></i><b>7.3.4</b> Line plots</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>7.4</b> Themes</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes-from-scratch"><i class="fa fa-check"></i><b>7.4.1</b> Themes from scratch</a></li>
<li class="chapter" data-level="7.4.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#theme-flexibility"><i class="fa fa-check"></i><b>7.4.2</b> Theme flexibility</a></li>
<li class="chapter" data-level="7.4.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#effective-explanatory-plots"><i class="fa fa-check"></i><b>7.4.3</b> Effective explanatory plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Intermediate Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#statistics"><i class="fa fa-check"></i><b>8.1</b> Statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-with-geoms"><i class="fa fa-check"></i><b>8.1.1</b> Stats with geoms</a></li>
<li class="chapter" data-level="8.1.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-sum-quantile"><i class="fa fa-check"></i><b>8.1.2</b> Stats: sum &amp; quantile</a></li>
<li class="chapter" data-level="8.1.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-outside-geoms"><i class="fa fa-check"></i><b>8.1.3</b> Stats outside geoms</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>8.2</b> Coordinates</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>8.2.1</b> Coordinates layer</a></li>
<li class="chapter" data-level="8.2.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-vs.-scales"><i class="fa fa-check"></i><b>8.2.2</b> Coordinates vs. scales</a></li>
<li class="chapter" data-level="8.2.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#double-flipped-axes"><i class="fa fa-check"></i><b>8.2.3</b> Double &amp; flipped axes</a></li>
<li class="chapter" data-level="8.2.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#polar-coordinates"><i class="fa fa-check"></i><b>8.2.4</b> Polar coordinates</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>8.3</b> Facets</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#the-facets-layer"><i class="fa fa-check"></i><b>8.3.1</b> The facets layer</a></li>
<li class="chapter" data-level="8.3.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-labels-order"><i class="fa fa-check"></i><b>8.3.2</b> Facet labels &amp; order</a></li>
<li class="chapter" data-level="8.3.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-plotting-spaces"><i class="fa fa-check"></i><b>8.3.3</b> Facet plotting spaces</a></li>
<li class="chapter" data-level="8.3.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-wrap-margins"><i class="fa fa-check"></i><b>8.3.4</b> Facet wrap &amp; margins</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#best-practices"><i class="fa fa-check"></i><b>8.4</b> Best Practices</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#bar-plots-2"><i class="fa fa-check"></i><b>8.4.1</b> Bar plots</a></li>
<li class="chapter" data-level="8.4.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#heatmaps-use-case-scenario"><i class="fa fa-check"></i><b>8.4.2</b> Heatmaps use case scenario</a></li>
<li class="chapter" data-level="8.4.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#when-good-data-makes-bad-plots"><i class="fa fa-check"></i><b>8.4.3</b> When good data makes bad plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html"><i class="fa fa-check"></i><b>9</b> Introduction to Importing Data in R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#flat-files-with-utils"><i class="fa fa-check"></i><b>9.1</b> Flat files with utils</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.csv"><i class="fa fa-check"></i><b>9.1.1</b> read.csv</a></li>
<li class="chapter" data-level="9.1.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.delim"><i class="fa fa-check"></i><b>9.1.2</b> read.delim</a></li>
<li class="chapter" data-level="9.1.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.table"><i class="fa fa-check"></i><b>9.1.3</b> read.table</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr-data.table"><i class="fa fa-check"></i><b>9.2</b> readr &amp; data.table</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr"><i class="fa fa-check"></i><b>9.2.1</b> readr</a></li>
<li class="chapter" data-level="9.2.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#data.table"><i class="fa fa-check"></i><b>9.2.2</b> data.table</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#excel-data"><i class="fa fa-check"></i><b>9.3</b> Excel data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#list-the-sheets-of-xls-file"><i class="fa fa-check"></i><b>9.3.1</b> List the sheets of xls file</a></li>
<li class="chapter" data-level="9.3.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#import-an-excel-sheet"><i class="fa fa-check"></i><b>9.3.2</b> Import an Excel sheet</a></li>
<li class="chapter" data-level="9.3.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#col_names-skip-argument"><i class="fa fa-check"></i><b>9.3.3</b> col_names &amp; skip argument</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#reproducible-excel-work---xlconnect"><i class="fa fa-check"></i><b>9.4</b> Reproducible Excel work - XLConnect</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets"><i class="fa fa-check"></i><b>9.4.1</b> Adapting sheets</a></li>
<li class="chapter" data-level="9.4.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets-1"><i class="fa fa-check"></i><b>9.4.2</b> Adapting sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html"><i class="fa fa-check"></i><b>10</b> Cleaning Data in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#common-data-problems"><i class="fa fa-check"></i><b>10.1</b> Common Data Problems</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#data-type-constraints"><i class="fa fa-check"></i><b>10.1.1</b> Data type constraints</a></li>
<li class="chapter" data-level="10.1.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#range-constraints"><i class="fa fa-check"></i><b>10.1.2</b> Range constraints</a></li>
<li class="chapter" data-level="10.1.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniqueness-constraints"><i class="fa fa-check"></i><b>10.1.3</b> Uniqueness constraints</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-and-text-data"><i class="fa fa-check"></i><b>10.2</b> Categorical and Text Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#checking-membership"><i class="fa fa-check"></i><b>10.2.1</b> Checking membership</a></li>
<li class="chapter" data-level="10.2.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-data-problems"><i class="fa fa-check"></i><b>10.2.2</b> Categorical data problems</a></li>
<li class="chapter" data-level="10.2.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cleaning-text-data"><i class="fa fa-check"></i><b>10.2.3</b> Cleaning text data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#advanced-data-problems"><i class="fa fa-check"></i><b>10.3</b> Advanced Data Problems</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniformity"><i class="fa fa-check"></i><b>10.3.1</b> Uniformity</a></li>
<li class="chapter" data-level="10.3.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cross-field-validation"><i class="fa fa-check"></i><b>10.3.2</b> Cross field validation</a></li>
<li class="chapter" data-level="10.3.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#completeness"><i class="fa fa-check"></i><b>10.3.3</b> Completeness</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#record-linkage"><i class="fa fa-check"></i><b>10.4</b> Record Linkage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#comparing-strings"><i class="fa fa-check"></i><b>10.4.1</b> Comparing strings</a></li>
<li class="chapter" data-level="10.4.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#generating-and-comparing-pairs"><i class="fa fa-check"></i><b>10.4.2</b> Generating and comparing pairs</a></li>
<li class="chapter" data-level="10.4.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#scoring-and-linking"><i class="fa fa-check"></i><b>10.4.3</b> Scoring and linking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html"><i class="fa fa-check"></i><b>11</b> Working with Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#dates-and-times-in-r"><i class="fa fa-check"></i><b>11.1</b> Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#introduction-to-dates"><i class="fa fa-check"></i><b>11.1.1</b> Introduction to dates</a></li>
<li class="chapter" data-level="11.1.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#why-use-dates"><i class="fa fa-check"></i><b>11.1.2</b> Why use dates?</a></li>
<li class="chapter" data-level="11.1.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#what-about-times"><i class="fa fa-check"></i><b>11.1.3</b> What about times?</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-manipulating-with-lubridate"><i class="fa fa-check"></i><b>11.2</b> Parsing &amp; Manipulating with lubridate</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-dates"><i class="fa fa-check"></i><b>11.2.1</b> Parsing dates</a></li>
<li class="chapter" data-level="11.2.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#manipulating-dates"><i class="fa fa-check"></i><b>11.2.2</b> Manipulating dates</a></li>
<li class="chapter" data-level="11.2.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#extracting-parts-of-a-datetime"><i class="fa fa-check"></i><b>11.2.3</b> Extracting parts of a datetime</a></li>
<li class="chapter" data-level="11.2.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#rounding-datetimes"><i class="fa fa-check"></i><b>11.2.4</b> Rounding datetimes</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#arithmetic-with-dates-and-times"><i class="fa fa-check"></i><b>11.3</b> Arithmetic with Dates and Times</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#taking-differences-of-datetimes"><i class="fa fa-check"></i><b>11.3.1</b> Taking differences of datetimes</a></li>
<li class="chapter" data-level="11.3.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-spans"><i class="fa fa-check"></i><b>11.3.2</b> Time spans</a></li>
<li class="chapter" data-level="11.3.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#intervals"><i class="fa fa-check"></i><b>11.3.3</b> Intervals</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#problems-in-practice"><i class="fa fa-check"></i><b>11.4</b> Problems in practice</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-zones"><i class="fa fa-check"></i><b>11.4.1</b> Time zones</a></li>
<li class="chapter" data-level="11.4.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#more-on-import-and-export-datetimes"><i class="fa fa-check"></i><b>11.4.2</b> More on import and export datetimes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html"><i class="fa fa-check"></i><b>12</b> Introduction to Writing Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#write-a-function"><i class="fa fa-check"></i><b>12.1</b> Write a Function</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#why-write-function"><i class="fa fa-check"></i><b>12.1.1</b> Why write function?</a></li>
<li class="chapter" data-level="12.1.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#convert-scripts-into-functions"><i class="fa fa-check"></i><b>12.1.2</b> Convert scripts into functions</a></li>
<li class="chapter" data-level="12.1.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#readable-code"><i class="fa fa-check"></i><b>12.1.3</b> Readable code</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#all-about-arguments"><i class="fa fa-check"></i><b>12.2</b> All About Arguments</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#default-arguments"><i class="fa fa-check"></i><b>12.2.1</b> Default arguments</a></li>
<li class="chapter" data-level="12.2.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#pass-arguments-between-functions"><i class="fa fa-check"></i><b>12.2.2</b> Pass arguments between functions</a></li>
<li class="chapter" data-level="12.2.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#checking-arguments"><i class="fa fa-check"></i><b>12.2.3</b> Checking arguments</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-values-and-scope"><i class="fa fa-check"></i><b>12.3</b> Return Values and Scope</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#returning-values"><i class="fa fa-check"></i><b>12.3.1</b> Returning values</a></li>
<li class="chapter" data-level="12.3.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-multiple-values"><i class="fa fa-check"></i><b>12.3.2</b> Return multiple values</a></li>
<li class="chapter" data-level="12.3.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#environments"><i class="fa fa-check"></i><b>12.3.3</b> Environments</a></li>
<li class="chapter" data-level="12.3.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#scope-and-precedence"><i class="fa fa-check"></i><b>12.3.4</b> Scope and precedence</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#case-study-on-grain-yields"><i class="fa fa-check"></i><b>12.4</b> Case Study on Grain Yields</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#grain-yields-unit-conversion"><i class="fa fa-check"></i><b>12.4.1</b> Grain yields &amp; unit conversion</a></li>
<li class="chapter" data-level="12.4.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#visualizing-grain-yields"><i class="fa fa-check"></i><b>12.4.2</b> Visualizing grain yields</a></li>
<li class="chapter" data-level="12.4.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#modeling-grain-yields"><i class="fa fa-check"></i><b>12.4.3</b> Modeling grain yields</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html"><i class="fa fa-check"></i><b>13</b> Exploratory Data Analysis in R</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-categorical-data"><i class="fa fa-check"></i><b>13.1</b> Exploring Categorical Data</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#categorical-data"><i class="fa fa-check"></i><b>13.1.1</b> Categorical data</a></li>
<li class="chapter" data-level="13.1.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#counts-vs.-proportions"><i class="fa fa-check"></i><b>13.1.2</b> Counts vs. proportions</a></li>
<li class="chapter" data-level="13.1.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable"><i class="fa fa-check"></i><b>13.1.3</b> Distribution of one variable</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-numerical-data"><i class="fa fa-check"></i><b>13.2</b> Exploring numerical data</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-data"><i class="fa fa-check"></i><b>13.2.1</b> Numerical Data</a></li>
<li class="chapter" data-level="13.2.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable-1"><i class="fa fa-check"></i><b>13.2.2</b> Distribution of one variable</a></li>
<li class="chapter" data-level="13.2.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#box-plots-1"><i class="fa fa-check"></i><b>13.2.3</b> Box plots</a></li>
<li class="chapter" data-level="13.2.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#visual-in-higher-dimensions"><i class="fa fa-check"></i><b>13.2.4</b> Visual in higher dimensions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-summaries"><i class="fa fa-check"></i><b>13.3</b> Numerical Summaries</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-center-1"><i class="fa fa-check"></i><b>13.3.1</b> Measures of center</a></li>
<li class="chapter" data-level="13.3.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-variability"><i class="fa fa-check"></i><b>13.3.2</b> Measures of variability</a></li>
<li class="chapter" data-level="13.3.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#shape-transformations"><i class="fa fa-check"></i><b>13.3.3</b> Shape &amp; transformations</a></li>
<li class="chapter" data-level="13.3.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#outliers"><i class="fa fa-check"></i><b>13.3.4</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#case-study"><i class="fa fa-check"></i><b>13.4</b> Case Study</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#new-data"><i class="fa fa-check"></i><b>13.4.1</b> New data</a></li>
<li class="chapter" data-level="13.4.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-1"><i class="fa fa-check"></i><b>13.4.2</b> Check-in 1</a></li>
<li class="chapter" data-level="13.4.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-2"><i class="fa fa-check"></i><b>13.4.3</b> Check-in 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html"><i class="fa fa-check"></i><b>14</b> Introduction to Regression</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>14.1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#tale-of-two-variables"><i class="fa fa-check"></i><b>14.1.1</b> Tale of two variables</a></li>
<li class="chapter" data-level="14.1.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#fitting-a-linear-regression"><i class="fa fa-check"></i><b>14.1.2</b> Fitting a linear regression</a></li>
<li class="chapter" data-level="14.1.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#categorical-explanatory-variables"><i class="fa fa-check"></i><b>14.1.3</b> Categorical explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-model-objects"><i class="fa fa-check"></i><b>14.2</b> Predictions &amp; model objects</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#making-predictions"><i class="fa fa-check"></i><b>14.2.1</b> Making predictions</a></li>
<li class="chapter" data-level="14.2.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#working-with-model-objects"><i class="fa fa-check"></i><b>14.2.2</b> Working with model objects</a></li>
<li class="chapter" data-level="14.2.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>14.2.3</b> Regression to the mean</a></li>
<li class="chapter" data-level="14.2.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#transforming-variables"><i class="fa fa-check"></i><b>14.2.4</b> Transforming variables</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#assessing-model-fit"><i class="fa fa-check"></i><b>14.3</b> Assessing model fit</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantifying-model-fit"><i class="fa fa-check"></i><b>14.3.1</b> Quantifying model fit</a></li>
<li class="chapter" data-level="14.3.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#visualizing-model-fit"><i class="fa fa-check"></i><b>14.3.2</b> Visualizing model fit</a></li>
<li class="chapter" data-level="14.3.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#outliers-leverage-influence"><i class="fa fa-check"></i><b>14.3.3</b> Outliers, leverage, influence</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-logistic-regression"><i class="fa fa-check"></i><b>14.4</b> Simple logistic regression</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#why-need-logistic-regression"><i class="fa fa-check"></i><b>14.4.1</b> Why need logistic regression</a></li>
<li class="chapter" data-level="14.4.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-odds-ratios"><i class="fa fa-check"></i><b>14.4.2</b> Predictions &amp; odds ratios</a></li>
<li class="chapter" data-level="14.4.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantify-logistic-regression-fit"><i class="fa fa-check"></i><b>14.4.3</b> Quantify logistic regression fit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="intermediate-regression.html"><a href="intermediate-regression.html"><i class="fa fa-check"></i><b>15</b> Intermediate Regression</a>
<ul>
<li class="chapter" data-level="15.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes"><i class="fa fa-check"></i><b>15.1</b> Parallel Slopes</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes-linear-regression"><i class="fa fa-check"></i><b>15.1.1</b> Parallel slopes linear regression</a></li>
<li class="chapter" data-level="15.1.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predicting-parallel-slopes"><i class="fa fa-check"></i><b>15.1.2</b> Predicting parallel slopes</a></li>
<li class="chapter" data-level="15.1.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#assessing-model-performance"><i class="fa fa-check"></i><b>15.1.3</b> Assessing model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#interactions"><i class="fa fa-check"></i><b>15.2</b> Interactions</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#models-for-each-category"><i class="fa fa-check"></i><b>15.2.1</b> Models for each category</a></li>
<li class="chapter" data-level="15.2.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#one-model-with-an-interaction"><i class="fa fa-check"></i><b>15.2.2</b> One model with an interaction</a></li>
<li class="chapter" data-level="15.2.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predict-with-interactions"><i class="fa fa-check"></i><b>15.2.3</b> Predict with interactions</a></li>
<li class="chapter" data-level="15.2.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#simpsons-paradox"><i class="fa fa-check"></i><b>15.2.4</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>15.3</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#two-numeric-ivs"><i class="fa fa-check"></i><b>15.3.1</b> Two numeric IVs</a></li>
<li class="chapter" data-level="15.3.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#more-than-2-ivs"><i class="fa fa-check"></i><b>15.3.2</b> More than 2 IVs</a></li>
<li class="chapter" data-level="15.3.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance"><i class="fa fa-check"></i><b>15.3.3</b> Model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression"><i class="fa fa-check"></i><b>15.4</b> Multiple Logistic Regression</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression-1"><i class="fa fa-check"></i><b>15.4.1</b> Multiple Logistic Regression</a></li>
<li class="chapter" data-level="15.4.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#logistic-distribution"><i class="fa fa-check"></i><b>15.4.2</b> Logistic distribution</a></li>
<li class="chapter" data-level="15.4.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance-1"><i class="fa fa-check"></i><b>15.4.3</b> Model performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sampling-in-r.html"><a href="sampling-in-r.html"><i class="fa fa-check"></i><b>16</b> Sampling in R</a>
<ul>
<li class="chapter" data-level="16.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-sampling"><i class="fa fa-check"></i><b>16.1</b> Introduction to Sampling</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-point-estimates"><i class="fa fa-check"></i><b>16.1.1</b> Sampling &amp; point estimates</a></li>
<li class="chapter" data-level="16.1.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#convenience-sampling"><i class="fa fa-check"></i><b>16.1.2</b> Convenience sampling</a></li>
<li class="chapter" data-level="16.1.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#pseudo-random-number-generation"><i class="fa fa-check"></i><b>16.1.3</b> Pseudo-random number generation</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-methods"><i class="fa fa-check"></i><b>16.2</b> Sampling Methods</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#simple-random-systematic-sampling"><i class="fa fa-check"></i><b>16.2.1</b> Simple random &amp; systematic sampling</a></li>
<li class="chapter" data-level="16.2.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#stratified-weighted-random-sampling"><i class="fa fa-check"></i><b>16.2.2</b> Stratified &amp; weighted random sampling</a></li>
<li class="chapter" data-level="16.2.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#cluster-sampling"><i class="fa fa-check"></i><b>16.2.3</b> Cluster sampling</a></li>
<li class="chapter" data-level="16.2.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-methods"><i class="fa fa-check"></i><b>16.2.4</b> Comparing sampling methods</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-distributions"><i class="fa fa-check"></i><b>16.3</b> Sampling Distributions</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#relative-error-of-point-estimates"><i class="fa fa-check"></i><b>16.3.1</b> Relative error of point estimates</a></li>
<li class="chapter" data-level="16.3.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#creating-a-sampling-distribution"><i class="fa fa-check"></i><b>16.3.2</b> Creating a sampling distribution</a></li>
<li class="chapter" data-level="16.3.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#approximate-sampling-distributions"><i class="fa fa-check"></i><b>16.3.3</b> Approximate sampling distributions</a></li>
<li class="chapter" data-level="16.3.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#standard-errors-clt"><i class="fa fa-check"></i><b>16.3.4</b> Standard errors &amp; CLT</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#bootstrap-distributions"><i class="fa fa-check"></i><b>16.4</b> Bootstrap Distributions</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-bootstrapping"><i class="fa fa-check"></i><b>16.4.1</b> Introduction to bootstrapping</a></li>
<li class="chapter" data-level="16.4.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-bootstrap-distributions"><i class="fa fa-check"></i><b>16.4.2</b> Comparing sampling &amp; bootstrap distributions</a></li>
<li class="chapter" data-level="16.4.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#confidence-intervals"><i class="fa fa-check"></i><b>16.4.3</b> Confidence intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>17</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction-to-hypothesis-testing"><i class="fa fa-check"></i><b>17.1</b> Introduction to Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#hypothesis-tests-z-scores"><i class="fa fa-check"></i><b>17.1.1</b> Hypothesis tests &amp; z-scores</a></li>
<li class="chapter" data-level="17.1.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#p-values"><i class="fa fa-check"></i><b>17.1.2</b> p-values</a></li>
<li class="chapter" data-level="17.1.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#statistical-significance"><i class="fa fa-check"></i><b>17.1.3</b> Statistical significance</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-anova-tests"><i class="fa fa-check"></i><b>17.2</b> Two-Sample &amp; ANOVA Tests</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#performing-t-tests"><i class="fa fa-check"></i><b>17.2.1</b> Performing t-tests</a></li>
<li class="chapter" data-level="17.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#calculating-p-values-from-t-statistics"><i class="fa fa-check"></i><b>17.2.2</b> Calculating p-values from t-statistics</a></li>
<li class="chapter" data-level="17.2.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#paired-t-tests"><i class="fa fa-check"></i><b>17.2.3</b> Paired t-tests</a></li>
<li class="chapter" data-level="17.2.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#anova-tests"><i class="fa fa-check"></i><b>17.2.4</b> ANOVA tests</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#proportion-tests"><i class="fa fa-check"></i><b>17.3</b> Proportion Tests</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.1</b> One-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.2</b> Two-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>17.3.3</b> Chi-square test of independence</a></li>
<li class="chapter" data-level="17.3.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-goodness-of-fit-tests"><i class="fa fa-check"></i><b>17.3.4</b> Chi-square goodness of fit tests</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-tests"><i class="fa fa-check"></i><b>17.4</b> Non-Parametric Tests</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#assumptions-in-hypothesis-testing"><i class="fa fa-check"></i><b>17.4.1</b> Assumptions in hypothesis testing</a></li>
<li class="chapter" data-level="17.4.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#simulation-based-infer-pipeline"><i class="fa fa-check"></i><b>17.4.2</b> Simulation-based infer pipeline</a></li>
<li class="chapter" data-level="17.4.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-anova-unpaired-t-tests"><i class="fa fa-check"></i><b>17.4.3</b> Non-parametric ANOVA &amp; unpaired t-tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i><b>18</b> Experimental Design</a>
<ul>
<li class="chapter" data-level="18.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-to-experimental-design"><i class="fa fa-check"></i><b>18.1</b> Introduction to experimental design</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-1"><i class="fa fa-check"></i><b>18.1.1</b> Introduction</a></li>
<li class="chapter" data-level="18.1.2" data-path="experimental-design.html"><a href="experimental-design.html#replication-blocking"><i class="fa fa-check"></i><b>18.1.2</b> Replication &amp; blocking</a></li>
<li class="chapter" data-level="18.1.3" data-path="experimental-design.html"><a href="experimental-design.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>18.1.3</b> Hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="experimental-design.html"><a href="experimental-design.html#basic-experiments"><i class="fa fa-check"></i><b>18.2</b> Basic Experiments</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="experimental-design.html"><a href="experimental-design.html#anova-factor-experiments"><i class="fa fa-check"></i><b>18.2.1</b> ANOVA &amp; factor experiments</a></li>
<li class="chapter" data-level="18.2.2" data-path="experimental-design.html"><a href="experimental-design.html#model-validation"><i class="fa fa-check"></i><b>18.2.2</b> Model validation</a></li>
<li class="chapter" data-level="18.2.3" data-path="experimental-design.html"><a href="experimental-design.html#ab-testing"><i class="fa fa-check"></i><b>18.2.3</b> A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="experimental-design.html"><a href="experimental-design.html#block-designs"><i class="fa fa-check"></i><b>18.3</b> Block Designs</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="experimental-design.html"><a href="experimental-design.html#intro-to-sampling"><i class="fa fa-check"></i><b>18.3.1</b> Intro to sampling</a></li>
<li class="chapter" data-level="18.3.2" data-path="experimental-design.html"><a href="experimental-design.html#randomized-complete-block-designs-rcbd"><i class="fa fa-check"></i><b>18.3.2</b> Randomized Complete Block Designs (RCBD)</a></li>
<li class="chapter" data-level="18.3.3" data-path="experimental-design.html"><a href="experimental-design.html#balanced-incomplete-block-designs-bibd"><i class="fa fa-check"></i><b>18.3.3</b> Balanced Incomplete Block Designs (BIBD)</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="experimental-design.html"><a href="experimental-design.html#squares-factorial-experiments"><i class="fa fa-check"></i><b>18.4</b> Squares &amp; Factorial Experiments</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="experimental-design.html"><a href="experimental-design.html#latin-squares"><i class="fa fa-check"></i><b>18.4.1</b> Latin squares</a></li>
<li class="chapter" data-level="18.4.2" data-path="experimental-design.html"><a href="experimental-design.html#graeco-latin-squares"><i class="fa fa-check"></i><b>18.4.2</b> Graeco-Latin squares</a></li>
<li class="chapter" data-level="18.4.3" data-path="experimental-design.html"><a href="experimental-design.html#factorial-experiments"><i class="fa fa-check"></i><b>18.4.3</b> Factorial experiments</a></li>
<li class="chapter" data-level="18.4.4" data-path="experimental-design.html"><a href="experimental-design.html#other-experimental-designs"><i class="fa fa-check"></i><b>18.4.4</b> Other experimental designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html"><i class="fa fa-check"></i><b>19</b> Supervised Learning: Classification</a>
<ul>
<li class="chapter" data-level="19.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-nearest-neighbors-knn"><i class="fa fa-check"></i><b>19.1</b> k-Nearest Neighbors (kNN)</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-with-nearest-neighbors"><i class="fa fa-check"></i><b>19.1.1</b> Classification with Nearest Neighbors</a></li>
<li class="chapter" data-level="19.1.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-in-knn"><i class="fa fa-check"></i><b>19.1.2</b> ‘k’ in kNN</a></li>
<li class="chapter" data-level="19.1.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#data-preparation-for-knn"><i class="fa fa-check"></i><b>19.1.3</b> 1-3.Data preparation for kNN</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#naive-bayes"><i class="fa fa-check"></i><b>19.2</b> Naive Bayes</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-bayesian-methods"><i class="fa fa-check"></i><b>19.2.1</b> Understanding Bayesian methods</a></li>
<li class="chapter" data-level="19.2.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-nbs-naivety"><i class="fa fa-check"></i><b>19.2.2</b> Understanding NB’s “naivety”</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#logistic-regression"><i class="fa fa-check"></i><b>19.3</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-binary-predictions-with-regression"><i class="fa fa-check"></i><b>19.3.1</b> Making binary predictions with regression</a></li>
<li class="chapter" data-level="19.3.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#model-performance-tradeoffs"><i class="fa fa-check"></i><b>19.3.2</b> Model performance tradeoffs</a></li>
<li class="chapter" data-level="19.3.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#dummy-variables-missing-data-and-interactions"><i class="fa fa-check"></i><b>19.3.3</b> Dummy variables, missing data, and interactions</a></li>
<li class="chapter" data-level="19.3.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#automatic-feature-selection"><i class="fa fa-check"></i><b>19.3.4</b> Automatic feature selection</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-trees"><i class="fa fa-check"></i><b>19.4</b> Classification Trees</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-decisions-with-trees"><i class="fa fa-check"></i><b>19.4.1</b> Making decisions with trees</a></li>
<li class="chapter" data-level="19.4.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#growing-larger-classification-trees"><i class="fa fa-check"></i><b>19.4.2</b> Growing larger classification trees</a></li>
<li class="chapter" data-level="19.4.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#tending-to-classification-trees"><i class="fa fa-check"></i><b>19.4.3</b> Tending to classification trees</a></li>
<li class="chapter" data-level="19.4.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#seeing-the-forest-from-the-trees"><i class="fa fa-check"></i><b>19.4.4</b> Seeing the forest from the trees</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html"><i class="fa fa-check"></i><b>20</b> Supervised Learning: Regression</a>
<ul>
<li class="chapter" data-level="20.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#what-is-regression"><i class="fa fa-check"></i><b>20.1</b> What is Regression?</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#introduction-2"><i class="fa fa-check"></i><b>20.1.1</b> Introduction</a></li>
<li class="chapter" data-level="20.1.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#linear-regression"><i class="fa fa-check"></i><b>20.1.2</b> Linear regression</a></li>
<li class="chapter" data-level="20.1.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#predicting-model"><i class="fa fa-check"></i><b>20.1.3</b> Predicting model</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-and-evaluating-models"><i class="fa fa-check"></i><b>20.2</b> Training and Evaluating Models</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#graphically"><i class="fa fa-check"></i><b>20.2.1</b> Graphically</a></li>
<li class="chapter" data-level="20.2.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#root-mean-squared-error"><i class="fa fa-check"></i><b>20.2.2</b> Root Mean Squared Error</a></li>
<li class="chapter" data-level="20.2.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#r-squared"><i class="fa fa-check"></i><b>20.2.3</b> R-squared</a></li>
<li class="chapter" data-level="20.2.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-a-model"><i class="fa fa-check"></i><b>20.2.4</b> Training a Model</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#issues-to-consider"><i class="fa fa-check"></i><b>20.3</b> Issues to Consider</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#categorical-iv"><i class="fa fa-check"></i><b>20.3.1</b> Categorical IV</a></li>
<li class="chapter" data-level="20.3.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#interactions-1"><i class="fa fa-check"></i><b>20.3.2</b> Interactions</a></li>
<li class="chapter" data-level="20.3.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-dv-before-modeling"><i class="fa fa-check"></i><b>20.3.3</b> Transforming DV before modeling</a></li>
<li class="chapter" data-level="20.3.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-iv-before-modeling"><i class="fa fa-check"></i><b>20.3.4</b> Transforming IV before modeling</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#dealing-with-non-linear-responses"><i class="fa fa-check"></i><b>20.4</b> Dealing with Non-Linear Responses</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#logistic-regression-to-predict-probabilities"><i class="fa fa-check"></i><b>20.4.1</b> Logistic regression to predict probabilities</a></li>
<li class="chapter" data-level="20.4.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#poisson-and-quasipoisson-regression-to-predict-counts"><i class="fa fa-check"></i><b>20.4.2</b> Poisson and quasipoisson regression to predict counts</a></li>
<li class="chapter" data-level="20.4.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gam-to-learn-non-linear-transforms"><i class="fa fa-check"></i><b>20.4.3</b> GAM to learn non-linear transforms</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#tree-based-methods"><i class="fa fa-check"></i><b>20.5</b> Tree-Based Methods</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#random-forests"><i class="fa fa-check"></i><b>20.5.1</b> Random forests</a></li>
<li class="chapter" data-level="20.5.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#one-hot-encoding"><i class="fa fa-check"></i><b>20.5.2</b> One-Hot-Encoding</a></li>
<li class="chapter" data-level="20.5.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gradient-boosting"><i class="fa fa-check"></i><b>20.5.3</b> Gradient boosting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>21</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="21.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>21.1</b> k-means clustering</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#types-of-machine-learning"><i class="fa fa-check"></i><b>21.1.1</b> Types of machine learning</a></li>
<li class="chapter" data-level="21.1.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-to-k-means"><i class="fa fa-check"></i><b>21.1.2</b> Introduction to k-means</a></li>
<li class="chapter" data-level="21.1.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#model-selection"><i class="fa fa-check"></i><b>21.1.3</b> Model selection</a></li>
<li class="chapter" data-level="21.1.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#pokemon-data"><i class="fa fa-check"></i><b>21.1.4</b> Pokemon data</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>21.2</b> Hierarchical clustering</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-3"><i class="fa fa-check"></i><b>21.2.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#selecting-number-of-clusters-1"><i class="fa fa-check"></i><b>21.2.2</b> Selecting number of clusters</a></li>
<li class="chapter" data-level="21.2.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-linkage"><i class="fa fa-check"></i><b>21.2.3</b> Clustering linkage</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction---pca"><i class="fa fa-check"></i><b>21.3</b> Dimensionality reduction - PCA</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-4"><i class="fa fa-check"></i><b>21.3.1</b> Introduction</a></li>
<li class="chapter" data-level="21.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#visualizing-and-interpreting-1"><i class="fa fa-check"></i><b>21.3.2</b> Visualizing and interpreting</a></li>
<li class="chapter" data-level="21.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#practical-issues"><i class="fa fa-check"></i><b>21.3.3</b> Practical issues</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#case-study-1"><i class="fa fa-check"></i><b>21.4</b> Case study</a>
<ul>
<li class="chapter" data-level="21.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-5"><i class="fa fa-check"></i><b>21.4.1</b> Introduction</a></li>
<li class="chapter" data-level="21.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#next-steps"><i class="fa fa-check"></i><b>21.4.2</b> Next steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html"><i class="fa fa-check"></i><b>22</b> Intermediate Importing Data in R</a>
<ul>
<li class="chapter" data-level="22.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-1"><i class="fa fa-check"></i><b>22.1</b> Import from databases-1</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#connect-to-a-database"><i class="fa fa-check"></i><b>22.1.1</b> Connect to a database</a></li>
<li class="chapter" data-level="22.1.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-table-data"><i class="fa fa-check"></i><b>22.1.2</b> Import table data</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-2"><i class="fa fa-check"></i><b>22.2</b> Import from databases-2</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#sql-queries-from-inside-r"><i class="fa fa-check"></i><b>22.2.1</b> SQL Queries from inside R</a></li>
<li class="chapter" data-level="22.2.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#dbi-internals"><i class="fa fa-check"></i><b>22.2.2</b> DBI internals</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-1"><i class="fa fa-check"></i><b>22.3</b> Import from the web-1</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#http"><i class="fa fa-check"></i><b>22.3.1</b> HTTP</a></li>
<li class="chapter" data-level="22.3.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#downloading-files"><i class="fa fa-check"></i><b>22.3.2</b> Downloading files</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-2"><i class="fa fa-check"></i><b>22.4</b> Import from the web-2</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#apis-json"><i class="fa fa-check"></i><b>22.4.1</b> APIs &amp; JSON</a></li>
<li class="chapter" data-level="22.4.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#json-jsonlite"><i class="fa fa-check"></i><b>22.4.2</b> JSON &amp; jsonlite</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-statistical-software"><i class="fa fa-check"></i><b>22.5</b> Import from statistical software</a>
<ul>
<li class="chapter" data-level="22.5.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#haven-package"><i class="fa fa-check"></i><b>22.5.1</b> haven package</a></li>
<li class="chapter" data-level="22.5.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#foreign-package"><i class="fa fa-check"></i><b>22.5.2</b> foreign package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html"><i class="fa fa-check"></i><b>23</b> Introduction to SQL</a>
<ul>
<li class="chapter" data-level="23.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#relational-databases"><i class="fa fa-check"></i><b>23.1</b> Relational Databases</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#databases"><i class="fa fa-check"></i><b>23.1.1</b> Databases</a></li>
<li class="chapter" data-level="23.1.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#tables"><i class="fa fa-check"></i><b>23.1.2</b> Tables</a></li>
<li class="chapter" data-level="23.1.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#data"><i class="fa fa-check"></i><b>23.1.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#querying"><i class="fa fa-check"></i><b>23.2</b> Querying</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#introducing"><i class="fa fa-check"></i><b>23.2.1</b> Introducing</a></li>
<li class="chapter" data-level="23.2.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#writing-queries"><i class="fa fa-check"></i><b>23.2.2</b> Writing queries</a></li>
<li class="chapter" data-level="23.2.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#sql-flavors"><i class="fa fa-check"></i><b>23.2.3</b> SQL flavors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="intermediate-sql.html"><a href="intermediate-sql.html"><i class="fa fa-check"></i><b>24</b> Intermediate SQL</a>
<ul>
<li class="chapter" data-level="24.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#selecting-data"><i class="fa fa-check"></i><b>24.1</b> Selecting Data</a>
<ul>
<li class="chapter" data-level="24.1.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#querying-a-database"><i class="fa fa-check"></i><b>24.1.1</b> Querying a database</a></li>
<li class="chapter" data-level="24.1.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#query-execution"><i class="fa fa-check"></i><b>24.1.2</b> Query execution</a></li>
<li class="chapter" data-level="24.1.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sql-style"><i class="fa fa-check"></i><b>24.1.3</b> SQL style</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-records"><i class="fa fa-check"></i><b>24.2</b> Filtering Records</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-numbers"><i class="fa fa-check"></i><b>24.2.1</b> Filtering numbers</a></li>
<li class="chapter" data-level="24.2.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#multiple-criteria"><i class="fa fa-check"></i><b>24.2.2</b> Multiple criteria</a></li>
<li class="chapter" data-level="24.2.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-text"><i class="fa fa-check"></i><b>24.2.3</b> Filtering text</a></li>
<li class="chapter" data-level="24.2.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#null-values"><i class="fa fa-check"></i><b>24.2.4</b> NULL values</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aggregate-functions"><i class="fa fa-check"></i><b>24.3</b> Aggregate Functions</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-data"><i class="fa fa-check"></i><b>24.3.1</b> Summarizing data</a></li>
<li class="chapter" data-level="24.3.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-subsets"><i class="fa fa-check"></i><b>24.3.2</b> Summarizing subsets</a></li>
<li class="chapter" data-level="24.3.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aliasing-and-arithmetic"><i class="fa fa-check"></i><b>24.3.3</b> Aliasing and arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-and-grouping"><i class="fa fa-check"></i><b>24.4</b> Sorting and Grouping</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-results"><i class="fa fa-check"></i><b>24.4.1</b> Sorting results</a></li>
<li class="chapter" data-level="24.4.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#grouping-data"><i class="fa fa-check"></i><b>24.4.2</b> Grouping data</a></li>
<li class="chapter" data-level="24.4.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-grouped-data"><i class="fa fa-check"></i><b>24.4.3</b> Filtering grouped data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html"><i class="fa fa-check"></i><b>25</b> Joining Data in SQL</a>
<ul>
<li class="chapter" data-level="25.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inner-joins"><i class="fa fa-check"></i><b>25.1</b> Inner Joins</a>
<ul>
<li class="chapter" data-level="25.1.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#ins-outs-of-inner-join"><i class="fa fa-check"></i><b>25.1.1</b> ins &amp; outs of INNER JOIN</a></li>
<li class="chapter" data-level="25.1.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#defining-relationships"><i class="fa fa-check"></i><b>25.1.2</b> Defining relationships</a></li>
<li class="chapter" data-level="25.1.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#multiple-joins"><i class="fa fa-check"></i><b>25.1.3</b> Multiple joins</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#outer-cross-self-joins"><i class="fa fa-check"></i><b>25.2</b> Outer, Cross &amp; Self Joins</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#left-right-joins-1"><i class="fa fa-check"></i><b>25.2.1</b> LEFT &amp; RIGHT JOINs</a></li>
<li class="chapter" data-level="25.2.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#full-join-1"><i class="fa fa-check"></i><b>25.2.2</b> FULL JOIN</a></li>
<li class="chapter" data-level="25.2.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#cross-join"><i class="fa fa-check"></i><b>25.2.3</b> CROSS JOIN</a></li>
<li class="chapter" data-level="25.2.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#self-joins"><i class="fa fa-check"></i><b>25.2.4</b> Self joins</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#set-theory-for-sql-joins"><i class="fa fa-check"></i><b>25.3</b> Set Theory for SQL Joins</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#union-vs.-union-all"><i class="fa fa-check"></i><b>25.3.1</b> UNION vs. UNION ALL</a></li>
<li class="chapter" data-level="25.3.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#intersect"><i class="fa fa-check"></i><b>25.3.2</b> INTERSECT</a></li>
<li class="chapter" data-level="25.3.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#except"><i class="fa fa-check"></i><b>25.3.3</b> EXCEPT</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#subqueries"><i class="fa fa-check"></i><b>25.4</b> Subqueries</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#with-semi-joins-anti-joins"><i class="fa fa-check"></i><b>25.4.1</b> With semi joins &amp; anti joins</a></li>
<li class="chapter" data-level="25.4.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-where-select"><i class="fa fa-check"></i><b>25.4.2</b> Inside WHERE &amp; SELECT</a></li>
<li class="chapter" data-level="25.4.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-from"><i class="fa fa-check"></i><b>25.4.3</b> Inside FROM</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="introduction-to-git.html"><a href="introduction-to-git.html"><i class="fa fa-check"></i><b>26</b> Introduction to Git</a>
<ul>
<li class="chapter" data-level="26.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#introduction-6"><i class="fa fa-check"></i><b>26.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="26.1.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#useful-shell-commands"><i class="fa fa-check"></i><b>26.1.1</b> Useful shell commands</a></li>
<li class="chapter" data-level="26.1.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#saving-files"><i class="fa fa-check"></i><b>26.1.2</b> Saving files</a></li>
<li class="chapter" data-level="26.1.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-files"><i class="fa fa-check"></i><b>26.1.3</b> Comparing files</a></li>
</ul></li>
<li class="chapter" data-level="26.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#making-changes"><i class="fa fa-check"></i><b>26.2</b> Making changes</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#storing-data-with-git"><i class="fa fa-check"></i><b>26.2.1</b> Storing data with Git</a></li>
<li class="chapter" data-level="26.2.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#viewing-changes"><i class="fa fa-check"></i><b>26.2.2</b> Viewing changes</a></li>
<li class="chapter" data-level="26.2.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#undoing-changes-before-committing"><i class="fa fa-check"></i><b>26.2.3</b> Undoing changes before committing</a></li>
<li class="chapter" data-level="26.2.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#restoring-and-reverting"><i class="fa fa-check"></i><b>26.2.4</b> Restoring and reverting</a></li>
</ul></li>
<li class="chapter" data-level="26.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#git-workflows"><i class="fa fa-check"></i><b>26.3</b> Git workflows</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#configuring-git"><i class="fa fa-check"></i><b>26.3.1</b> Configuring Git</a></li>
<li class="chapter" data-level="26.3.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#branches"><i class="fa fa-check"></i><b>26.3.2</b> Branches</a></li>
<li class="chapter" data-level="26.3.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-branches"><i class="fa fa-check"></i><b>26.3.3</b> Working with branches</a></li>
<li class="chapter" data-level="26.3.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#handling-conflict"><i class="fa fa-check"></i><b>26.3.4</b> Handling conflict</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#collaborating-with-git"><i class="fa fa-check"></i><b>26.4</b> Collaborating with Git</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#creating-repos"><i class="fa fa-check"></i><b>26.4.1</b> Creating repos</a></li>
<li class="chapter" data-level="26.4.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-remotes"><i class="fa fa-check"></i><b>26.4.2</b> Working with remotes</a></li>
<li class="chapter" data-level="26.4.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pulling-from-a-remote"><i class="fa fa-check"></i><b>26.4.3</b> Pulling from a remote</a></li>
<li class="chapter" data-level="26.4.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pushing-to-a-remote"><i class="fa fa-check"></i><b>26.4.4</b> Pushing to a remote</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Scientist with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="joining-data-in-sql" class="section level1 hasAnchor" number="25">
<h1><span class="header-section-number">Chapter 25</span> Joining Data in SQL<a href="joining-data-in-sql.html#joining-data-in-sql" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="inner-joins" class="section level2 hasAnchor" number="25.1">
<h2><span class="header-section-number">25.1</span> Inner Joins<a href="joining-data-in-sql.html#inner-joins" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ins-outs-of-inner-join" class="section level3 hasAnchor" number="25.1.1">
<h3><span class="header-section-number">25.1.1</span> ins &amp; outs of INNER JOIN<a href="joining-data-in-sql.html#ins-outs-of-inner-join" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="data/diagrams/diagrams/inner_join2.png" width="490" /></p>
<ul>
<li><p>The <code>table.column_name</code> format must be used when selecting columns that exist in both tables.</p>
<div class="sourceCode" id="cb3266"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3266-1"><a href="joining-data-in-sql.html#cb3266-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inner join of presidents and prime_ministers, joining on country</span></span>
<span id="cb3266-2"><a href="joining-data-in-sql.html#cb3266-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> prime_ministers.country, prime_ministers.continent, prime_minister, president</span>
<span id="cb3266-3"><a href="joining-data-in-sql.html#cb3266-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> prime_ministers</span>
<span id="cb3266-4"><a href="joining-data-in-sql.html#cb3266-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> presidents</span>
<span id="cb3266-5"><a href="joining-data-in-sql.html#cb3266-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> prime_ministers.country <span class="op">=</span> presidents.country; 👈</span></code></pre></div></li>
<li><p>Aliasing tables, then can use in <code>SELECT</code> and <code>ON</code> clauses.</p>
<div class="sourceCode" id="cb3267"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3267-1"><a href="joining-data-in-sql.html#cb3267-1" aria-hidden="true" tabindex="-1"></a><span class="co">--Inner join of presidents and prime_ministers, joining on country</span></span>
<span id="cb3267-2"><a href="joining-data-in-sql.html#cb3267-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> p1.country, p1.continent, prime_minister, president</span>
<span id="cb3267-3"><a href="joining-data-in-sql.html#cb3267-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> prime_ministers <span class="kw">AS</span> p1   👈</span>
<span id="cb3267-4"><a href="joining-data-in-sql.html#cb3267-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> presidents <span class="kw">AS</span> p2  👈</span>
<span id="cb3267-5"><a href="joining-data-in-sql.html#cb3267-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> p1.country <span class="op">=</span> p2.country;</span></code></pre></div></li>
<li><p>USING: when joining on two identical column names, we can employ <code>USING(shared_column_name)</code></p>
<div class="sourceCode" id="cb3268"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3268-1"><a href="joining-data-in-sql.html#cb3268-1" aria-hidden="true" tabindex="-1"></a><span class="co">--Inner join of presidents and prime_ministers, joining on country</span></span>
<span id="cb3268-2"><a href="joining-data-in-sql.html#cb3268-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> p1.country, p1.continent, prime_minister, president</span>
<span id="cb3268-3"><a href="joining-data-in-sql.html#cb3268-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> prime_ministers <span class="kw">AS</span> p1</span>
<span id="cb3268-4"><a href="joining-data-in-sql.html#cb3268-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> presidents <span class="kw">AS</span> p2</span>
<span id="cb3268-5"><a href="joining-data-in-sql.html#cb3268-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(country); 👈</span></code></pre></div></li>
</ul>
<p><strong>Setup films database</strong></p>
<div class="sourceCode" id="cb3269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3269-1"><a href="joining-data-in-sql.html#cb3269-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new database</span></span>
<span id="cb3269-2"><a href="joining-data-in-sql.html#cb3269-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Connect to the default postgres database</span></span>
<span id="cb3269-3"><a href="joining-data-in-sql.html#cb3269-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb3269-4"><a href="joining-data-in-sql.html#cb3269-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">&quot;&quot;</span>)</span>
<span id="cb3269-5"><a href="joining-data-in-sql.html#cb3269-5" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">connection =</span> <span class="st">&quot;con&quot;</span>)</span>
<span id="cb3269-6"><a href="joining-data-in-sql.html#cb3269-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3269-7"><a href="joining-data-in-sql.html#cb3269-7" aria-hidden="true" tabindex="-1"></a><span class="co"># List database tables</span></span>
<span id="cb3269-8"><a href="joining-data-in-sql.html#cb3269-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb3271"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3271-1"><a href="joining-data-in-sql.html#cb3271-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, cities</span></span>
<span id="cb3271-2"><a href="joining-data-in-sql.html#cb3271-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> cities (</span>
<span id="cb3271-3"><a href="joining-data-in-sql.html#cb3271-3" aria-hidden="true" tabindex="-1"></a>  name                    <span class="dt">VARCHAR</span>   <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3271-4"><a href="joining-data-in-sql.html#cb3271-4" aria-hidden="true" tabindex="-1"></a>  country_code            <span class="dt">VARCHAR</span>,</span>
<span id="cb3271-5"><a href="joining-data-in-sql.html#cb3271-5" aria-hidden="true" tabindex="-1"></a>  city_proper_pop         <span class="dt">REAL</span>,</span>
<span id="cb3271-6"><a href="joining-data-in-sql.html#cb3271-6" aria-hidden="true" tabindex="-1"></a>  metroarea_pop           <span class="dt">REAL</span>,</span>
<span id="cb3271-7"><a href="joining-data-in-sql.html#cb3271-7" aria-hidden="true" tabindex="-1"></a>  urbanarea_pop           <span class="dt">REAL</span></span>
<span id="cb3271-8"><a href="joining-data-in-sql.html#cb3271-8" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3272"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3272-1"><a href="joining-data-in-sql.html#cb3272-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, countries</span></span>
<span id="cb3272-2"><a href="joining-data-in-sql.html#cb3272-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> countries (</span>
<span id="cb3272-3"><a href="joining-data-in-sql.html#cb3272-3" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3272-4"><a href="joining-data-in-sql.html#cb3272-4" aria-hidden="true" tabindex="-1"></a>  name                  <span class="dt">VARCHAR</span>,</span>
<span id="cb3272-5"><a href="joining-data-in-sql.html#cb3272-5" aria-hidden="true" tabindex="-1"></a>  continent             <span class="dt">VARCHAR</span>,</span>
<span id="cb3272-6"><a href="joining-data-in-sql.html#cb3272-6" aria-hidden="true" tabindex="-1"></a>  region                <span class="dt">VARCHAR</span>,</span>
<span id="cb3272-7"><a href="joining-data-in-sql.html#cb3272-7" aria-hidden="true" tabindex="-1"></a>  surface_area          <span class="dt">REAL</span>,</span>
<span id="cb3272-8"><a href="joining-data-in-sql.html#cb3272-8" aria-hidden="true" tabindex="-1"></a>  indep_year            <span class="dt">INTEGER</span>,</span>
<span id="cb3272-9"><a href="joining-data-in-sql.html#cb3272-9" aria-hidden="true" tabindex="-1"></a>  local_name            <span class="dt">VARCHAR</span>,</span>
<span id="cb3272-10"><a href="joining-data-in-sql.html#cb3272-10" aria-hidden="true" tabindex="-1"></a>  gov_form              <span class="dt">VARCHAR</span>,</span>
<span id="cb3272-11"><a href="joining-data-in-sql.html#cb3272-11" aria-hidden="true" tabindex="-1"></a>  capital               <span class="dt">VARCHAR</span>,</span>
<span id="cb3272-12"><a href="joining-data-in-sql.html#cb3272-12" aria-hidden="true" tabindex="-1"></a>  cap_long              <span class="dt">REAL</span>,</span>
<span id="cb3272-13"><a href="joining-data-in-sql.html#cb3272-13" aria-hidden="true" tabindex="-1"></a>  cap_lat               <span class="dt">REAL</span></span>
<span id="cb3272-14"><a href="joining-data-in-sql.html#cb3272-14" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3273"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3273-1"><a href="joining-data-in-sql.html#cb3273-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, languages</span></span>
<span id="cb3273-2"><a href="joining-data-in-sql.html#cb3273-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> languages (</span>
<span id="cb3273-3"><a href="joining-data-in-sql.html#cb3273-3" aria-hidden="true" tabindex="-1"></a>  lang_id               <span class="dt">INTEGER</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3273-4"><a href="joining-data-in-sql.html#cb3273-4" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>,</span>
<span id="cb3273-5"><a href="joining-data-in-sql.html#cb3273-5" aria-hidden="true" tabindex="-1"></a>  name                  <span class="dt">VARCHAR</span>,</span>
<span id="cb3273-6"><a href="joining-data-in-sql.html#cb3273-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">percent</span>               <span class="dt">REAL</span>,</span>
<span id="cb3273-7"><a href="joining-data-in-sql.html#cb3273-7" aria-hidden="true" tabindex="-1"></a>  official              <span class="dt">BOOLEAN</span></span>
<span id="cb3273-8"><a href="joining-data-in-sql.html#cb3273-8" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3274"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3274-1"><a href="joining-data-in-sql.html#cb3274-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, economies</span></span>
<span id="cb3274-2"><a href="joining-data-in-sql.html#cb3274-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> economies (</span>
<span id="cb3274-3"><a href="joining-data-in-sql.html#cb3274-3" aria-hidden="true" tabindex="-1"></a>  econ_id               <span class="dt">INTEGER</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3274-4"><a href="joining-data-in-sql.html#cb3274-4" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>,</span>
<span id="cb3274-5"><a href="joining-data-in-sql.html#cb3274-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">year</span>                  <span class="dt">INTEGER</span>,</span>
<span id="cb3274-6"><a href="joining-data-in-sql.html#cb3274-6" aria-hidden="true" tabindex="-1"></a>  income_group          <span class="dt">VARCHAR</span>,</span>
<span id="cb3274-7"><a href="joining-data-in-sql.html#cb3274-7" aria-hidden="true" tabindex="-1"></a>  gdp_percapita         <span class="dt">REAL</span>,</span>
<span id="cb3274-8"><a href="joining-data-in-sql.html#cb3274-8" aria-hidden="true" tabindex="-1"></a>  gross_savings         <span class="dt">REAL</span>,</span>
<span id="cb3274-9"><a href="joining-data-in-sql.html#cb3274-9" aria-hidden="true" tabindex="-1"></a>  inflation_rate        <span class="dt">REAL</span>,</span>
<span id="cb3274-10"><a href="joining-data-in-sql.html#cb3274-10" aria-hidden="true" tabindex="-1"></a>  total_investment      <span class="dt">REAL</span>,</span>
<span id="cb3274-11"><a href="joining-data-in-sql.html#cb3274-11" aria-hidden="true" tabindex="-1"></a>  unemployment_rate     <span class="dt">REAL</span>,</span>
<span id="cb3274-12"><a href="joining-data-in-sql.html#cb3274-12" aria-hidden="true" tabindex="-1"></a>  exports               <span class="dt">REAL</span>,</span>
<span id="cb3274-13"><a href="joining-data-in-sql.html#cb3274-13" aria-hidden="true" tabindex="-1"></a>  imports               <span class="dt">REAL</span></span>
<span id="cb3274-14"><a href="joining-data-in-sql.html#cb3274-14" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3275"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3275-1"><a href="joining-data-in-sql.html#cb3275-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, currencies</span></span>
<span id="cb3275-2"><a href="joining-data-in-sql.html#cb3275-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> currencies (</span>
<span id="cb3275-3"><a href="joining-data-in-sql.html#cb3275-3" aria-hidden="true" tabindex="-1"></a>  curr_id               <span class="dt">INTEGER</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3275-4"><a href="joining-data-in-sql.html#cb3275-4" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>,</span>
<span id="cb3275-5"><a href="joining-data-in-sql.html#cb3275-5" aria-hidden="true" tabindex="-1"></a>  basic_unit            <span class="dt">VARCHAR</span>,</span>
<span id="cb3275-6"><a href="joining-data-in-sql.html#cb3275-6" aria-hidden="true" tabindex="-1"></a>  curr_code             <span class="dt">VARCHAR</span>,</span>
<span id="cb3275-7"><a href="joining-data-in-sql.html#cb3275-7" aria-hidden="true" tabindex="-1"></a>  frac_unit             <span class="dt">VARCHAR</span>,</span>
<span id="cb3275-8"><a href="joining-data-in-sql.html#cb3275-8" aria-hidden="true" tabindex="-1"></a>  frac_perbasic         <span class="dt">REAL</span></span>
<span id="cb3275-9"><a href="joining-data-in-sql.html#cb3275-9" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3276"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3276-1"><a href="joining-data-in-sql.html#cb3276-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, populations</span></span>
<span id="cb3276-2"><a href="joining-data-in-sql.html#cb3276-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> populations (</span>
<span id="cb3276-3"><a href="joining-data-in-sql.html#cb3276-3" aria-hidden="true" tabindex="-1"></a>  pop_id                <span class="dt">INTEGER</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3276-4"><a href="joining-data-in-sql.html#cb3276-4" aria-hidden="true" tabindex="-1"></a>  country_code          <span class="dt">VARCHAR</span>,</span>
<span id="cb3276-5"><a href="joining-data-in-sql.html#cb3276-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">year</span>                  <span class="dt">INTEGER</span>,</span>
<span id="cb3276-6"><a href="joining-data-in-sql.html#cb3276-6" aria-hidden="true" tabindex="-1"></a>  fertility_rate        <span class="dt">REAL</span>,</span>
<span id="cb3276-7"><a href="joining-data-in-sql.html#cb3276-7" aria-hidden="true" tabindex="-1"></a>  life_expectancy       <span class="dt">REAL</span>,</span>
<span id="cb3276-8"><a href="joining-data-in-sql.html#cb3276-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">size</span>                  <span class="dt">REAL</span></span>
<span id="cb3276-9"><a href="joining-data-in-sql.html#cb3276-9" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3277"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3277-1"><a href="joining-data-in-sql.html#cb3277-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, economies2015</span></span>
<span id="cb3277-2"><a href="joining-data-in-sql.html#cb3277-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> economies2015 (</span>
<span id="cb3277-3"><a href="joining-data-in-sql.html#cb3277-3" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3277-4"><a href="joining-data-in-sql.html#cb3277-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">year</span>                  <span class="dt">INTEGER</span>,</span>
<span id="cb3277-5"><a href="joining-data-in-sql.html#cb3277-5" aria-hidden="true" tabindex="-1"></a>  income_group          <span class="dt">VARCHAR</span>,</span>
<span id="cb3277-6"><a href="joining-data-in-sql.html#cb3277-6" aria-hidden="true" tabindex="-1"></a>  gross_savings         <span class="dt">REAL</span></span>
<span id="cb3277-7"><a href="joining-data-in-sql.html#cb3277-7" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3278"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3278-1"><a href="joining-data-in-sql.html#cb3278-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, economies2019</span></span>
<span id="cb3278-2"><a href="joining-data-in-sql.html#cb3278-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> economies2019 (</span>
<span id="cb3278-3"><a href="joining-data-in-sql.html#cb3278-3" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3278-4"><a href="joining-data-in-sql.html#cb3278-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">year</span>                  <span class="dt">INTEGER</span>,</span>
<span id="cb3278-5"><a href="joining-data-in-sql.html#cb3278-5" aria-hidden="true" tabindex="-1"></a>  income_group          <span class="dt">VARCHAR</span>,</span>
<span id="cb3278-6"><a href="joining-data-in-sql.html#cb3278-6" aria-hidden="true" tabindex="-1"></a>  gross_savings         <span class="dt">REAL</span></span>
<span id="cb3278-7"><a href="joining-data-in-sql.html#cb3278-7" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3279"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3279-1"><a href="joining-data-in-sql.html#cb3279-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setup database schema, eu_countries</span></span>
<span id="cb3279-2"><a href="joining-data-in-sql.html#cb3279-2" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> eu_countries (</span>
<span id="cb3279-3"><a href="joining-data-in-sql.html#cb3279-3" aria-hidden="true" tabindex="-1"></a>  code                  <span class="dt">VARCHAR</span>     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb3279-4"><a href="joining-data-in-sql.html#cb3279-4" aria-hidden="true" tabindex="-1"></a>  name                  <span class="dt">VARCHAR</span></span>
<span id="cb3279-5"><a href="joining-data-in-sql.html#cb3279-5" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<div class="sourceCode" id="cb3280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3280-1"><a href="joining-data-in-sql.html#cb3280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List database tables</span></span>
<span id="cb3280-2"><a href="joining-data-in-sql.html#cb3280-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span></code></pre></div>
<pre><code>## [1] &quot;cities&quot;        &quot;countries&quot;     &quot;currencies&quot;    &quot;economies&quot;    
## [5] &quot;economies2015&quot; &quot;economies2019&quot; &quot;eu_countries&quot;  &quot;languages&quot;    
## [9] &quot;populations&quot;</code></pre>
<div class="sourceCode" id="cb3282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3282-1"><a href="joining-data-in-sql.html#cb3282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading data</span></span>
<span id="cb3282-2"><a href="joining-data-in-sql.html#cb3282-2" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/cities.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-3"><a href="joining-data-in-sql.html#cb3282-3" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/countries.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-4"><a href="joining-data-in-sql.html#cb3282-4" aria-hidden="true" tabindex="-1"></a>currencies <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/currencies.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-5"><a href="joining-data-in-sql.html#cb3282-5" aria-hidden="true" tabindex="-1"></a>economies <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/economies.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-6"><a href="joining-data-in-sql.html#cb3282-6" aria-hidden="true" tabindex="-1"></a>economies2015 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/economies2015.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-7"><a href="joining-data-in-sql.html#cb3282-7" aria-hidden="true" tabindex="-1"></a>economies2019 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/economies2019.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-8"><a href="joining-data-in-sql.html#cb3282-8" aria-hidden="true" tabindex="-1"></a>eu_countries <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/eu_countries.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-9"><a href="joining-data-in-sql.html#cb3282-9" aria-hidden="true" tabindex="-1"></a>languages <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/languages.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-10"><a href="joining-data-in-sql.html#cb3282-10" aria-hidden="true" tabindex="-1"></a>populations <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/countries/countries/populations.csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb3282-11"><a href="joining-data-in-sql.html#cb3282-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3282-12"><a href="joining-data-in-sql.html#cb3282-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create database tables</span></span>
<span id="cb3282-13"><a href="joining-data-in-sql.html#cb3282-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;cities&quot;</span>, cities, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-14"><a href="joining-data-in-sql.html#cb3282-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;countries&quot;</span>, countries, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-15"><a href="joining-data-in-sql.html#cb3282-15" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;currencies&quot;</span>, currencies, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-16"><a href="joining-data-in-sql.html#cb3282-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;economies&quot;</span>, economies, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-17"><a href="joining-data-in-sql.html#cb3282-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;economies2015&quot;</span>, economies2015, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-18"><a href="joining-data-in-sql.html#cb3282-18" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;economies2019&quot;</span>, economies2019, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-19"><a href="joining-data-in-sql.html#cb3282-19" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;eu_countries&quot;</span>, eu_countries, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-20"><a href="joining-data-in-sql.html#cb3282-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;languages&quot;</span>, languages, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-21"><a href="joining-data-in-sql.html#cb3282-21" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;populations&quot;</span>, populations, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3282-22"><a href="joining-data-in-sql.html#cb3282-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3282-23"><a href="joining-data-in-sql.html#cb3282-23" aria-hidden="true" tabindex="-1"></a><span class="co"># List database tables</span></span>
<span id="cb3282-24"><a href="joining-data-in-sql.html#cb3282-24" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span></code></pre></div>
<pre><code>## [1] &quot;cities&quot;        &quot;countries&quot;     &quot;currencies&quot;    &quot;economies&quot;    
## [5] &quot;economies2015&quot; &quot;economies2019&quot; &quot;eu_countries&quot;  &quot;languages&quot;    
## [9] &quot;populations&quot;</code></pre>
<div id="inner-join-1" class="section level4 hasAnchor" number="25.1.1.1">
<h4><span class="header-section-number">25.1.1.1</span> INNER JOIN<a href="joining-data-in-sql.html#inner-join-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’ll be working with the <code>countries</code> database, which contains information about the most populous world cities in the world, along with country-level economic, population, and geographic data. The database also contains information on languages spoken in each country.</p>
<p>Use the <code>cities</code> and <code>countries</code> tables to build your first inner join.</p>
<div class="sourceCode" id="cb3284"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3284-1"><a href="joining-data-in-sql.html#cb3284-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select all columns from cities</span></span>
<span id="cb3284-2"><a href="joining-data-in-sql.html#cb3284-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3284-3"><a href="joining-data-in-sql.html#cb3284-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1321">Table 25.1: </span>Displaying records 1 - 10</caption>
<colgroup>
<col width="17%" />
<col width="18%" />
<col width="23%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">country_code</th>
<th align="right">city_proper_pop</th>
<th align="right">metroarea_pop</th>
<th align="right">urbanarea_pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Abidjan</td>
<td align="left">CIV</td>
<td align="right">4765000</td>
<td align="right">NA</td>
<td align="right">4765000</td>
</tr>
<tr class="even">
<td align="left">Abu Dhabi</td>
<td align="left">ARE</td>
<td align="right">1145000</td>
<td align="right">NA</td>
<td align="right">1145000</td>
</tr>
<tr class="odd">
<td align="left">Abuja</td>
<td align="left">NGA</td>
<td align="right">1235880</td>
<td align="right">6000000</td>
<td align="right">1235880</td>
</tr>
<tr class="even">
<td align="left">Accra</td>
<td align="left">GHA</td>
<td align="right">2070463</td>
<td align="right">4010054</td>
<td align="right">2070463</td>
</tr>
<tr class="odd">
<td align="left">Addis Ababa</td>
<td align="left">ETH</td>
<td align="right">3103673</td>
<td align="right">4567857</td>
<td align="right">3103673</td>
</tr>
<tr class="even">
<td align="left">Ahmedabad</td>
<td align="left">IND</td>
<td align="right">5570585</td>
<td align="right">NA</td>
<td align="right">5570585</td>
</tr>
<tr class="odd">
<td align="left">Alexandria</td>
<td align="left">EGY</td>
<td align="right">4616625</td>
<td align="right">NA</td>
<td align="right">4616625</td>
</tr>
<tr class="even">
<td align="left">Algiers</td>
<td align="left">DZA</td>
<td align="right">3415811</td>
<td align="right">5000000</td>
<td align="right">3415811</td>
</tr>
<tr class="odd">
<td align="left">Almaty</td>
<td align="left">KAZ</td>
<td align="right">1703481</td>
<td align="right">NA</td>
<td align="right">1703481</td>
</tr>
<tr class="even">
<td align="left">Ankara</td>
<td align="left">TUR</td>
<td align="right">5271000</td>
<td align="right">4585000</td>
<td align="right">5271000</td>
</tr>
</tbody>
</table>
</div>
<p>Perform an inner join with the <code>cities</code> table on the left and the <code>countries</code> table on the right.</p>
<div class="sourceCode" id="cb3285"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3285-1"><a href="joining-data-in-sql.html#cb3285-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb3285-2"><a href="joining-data-in-sql.html#cb3285-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3285-3"><a href="joining-data-in-sql.html#cb3285-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inner join to countries</span></span>
<span id="cb3285-4"><a href="joining-data-in-sql.html#cb3285-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> countries</span>
<span id="cb3285-5"><a href="joining-data-in-sql.html#cb3285-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match on country codes</span></span>
<span id="cb3285-6"><a href="joining-data-in-sql.html#cb3285-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> cities.country_code <span class="op">=</span> countries.code;</span></code></pre></div>
<div class="knitsql-table">
<table style="width:100%;">
<caption><span id="tab:unnamed-chunk-1322">Table 25.2: </span>Displaying records 1 - 10</caption>
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="6%" />
<col width="5%" />
<col width="5%" />
<col width="2%" />
<col width="8%" />
<col width="4%" />
<col width="10%" />
<col width="5%" />
<col width="4%" />
<col width="14%" />
<col width="7%" />
<col width="5%" />
<col width="3%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">country_code</th>
<th align="right">city_proper_pop</th>
<th align="right">metroarea_pop</th>
<th align="right">urbanarea_pop</th>
<th align="left">code</th>
<th align="left">name</th>
<th align="left">continent</th>
<th align="left">region</th>
<th align="right">surface_area</th>
<th align="right">indep_year</th>
<th align="left">local_name</th>
<th align="left">gov_form</th>
<th align="left">capital</th>
<th align="right">cap_long</th>
<th align="right">cap_lat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Abidjan</td>
<td align="left">CIV</td>
<td align="right">4765000</td>
<td align="right">NA</td>
<td align="right">4765000</td>
<td align="left">CIV</td>
<td align="left">Cote d’Ivoire</td>
<td align="left">Africa</td>
<td align="left">Western Africa</td>
<td align="right">322463</td>
<td align="right">1960</td>
<td align="left">Cote d?Ivoire</td>
<td align="left">Republic</td>
<td align="left">Yamoussoukro</td>
<td align="right">-4.030</td>
<td align="right">5.33</td>
</tr>
<tr class="even">
<td align="left">Abu Dhabi</td>
<td align="left">ARE</td>
<td align="right">1145000</td>
<td align="right">NA</td>
<td align="right">1145000</td>
<td align="left">ARE</td>
<td align="left">United Arab Emirates</td>
<td align="left">Asia</td>
<td align="left">Middle East</td>
<td align="right">83600</td>
<td align="right">1971</td>
<td align="left">Al-Imarat al-´Arabiya al-Muttahida</td>
<td align="left">Emirate Federation</td>
<td align="left">Abu Dhabi</td>
<td align="right">54.370</td>
<td align="right">24.48</td>
</tr>
<tr class="odd">
<td align="left">Abuja</td>
<td align="left">NGA</td>
<td align="right">1235880</td>
<td align="right">6000000</td>
<td align="right">1235880</td>
<td align="left">NGA</td>
<td align="left">Nigeria</td>
<td align="left">Africa</td>
<td align="left">Western Africa</td>
<td align="right">923768</td>
<td align="right">1960</td>
<td align="left">Nigeria</td>
<td align="left">Federal Republic</td>
<td align="left">Abuja</td>
<td align="right">7.489</td>
<td align="right">9.06</td>
</tr>
<tr class="even">
<td align="left">Accra</td>
<td align="left">GHA</td>
<td align="right">2070463</td>
<td align="right">4010054</td>
<td align="right">2070463</td>
<td align="left">GHA</td>
<td align="left">Ghana</td>
<td align="left">Africa</td>
<td align="left">Western Africa</td>
<td align="right">238533</td>
<td align="right">1957</td>
<td align="left">Ghana</td>
<td align="left">Republic</td>
<td align="left">Accra</td>
<td align="right">-0.208</td>
<td align="right">5.57</td>
</tr>
<tr class="odd">
<td align="left">Addis Ababa</td>
<td align="left">ETH</td>
<td align="right">3103673</td>
<td align="right">4567857</td>
<td align="right">3103673</td>
<td align="left">ETH</td>
<td align="left">Ethiopia</td>
<td align="left">Africa</td>
<td align="left">Eastern Africa</td>
<td align="right">1104300</td>
<td align="right">-1000</td>
<td align="left">YeItyop´iya</td>
<td align="left">Republic</td>
<td align="left">Addis Ababa</td>
<td align="right">38.747</td>
<td align="right">9.02</td>
</tr>
<tr class="even">
<td align="left">Ahmedabad</td>
<td align="left">IND</td>
<td align="right">5570585</td>
<td align="right">NA</td>
<td align="right">5570585</td>
<td align="left">IND</td>
<td align="left">India</td>
<td align="left">Asia</td>
<td align="left">Southern and Central Asia</td>
<td align="right">3287260</td>
<td align="right">1947</td>
<td align="left">Bharat/India</td>
<td align="left">Federal Republic</td>
<td align="left">New Delhi</td>
<td align="right">77.225</td>
<td align="right">28.64</td>
</tr>
<tr class="odd">
<td align="left">Alexandria</td>
<td align="left">EGY</td>
<td align="right">4616625</td>
<td align="right">NA</td>
<td align="right">4616625</td>
<td align="left">EGY</td>
<td align="left">Egypt</td>
<td align="left">Africa</td>
<td align="left">Northern Africa</td>
<td align="right">1001450</td>
<td align="right">1922</td>
<td align="left">Misr</td>
<td align="left">Republic</td>
<td align="left">Cairo</td>
<td align="right">31.246</td>
<td align="right">30.10</td>
</tr>
<tr class="even">
<td align="left">Algiers</td>
<td align="left">DZA</td>
<td align="right">3415811</td>
<td align="right">5000000</td>
<td align="right">3415811</td>
<td align="left">DZA</td>
<td align="left">Algeria</td>
<td align="left">Africa</td>
<td align="left">Northern Africa</td>
<td align="right">2381740</td>
<td align="right">1962</td>
<td align="left">Al-Jaza?ir/Algerie</td>
<td align="left">Republic</td>
<td align="left">Algiers</td>
<td align="right">3.051</td>
<td align="right">36.74</td>
</tr>
<tr class="odd">
<td align="left">Almaty</td>
<td align="left">KAZ</td>
<td align="right">1703481</td>
<td align="right">NA</td>
<td align="right">1703481</td>
<td align="left">KAZ</td>
<td align="left">Kazakhstan</td>
<td align="left">Asia</td>
<td align="left">Southern and Central Asia</td>
<td align="right">2724900</td>
<td align="right">1991</td>
<td align="left">Qazaqstan</td>
<td align="left">Republic</td>
<td align="left">Astana</td>
<td align="right">71.438</td>
<td align="right">51.19</td>
</tr>
<tr class="even">
<td align="left">Ankara</td>
<td align="left">TUR</td>
<td align="right">5271000</td>
<td align="right">4585000</td>
<td align="right">5271000</td>
<td align="left">TUR</td>
<td align="left">Turkey</td>
<td align="left">Asia</td>
<td align="left">Middle East</td>
<td align="right">774815</td>
<td align="right">1923</td>
<td align="left">Turkiye</td>
<td align="left">Republic</td>
<td align="left">Ankara</td>
<td align="right">32.361</td>
<td align="right">39.72</td>
</tr>
</tbody>
</table>
</div>
<p>Keep only the name of the city, the name of the country, and the region the country is located in.</p>
<div class="sourceCode" id="cb3286"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3286-1"><a href="joining-data-in-sql.html#cb3286-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select name fields (with alias) and region </span></span>
<span id="cb3286-2"><a href="joining-data-in-sql.html#cb3286-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3286-3"><a href="joining-data-in-sql.html#cb3286-3" aria-hidden="true" tabindex="-1"></a>    cities.name <span class="kw">AS</span> city, </span>
<span id="cb3286-4"><a href="joining-data-in-sql.html#cb3286-4" aria-hidden="true" tabindex="-1"></a>    countries.name <span class="kw">AS</span> country, </span>
<span id="cb3286-5"><a href="joining-data-in-sql.html#cb3286-5" aria-hidden="true" tabindex="-1"></a>    countries.region</span>
<span id="cb3286-6"><a href="joining-data-in-sql.html#cb3286-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3286-7"><a href="joining-data-in-sql.html#cb3286-7" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> countries</span>
<span id="cb3286-8"><a href="joining-data-in-sql.html#cb3286-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> cities.country_code <span class="op">=</span> countries.code;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1323">Table 25.3: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">city</th>
<th align="left">country</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Abidjan</td>
<td align="left">Cote d’Ivoire</td>
<td align="left">Western Africa</td>
</tr>
<tr class="even">
<td align="left">Abu Dhabi</td>
<td align="left">United Arab Emirates</td>
<td align="left">Middle East</td>
</tr>
<tr class="odd">
<td align="left">Abuja</td>
<td align="left">Nigeria</td>
<td align="left">Western Africa</td>
</tr>
<tr class="even">
<td align="left">Accra</td>
<td align="left">Ghana</td>
<td align="left">Western Africa</td>
</tr>
<tr class="odd">
<td align="left">Addis Ababa</td>
<td align="left">Ethiopia</td>
<td align="left">Eastern Africa</td>
</tr>
<tr class="even">
<td align="left">Ahmedabad</td>
<td align="left">India</td>
<td align="left">Southern and Central Asia</td>
</tr>
<tr class="odd">
<td align="left">Alexandria</td>
<td align="left">Egypt</td>
<td align="left">Northern Africa</td>
</tr>
<tr class="even">
<td align="left">Algiers</td>
<td align="left">Algeria</td>
<td align="left">Northern Africa</td>
</tr>
<tr class="odd">
<td align="left">Almaty</td>
<td align="left">Kazakhstan</td>
<td align="left">Southern and Central Asia</td>
</tr>
<tr class="even">
<td align="left">Ankara</td>
<td align="left">Turkey</td>
<td align="left">Middle East</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="joining-with-aliased-tables" class="section level4 hasAnchor" number="25.1.1.2">
<h4><span class="header-section-number">25.1.1.2</span> Joining with aliased tables<a href="joining-data-in-sql.html#joining-with-aliased-tables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’ll use data from both the <code>countries</code> and <code>economies</code> tables to examine the inflation rate in 2010 and 2015.</p>
<div class="sourceCode" id="cb3287"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3287-1"><a href="joining-data-in-sql.html#cb3287-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select fields with aliases</span></span>
<span id="cb3287-2"><a href="joining-data-in-sql.html#cb3287-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3287-3"><a href="joining-data-in-sql.html#cb3287-3" aria-hidden="true" tabindex="-1"></a>    c.code <span class="kw">AS</span> country_code,</span>
<span id="cb3287-4"><a href="joining-data-in-sql.html#cb3287-4" aria-hidden="true" tabindex="-1"></a>    c.name,</span>
<span id="cb3287-5"><a href="joining-data-in-sql.html#cb3287-5" aria-hidden="true" tabindex="-1"></a>    e.<span class="dt">year</span>,</span>
<span id="cb3287-6"><a href="joining-data-in-sql.html#cb3287-6" aria-hidden="true" tabindex="-1"></a>    e.inflation_rate</span>
<span id="cb3287-7"><a href="joining-data-in-sql.html#cb3287-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3287-8"><a href="joining-data-in-sql.html#cb3287-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to economies (alias e)</span></span>
<span id="cb3287-9"><a href="joining-data-in-sql.html#cb3287-9" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3287-10"><a href="joining-data-in-sql.html#cb3287-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match on code field using table aliases</span></span>
<span id="cb3287-11"><a href="joining-data-in-sql.html#cb3287-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> e.code;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1324">Table 25.4: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country_code</th>
<th align="left">name</th>
<th align="right">year</th>
<th align="right">inflation_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2010</td>
<td align="right">2.179</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2015</td>
<td align="right">-1.549</td>
</tr>
<tr class="odd">
<td align="left">NLD</td>
<td align="left">Netherlands</td>
<td align="right">2010</td>
<td align="right">0.932</td>
</tr>
<tr class="even">
<td align="left">NLD</td>
<td align="left">Netherlands</td>
<td align="right">2015</td>
<td align="right">0.220</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
<td align="left">Albania</td>
<td align="right">2010</td>
<td align="right">3.605</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="left">Albania</td>
<td align="right">2015</td>
<td align="right">1.896</td>
</tr>
<tr class="odd">
<td align="left">DZA</td>
<td align="left">Algeria</td>
<td align="right">2010</td>
<td align="right">3.913</td>
</tr>
<tr class="even">
<td align="left">DZA</td>
<td align="left">Algeria</td>
<td align="right">2015</td>
<td align="right">4.784</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="right">2010</td>
<td align="right">14.480</td>
</tr>
<tr class="even">
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="right">2015</td>
<td align="right">10.287</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that only the <code>code</code> field is ambiguous, so it requires a table name or alias before it. All the other fields (<code>name</code>, <code>year</code>, and <code>inflation_rate</code>) do not occur in more than one table name, so do not require table names or aliasing in the <code>SELECT</code> statement.</p>
</div>
<div id="using" class="section level4 hasAnchor" number="25.1.1.3">
<h4><span class="header-section-number">25.1.1.3</span> USING<a href="joining-data-in-sql.html#using" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When both the field names being joined on are the same, you can take advantage of the <code>USING</code> clause.</p>
<div class="sourceCode" id="cb3288"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3288-1"><a href="joining-data-in-sql.html#cb3288-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> c.name <span class="kw">AS</span> country, l.name <span class="kw">AS</span> language, official</span>
<span id="cb3288-2"><a href="joining-data-in-sql.html#cb3288-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3288-3"><a href="joining-data-in-sql.html#cb3288-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> languages <span class="kw">AS</span> l</span>
<span id="cb3288-4"><a href="joining-data-in-sql.html#cb3288-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match using the code column</span></span>
<span id="cb3288-5"><a href="joining-data-in-sql.html#cb3288-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1325">Table 25.5: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">language</th>
<th align="right">official</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Dari</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Other</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Pashto</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Turkic</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="left">Dutch</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="left">Albanian</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Greek</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="left">Other</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">unspecified</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">Algeria</td>
<td align="left">Arabic</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<p>It looks like Afghanistan has multiple official and unofficial languages.</p>
</div>
</div>
<div id="defining-relationships" class="section level3 hasAnchor" number="25.1.2">
<h3><span class="header-section-number">25.1.2</span> Defining relationships<a href="joining-data-in-sql.html#defining-relationships" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>One-to-many relationships</strong></p>
<p><img src="image/sql_One-to-many%20relationships.png" width="272" /></p>
<p><strong>One-to-one relationships</strong></p>
<p><img src="image/sql_One-to-one%20relationships.png" width="279" /></p>
<p><strong>Many-to-many relationships</strong></p>
<p><img src="image/sql_many%20to%20many%20relationship.png" width="278" /></p>
<div id="relationships-in-our-database" class="section level4 hasAnchor" number="25.1.2.1">
<h4><span class="header-section-number">25.1.2.1</span> Relationships in our database<a href="joining-data-in-sql.html#relationships-in-our-database" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p>What best describes the relationship between <code>code</code> in the <code>countries</code> table and <code>country_code</code> in the <code>cities</code> table?</p>
<p>ANS: one-to-many</p></li>
<li><p>Which of these options best describes the relationship between the <code>countries</code> table and the <code>languages</code> table?</p>
<p>ANS: many-to-many</p></li>
</ol>
</div>
<div id="inspecting-a-relationship" class="section level4 hasAnchor" number="25.1.2.2">
<h4><span class="header-section-number">25.1.2.2</span> Inspecting a relationship<a href="joining-data-in-sql.html#inspecting-a-relationship" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’ve just identified that the <code>countries</code> table has a many-to-many relationship with the <code>languages</code> table. That is, many languages can be spoken in a country, and a language can be spoken in many countries.</p>
<p>First, what is the best way to query all the different languages spoken in a country?</p>
<p>Second, how is this different from the best way to query all the countries that speak each language?</p>
<p>Recall that when writing joins, many users prefer to write SQL code out of order by writing the join first (along with any table aliases), and writing the <code>SELECT</code> statement at the end.</p>
<div class="sourceCode" id="cb3289"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3289-1"><a href="joining-data-in-sql.html#cb3289-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select country and language names, aliased</span></span>
<span id="cb3289-2"><a href="joining-data-in-sql.html#cb3289-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> c.name <span class="kw">AS</span> country, l.name <span class="kw">AS</span> language</span>
<span id="cb3289-3"><a href="joining-data-in-sql.html#cb3289-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- From countries (aliased)</span></span>
<span id="cb3289-4"><a href="joining-data-in-sql.html#cb3289-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3289-5"><a href="joining-data-in-sql.html#cb3289-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to languages (aliased)</span></span>
<span id="cb3289-6"><a href="joining-data-in-sql.html#cb3289-6" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> languages <span class="kw">AS</span> l</span>
<span id="cb3289-7"><a href="joining-data-in-sql.html#cb3289-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use code as the joining field with the USING keyword</span></span>
<span id="cb3289-8"><a href="joining-data-in-sql.html#cb3289-8" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3289-9"><a href="joining-data-in-sql.html#cb3289-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> country;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1326">Table 25.6: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">language</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Dari</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Other</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Pashto</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Turkic</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Albanian</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="left">Greek</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Other</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="left">unspecified</td>
</tr>
<tr class="odd">
<td align="left">Algeria</td>
<td align="left">Arabic</td>
</tr>
<tr class="even">
<td align="left">Algeria</td>
<td align="left">Berber or Tamazight</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3290"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3290-1"><a href="joining-data-in-sql.html#cb3290-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Rearrange SELECT statement, keeping aliases</span></span>
<span id="cb3290-2"><a href="joining-data-in-sql.html#cb3290-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> l.name <span class="kw">AS</span> language, c.name <span class="kw">AS</span> country</span>
<span id="cb3290-3"><a href="joining-data-in-sql.html#cb3290-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3290-4"><a href="joining-data-in-sql.html#cb3290-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> languages <span class="kw">AS</span> l</span>
<span id="cb3290-5"><a href="joining-data-in-sql.html#cb3290-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3290-6"><a href="joining-data-in-sql.html#cb3290-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Order the results by language</span></span>
<span id="cb3290-7"><a href="joining-data-in-sql.html#cb3290-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> language;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1327">Table 25.7: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">language</th>
<th align="left">country</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afar</td>
<td align="left">Djibouti</td>
</tr>
<tr class="even">
<td align="left">Afar</td>
<td align="left">Eritrea</td>
</tr>
<tr class="odd">
<td align="left">Afar</td>
<td align="left">Ethiopia</td>
</tr>
<tr class="even">
<td align="left">Afrikaans</td>
<td align="left">South Africa</td>
</tr>
<tr class="odd">
<td align="left">Afrikaans</td>
<td align="left">Namibia</td>
</tr>
<tr class="even">
<td align="left">Akyem</td>
<td align="left">Ghana</td>
</tr>
<tr class="odd">
<td align="left">Albanian</td>
<td align="left">Albania</td>
</tr>
<tr class="even">
<td align="left">Albanian</td>
<td align="left">Macedonia</td>
</tr>
<tr class="odd">
<td align="left">Albanian</td>
<td align="left">Switzerland</td>
</tr>
<tr class="even">
<td align="left">Alsatian</td>
<td align="left">France</td>
</tr>
</tbody>
</table>
</div>
<p>When we read SQL results, we expect the most important column to be on the far left, and it’s helpful if results are ordered by relevance to the question at hand.</p>
<p>By default, results are ordered by the column from the left table, but you can change this using <code>ORDER BY</code>.</p>
</div>
</div>
<div id="multiple-joins" class="section level3 hasAnchor" number="25.1.3">
<h3><span class="header-section-number">25.1.3</span> Multiple joins<a href="joining-data-in-sql.html#multiple-joins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Chaining joins</strong></p>
<div class="sourceCode" id="cb3291"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3291-1"><a href="joining-data-in-sql.html#cb3291-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3291-2"><a href="joining-data-in-sql.html#cb3291-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> left_table</span>
<span id="cb3291-3"><a href="joining-data-in-sql.html#cb3291-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> right_table</span>
<span id="cb3291-4"><a href="joining-data-in-sql.html#cb3291-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> left_table.<span class="kw">id</span> <span class="op">=</span> right_table.<span class="kw">id</span></span>
<span id="cb3291-5"><a href="joining-data-in-sql.html#cb3291-5" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> another_table</span>
<span id="cb3291-6"><a href="joining-data-in-sql.html#cb3291-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> <span class="kw">left</span><span class="op">/</span>right_table.<span class="kw">id</span> <span class="op">=</span> another_table.<span class="kw">id</span>;</span></code></pre></div>
<p><strong>Joining on multiple keys</strong></p>
<p><img src="data/diagrams/diagrams/multiple_keys.png" width="622" /></p>
<div class="sourceCode" id="cb3292"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3292-1"><a href="joining-data-in-sql.html#cb3292-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3292-2"><a href="joining-data-in-sql.html#cb3292-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> left_table</span>
<span id="cb3292-3"><a href="joining-data-in-sql.html#cb3292-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> right_table</span>
<span id="cb3292-4"><a href="joining-data-in-sql.html#cb3292-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- INNER JOIN ON the id AND date field</span></span>
<span id="cb3292-5"><a href="joining-data-in-sql.html#cb3292-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> left_table.<span class="kw">id</span> <span class="op">=</span> right_table.<span class="kw">id</span></span>
<span id="cb3292-6"><a href="joining-data-in-sql.html#cb3292-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> left_table.<span class="dt">date</span> <span class="op">=</span> right_table.<span class="dt">date</span>;</span></code></pre></div>
<div id="joining-multiple-tables" class="section level4 hasAnchor" number="25.1.3.1">
<h4><span class="header-section-number">25.1.3.1</span> Joining multiple tables<a href="joining-data-in-sql.html#joining-multiple-tables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose you are interested in the relationship between fertility and unemployment rates. Your task in this exercise is to join tables to return the country name, year, fertility rate, and unemployment rate in a single result from the <code>countries</code>, <code>populations</code> and <code>economies</code> tables.</p>
<div class="sourceCode" id="cb3293"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3293-1"><a href="joining-data-in-sql.html#cb3293-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select relevant fields</span></span>
<span id="cb3293-2"><a href="joining-data-in-sql.html#cb3293-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name, <span class="dt">year</span>, fertility_rate</span>
<span id="cb3293-3"><a href="joining-data-in-sql.html#cb3293-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inner join countries and populations, aliased, on code</span></span>
<span id="cb3293-4"><a href="joining-data-in-sql.html#cb3293-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3293-5"><a href="joining-data-in-sql.html#cb3293-5" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p</span>
<span id="cb3293-6"><a href="joining-data-in-sql.html#cb3293-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> p.country_code;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1328">Table 25.8: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">year</th>
<th align="right">fertility_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">2010</td>
<td align="right">5.75</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2015</td>
<td align="right">4.65</td>
</tr>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="right">2010</td>
<td align="right">1.79</td>
</tr>
<tr class="even">
<td align="left">Netherlands</td>
<td align="right">2015</td>
<td align="right">1.71</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="right">2010</td>
<td align="right">1.66</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="right">2015</td>
<td align="right">1.79</td>
</tr>
<tr class="odd">
<td align="left">Algeria</td>
<td align="right">2010</td>
<td align="right">2.87</td>
</tr>
<tr class="even">
<td align="left">Algeria</td>
<td align="right">2015</td>
<td align="right">2.81</td>
</tr>
<tr class="odd">
<td align="left">American Samoa</td>
<td align="right">2010</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">American Samoa</td>
<td align="right">2015</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<p>Chain another inner join to your query with the <code>economies</code> table. Select <code>name</code>, and select <code>year</code> and <code>unemployment_rate</code> from <code>economies</code>.</p>
<div class="sourceCode" id="cb3294"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3294-1"><a href="joining-data-in-sql.html#cb3294-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select fields</span></span>
<span id="cb3294-2"><a href="joining-data-in-sql.html#cb3294-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name, e.<span class="dt">year</span>, fertility_rate, e.unemployment_rate</span>
<span id="cb3294-3"><a href="joining-data-in-sql.html#cb3294-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3294-4"><a href="joining-data-in-sql.html#cb3294-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p</span>
<span id="cb3294-5"><a href="joining-data-in-sql.html#cb3294-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> p.country_code</span>
<span id="cb3294-6"><a href="joining-data-in-sql.html#cb3294-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to economies (as e)</span></span>
<span id="cb3294-7"><a href="joining-data-in-sql.html#cb3294-7" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3294-8"><a href="joining-data-in-sql.html#cb3294-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match on country code</span></span>
<span id="cb3294-9"><a href="joining-data-in-sql.html#cb3294-9" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1329">Table 25.9: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">year</th>
<th align="right">fertility_rate</th>
<th align="right">unemployment_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">2010</td>
<td align="right">4.65</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2015</td>
<td align="right">4.65</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">2010</td>
<td align="right">5.75</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2015</td>
<td align="right">5.75</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="right">2010</td>
<td align="right">1.71</td>
<td align="right">5.00</td>
</tr>
<tr class="even">
<td align="left">Netherlands</td>
<td align="right">2015</td>
<td align="right">1.71</td>
<td align="right">6.89</td>
</tr>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="right">2010</td>
<td align="right">1.79</td>
<td align="right">5.00</td>
</tr>
<tr class="even">
<td align="left">Netherlands</td>
<td align="right">2015</td>
<td align="right">1.79</td>
<td align="right">6.89</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="right">2010</td>
<td align="right">1.66</td>
<td align="right">14.00</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="right">2015</td>
<td align="right">1.66</td>
<td align="right">17.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="checking-multi-table-joins" class="section level4 hasAnchor" number="25.1.3.2">
<h4><span class="header-section-number">25.1.3.2</span> Checking multi-table joins<a href="joining-data-in-sql.html#checking-multi-table-joins" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Have a look at the results for Albania from the previous query below. You can see that the 2015 <code>fertility_rate</code> has been paired with 2010 <code>unemployment_rate</code>, and vice versa.</p>
<div class="sourceCode" id="cb3295"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3295-1"><a href="joining-data-in-sql.html#cb3295-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name, e.<span class="dt">year</span>, fertility_rate, e.unemployment_rate</span>
<span id="cb3295-2"><a href="joining-data-in-sql.html#cb3295-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3295-3"><a href="joining-data-in-sql.html#cb3295-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p</span>
<span id="cb3295-4"><a href="joining-data-in-sql.html#cb3295-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> p.country_code</span>
<span id="cb3295-5"><a href="joining-data-in-sql.html#cb3295-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to economies (as e)</span></span>
<span id="cb3295-6"><a href="joining-data-in-sql.html#cb3295-6" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3295-7"><a href="joining-data-in-sql.html#cb3295-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match on country code</span></span>
<span id="cb3295-8"><a href="joining-data-in-sql.html#cb3295-8" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3295-9"><a href="joining-data-in-sql.html#cb3295-9" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="op">=</span> <span class="st">&#39;Albania&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1330">Table 25.10: </span>4 records</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">year</th>
<th align="right">fertility_rate</th>
<th align="right">unemployment_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Albania</td>
<td align="right">2010</td>
<td align="right">1.66</td>
<td align="right">14.0</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="right">2015</td>
<td align="right">1.66</td>
<td align="right">17.1</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="right">2010</td>
<td align="right">1.79</td>
<td align="right">14.0</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="right">2015</td>
<td align="right">1.79</td>
<td align="right">17.1</td>
</tr>
</tbody>
</table>
</div>
<p>Instead of four records, the query should return two: one for each year.</p>
<p>Fix the query by explicitly stating that both the country <code>code</code> and <code>year</code> should match!</p>
<div class="sourceCode" id="cb3296"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3296-1"><a href="joining-data-in-sql.html#cb3296-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name, e.<span class="dt">year</span>, fertility_rate, unemployment_rate</span>
<span id="cb3296-2"><a href="joining-data-in-sql.html#cb3296-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3296-3"><a href="joining-data-in-sql.html#cb3296-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p</span>
<span id="cb3296-4"><a href="joining-data-in-sql.html#cb3296-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> p.country_code</span>
<span id="cb3296-5"><a href="joining-data-in-sql.html#cb3296-5" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3296-6"><a href="joining-data-in-sql.html#cb3296-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> e.code</span>
<span id="cb3296-7"><a href="joining-data-in-sql.html#cb3296-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add an additional joining condition such that you are also joining on year</span></span>
<span id="cb3296-8"><a href="joining-data-in-sql.html#cb3296-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> p.<span class="dt">year</span> <span class="op">=</span> e.<span class="dt">year</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1331">Table 25.11: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">year</th>
<th align="right">fertility_rate</th>
<th align="right">unemployment_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="right">2010</td>
<td align="right">5.75</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="right">2015</td>
<td align="right">4.65</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">Netherlands</td>
<td align="right">2010</td>
<td align="right">1.79</td>
<td align="right">5.00</td>
</tr>
<tr class="even">
<td align="left">Netherlands</td>
<td align="right">2015</td>
<td align="right">1.71</td>
<td align="right">6.89</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="right">2010</td>
<td align="right">1.66</td>
<td align="right">14.00</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
<td align="right">2015</td>
<td align="right">1.79</td>
<td align="right">17.10</td>
</tr>
<tr class="odd">
<td align="left">Algeria</td>
<td align="right">2010</td>
<td align="right">2.87</td>
<td align="right">9.96</td>
</tr>
<tr class="even">
<td align="left">Algeria</td>
<td align="right">2015</td>
<td align="right">2.81</td>
<td align="right">11.21</td>
</tr>
<tr class="odd">
<td align="left">Angola</td>
<td align="right">2010</td>
<td align="right">6.42</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Angola</td>
<td align="right">2015</td>
<td align="right">6.00</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<p>There are only two lines of Albania results now: one for 2010 and one for 2015.</p>
</div>
</div>
</div>
<div id="outer-cross-self-joins" class="section level2 hasAnchor" number="25.2">
<h2><span class="header-section-number">25.2</span> Outer, Cross &amp; Self Joins<a href="joining-data-in-sql.html#outer-cross-self-joins" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="left-right-joins-1" class="section level3 hasAnchor" number="25.2.1">
<h3><span class="header-section-number">25.2.1</span> LEFT &amp; RIGHT JOINs<a href="joining-data-in-sql.html#left-right-joins-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>LEFT JOIN</strong></p>
<ul>
<li><p>Return all records in the left table, and those records in the right table that match on the joining field provided.</p></li>
<li><p>More intuitive to users when typing from left to right.</p>
<p><img src="data/diagrams/diagrams/left_join2.png" width="522" /></p></li>
</ul>
<p><strong>RIGHT JOIN</strong></p>
<ul>
<li><p>Less commonly used than <code>LEFT JOIN</code></p></li>
<li><p>Any <code>RIGHT JOIN</code> can be re-written as a <code>LEFT JOIN</code></p>
<p><img src="data/diagrams/diagrams/right_join2.png" width="531" /></p></li>
</ul>
<div id="left-join-1" class="section level4 hasAnchor" number="25.2.1.1">
<h4><span class="header-section-number">25.2.1.1</span> LEFT JOIN<a href="joining-data-in-sql.html#left-join-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As before, you will be using the <code>cities</code> and <code>countries</code> tables.</p>
<p>You’ll begin with an <code>INNER JOIN</code> with the <code>cities</code> table (left) and <code>countries</code> table (right). This helps if you are interested only in records where a country is present in both tables.</p>
<p>You’ll then change to a <code>LEFT JOIN</code>. This helps if you’re interested in returning all countries in the <code>cities</code> table, whether or not they have a match in the <code>countries</code> table.</p>
<div class="sourceCode" id="cb3297"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3297-1"><a href="joining-data-in-sql.html#cb3297-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3297-2"><a href="joining-data-in-sql.html#cb3297-2" aria-hidden="true" tabindex="-1"></a>    c1.name <span class="kw">AS</span> city,</span>
<span id="cb3297-3"><a href="joining-data-in-sql.html#cb3297-3" aria-hidden="true" tabindex="-1"></a>    code,</span>
<span id="cb3297-4"><a href="joining-data-in-sql.html#cb3297-4" aria-hidden="true" tabindex="-1"></a>    c2.name <span class="kw">AS</span> country,</span>
<span id="cb3297-5"><a href="joining-data-in-sql.html#cb3297-5" aria-hidden="true" tabindex="-1"></a>    region,</span>
<span id="cb3297-6"><a href="joining-data-in-sql.html#cb3297-6" aria-hidden="true" tabindex="-1"></a>    city_proper_pop</span>
<span id="cb3297-7"><a href="joining-data-in-sql.html#cb3297-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities <span class="kw">AS</span> c1</span>
<span id="cb3297-8"><a href="joining-data-in-sql.html#cb3297-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Perform an inner join with cities as c1 and countries as c2 on country code</span></span>
<span id="cb3297-9"><a href="joining-data-in-sql.html#cb3297-9" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> countries <span class="kw">AS</span> c2</span>
<span id="cb3297-10"><a href="joining-data-in-sql.html#cb3297-10" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c1.country_code <span class="op">=</span> c2.code</span>
<span id="cb3297-11"><a href="joining-data-in-sql.html#cb3297-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> code <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1332">Table 25.12: </span>Displaying records 1 - 10</caption>
<colgroup>
<col width="25%" />
<col width="7%" />
<col width="19%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">city</th>
<th align="left">code</th>
<th align="left">country</th>
<th align="left">region</th>
<th align="right">city_proper_pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Harare</td>
<td align="left">ZWE</td>
<td align="left">Zimbabwe</td>
<td align="left">Eastern Africa</td>
<td align="right">1606000</td>
</tr>
<tr class="even">
<td align="left">Lusaka</td>
<td align="left">ZMB</td>
<td align="left">Zambia</td>
<td align="left">Eastern Africa</td>
<td align="right">1742979</td>
</tr>
<tr class="odd">
<td align="left">Cape Town</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">3740026</td>
</tr>
<tr class="even">
<td align="left">Durban</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">3442361</td>
</tr>
<tr class="odd">
<td align="left">Ekurhuleni</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">3178470</td>
</tr>
<tr class="even">
<td align="left">Johannesburg</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">4434827</td>
</tr>
<tr class="odd">
<td align="left">Sana’a</td>
<td align="left">YEM</td>
<td align="left">Yemen</td>
<td align="left">Middle East</td>
<td align="right">1937451</td>
</tr>
<tr class="even">
<td align="left">Hanoi</td>
<td align="left">VNM</td>
<td align="left">Vietnam</td>
<td align="left">Southeast Asia</td>
<td align="right">6844100</td>
</tr>
<tr class="odd">
<td align="left">Ho Chi Minh City</td>
<td align="left">VNM</td>
<td align="left">Vietnam</td>
<td align="left">Southeast Asia</td>
<td align="right">7681700</td>
</tr>
<tr class="even">
<td align="left">Caracas</td>
<td align="left">VEN</td>
<td align="left">Venezuela</td>
<td align="left">South America</td>
<td align="right">1943901</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3298"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3298-1"><a href="joining-data-in-sql.html#cb3298-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3298-2"><a href="joining-data-in-sql.html#cb3298-2" aria-hidden="true" tabindex="-1"></a>    c1.name <span class="kw">AS</span> city, </span>
<span id="cb3298-3"><a href="joining-data-in-sql.html#cb3298-3" aria-hidden="true" tabindex="-1"></a>    code, </span>
<span id="cb3298-4"><a href="joining-data-in-sql.html#cb3298-4" aria-hidden="true" tabindex="-1"></a>    c2.name <span class="kw">AS</span> country,</span>
<span id="cb3298-5"><a href="joining-data-in-sql.html#cb3298-5" aria-hidden="true" tabindex="-1"></a>    region, </span>
<span id="cb3298-6"><a href="joining-data-in-sql.html#cb3298-6" aria-hidden="true" tabindex="-1"></a>    city_proper_pop</span>
<span id="cb3298-7"><a href="joining-data-in-sql.html#cb3298-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities <span class="kw">AS</span> c1</span>
<span id="cb3298-8"><a href="joining-data-in-sql.html#cb3298-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join right table (with alias)</span></span>
<span id="cb3298-9"><a href="joining-data-in-sql.html#cb3298-9" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> countries <span class="kw">AS</span> c2</span>
<span id="cb3298-10"><a href="joining-data-in-sql.html#cb3298-10" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c1.country_code <span class="op">=</span> c2.code</span>
<span id="cb3298-11"><a href="joining-data-in-sql.html#cb3298-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> code <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1333">Table 25.13: </span>Displaying records 1 - 10</caption>
<colgroup>
<col width="25%" />
<col width="7%" />
<col width="19%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">city</th>
<th align="left">code</th>
<th align="left">country</th>
<th align="left">region</th>
<th align="right">city_proper_pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Harare</td>
<td align="left">ZWE</td>
<td align="left">Zimbabwe</td>
<td align="left">Eastern Africa</td>
<td align="right">1606000</td>
</tr>
<tr class="even">
<td align="left">Lusaka</td>
<td align="left">ZMB</td>
<td align="left">Zambia</td>
<td align="left">Eastern Africa</td>
<td align="right">1742979</td>
</tr>
<tr class="odd">
<td align="left">Cape Town</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">3740026</td>
</tr>
<tr class="even">
<td align="left">Durban</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">3442361</td>
</tr>
<tr class="odd">
<td align="left">Ekurhuleni</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">3178470</td>
</tr>
<tr class="even">
<td align="left">Johannesburg</td>
<td align="left">ZAF</td>
<td align="left">South Africa</td>
<td align="left">Southern Africa</td>
<td align="right">4434827</td>
</tr>
<tr class="odd">
<td align="left">Sana’a</td>
<td align="left">YEM</td>
<td align="left">Yemen</td>
<td align="left">Middle East</td>
<td align="right">1937451</td>
</tr>
<tr class="even">
<td align="left">Hanoi</td>
<td align="left">VNM</td>
<td align="left">Vietnam</td>
<td align="left">Southeast Asia</td>
<td align="right">6844100</td>
</tr>
<tr class="odd">
<td align="left">Ho Chi Minh City</td>
<td align="left">VNM</td>
<td align="left">Vietnam</td>
<td align="left">Southeast Asia</td>
<td align="right">7681700</td>
</tr>
<tr class="even">
<td align="left">Caracas</td>
<td align="left">VEN</td>
<td align="left">Venezuela</td>
<td align="left">South America</td>
<td align="right">1943901</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that the <code>INNER JOIN</code> resulted in 230 records, whereas the <code>LEFT JOIN</code> returned 236 records.</p>
<p>Remember that the LEFT JOIN is a type of outer join: its result is not limited to only those records that have matches for both tables on the joining field.</p>
<p><strong>Building on your LEFT JOIN</strong></p>
<p>ou will use <code>AVG()</code> in combination with a <code>LEFT JOIN</code> to determine the average gross domestic product (GDP) per capita by <code>region</code> in 2010.</p>
<div class="sourceCode" id="cb3299"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3299-1"><a href="joining-data-in-sql.html#cb3299-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name, region, gdp_percapita</span>
<span id="cb3299-2"><a href="joining-data-in-sql.html#cb3299-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3299-3"><a href="joining-data-in-sql.html#cb3299-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3299-4"><a href="joining-data-in-sql.html#cb3299-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match on code fields</span></span>
<span id="cb3299-5"><a href="joining-data-in-sql.html#cb3299-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3299-6"><a href="joining-data-in-sql.html#cb3299-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for the year 2010</span></span>
<span id="cb3299-7"><a href="joining-data-in-sql.html#cb3299-7" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2010</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1334">Table 25.14: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">region</th>
<th align="right">gdp_percapita</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Southern and Central Asia</td>
<td align="right">540</td>
</tr>
<tr class="even">
<td align="left">Angola</td>
<td align="left">Central Africa</td>
<td align="right">3599</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Southern Europe</td>
<td align="right">4098</td>
</tr>
<tr class="even">
<td align="left">United Arab Emirates</td>
<td align="left">Middle East</td>
<td align="right">34629</td>
</tr>
<tr class="odd">
<td align="left">Argentina</td>
<td align="left">South America</td>
<td align="right">10413</td>
</tr>
<tr class="even">
<td align="left">Armenia</td>
<td align="left">Middle East</td>
<td align="right">3122</td>
</tr>
<tr class="odd">
<td align="left">Antigua and Barbuda</td>
<td align="left">Caribbean</td>
<td align="right">13532</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Australia and New Zealand</td>
<td align="right">56363</td>
</tr>
<tr class="odd">
<td align="left">Austria</td>
<td align="left">Western Europe</td>
<td align="right">46757</td>
</tr>
<tr class="even">
<td align="left">Azerbaijan</td>
<td align="left">Middle East</td>
<td align="right">5847</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3300"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3300-1"><a href="joining-data-in-sql.html#cb3300-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select region, and average gdp_percapita as avg_gdp</span></span>
<span id="cb3300-2"><a href="joining-data-in-sql.html#cb3300-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> region, <span class="fu">AVG</span>(gdp_percapita) <span class="kw">AS</span> avg_gdp</span>
<span id="cb3300-3"><a href="joining-data-in-sql.html#cb3300-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3300-4"><a href="joining-data-in-sql.html#cb3300-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3300-5"><a href="joining-data-in-sql.html#cb3300-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3300-6"><a href="joining-data-in-sql.html#cb3300-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2010</span></span>
<span id="cb3300-7"><a href="joining-data-in-sql.html#cb3300-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Group by region</span></span>
<span id="cb3300-8"><a href="joining-data-in-sql.html#cb3300-8" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> region;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1335">Table 25.15: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">region</th>
<th align="right">avg_gdp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Australia and New Zealand</td>
<td align="right">44792</td>
</tr>
<tr class="even">
<td align="left">Baltic Countries</td>
<td align="right">12631</td>
</tr>
<tr class="odd">
<td align="left">British Islands</td>
<td align="right">43588</td>
</tr>
<tr class="even">
<td align="left">Caribbean</td>
<td align="right">11413</td>
</tr>
<tr class="odd">
<td align="left">Central Africa</td>
<td align="right">4797</td>
</tr>
<tr class="even">
<td align="left">Central America</td>
<td align="right">4970</td>
</tr>
<tr class="odd">
<td align="left">Eastern Africa</td>
<td align="right">1757</td>
</tr>
<tr class="even">
<td align="left">Eastern Asia</td>
<td align="right">24963</td>
</tr>
<tr class="odd">
<td align="left">Eastern Europe</td>
<td align="right">10095</td>
</tr>
<tr class="even">
<td align="left">Melanesia</td>
<td align="right">2533</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3301"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3301-1"><a href="joining-data-in-sql.html#cb3301-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> region, <span class="fu">AVG</span>(gdp_percapita) <span class="kw">AS</span> avg_gdp</span>
<span id="cb3301-2"><a href="joining-data-in-sql.html#cb3301-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3301-3"><a href="joining-data-in-sql.html#cb3301-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> economies <span class="kw">AS</span> e</span>
<span id="cb3301-4"><a href="joining-data-in-sql.html#cb3301-4" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3301-5"><a href="joining-data-in-sql.html#cb3301-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2010</span></span>
<span id="cb3301-6"><a href="joining-data-in-sql.html#cb3301-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> region</span>
<span id="cb3301-7"><a href="joining-data-in-sql.html#cb3301-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Order by descending avg_gdp</span></span>
<span id="cb3301-8"><a href="joining-data-in-sql.html#cb3301-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> avg_gdp <span class="kw">DESC</span></span>
<span id="cb3301-9"><a href="joining-data-in-sql.html#cb3301-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Return only first 10 records</span></span>
<span id="cb3301-10"><a href="joining-data-in-sql.html#cb3301-10" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>; </span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1336">Table 25.16: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">region</th>
<th align="right">avg_gdp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Western Europe</td>
<td align="right">58131</td>
</tr>
<tr class="even">
<td align="left">Nordic Countries</td>
<td align="right">57074</td>
</tr>
<tr class="odd">
<td align="left">North America</td>
<td align="right">47912</td>
</tr>
<tr class="even">
<td align="left">Australia and New Zealand</td>
<td align="right">44792</td>
</tr>
<tr class="odd">
<td align="left">British Islands</td>
<td align="right">43588</td>
</tr>
<tr class="even">
<td align="left">Eastern Asia</td>
<td align="right">24963</td>
</tr>
<tr class="odd">
<td align="left">Southern Europe</td>
<td align="right">22926</td>
</tr>
<tr class="even">
<td align="left">Middle East</td>
<td align="right">18205</td>
</tr>
<tr class="odd">
<td align="left">Baltic Countries</td>
<td align="right">12631</td>
</tr>
<tr class="even">
<td align="left">Caribbean</td>
<td align="right">11413</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="right-join-1" class="section level4 hasAnchor" number="25.2.1.2">
<h4><span class="header-section-number">25.2.1.2</span> RIGHT JOIN<a href="joining-data-in-sql.html#right-join-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb3302"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3302-1"><a href="joining-data-in-sql.html#cb3302-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Modify this query to use RIGHT JOIN instead of LEFT JOIN</span></span>
<span id="cb3302-2"><a href="joining-data-in-sql.html#cb3302-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> countries.name <span class="kw">AS</span> country, languages.name <span class="kw">AS</span> language, <span class="kw">percent</span></span>
<span id="cb3302-3"><a href="joining-data-in-sql.html#cb3302-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> languages</span>
<span id="cb3302-4"><a href="joining-data-in-sql.html#cb3302-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RIGHT</span> <span class="kw">JOIN</span> countries</span>
<span id="cb3302-5"><a href="joining-data-in-sql.html#cb3302-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3302-6"><a href="joining-data-in-sql.html#cb3302-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> language <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb3302-7"><a href="joining-data-in-sql.html#cb3302-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> language;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1337">Table 25.17: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">language</th>
<th align="right">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Djibouti</td>
<td align="left">Afar</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Eritrea</td>
<td align="left">Afar</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">Ethiopia</td>
<td align="left">Afar</td>
<td align="right">1.7</td>
</tr>
<tr class="even">
<td align="left">Namibia</td>
<td align="left">Afrikaans</td>
<td align="right">10.4</td>
</tr>
<tr class="odd">
<td align="left">South Africa</td>
<td align="left">Afrikaans</td>
<td align="right">13.5</td>
</tr>
<tr class="even">
<td align="left">Ghana</td>
<td align="left">Akyem</td>
<td align="right">3.2</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Albanian</td>
<td align="right">98.8</td>
</tr>
<tr class="even">
<td align="left">Macedonia</td>
<td align="left">Albanian</td>
<td align="right">25.1</td>
</tr>
<tr class="odd">
<td align="left">Switzerland</td>
<td align="left">Albanian</td>
<td align="right">3.0</td>
</tr>
<tr class="even">
<td align="left">France</td>
<td align="left">Alsatian</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<p>This is same as below left join.</p>
<div class="sourceCode" id="cb3303"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3303-1"><a href="joining-data-in-sql.html#cb3303-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Modify this query to use LEFT JOIN</span></span>
<span id="cb3303-2"><a href="joining-data-in-sql.html#cb3303-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> countries.name <span class="kw">AS</span> country, languages.name <span class="kw">AS</span> language, <span class="kw">percent</span></span>
<span id="cb3303-3"><a href="joining-data-in-sql.html#cb3303-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3303-4"><a href="joining-data-in-sql.html#cb3303-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> languages</span>
<span id="cb3303-5"><a href="joining-data-in-sql.html#cb3303-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3303-6"><a href="joining-data-in-sql.html#cb3303-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> language <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb3303-7"><a href="joining-data-in-sql.html#cb3303-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> language;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1338">Table 25.18: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">language</th>
<th align="right">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Djibouti</td>
<td align="left">Afar</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">Eritrea</td>
<td align="left">Afar</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">Ethiopia</td>
<td align="left">Afar</td>
<td align="right">1.7</td>
</tr>
<tr class="even">
<td align="left">Namibia</td>
<td align="left">Afrikaans</td>
<td align="right">10.4</td>
</tr>
<tr class="odd">
<td align="left">South Africa</td>
<td align="left">Afrikaans</td>
<td align="right">13.5</td>
</tr>
<tr class="even">
<td align="left">Ghana</td>
<td align="left">Akyem</td>
<td align="right">3.2</td>
</tr>
<tr class="odd">
<td align="left">Albania</td>
<td align="left">Albanian</td>
<td align="right">98.8</td>
</tr>
<tr class="even">
<td align="left">Macedonia</td>
<td align="left">Albanian</td>
<td align="right">25.1</td>
</tr>
<tr class="odd">
<td align="left">Switzerland</td>
<td align="left">Albanian</td>
<td align="right">3.0</td>
</tr>
<tr class="even">
<td align="left">France</td>
<td align="left">Alsatian</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="full-join-1" class="section level3 hasAnchor" number="25.2.2">
<h3><span class="header-section-number">25.2.2</span> FULL JOIN<a href="joining-data-in-sql.html#full-join-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>FULL JOIN</strong></p>
<ul>
<li><p>A <code>FULL JOIN</code> combines a <code>LEFT JOIN</code> and a <code>RIGHT JOIN</code>.</p>
<p><img src="data/diagrams/diagrams/full_join2.png" width="521" /></p></li>
</ul>
<div id="comparing-joins" class="section level4 hasAnchor" number="25.2.2.1">
<h4><span class="header-section-number">25.2.2.1</span> Comparing joins<a href="joining-data-in-sql.html#comparing-joins" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You’ll examine how results can differ when performing a full join compared to a left join and inner join by joining the <code>countries</code> and <code>currencies</code> tables. You’ll be focusing on the North American <code>region</code> and records where the <code>name</code> of the country is missing.</p>
<p>Begin with a full join with <code>countries</code> on the left and <code>currencies</code> on the right.</p>
<p>Then complete a similar left join and conclude with an inner join, observing the results you see along the way.</p>
<p>FUll JOIN</p>
<div class="sourceCode" id="cb3304"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3304-1"><a href="joining-data-in-sql.html#cb3304-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name <span class="kw">AS</span> country, code, region, basic_unit</span>
<span id="cb3304-2"><a href="joining-data-in-sql.html#cb3304-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3304-3"><a href="joining-data-in-sql.html#cb3304-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to currencies</span></span>
<span id="cb3304-4"><a href="joining-data-in-sql.html#cb3304-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FULL</span> <span class="kw">JOIN</span> currencies </span>
<span id="cb3304-5"><a href="joining-data-in-sql.html#cb3304-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> (code)</span>
<span id="cb3304-6"><a href="joining-data-in-sql.html#cb3304-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Where region is North America or name is null</span></span>
<span id="cb3304-7"><a href="joining-data-in-sql.html#cb3304-7" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> (region <span class="op">=</span> <span class="st">&#39;North America&#39;</span>)</span>
<span id="cb3304-8"><a href="joining-data-in-sql.html#cb3304-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">OR</span> (name <span class="kw">IS</span> <span class="kw">NULL</span>)</span>
<span id="cb3304-9"><a href="joining-data-in-sql.html#cb3304-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> region <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1339">Table 25.19: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">code</th>
<th align="left">region</th>
<th align="left">basic_unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bermuda</td>
<td align="left">BMU</td>
<td align="left">North America</td>
<td align="left">Bermudian dollar</td>
</tr>
<tr class="even">
<td align="left">Greenland</td>
<td align="left">GRL</td>
<td align="left">North America</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Canada</td>
<td align="left">CAN</td>
<td align="left">North America</td>
<td align="left">Canadian dollar</td>
</tr>
<tr class="even">
<td align="left">United States</td>
<td align="left">USA</td>
<td align="left">North America</td>
<td align="left">United States dollar</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">AIA</td>
<td align="left">NA</td>
<td align="left">East Caribbean dollar</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">IOT</td>
<td align="left">NA</td>
<td align="left">United States dollar</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">CCK</td>
<td align="left">NA</td>
<td align="left">Australian dollar</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">COK</td>
<td align="left">NA</td>
<td align="left">New Zealand dollar</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="left">TMP</td>
<td align="left">NA</td>
<td align="left">United States dollar</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">FLK</td>
<td align="left">NA</td>
<td align="left">Falkland Islands pound</td>
</tr>
</tbody>
</table>
</div>
<p>LEFT JOIN</p>
<div class="sourceCode" id="cb3305"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3305-1"><a href="joining-data-in-sql.html#cb3305-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name <span class="kw">AS</span> country, code, region, basic_unit</span>
<span id="cb3305-2"><a href="joining-data-in-sql.html#cb3305-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3305-3"><a href="joining-data-in-sql.html#cb3305-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to currencies</span></span>
<span id="cb3305-4"><a href="joining-data-in-sql.html#cb3305-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> currencies </span>
<span id="cb3305-5"><a href="joining-data-in-sql.html#cb3305-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> (code)</span>
<span id="cb3305-6"><a href="joining-data-in-sql.html#cb3305-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> region <span class="op">=</span> <span class="st">&#39;North America&#39;</span> </span>
<span id="cb3305-7"><a href="joining-data-in-sql.html#cb3305-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">OR</span> name <span class="kw">IS</span> <span class="kw">NULL</span></span>
<span id="cb3305-8"><a href="joining-data-in-sql.html#cb3305-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> region;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1340">Table 25.20: </span>4 records</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">code</th>
<th align="left">region</th>
<th align="left">basic_unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bermuda</td>
<td align="left">BMU</td>
<td align="left">North America</td>
<td align="left">Bermudian dollar</td>
</tr>
<tr class="even">
<td align="left">Greenland</td>
<td align="left">GRL</td>
<td align="left">North America</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Canada</td>
<td align="left">CAN</td>
<td align="left">North America</td>
<td align="left">Canadian dollar</td>
</tr>
<tr class="even">
<td align="left">United States</td>
<td align="left">USA</td>
<td align="left">North America</td>
<td align="left">United States dollar</td>
</tr>
</tbody>
</table>
</div>
<p>INNER JOIN</p>
<div class="sourceCode" id="cb3306"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3306-1"><a href="joining-data-in-sql.html#cb3306-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name <span class="kw">AS</span> country, code, region, basic_unit</span>
<span id="cb3306-2"><a href="joining-data-in-sql.html#cb3306-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3306-3"><a href="joining-data-in-sql.html#cb3306-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to currencies</span></span>
<span id="cb3306-4"><a href="joining-data-in-sql.html#cb3306-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> currencies </span>
<span id="cb3306-5"><a href="joining-data-in-sql.html#cb3306-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span> (code)</span>
<span id="cb3306-6"><a href="joining-data-in-sql.html#cb3306-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> region <span class="op">=</span> <span class="st">&#39;North America&#39;</span> </span>
<span id="cb3306-7"><a href="joining-data-in-sql.html#cb3306-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">OR</span> name <span class="kw">IS</span> <span class="kw">NULL</span></span>
<span id="cb3306-8"><a href="joining-data-in-sql.html#cb3306-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> region;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1341">Table 25.21: </span>3 records</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">code</th>
<th align="left">region</th>
<th align="left">basic_unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bermuda</td>
<td align="left">BMU</td>
<td align="left">North America</td>
<td align="left">Bermudian dollar</td>
</tr>
<tr class="even">
<td align="left">Canada</td>
<td align="left">CAN</td>
<td align="left">North America</td>
<td align="left">Canadian dollar</td>
</tr>
<tr class="odd">
<td align="left">United States</td>
<td align="left">USA</td>
<td align="left">North America</td>
<td align="left">United States dollar</td>
</tr>
</tbody>
</table>
</div>
<p>The <code>FULL JOIN</code> query returned 18 records, the <code>LEFT JOIN</code> returned 4 records, and the <code>INNER JOIN</code> only returned 3 records.</p>
</div>
<div id="chaining-full-joins" class="section level4 hasAnchor" number="25.2.2.2">
<h4><span class="header-section-number">25.2.2.2</span> Chaining FULL JOINs<a href="joining-data-in-sql.html#chaining-full-joins" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>uppose you are doing some research on Melanesia and Micronesia, and are interested in pulling information about languages and currencies into the data we see for these regions in the <code>countries</code> table. Since <code>languages</code> and <code>currencies</code> exist in separate tables, this will require two consecutive full joins involving the <code>countries</code>, <code>languages</code> and <code>currencies</code> tables.</p>
<div class="sourceCode" id="cb3307"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3307-1"><a href="joining-data-in-sql.html#cb3307-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3307-2"><a href="joining-data-in-sql.html#cb3307-2" aria-hidden="true" tabindex="-1"></a>    c1.name <span class="kw">AS</span> country, </span>
<span id="cb3307-3"><a href="joining-data-in-sql.html#cb3307-3" aria-hidden="true" tabindex="-1"></a>    region, </span>
<span id="cb3307-4"><a href="joining-data-in-sql.html#cb3307-4" aria-hidden="true" tabindex="-1"></a>    l.name <span class="kw">AS</span> language,</span>
<span id="cb3307-5"><a href="joining-data-in-sql.html#cb3307-5" aria-hidden="true" tabindex="-1"></a>    basic_unit, </span>
<span id="cb3307-6"><a href="joining-data-in-sql.html#cb3307-6" aria-hidden="true" tabindex="-1"></a>    frac_unit</span>
<span id="cb3307-7"><a href="joining-data-in-sql.html#cb3307-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">as</span> c1 </span>
<span id="cb3307-8"><a href="joining-data-in-sql.html#cb3307-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Full join with languages (alias as l)</span></span>
<span id="cb3307-9"><a href="joining-data-in-sql.html#cb3307-9" aria-hidden="true" tabindex="-1"></a><span class="kw">FULL</span> <span class="kw">JOIN</span> languages <span class="kw">AS</span> l </span>
<span id="cb3307-10"><a href="joining-data-in-sql.html#cb3307-10" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3307-11"><a href="joining-data-in-sql.html#cb3307-11" aria-hidden="true" tabindex="-1"></a><span class="co">-- Full join with currencies (alias as c2)</span></span>
<span id="cb3307-12"><a href="joining-data-in-sql.html#cb3307-12" aria-hidden="true" tabindex="-1"></a><span class="kw">FULL</span> <span class="kw">JOIN</span> currencies <span class="kw">AS</span> c2 </span>
<span id="cb3307-13"><a href="joining-data-in-sql.html#cb3307-13" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)</span>
<span id="cb3307-14"><a href="joining-data-in-sql.html#cb3307-14" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> region <span class="kw">LIKE</span> <span class="st">&#39;M%esia&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1342">Table 25.22: </span>Displaying records 1 - 10</caption>
<colgroup>
<col width="20%" />
<col width="13%" />
<col width="28%" />
<col width="25%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">region</th>
<th align="left">language</th>
<th align="left">basic_unit</th>
<th align="left">frac_unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Fiji Islands</td>
<td align="left">Melanesia</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Guam</td>
<td align="left">Micronesia</td>
<td align="left">English</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Guam</td>
<td align="left">Micronesia</td>
<td align="left">Filipino</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Guam</td>
<td align="left">Micronesia</td>
<td align="left">Chamorro</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Guam</td>
<td align="left">Micronesia</td>
<td align="left">Other Pacific Islander</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Guam</td>
<td align="left">Micronesia</td>
<td align="left">Asian</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">Guam</td>
<td align="left">Micronesia</td>
<td align="left">Other</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Kiribati</td>
<td align="left">Micronesia</td>
<td align="left">Kiribati</td>
<td align="left">Australian dollar</td>
<td align="left">Cent</td>
</tr>
<tr class="odd">
<td align="left">Kiribati</td>
<td align="left">Micronesia</td>
<td align="left">English</td>
<td align="left">Australian dollar</td>
<td align="left">Cent</td>
</tr>
<tr class="even">
<td align="left">Marshall Islands</td>
<td align="left">Micronesia</td>
<td align="left">Marshallese</td>
<td align="left">United States dollar</td>
<td align="left">Cent</td>
</tr>
</tbody>
</table>
</div>
<p>The first <code>FULL JOIN</code> in the query pulled countries and languages, and the second <code>FULL JOIN</code> added in currency data for each record in the result of the first <code>FULL JOIN</code>.</p>
</div>
</div>
<div id="cross-join" class="section level3 hasAnchor" number="25.2.3">
<h3><span class="header-section-number">25.2.3</span> CROSS JOIN<a href="joining-data-in-sql.html#cross-join" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>creates all possible combinations of two tables.</p>
<p><img src="data/diagrams/diagrams/cross_join.png" width="288" /></p></li>
</ul>
<div class="sourceCode" id="cb3308"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3308-1"><a href="joining-data-in-sql.html#cb3308-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> id1, id2</span>
<span id="cb3308-2"><a href="joining-data-in-sql.html#cb3308-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table1</span>
<span id="cb3308-3"><a href="joining-data-in-sql.html#cb3308-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CROSS</span> <span class="kw">JOIN</span> table2;</span></code></pre></div>
<p><strong>Histories and languages</strong></p>
<p><code>CROSS JOIN</code> can be incredibly helpful when asking questions that involve looking at all possible combinations or pairings between two sets of data.</p>
<p>Imagine you are a researcher interested in the languages spoken in two countries: Pakistan and India. You are interested in asking:</p>
<ol style="list-style-type: decimal">
<li><p>What are the languages presently spoken in the two countries?</p></li>
<li><p>Given the shared history between the two countries, what languages could <em>potentially</em> have been spoken in either country over the course of their history?</p></li>
</ol>
<p>Explore how <code>INNER JOIN</code> and <code>CROSS JOIN</code> can help answer these two questions, respectively.</p>
<div class="sourceCode" id="cb3309"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3309-1"><a href="joining-data-in-sql.html#cb3309-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> c.name <span class="kw">AS</span> country, l.name <span class="kw">AS</span> language</span>
<span id="cb3309-2"><a href="joining-data-in-sql.html#cb3309-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inner join countries as c with languages as l on code</span></span>
<span id="cb3309-3"><a href="joining-data-in-sql.html#cb3309-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3309-4"><a href="joining-data-in-sql.html#cb3309-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> languages <span class="kw">AS</span> l</span>
<span id="cb3309-5"><a href="joining-data-in-sql.html#cb3309-5" aria-hidden="true" tabindex="-1"></a><span class="kw">USING</span>(code)  </span>
<span id="cb3309-6"><a href="joining-data-in-sql.html#cb3309-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> c.code <span class="kw">IN</span> (<span class="st">&#39;PAK&#39;</span>,<span class="st">&#39;IND&#39;</span>)</span>
<span id="cb3309-7"><a href="joining-data-in-sql.html#cb3309-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> l.code <span class="kw">in</span> (<span class="st">&#39;PAK&#39;</span>,<span class="st">&#39;IND&#39;</span>);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1343">Table 25.23: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">language</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">India</td>
<td align="left">Assamese</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Bengali</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Gujarati</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Hindi</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Kannada</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Maithili</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Malayalam</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Marathi</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Oriya</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Other</td>
</tr>
</tbody>
</table>
</div>
<p>Look at possible combinations of languages that could have been spoken in the two countries given their history.</p>
<div class="sourceCode" id="cb3310"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3310-1"><a href="joining-data-in-sql.html#cb3310-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> c.name <span class="kw">AS</span> country, l.name <span class="kw">AS</span> language</span>
<span id="cb3310-2"><a href="joining-data-in-sql.html#cb3310-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c        </span>
<span id="cb3310-3"><a href="joining-data-in-sql.html#cb3310-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Perform a cross join to languages (alias as l)</span></span>
<span id="cb3310-4"><a href="joining-data-in-sql.html#cb3310-4" aria-hidden="true" tabindex="-1"></a><span class="kw">CROSS</span> <span class="kw">JOIN</span> languages <span class="kw">AS</span> l</span>
<span id="cb3310-5"><a href="joining-data-in-sql.html#cb3310-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> c.code <span class="kw">in</span> (<span class="st">&#39;PAK&#39;</span>,<span class="st">&#39;IND&#39;</span>)</span>
<span id="cb3310-6"><a href="joining-data-in-sql.html#cb3310-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> l.code <span class="kw">in</span> (<span class="st">&#39;PAK&#39;</span>,<span class="st">&#39;IND&#39;</span>);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1344">Table 25.24: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">language</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">India</td>
<td align="left">Hindi</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Bengali</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Telugu</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Marathi</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Tamil</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Urdu</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Gujarati</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Kannada</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="left">Malayalam</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="left">Oriya</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that the <code>INNER JOIN</code> returned 25 records, whereas the <code>CROSS JOIN</code> returned 50 records, as it took all combinations of languages returned by the <code>INNER JOIN</code> for both countries. (25*2=50)</p>
<p><strong>Choosing your join</strong></p>
<p>Determine the names of the five countries and their respective regions with the lowest life expectancy for the year 2010.</p>
<div class="sourceCode" id="cb3311"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3311-1"><a href="joining-data-in-sql.html#cb3311-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3311-2"><a href="joining-data-in-sql.html#cb3311-2" aria-hidden="true" tabindex="-1"></a>    c.name <span class="kw">AS</span> country,</span>
<span id="cb3311-3"><a href="joining-data-in-sql.html#cb3311-3" aria-hidden="true" tabindex="-1"></a>    region,</span>
<span id="cb3311-4"><a href="joining-data-in-sql.html#cb3311-4" aria-hidden="true" tabindex="-1"></a>    life_expectancy <span class="kw">AS</span> life_exp</span>
<span id="cb3311-5"><a href="joining-data-in-sql.html#cb3311-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c</span>
<span id="cb3311-6"><a href="joining-data-in-sql.html#cb3311-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join to populations (alias as p) using an appropriate join</span></span>
<span id="cb3311-7"><a href="joining-data-in-sql.html#cb3311-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FULL</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p</span>
<span id="cb3311-8"><a href="joining-data-in-sql.html#cb3311-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c.code <span class="op">=</span> p.country_code</span>
<span id="cb3311-9"><a href="joining-data-in-sql.html#cb3311-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for only results in the year 2010</span></span>
<span id="cb3311-10"><a href="joining-data-in-sql.html#cb3311-10" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2010</span> <span class="kw">AND</span> life_exp <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb3311-11"><a href="joining-data-in-sql.html#cb3311-11" aria-hidden="true" tabindex="-1"></a><span class="co">-- Sort by life_exp</span></span>
<span id="cb3311-12"><a href="joining-data-in-sql.html#cb3311-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> life_exp</span>
<span id="cb3311-13"><a href="joining-data-in-sql.html#cb3311-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Limit to five records</span></span>
<span id="cb3311-14"><a href="joining-data-in-sql.html#cb3311-14" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1345">Table 25.25: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">region</th>
<th align="right">life_exp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Lesotho</td>
<td align="left">Southern Africa</td>
<td align="right">47.5</td>
</tr>
<tr class="even">
<td align="left">Central African Republic</td>
<td align="left">Central Africa</td>
<td align="right">47.6</td>
</tr>
<tr class="odd">
<td align="left">Sierra Leone</td>
<td align="left">Western Africa</td>
<td align="right">48.2</td>
</tr>
<tr class="even">
<td align="left">Swaziland</td>
<td align="left">Southern Africa</td>
<td align="right">48.3</td>
</tr>
<tr class="odd">
<td align="left">Zimbabwe</td>
<td align="left">Eastern Africa</td>
<td align="right">49.6</td>
</tr>
</tbody>
</table>
</div>
<p>Notice that all four types of joins we have learned will return the same result.</p>
</div>
<div id="self-joins" class="section level3 hasAnchor" number="25.2.4">
<h3><span class="header-section-number">25.2.4</span> Self joins<a href="joining-data-in-sql.html#self-joins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Self joins are tables joined with themselves</p></li>
<li><p>They can be used to compare parts of the same table</p></li>
</ul>
<p><strong>Comparing a country to itself</strong></p>
<p>Suppose you are interested in finding out how much the populations for each country changed from 2010 to 2015. You can visualize this change by performing a self join.</p>
<p>Since you’ll be joining the <code>populations</code> table to itself, you can alias <code>populations</code> first as <code>p1</code> and again as <code>p2</code>. This is good practice whenever you are aliasing tables with the same first letter.</p>
<div class="sourceCode" id="cb3312"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3312-1"><a href="joining-data-in-sql.html#cb3312-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select aliased fields from populations as p1</span></span>
<span id="cb3312-2"><a href="joining-data-in-sql.html#cb3312-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3312-3"><a href="joining-data-in-sql.html#cb3312-3" aria-hidden="true" tabindex="-1"></a>  p1.country_code, </span>
<span id="cb3312-4"><a href="joining-data-in-sql.html#cb3312-4" aria-hidden="true" tabindex="-1"></a>  p1.<span class="kw">size</span> <span class="kw">AS</span> size2010,</span>
<span id="cb3312-5"><a href="joining-data-in-sql.html#cb3312-5" aria-hidden="true" tabindex="-1"></a>  p2.<span class="kw">size</span> <span class="kw">AS</span> size2015</span>
<span id="cb3312-6"><a href="joining-data-in-sql.html#cb3312-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations <span class="kw">AS</span> p1</span>
<span id="cb3312-7"><a href="joining-data-in-sql.html#cb3312-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Join populations as p1 to itself, alias as p2, on country code</span></span>
<span id="cb3312-8"><a href="joining-data-in-sql.html#cb3312-8" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p2</span>
<span id="cb3312-9"><a href="joining-data-in-sql.html#cb3312-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> p1.country_code <span class="op">=</span> p2.country_code</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1346">Table 25.26: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country_code</th>
<th align="right">size2010</th>
<th align="right">size2015</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">101597</td>
<td align="right">101597</td>
</tr>
<tr class="even">
<td align="left">ABW</td>
<td align="right">101597</td>
<td align="right">103889</td>
</tr>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">103889</td>
<td align="right">101597</td>
</tr>
<tr class="even">
<td align="left">ABW</td>
<td align="right">103889</td>
<td align="right">103889</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">27962207</td>
<td align="right">27962207</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">27962207</td>
<td align="right">32526562</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">32526562</td>
<td align="right">27962207</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">32526562</td>
<td align="right">32526562</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">21219954</td>
<td align="right">21219954</td>
</tr>
<tr class="even">
<td align="left">AGO</td>
<td align="right">21219954</td>
<td align="right">25021974</td>
</tr>
</tbody>
</table>
</div>
<p>Since you want to compare records from 2010 and 2015, eliminate unwanted records by extending the <code>WHERE</code> statement to include only records where the <code>p1.year</code> matches <code>p2.year - 5</code>.</p>
<div class="sourceCode" id="cb3313"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3313-1"><a href="joining-data-in-sql.html#cb3313-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3313-2"><a href="joining-data-in-sql.html#cb3313-2" aria-hidden="true" tabindex="-1"></a>    p1.country_code, </span>
<span id="cb3313-3"><a href="joining-data-in-sql.html#cb3313-3" aria-hidden="true" tabindex="-1"></a>    p1.<span class="kw">size</span> <span class="kw">AS</span> size2010, </span>
<span id="cb3313-4"><a href="joining-data-in-sql.html#cb3313-4" aria-hidden="true" tabindex="-1"></a>    p2.<span class="kw">size</span> <span class="kw">AS</span> size2015</span>
<span id="cb3313-5"><a href="joining-data-in-sql.html#cb3313-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations <span class="kw">AS</span> p1</span>
<span id="cb3313-6"><a href="joining-data-in-sql.html#cb3313-6" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> populations <span class="kw">AS</span> p2</span>
<span id="cb3313-7"><a href="joining-data-in-sql.html#cb3313-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> p1.country_code <span class="op">=</span> p2.country_code</span>
<span id="cb3313-8"><a href="joining-data-in-sql.html#cb3313-8" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> p1.<span class="dt">year</span> <span class="op">=</span> <span class="dv">2010</span></span>
<span id="cb3313-9"><a href="joining-data-in-sql.html#cb3313-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter such that p1.year is always five years before p2.year</span></span>
<span id="cb3313-10"><a href="joining-data-in-sql.html#cb3313-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> (p2.<span class="dt">year</span> <span class="op">=</span> <span class="dv">2015</span>);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1347">Table 25.27: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">country_code</th>
<th align="right">size2010</th>
<th align="right">size2015</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">101597</td>
<td align="right">103889</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">27962207</td>
<td align="right">32526562</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">21219954</td>
<td align="right">25021974</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="right">2913021</td>
<td align="right">2889167</td>
</tr>
<tr class="odd">
<td align="left">AND</td>
<td align="right">84419</td>
<td align="right">70473</td>
</tr>
<tr class="even">
<td align="left">ARE</td>
<td align="right">8329453</td>
<td align="right">9156963</td>
</tr>
<tr class="odd">
<td align="left">ARG</td>
<td align="right">41222875</td>
<td align="right">43416755</td>
</tr>
<tr class="even">
<td align="left">ARM</td>
<td align="right">2963496</td>
<td align="right">3017712</td>
</tr>
<tr class="odd">
<td align="left">ASM</td>
<td align="right">55636</td>
<td align="right">55538</td>
</tr>
<tr class="even">
<td align="left">ATG</td>
<td align="right">87233</td>
<td align="right">91818</td>
</tr>
</tbody>
</table>
</div>
<p><strong>All joins on deck</strong></p>
<p><img src="image/sql_compare%20join%20example.png" /></p>
</div>
</div>
<div id="set-theory-for-sql-joins" class="section level2 hasAnchor" number="25.3">
<h2><span class="header-section-number">25.3</span> Set Theory for SQL Joins<a href="joining-data-in-sql.html#set-theory-for-sql-joins" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Venn diagrams and set theory</strong></p>
<p><img src="data/diagrams/diagrams/venn.png" width="348" /></p>
<div id="union-vs.-union-all" class="section level3 hasAnchor" number="25.3.1">
<h3><span class="header-section-number">25.3.1</span> UNION vs. UNION ALL<a href="joining-data-in-sql.html#union-vs.-union-all" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>UNION</code> takes two tables as input, and returns all records from both tables, <em>excluding duplicates</em></p>
<div class="sourceCode" id="cb3314"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3314-1"><a href="joining-data-in-sql.html#cb3314-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3314-2"><a href="joining-data-in-sql.html#cb3314-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> left_table</span>
<span id="cb3314-3"><a href="joining-data-in-sql.html#cb3314-3" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span></span>
<span id="cb3314-4"><a href="joining-data-in-sql.html#cb3314-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3314-5"><a href="joining-data-in-sql.html#cb3314-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> right_table;</span></code></pre></div>
<p><img src="data/diagrams/diagrams/union.png" width="360" /></p></li>
<li><p><code>UNION ALL</code> takes two tables and returns all records from both tables, <em>including duplicates</em></p>
<div class="sourceCode" id="cb3315"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3315-1"><a href="joining-data-in-sql.html#cb3315-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3315-2"><a href="joining-data-in-sql.html#cb3315-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> left_table</span>
<span id="cb3315-3"><a href="joining-data-in-sql.html#cb3315-3" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span> <span class="kw">ALL</span></span>
<span id="cb3315-4"><a href="joining-data-in-sql.html#cb3315-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3315-5"><a href="joining-data-in-sql.html#cb3315-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> right_table;</span></code></pre></div>
<p><img src="data/diagrams/diagrams/union_all.png" width="346" /></p></li>
</ul>
<p><strong>UNION and UNION ALL syntax</strong></p>
<p>Both queries on the left and right of the set operation must have the <em>same data types</em>. The names of the fields do not need to be the same, as the result will always contain field names from the left query.</p>
<p><img src="data/diagrams/diagrams/union_syntax_2.png" width="534" /></p>
<p>Two tables, <code>languages</code> and <code>currencies</code>:</p>
<div class="sourceCode" id="cb3316"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3316-1"><a href="joining-data-in-sql.html#cb3316-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code </span>
<span id="cb3316-2"><a href="joining-data-in-sql.html#cb3316-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> languages</span>
<span id="cb3316-3"><a href="joining-data-in-sql.html#cb3316-3" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span></span>
<span id="cb3316-4"><a href="joining-data-in-sql.html#cb3316-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> curr_id </span>
<span id="cb3316-5"><a href="joining-data-in-sql.html#cb3316-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> currencies;</span></code></pre></div>
<p>❌A SQL error, because <code>languages</code> and <code>currencies</code> do not have the same number of fields.</p>
<div class="sourceCode" id="cb3317"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3317-1"><a href="joining-data-in-sql.html#cb3317-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code </span>
<span id="cb3317-2"><a href="joining-data-in-sql.html#cb3317-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> languages</span>
<span id="cb3317-3"><a href="joining-data-in-sql.html#cb3317-3" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span></span>
<span id="cb3317-4"><a href="joining-data-in-sql.html#cb3317-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> curr_id </span>
<span id="cb3317-5"><a href="joining-data-in-sql.html#cb3317-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> currencies;</span></code></pre></div>
<p>❌A SQL error, because <code>code</code> and <code>curr_id</code> are not of the same data type.</p>
<div class="sourceCode" id="cb3318"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3318-1"><a href="joining-data-in-sql.html#cb3318-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code <span class="kw">FROM</span></span>
<span id="cb3318-2"><a href="joining-data-in-sql.html#cb3318-2" aria-hidden="true" tabindex="-1"></a>languages</span>
<span id="cb3318-3"><a href="joining-data-in-sql.html#cb3318-3" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span> <span class="kw">ALL</span></span>
<span id="cb3318-4"><a href="joining-data-in-sql.html#cb3318-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code <span class="kw">FROM</span> </span>
<span id="cb3318-5"><a href="joining-data-in-sql.html#cb3318-5" aria-hidden="true" tabindex="-1"></a>currencies;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1348">Table 25.28: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
</tr>
<tr class="odd">
<td align="left">DZA</td>
</tr>
<tr class="even">
<td align="left">DZA</td>
</tr>
</tbody>
</table>
</div>
<p>⭕An unordered list of each country <code>code</code> in <code>languages</code> and <code>currencies</code>, including duplicates.</p>
<p><strong>Comparing global economies</strong></p>
<p>In this exercise, you have two tables, <code>economies2015</code> and <code>economies2019</code>, available to you under the tabs in the console. You’ll perform a set operation to stack all records in these two tables on top of each other, <em>excluding duplicates</em>.</p>
<p>When drafting queries containing set operations, it is often helpful to write the queries on either side of the operation first, and then call the set operator.</p>
<div class="sourceCode" id="cb3319"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3319-1"><a href="joining-data-in-sql.html#cb3319-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select all fields from economies2015</span></span>
<span id="cb3319-2"><a href="joining-data-in-sql.html#cb3319-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3319-3"><a href="joining-data-in-sql.html#cb3319-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> economies2015    </span>
<span id="cb3319-4"><a href="joining-data-in-sql.html#cb3319-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Set operation</span></span>
<span id="cb3319-5"><a href="joining-data-in-sql.html#cb3319-5" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span></span>
<span id="cb3319-6"><a href="joining-data-in-sql.html#cb3319-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select all fields from economies2019</span></span>
<span id="cb3319-7"><a href="joining-data-in-sql.html#cb3319-7" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3319-8"><a href="joining-data-in-sql.html#cb3319-8" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> economies2019</span>
<span id="cb3319-9"><a href="joining-data-in-sql.html#cb3319-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> code, <span class="dt">year</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1349">Table 25.29: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="right">year</th>
<th align="left">income_group</th>
<th align="right">gross_savings</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">2015</td>
<td align="left">High income</td>
<td align="right">14.87</td>
</tr>
<tr class="even">
<td align="left">AGO</td>
<td align="right">2015</td>
<td align="left">Lower middle income</td>
<td align="right">25.02</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">2019</td>
<td align="left">Lower middle income</td>
<td align="right">25.52</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="right">2015</td>
<td align="left">Upper middle income</td>
<td align="right">16.86</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
<td align="right">2019</td>
<td align="left">Upper middle income</td>
<td align="right">14.50</td>
</tr>
<tr class="even">
<td align="left">ARG</td>
<td align="right">2015</td>
<td align="left">Upper middle income</td>
<td align="right">14.29</td>
</tr>
<tr class="odd">
<td align="left">ARG</td>
<td align="right">2019</td>
<td align="left">Upper middle income</td>
<td align="right">14.29</td>
</tr>
<tr class="even">
<td align="left">ARM</td>
<td align="right">2015</td>
<td align="left">Upper middle income</td>
<td align="right">18.43</td>
</tr>
<tr class="odd">
<td align="left">ARM</td>
<td align="right">2019</td>
<td align="left">Upper middle income</td>
<td align="right">9.82</td>
</tr>
<tr class="even">
<td align="left">ATG</td>
<td align="right">2015</td>
<td align="left">High income</td>
<td align="right">7.05</td>
</tr>
</tbody>
</table>
</div>
<p><code>UNION</code> can be helpful for consolidating data from multiple tables into one result, which as you have seen, can then be ordered in meaningful ways.</p>
<p><strong>Comparing two set operations</strong></p>
<p>In this exercise, you will looking at cases for when <code>UNION</code> is appropriate compared to <code>UNION ALL</code>.</p>
<p>You will be looking at combinations of country code and year from the <code>economies</code> and <code>populations</code> tables.</p>
<div class="sourceCode" id="cb3320"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3320-1"><a href="joining-data-in-sql.html#cb3320-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Query that determines all pairs of code and year from economies and populations, without duplicates</span></span>
<span id="cb3320-2"><a href="joining-data-in-sql.html#cb3320-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code, <span class="dt">year</span></span>
<span id="cb3320-3"><a href="joining-data-in-sql.html#cb3320-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> economies</span>
<span id="cb3320-4"><a href="joining-data-in-sql.html#cb3320-4" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span></span>
<span id="cb3320-5"><a href="joining-data-in-sql.html#cb3320-5" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> country_code, <span class="dt">year</span></span>
<span id="cb3320-6"><a href="joining-data-in-sql.html#cb3320-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations</span>
<span id="cb3320-7"><a href="joining-data-in-sql.html#cb3320-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> code, <span class="dt">year</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1350">Table 25.30: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">ABW</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">AGO</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">AND</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">AND</td>
<td align="right">2015</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3321"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3321-1"><a href="joining-data-in-sql.html#cb3321-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Amend the query to return all combinations (including duplicates)</span></span>
<span id="cb3321-2"><a href="joining-data-in-sql.html#cb3321-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code, <span class="dt">year</span></span>
<span id="cb3321-3"><a href="joining-data-in-sql.html#cb3321-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> economies</span>
<span id="cb3321-4"><a href="joining-data-in-sql.html#cb3321-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Set theory clause</span></span>
<span id="cb3321-5"><a href="joining-data-in-sql.html#cb3321-5" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span> <span class="kw">ALL</span></span>
<span id="cb3321-6"><a href="joining-data-in-sql.html#cb3321-6" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> country_code, <span class="dt">year</span></span>
<span id="cb3321-7"><a href="joining-data-in-sql.html#cb3321-7" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations</span>
<span id="cb3321-8"><a href="joining-data-in-sql.html#cb3321-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> code, <span class="dt">year</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1351">Table 25.31: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="right">year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">ABW</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2010</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2015</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">2010</td>
</tr>
<tr class="even">
<td align="left">AGO</td>
<td align="right">2010</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">2015</td>
</tr>
<tr class="even">
<td align="left">AGO</td>
<td align="right">2015</td>
</tr>
</tbody>
</table>
</div>
<p><code>UNION</code> returned 434 records, whereas <code>UNION ALL</code> returned 814. Are you able to spot the duplicates in the <code>UNION ALL</code>?</p>
</div>
<div id="intersect" class="section level3 hasAnchor" number="25.3.2">
<h3><span class="header-section-number">25.3.2</span> INTERSECT<a href="joining-data-in-sql.html#intersect" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>INTERSECT</code> is a robust set operation for finding the set of identical records between two sets of records.</li>
</ul>
<p><img src="data/diagrams/diagrams/intersect_two_columns.png" width="354" /></p>
<p><strong>INTERSECT vs. INNER JOIN on two columns</strong></p>
<table>
<colgroup>
<col width="50%" />
<col width="49%" />
</colgroup>
<thead>
<tr class="header">
<th>INTERSECT</th>
<th>INNER JOIN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><div class="sourceCode" id="cb3322"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3322-1"><a href="joining-data-in-sql.html#cb3322-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3322-2"><a href="joining-data-in-sql.html#cb3322-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> left_table</span>
<span id="cb3322-3"><a href="joining-data-in-sql.html#cb3322-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INTERSECT</span></span>
<span id="cb3322-4"><a href="joining-data-in-sql.html#cb3322-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3322-5"><a href="joining-data-in-sql.html#cb3322-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> right_table;</span></code></pre></div></td>
<td><div class="sourceCode" id="cb3323"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3323-1"><a href="joining-data-in-sql.html#cb3323-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3323-2"><a href="joining-data-in-sql.html#cb3323-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> left_table</span>
<span id="cb3323-3"><a href="joining-data-in-sql.html#cb3323-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> right_table</span>
<span id="cb3323-4"><a href="joining-data-in-sql.html#cb3323-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> <span class="kw">left</span>.<span class="kw">id</span> <span class="op">=</span> <span class="kw">right</span>.<span class="kw">id</span></span>
<span id="cb3323-5"><a href="joining-data-in-sql.html#cb3323-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> <span class="kw">left</span>.val <span class="op">=</span> <span class="kw">right</span>.val</span></code></pre></div></td>
</tr>
<tr class="even">
<td><img src="data/diagrams/diagrams/intersect_two_columns.png" /></td>
<td><img src="data/diagrams/diagrams/inner_join_two_columns.png" /></td>
</tr>
<tr class="odd">
<td>removes duplicates</td>
<td>return duplicates, if id is duplicated in either table</td>
</tr>
<tr class="even">
<td>return <code>NULL</code></td>
<td>never return <code>NULL</code></td>
</tr>
<tr class="odd">
<td>A set-based operator that compares complete rows between two sets and can never return more rows than in the smaller table.</td>
<td>An operator that generally matches on a limited set of columns and can return zero rows or more rows from either table.</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Let’s say you are interested in those countries that share names with cities. Return all city names that are also country names.</p>
<div class="sourceCode" id="cb3324"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3324-1"><a href="joining-data-in-sql.html#cb3324-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Return all cities with the same name as a country</span></span>
<span id="cb3324-2"><a href="joining-data-in-sql.html#cb3324-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb3324-3"><a href="joining-data-in-sql.html#cb3324-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3324-4"><a href="joining-data-in-sql.html#cb3324-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INTERSECT</span></span>
<span id="cb3324-5"><a href="joining-data-in-sql.html#cb3324-5" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb3324-6"><a href="joining-data-in-sql.html#cb3324-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1352">Table 25.32: </span>1 records</caption>
<thead>
<tr class="header">
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Singapore</td>
</tr>
</tbody>
</table>
</div>
<p>It looks as though Singapore is the only country in our database that has a city with the same name!</p>
</div>
<div id="except" class="section level3 hasAnchor" number="25.3.3">
<h3><span class="header-section-number">25.3.3</span> EXCEPT<a href="joining-data-in-sql.html#except" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>EXCEPT</code> retains only records from the left table that are not present in the right table</p>
<p><img src="data/diagrams/diagrams/except.png" width="415" /></p></li>
</ul>
<p>Find the names of cities that <em>do not have the same names</em> as their countries.</p>
<div class="sourceCode" id="cb3325"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3325-1"><a href="joining-data-in-sql.html#cb3325-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Return all cities that do not have the same name as a country</span></span>
<span id="cb3325-2"><a href="joining-data-in-sql.html#cb3325-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb3325-3"><a href="joining-data-in-sql.html#cb3325-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3325-4"><a href="joining-data-in-sql.html#cb3325-4" aria-hidden="true" tabindex="-1"></a><span class="kw">EXCEPT</span></span>
<span id="cb3325-5"><a href="joining-data-in-sql.html#cb3325-5" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb3325-6"><a href="joining-data-in-sql.html#cb3325-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3325-7"><a href="joining-data-in-sql.html#cb3325-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> name;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1353">Table 25.33: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Abidjan</td>
</tr>
<tr class="even">
<td align="left">Abu Dhabi</td>
</tr>
<tr class="odd">
<td align="left">Abuja</td>
</tr>
<tr class="even">
<td align="left">Accra</td>
</tr>
<tr class="odd">
<td align="left">Addis Ababa</td>
</tr>
<tr class="even">
<td align="left">Ahmedabad</td>
</tr>
<tr class="odd">
<td align="left">Alexandria</td>
</tr>
<tr class="even">
<td align="left">Algiers</td>
</tr>
<tr class="odd">
<td align="left">Almaty</td>
</tr>
<tr class="even">
<td align="left">Ankara</td>
</tr>
</tbody>
</table>
</div>
<p>Note that if <code>countries</code> had been on the left and <code>cities</code> on the right, you would have returned the opposite: all countries that do not have the same name as a city.</p>
<div class="sourceCode" id="cb3326"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3326-1"><a href="joining-data-in-sql.html#cb3326-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb3326-2"><a href="joining-data-in-sql.html#cb3326-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3326-3"><a href="joining-data-in-sql.html#cb3326-3" aria-hidden="true" tabindex="-1"></a><span class="kw">EXCEPT</span></span>
<span id="cb3326-4"><a href="joining-data-in-sql.html#cb3326-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb3326-5"><a href="joining-data-in-sql.html#cb3326-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3326-6"><a href="joining-data-in-sql.html#cb3326-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> name;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1354">Table 25.34: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
</tr>
<tr class="even">
<td align="left">Albania</td>
</tr>
<tr class="odd">
<td align="left">Algeria</td>
</tr>
<tr class="even">
<td align="left">American Samoa</td>
</tr>
<tr class="odd">
<td align="left">Andorra</td>
</tr>
<tr class="even">
<td align="left">Angola</td>
</tr>
<tr class="odd">
<td align="left">Antigua and Barbuda</td>
</tr>
<tr class="even">
<td align="left">Argentina</td>
</tr>
<tr class="odd">
<td align="left">Armenia</td>
</tr>
<tr class="even">
<td align="left">Aruba</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Calling all set operators</strong></p>
<p><img src="image/sql_set%20operation%20example.png" width="673" /></p>
</div>
</div>
<div id="subqueries" class="section level2 hasAnchor" number="25.4">
<h2><span class="header-section-number">25.4</span> Subqueries<a href="joining-data-in-sql.html#subqueries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="with-semi-joins-anti-joins" class="section level3 hasAnchor" number="25.4.1">
<h3><span class="header-section-number">25.4.1</span> With semi joins &amp; anti joins<a href="joining-data-in-sql.html#with-semi-joins-anti-joins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Additive joins</strong></p>
<p><img src="data/diagrams/diagrams/additive_joins.png" width="585" /></p>
<ul>
<li><p>The six joins we’ve worked with so far are all “additive” in that they add columns to the original “left” table.</p>
<ol style="list-style-type: decimal">
<li><p><code>INNER JOIN</code></p></li>
<li><p><code>LEFT JOIN</code></p></li>
<li><p><code>RIGHT JOIN</code></p></li>
<li><p><code>FULL JOIN</code></p></li>
<li><p><code>CROSS JOIN</code></p></li>
<li><p><code>Self joins</code></p></li>
</ol></li>
</ul>
<p><strong>None additive joins</strong></p>
<table>
<colgroup>
<col width="48%" />
<col width="51%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Semi join</strong></td>
<td><strong>Anti join</strong></td>
</tr>
<tr class="even">
<td>Chooses records in the first table where a condition <em>is met</em> in the second table.</td>
<td>Chooses records in the first table where a condition <em>is NOT met</em> in the second table.</td>
</tr>
<tr class="odd">
<td><img src="data/diagrams/diagrams/semi2.png" /></td>
<td><img src="data/diagrams/diagrams/anti2.png" /></td>
</tr>
<tr class="even">
<td><div class="sourceCode" id="cb3327"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3327-1"><a href="joining-data-in-sql.html#cb3327-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> president, country, continent</span>
<span id="cb3327-2"><a href="joining-data-in-sql.html#cb3327-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> presidents</span>
<span id="cb3327-3"><a href="joining-data-in-sql.html#cb3327-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> country <span class="kw">IN</span> 👈</span>
<span id="cb3327-4"><a href="joining-data-in-sql.html#cb3327-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> country</span>
<span id="cb3327-5"><a href="joining-data-in-sql.html#cb3327-5" aria-hidden="true" tabindex="-1"></a>     <span class="kw">FROM</span> states</span>
<span id="cb3327-6"><a href="joining-data-in-sql.html#cb3327-6" aria-hidden="true" tabindex="-1"></a>     <span class="kw">WHERE</span> indep_year <span class="op">&lt;</span> <span class="dv">1800</span>);</span></code></pre></div></td>
<td><div class="sourceCode" id="cb3328"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3328-1"><a href="joining-data-in-sql.html#cb3328-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> country, president</span>
<span id="cb3328-2"><a href="joining-data-in-sql.html#cb3328-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> presidents</span>
<span id="cb3328-3"><a href="joining-data-in-sql.html#cb3328-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> continent <span class="kw">LIKE</span> <span class="st">&#39;%America&#39;</span></span>
<span id="cb3328-4"><a href="joining-data-in-sql.html#cb3328-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> country <span class="kw">NOT</span> <span class="kw">IN</span>  👈</span>
<span id="cb3328-5"><a href="joining-data-in-sql.html#cb3328-5" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">SELECT</span> country</span>
<span id="cb3328-6"><a href="joining-data-in-sql.html#cb3328-6" aria-hidden="true" tabindex="-1"></a>         <span class="kw">FROM</span> states</span>
<span id="cb3328-7"><a href="joining-data-in-sql.html#cb3328-7" aria-hidden="true" tabindex="-1"></a>         <span class="kw">WHERE</span> indep_year <span class="op">&lt;</span> <span class="dv">1800</span>);</span></code></pre></div></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div id="semi-join" class="section level4 hasAnchor" number="25.4.1.1">
<h4><span class="header-section-number">25.4.1.1</span> Semi join<a href="joining-data-in-sql.html#semi-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s say you are interested in identifying languages spoken in the Middle East. The <code>languages</code> table contains information about languages and countries, but it does not tell you what region the countries belong to. You can build up a semi join by filtering the <code>countries</code> table by a particular <code>region</code>, and then using this to further filter the <code>languages</code> table.</p>
<div class="sourceCode" id="cb3329"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3329-1"><a href="joining-data-in-sql.html#cb3329-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select country code for countries in the Middle East</span></span>
<span id="cb3329-2"><a href="joining-data-in-sql.html#cb3329-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code</span>
<span id="cb3329-3"><a href="joining-data-in-sql.html#cb3329-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3329-4"><a href="joining-data-in-sql.html#cb3329-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> region <span class="op">=</span> <span class="st">&#39;Middle East&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1355">Table 25.35: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ARE</td>
</tr>
<tr class="even">
<td align="left">ARM</td>
</tr>
<tr class="odd">
<td align="left">AZE</td>
</tr>
<tr class="even">
<td align="left">BHR</td>
</tr>
<tr class="odd">
<td align="left">GEO</td>
</tr>
<tr class="even">
<td align="left">IRQ</td>
</tr>
<tr class="odd">
<td align="left">ISR</td>
</tr>
<tr class="even">
<td align="left">YEM</td>
</tr>
<tr class="odd">
<td align="left">JOR</td>
</tr>
<tr class="even">
<td align="left">KWT</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3330"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3330-1"><a href="joining-data-in-sql.html#cb3330-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select unique language names</span></span>
<span id="cb3330-2"><a href="joining-data-in-sql.html#cb3330-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> name</span>
<span id="cb3330-3"><a href="joining-data-in-sql.html#cb3330-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> languages</span>
<span id="cb3330-4"><a href="joining-data-in-sql.html#cb3330-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Order by the name of the language</span></span>
<span id="cb3330-5"><a href="joining-data-in-sql.html#cb3330-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> name;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1356">Table 25.36: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afar</td>
</tr>
<tr class="even">
<td align="left">Afrikaans</td>
</tr>
<tr class="odd">
<td align="left">Akyem</td>
</tr>
<tr class="even">
<td align="left">Albanian</td>
</tr>
<tr class="odd">
<td align="left">Alsatian</td>
</tr>
<tr class="even">
<td align="left">Amerindian</td>
</tr>
<tr class="odd">
<td align="left">Amharic</td>
</tr>
<tr class="even">
<td align="left">Angolar</td>
</tr>
<tr class="odd">
<td align="left">Antiguan creole</td>
</tr>
<tr class="even">
<td align="left">Arabic</td>
</tr>
</tbody>
</table>
</div>
<p>Create a semi join out of the two queries you’ve written, which filters unique languages returned in the first query for only those languages spoken in the <code>'Middle East'</code>.</p>
<div class="sourceCode" id="cb3331"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3331-1"><a href="joining-data-in-sql.html#cb3331-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> name</span>
<span id="cb3331-2"><a href="joining-data-in-sql.html#cb3331-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> languages</span>
<span id="cb3331-3"><a href="joining-data-in-sql.html#cb3331-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add syntax to use bracketed subquery below as a filter</span></span>
<span id="cb3331-4"><a href="joining-data-in-sql.html#cb3331-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> code <span class="kw">IN</span></span>
<span id="cb3331-5"><a href="joining-data-in-sql.html#cb3331-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> code</span>
<span id="cb3331-6"><a href="joining-data-in-sql.html#cb3331-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> countries</span>
<span id="cb3331-7"><a href="joining-data-in-sql.html#cb3331-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> region <span class="op">=</span> <span class="st">&#39;Middle East&#39;</span>)</span>
<span id="cb3331-8"><a href="joining-data-in-sql.html#cb3331-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> name;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1357">Table 25.37: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Arabic</td>
</tr>
<tr class="even">
<td align="left">Aramaic</td>
</tr>
<tr class="odd">
<td align="left">Armenian</td>
</tr>
<tr class="even">
<td align="left">Azerbaijani</td>
</tr>
<tr class="odd">
<td align="left">Azeri</td>
</tr>
<tr class="even">
<td align="left">Baluchi</td>
</tr>
<tr class="odd">
<td align="left">Bulgarian</td>
</tr>
<tr class="even">
<td align="left">Circassian</td>
</tr>
<tr class="odd">
<td align="left">English</td>
</tr>
<tr class="even">
<td align="left">Farsi</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="anti-join" class="section level4 hasAnchor" number="25.4.1.2">
<h4><span class="header-section-number">25.4.1.2</span> Anti join<a href="joining-data-in-sql.html#anti-join" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The anti join is a related and powerful joining tool. It can be particularly useful for identifying whether an incorrect number of records appears in a join.</p>
<p>Say you are interested in identifying currencies of Oceanian countries.</p>
<p>You have written the following <code>INNER JOIN</code>, which returns 15 records.</p>
<div class="sourceCode" id="cb3332"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3332-1"><a href="joining-data-in-sql.html#cb3332-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> c1.code, name, basic_unit <span class="kw">AS</span> currency</span>
<span id="cb3332-2"><a href="joining-data-in-sql.html#cb3332-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries <span class="kw">AS</span> c1</span>
<span id="cb3332-3"><a href="joining-data-in-sql.html#cb3332-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> currencies <span class="kw">AS</span> c2</span>
<span id="cb3332-4"><a href="joining-data-in-sql.html#cb3332-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> c1.code <span class="op">=</span> c2.code</span>
<span id="cb3332-5"><a href="joining-data-in-sql.html#cb3332-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> c1.continent <span class="op">=</span> <span class="st">&#39;Oceania&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1358">Table 25.38: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="left">name</th>
<th align="left">currency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AUS</td>
<td align="left">Australia</td>
<td align="left">Australian dollar</td>
</tr>
<tr class="even">
<td align="left">KIR</td>
<td align="left">Kiribati</td>
<td align="left">Australian dollar</td>
</tr>
<tr class="odd">
<td align="left">MHL</td>
<td align="left">Marshall Islands</td>
<td align="left">United States dollar</td>
</tr>
<tr class="even">
<td align="left">NRU</td>
<td align="left">Nauru</td>
<td align="left">Australian dollar</td>
</tr>
<tr class="odd">
<td align="left">PLW</td>
<td align="left">Palau</td>
<td align="left">United States dollar</td>
</tr>
<tr class="even">
<td align="left">PNG</td>
<td align="left">Papua New Guinea</td>
<td align="left">Papua New Guinean kina</td>
</tr>
<tr class="odd">
<td align="left">PYF</td>
<td align="left">French Polynesia</td>
<td align="left">CFP franc</td>
</tr>
<tr class="even">
<td align="left">SLB</td>
<td align="left">Solomon Islands</td>
<td align="left">Solomon Islands dollar</td>
</tr>
<tr class="odd">
<td align="left">WSM</td>
<td align="left">Samoa</td>
<td align="left">Samoan tala</td>
</tr>
<tr class="even">
<td align="left">TON</td>
<td align="left">Tonga</td>
<td align="left">Tongan paʻanga</td>
</tr>
</tbody>
</table>
</div>
<ol style="list-style-type: decimal">
<li>Now, you want to ensure that all Oceanian countries from the countries table are included in this result.</li>
</ol>
<div class="sourceCode" id="cb3333"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3333-1"><a href="joining-data-in-sql.html#cb3333-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select code and name of countries from Oceania</span></span>
<span id="cb3333-2"><a href="joining-data-in-sql.html#cb3333-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code, name</span>
<span id="cb3333-3"><a href="joining-data-in-sql.html#cb3333-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3333-4"><a href="joining-data-in-sql.html#cb3333-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> continent <span class="op">=</span> <span class="st">&#39;Oceania&#39;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1359">Table 25.39: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ASM</td>
<td align="left">American Samoa</td>
</tr>
<tr class="even">
<td align="left">AUS</td>
<td align="left">Australia</td>
</tr>
<tr class="odd">
<td align="left">FJI</td>
<td align="left">Fiji Islands</td>
</tr>
<tr class="even">
<td align="left">GUM</td>
<td align="left">Guam</td>
</tr>
<tr class="odd">
<td align="left">KIR</td>
<td align="left">Kiribati</td>
</tr>
<tr class="even">
<td align="left">MHL</td>
<td align="left">Marshall Islands</td>
</tr>
<tr class="odd">
<td align="left">FSM</td>
<td align="left">Micronesia, Federated States of</td>
</tr>
<tr class="even">
<td align="left">NRU</td>
<td align="left">Nauru</td>
</tr>
<tr class="odd">
<td align="left">PLW</td>
<td align="left">Palau</td>
</tr>
<tr class="even">
<td align="left">PNG</td>
<td align="left">Papua New Guinea</td>
</tr>
</tbody>
</table>
</div>
<p>There’re 19 records.</p>
<ol start="2" style="list-style-type: decimal">
<li>If there are any Oceanian countries excluded in this INNER JOIN, you want to return the names of these countries.</li>
</ol>
<div class="sourceCode" id="cb3334"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3334-1"><a href="joining-data-in-sql.html#cb3334-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code, name</span>
<span id="cb3334-2"><a href="joining-data-in-sql.html#cb3334-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3334-3"><a href="joining-data-in-sql.html#cb3334-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> continent <span class="op">=</span> <span class="st">&#39;Oceania&#39;</span></span>
<span id="cb3334-4"><a href="joining-data-in-sql.html#cb3334-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for countries not included in the bracketed subquery</span></span>
<span id="cb3334-5"><a href="joining-data-in-sql.html#cb3334-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> code <span class="kw">NOT</span> <span class="kw">IN</span></span>
<span id="cb3334-6"><a href="joining-data-in-sql.html#cb3334-6" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> code</span>
<span id="cb3334-7"><a href="joining-data-in-sql.html#cb3334-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">FROM</span> currencies);</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1360">Table 25.40: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="left">name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ASM</td>
<td align="left">American Samoa</td>
</tr>
<tr class="even">
<td align="left">FJI</td>
<td align="left">Fiji Islands</td>
</tr>
<tr class="odd">
<td align="left">GUM</td>
<td align="left">Guam</td>
</tr>
<tr class="even">
<td align="left">FSM</td>
<td align="left">Micronesia, Federated States of</td>
</tr>
<tr class="odd">
<td align="left">MNP</td>
<td align="left">Northern Mariana Islands</td>
</tr>
</tbody>
</table>
</div>
<p>Anti join determined which five out of 19 countries that were not included in the <code>INNER JOIN</code> provided.</p>
</div>
</div>
<div id="inside-where-select" class="section level3 hasAnchor" number="25.4.2">
<h3><span class="header-section-number">25.4.2</span> Inside WHERE &amp; SELECT<a href="joining-data-in-sql.html#inside-where-select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Syntax for subqueries inside WHERE</strong></p>
<ul>
<li><p>All semi joins and anti joins we have seen included a subequery in <code>WHERE</code></p></li>
<li><p><code>WHERE</code> is the most common place for subqueries</p>
<div class="sourceCode" id="cb3335"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3335-1"><a href="joining-data-in-sql.html#cb3335-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- example</span></span>
<span id="cb3335-2"><a href="joining-data-in-sql.html#cb3335-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3335-3"><a href="joining-data-in-sql.html#cb3335-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> some_table</span>
<span id="cb3335-4"><a href="joining-data-in-sql.html#cb3335-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> some_field <span class="kw">IN</span></span>
<span id="cb3335-5"><a href="joining-data-in-sql.html#cb3335-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> some_numeric_field</span>
<span id="cb3335-6"><a href="joining-data-in-sql.html#cb3335-6" aria-hidden="true" tabindex="-1"></a>     <span class="kw">FROM</span> another_table</span>
<span id="cb3335-7"><a href="joining-data-in-sql.html#cb3335-7" aria-hidden="true" tabindex="-1"></a>     <span class="kw">WHERE</span> field2 <span class="op">=</span> some_condition);</span></code></pre></div></li>
</ul>
<p><strong>Subqueries inside SELECT</strong></p>
<div class="sourceCode" id="cb3336"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3336-1"><a href="joining-data-in-sql.html#cb3336-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- example</span></span>
<span id="cb3336-2"><a href="joining-data-in-sql.html#cb3336-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> continent,</span>
<span id="cb3336-3"><a href="joining-data-in-sql.html#cb3336-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb3336-4"><a href="joining-data-in-sql.html#cb3336-4" aria-hidden="true" tabindex="-1"></a>     <span class="kw">FROM</span> monarchs</span>
<span id="cb3336-5"><a href="joining-data-in-sql.html#cb3336-5" aria-hidden="true" tabindex="-1"></a>     <span class="kw">WHERE</span> states.continent <span class="op">=</span> monarch.continent) <span class="kw">AS</span> monarch_count</span>
<span id="cb3336-6"><a href="joining-data-in-sql.html#cb3336-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> states;</span></code></pre></div>
<div id="subquery-inside-where" class="section level4 hasAnchor" number="25.4.2.1">
<h4><span class="header-section-number">25.4.2.1</span> Subquery inside WHERE<a href="joining-data-in-sql.html#subquery-inside-where" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this exercise, you will nest a subquery from the <code>populations</code> table inside another query from the same table, <code>populations</code>.</p>
<p>Your goal is to figure out which countries had high average life expectancies in 2015. Suppose you only want records from 2015 with <code>life_expectancy</code> above <code>1.15 * avg_life_expectancy</code>.</p>
<div class="sourceCode" id="cb3337"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3337-1"><a href="joining-data-in-sql.html#cb3337-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3337-2"><a href="joining-data-in-sql.html#cb3337-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations</span>
<span id="cb3337-3"><a href="joining-data-in-sql.html#cb3337-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> life_expectancy <span class="op">&gt;</span> <span class="fl">1.15</span> <span class="op">*</span> avg_life_expectancy</span>
<span id="cb3337-4"><a href="joining-data-in-sql.html#cb3337-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2015</span>;</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Write a query to calculate a value for <code>avg_life_expectancy</code>.</li>
</ol>
<div class="sourceCode" id="cb3338"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3338-1"><a href="joining-data-in-sql.html#cb3338-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select average life_expectancy from the populations table</span></span>
<span id="cb3338-2"><a href="joining-data-in-sql.html#cb3338-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(life_expectancy)</span>
<span id="cb3338-3"><a href="joining-data-in-sql.html#cb3338-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations</span>
<span id="cb3338-4"><a href="joining-data-in-sql.html#cb3338-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for the year 2015</span></span>
<span id="cb3338-5"><a href="joining-data-in-sql.html#cb3338-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2015</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1361">Table 25.41: </span>1 records</caption>
<thead>
<tr class="header">
<th align="right">AVG(life_expectancy)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">71.7</td>
</tr>
</tbody>
</table>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Nest this calculation into another query.</li>
</ol>
<div class="sourceCode" id="cb3339"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3339-1"><a href="joining-data-in-sql.html#cb3339-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb3339-2"><a href="joining-data-in-sql.html#cb3339-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> populations</span>
<span id="cb3339-3"><a href="joining-data-in-sql.html#cb3339-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for only those populations where life expectancy is 1.15 times higher than average</span></span>
<span id="cb3339-4"><a href="joining-data-in-sql.html#cb3339-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> life_expectancy <span class="op">&gt;</span> <span class="fl">1.15</span> <span class="op">*</span></span>
<span id="cb3339-5"><a href="joining-data-in-sql.html#cb3339-5" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">SELECT</span> <span class="fu">AVG</span>(life_expectancy)</span>
<span id="cb3339-6"><a href="joining-data-in-sql.html#cb3339-6" aria-hidden="true" tabindex="-1"></a>   <span class="kw">FROM</span> populations</span>
<span id="cb3339-7"><a href="joining-data-in-sql.html#cb3339-7" aria-hidden="true" tabindex="-1"></a>   <span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2015</span>) </span>
<span id="cb3339-8"><a href="joining-data-in-sql.html#cb3339-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2015</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1362">Table 25.42: </span>Displaying records 1 - 10</caption>
<colgroup>
<col width="10%" />
<col width="19%" />
<col width="7%" />
<col width="22%" />
<col width="24%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">pop_id</th>
<th align="left">country_code</th>
<th align="right">year</th>
<th align="right">fertility_rate</th>
<th align="right">life_expectancy</th>
<th align="right">size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">21</td>
<td align="left">AUS</td>
<td align="right">2015</td>
<td align="right">1.83</td>
<td align="right">82.5</td>
<td align="right">23789752</td>
</tr>
<tr class="even">
<td align="right">376</td>
<td align="left">CHE</td>
<td align="right">2015</td>
<td align="right">1.54</td>
<td align="right">83.2</td>
<td align="right">8281430</td>
</tr>
<tr class="odd">
<td align="right">356</td>
<td align="left">ESP</td>
<td align="right">2015</td>
<td align="right">1.32</td>
<td align="right">83.4</td>
<td align="right">46443994</td>
</tr>
<tr class="even">
<td align="right">134</td>
<td align="left">FRA</td>
<td align="right">2015</td>
<td align="right">2.01</td>
<td align="right">82.7</td>
<td align="right">66538391</td>
</tr>
<tr class="odd">
<td align="right">170</td>
<td align="left">HKG</td>
<td align="right">2015</td>
<td align="right">1.20</td>
<td align="right">84.3</td>
<td align="right">7305700</td>
</tr>
<tr class="even">
<td align="right">174</td>
<td align="left">ISL</td>
<td align="right">2015</td>
<td align="right">1.93</td>
<td align="right">82.9</td>
<td align="right">330815</td>
</tr>
<tr class="odd">
<td align="right">190</td>
<td align="left">ITA</td>
<td align="right">2015</td>
<td align="right">1.37</td>
<td align="right">83.5</td>
<td align="right">60730582</td>
</tr>
<tr class="even">
<td align="right">194</td>
<td align="left">JPN</td>
<td align="right">2015</td>
<td align="right">1.46</td>
<td align="right">83.8</td>
<td align="right">126958472</td>
</tr>
<tr class="odd">
<td align="right">340</td>
<td align="left">SGP</td>
<td align="right">2015</td>
<td align="right">1.24</td>
<td align="right">82.6</td>
<td align="right">5535002</td>
</tr>
<tr class="even">
<td align="right">374</td>
<td align="left">SWE</td>
<td align="right">2015</td>
<td align="right">1.88</td>
<td align="right">82.6</td>
<td align="right">9799186</td>
</tr>
</tbody>
</table>
</div>
<p>Many of these country codes as being relatively wealthy countries, which makes sense as we might expect life expectancy to be higher in wealthier nations.</p>
<p><strong>WHERE do people live?</strong></p>
<p>Identifying capital cities in order of largest to smallest population. Get the urban area population for capital cities only.</p>
<div class="sourceCode" id="cb3340"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3340-1"><a href="joining-data-in-sql.html#cb3340-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select relevant fields from cities table</span></span>
<span id="cb3340-2"><a href="joining-data-in-sql.html#cb3340-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> name, country_code, urbanarea_pop</span>
<span id="cb3340-3"><a href="joining-data-in-sql.html#cb3340-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3340-4"><a href="joining-data-in-sql.html#cb3340-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter using a subquery on the countries table</span></span>
<span id="cb3340-5"><a href="joining-data-in-sql.html#cb3340-5" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">IN</span></span>
<span id="cb3340-6"><a href="joining-data-in-sql.html#cb3340-6" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> capital <span class="kw">FROM</span> countries)</span>
<span id="cb3340-7"><a href="joining-data-in-sql.html#cb3340-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> urbanarea_pop <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1363">Table 25.43: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">country_code</th>
<th align="right">urbanarea_pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Beijing</td>
<td align="left">CHN</td>
<td align="right">21516000</td>
</tr>
<tr class="even">
<td align="left">Dhaka</td>
<td align="left">BGD</td>
<td align="right">14543124</td>
</tr>
<tr class="odd">
<td align="left">Tokyo</td>
<td align="left">JPN</td>
<td align="right">13513734</td>
</tr>
<tr class="even">
<td align="left">Moscow</td>
<td align="left">RUS</td>
<td align="right">12197596</td>
</tr>
<tr class="odd">
<td align="left">Cairo</td>
<td align="left">EGY</td>
<td align="right">10230350</td>
</tr>
<tr class="even">
<td align="left">Kinshasa</td>
<td align="left">COD</td>
<td align="right">10130000</td>
</tr>
<tr class="odd">
<td align="left">Jakarta</td>
<td align="left">IDN</td>
<td align="right">10075310</td>
</tr>
<tr class="even">
<td align="left">Seoul</td>
<td align="left">KOR</td>
<td align="right">9995784</td>
</tr>
<tr class="odd">
<td align="left">Mexico City</td>
<td align="left">MEX</td>
<td align="right">8974724</td>
</tr>
<tr class="even">
<td align="left">Lima</td>
<td align="left">PER</td>
<td align="right">8852000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="subquery-inside-select" class="section level4 hasAnchor" number="25.4.2.2">
<h4><span class="header-section-number">25.4.2.2</span> Subquery inside SELECT<a href="joining-data-in-sql.html#subquery-inside-select" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Begin with a <code>LEFT JOIN</code> combined with a <code>GROUP BY</code> to select the nine countries with the most cities appearing in the cities table, along with the counts of these cities.</li>
</ol>
<div class="sourceCode" id="cb3341"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3341-1"><a href="joining-data-in-sql.html#cb3341-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Find top nine countries with the most cities</span></span>
<span id="cb3341-2"><a href="joining-data-in-sql.html#cb3341-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> countries.name <span class="kw">AS</span> country, <span class="fu">COUNT</span>(cities.name) <span class="kw">AS</span> cities_num</span>
<span id="cb3341-3"><a href="joining-data-in-sql.html#cb3341-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3341-4"><a href="joining-data-in-sql.html#cb3341-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> cities</span>
<span id="cb3341-5"><a href="joining-data-in-sql.html#cb3341-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ON</span> countries.code <span class="op">=</span> cities.country_code</span>
<span id="cb3341-6"><a href="joining-data-in-sql.html#cb3341-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> countries.name</span>
<span id="cb3341-7"><a href="joining-data-in-sql.html#cb3341-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Order by count of cities as cities_num</span></span>
<span id="cb3341-8"><a href="joining-data-in-sql.html#cb3341-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> cities_num <span class="kw">DESC</span>, country <span class="kw">ASC</span></span>
<span id="cb3341-9"><a href="joining-data-in-sql.html#cb3341-9" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">9</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1364">Table 25.44: </span>9 records</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">cities_num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">China</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">Japan</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">Pakistan</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">United States</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">Indonesia</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">Russian Federation</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">South Korea</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Write a query that returns the same result as the join, but leveraging a nested query instead.</li>
</ol>
<div class="sourceCode" id="cb3342"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3342-1"><a href="joining-data-in-sql.html#cb3342-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> countries.name <span class="kw">AS</span> country,</span>
<span id="cb3342-2"><a href="joining-data-in-sql.html#cb3342-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Subquery that provides the count of cities   </span></span>
<span id="cb3342-3"><a href="joining-data-in-sql.html#cb3342-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb3342-4"><a href="joining-data-in-sql.html#cb3342-4" aria-hidden="true" tabindex="-1"></a>   <span class="kw">FROM</span> cities</span>
<span id="cb3342-5"><a href="joining-data-in-sql.html#cb3342-5" aria-hidden="true" tabindex="-1"></a>   <span class="kw">WHERE</span> cities.country_code <span class="op">=</span> countries.code) <span class="kw">AS</span> cities_num</span>
<span id="cb3342-6"><a href="joining-data-in-sql.html#cb3342-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries</span>
<span id="cb3342-7"><a href="joining-data-in-sql.html#cb3342-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> cities_num <span class="kw">DESC</span>, country</span>
<span id="cb3342-8"><a href="joining-data-in-sql.html#cb3342-8" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">9</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1365">Table 25.45: </span>9 records</caption>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="right">cities_num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">China</td>
<td align="right">36</td>
</tr>
<tr class="even">
<td align="left">India</td>
<td align="right">18</td>
</tr>
<tr class="odd">
<td align="left">Japan</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">Brazil</td>
<td align="right">10</td>
</tr>
<tr class="odd">
<td align="left">Pakistan</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">United States</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">Indonesia</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">Russian Federation</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">South Korea</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
</div>
<p>Notice how the subquery involves only one additional step in your <code>SELECT</code> statement, whereas the <code>JOIN</code> and <code>GROUP BY</code> are a two-step process.</p>
</div>
</div>
<div id="inside-from" class="section level3 hasAnchor" number="25.4.3">
<h3><span class="header-section-number">25.4.3</span> Inside FROM<a href="joining-data-in-sql.html#inside-from" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Include a subquery as a <em>temporary table</em> in <code>FROM</code> clause and then <code>SELECT</code> from it.</li>
</ul>
<div id="subquery-inside-from" class="section level4 hasAnchor" number="25.4.3.1">
<h4><span class="header-section-number">25.4.3.1</span> Subquery inside FROM<a href="joining-data-in-sql.html#subquery-inside-from" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Subqueries inside <code>FROM</code> can help select columns from multiple tables in a single query.</p>
<p>Say you are interested in determining the number of languages spoken for each country. You want to present this information alongside each country’s <code>local_name</code>, which is a field only present in the <code>countries</code> table and not in the <code>languages</code> table. Use a subquery inside <code>FROM</code> to bring information from these two tables together.</p>
<div class="sourceCode" id="cb3343"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3343-1"><a href="joining-data-in-sql.html#cb3343-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select code, and language count as lang_num = sub</span></span>
<span id="cb3343-2"><a href="joining-data-in-sql.html#cb3343-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code, <span class="fu">COUNT</span>(name) <span class="kw">AS</span> lang_num</span>
<span id="cb3343-3"><a href="joining-data-in-sql.html#cb3343-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> languages</span>
<span id="cb3343-4"><a href="joining-data-in-sql.html#cb3343-4" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> code;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1366">Table 25.46: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="right">lang_num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">AIA</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">ALB</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">AND</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">ARE</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">ARG</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">ARM</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">ASM</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3344"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3344-1"><a href="joining-data-in-sql.html#cb3344-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select local_name and lang_num from appropriate tables</span></span>
<span id="cb3344-2"><a href="joining-data-in-sql.html#cb3344-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> countries.local_name, sub.lang_num</span>
<span id="cb3344-3"><a href="joining-data-in-sql.html#cb3344-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> countries,</span>
<span id="cb3344-4"><a href="joining-data-in-sql.html#cb3344-4" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">SELECT</span> code, <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> lang_num</span>
<span id="cb3344-5"><a href="joining-data-in-sql.html#cb3344-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FROM</span> languages</span>
<span id="cb3344-6"><a href="joining-data-in-sql.html#cb3344-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">GROUP</span> <span class="kw">BY</span> code) <span class="kw">AS</span> sub</span>
<span id="cb3344-7"><a href="joining-data-in-sql.html#cb3344-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Where codes match, only present in the countries and not in the languages</span></span>
<span id="cb3344-8"><a href="joining-data-in-sql.html#cb3344-8" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> countries.code <span class="op">=</span> sub.code</span>
<span id="cb3344-9"><a href="joining-data-in-sql.html#cb3344-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> lang_num <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1367">Table 25.47: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">local_name</th>
<th align="right">lang_num</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Zambia</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="left">YeItyop´iya</td>
<td align="right">16</td>
</tr>
<tr class="odd">
<td align="left">Zimbabwe</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">Bharat/India</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">Nepal</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="left">South Africa</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Mali</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">France</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">Angola</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Malawi</td>
<td align="right">12</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="subquery-challenge" class="section level4 hasAnchor" number="25.4.3.2">
<h4><span class="header-section-number">25.4.3.2</span> Subquery challenge<a href="joining-data-in-sql.html#subquery-challenge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose you’re interested in analyzing inflation and unemployment rate for certain countries in 2015. You are <strong>not</strong> interested in countries with <code>"Republic"</code> or <code>"Monarchy"</code> as their form of government, but <em>are</em> interested in all other forms of government, such as emirate federations, socialist states, and commonwealths.</p>
<p>You will use the field <code>gov_form</code> to filter for these two conditions, which represents a country’s form of government.</p>
<div class="sourceCode" id="cb3345"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3345-1"><a href="joining-data-in-sql.html#cb3345-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select relevant fields</span></span>
<span id="cb3345-2"><a href="joining-data-in-sql.html#cb3345-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> code, inflation_rate, unemployment_rate</span>
<span id="cb3345-3"><a href="joining-data-in-sql.html#cb3345-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> economies</span>
<span id="cb3345-4"><a href="joining-data-in-sql.html#cb3345-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="dt">year</span> <span class="op">=</span> <span class="dv">2015</span> </span>
<span id="cb3345-5"><a href="joining-data-in-sql.html#cb3345-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Anti join</span></span>
<span id="cb3345-6"><a href="joining-data-in-sql.html#cb3345-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">AND</span> code <span class="kw">NOT</span> <span class="kw">IN</span></span>
<span id="cb3345-7"><a href="joining-data-in-sql.html#cb3345-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Subquery returning country codes filtered on gov_form</span></span>
<span id="cb3345-8"><a href="joining-data-in-sql.html#cb3345-8" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> code</span>
<span id="cb3345-9"><a href="joining-data-in-sql.html#cb3345-9" aria-hidden="true" tabindex="-1"></a>     <span class="kw">FROM</span> countries</span>
<span id="cb3345-10"><a href="joining-data-in-sql.html#cb3345-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter which do not contain the words &quot;Republic&quot; or &quot;Monarchy&quot; in gov_form.</span></span>
<span id="cb3345-11"><a href="joining-data-in-sql.html#cb3345-11" aria-hidden="true" tabindex="-1"></a>     <span class="kw">WHERE</span> gov_form <span class="kw">LIKE</span> <span class="st">&#39;%Republic%&#39;</span></span>
<span id="cb3345-12"><a href="joining-data-in-sql.html#cb3345-12" aria-hidden="true" tabindex="-1"></a>         <span class="kw">OR</span> gov_form <span class="kw">LIKE</span> <span class="st">&#39;%Monarchy%&#39;</span>)</span>
<span id="cb3345-13"><a href="joining-data-in-sql.html#cb3345-13" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> inflation_rate <span class="kw">DESC</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1368">Table 25.48: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="right">inflation_rate</th>
<th align="right">unemployment_rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SSD</td>
<td align="right">52.813</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">LBY</td>
<td align="right">9.839</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">MAC</td>
<td align="right">4.564</td>
<td align="right">1.82</td>
</tr>
<tr class="even">
<td align="left">ARE</td>
<td align="right">4.070</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">HKG</td>
<td align="right">3.037</td>
<td align="right">3.30</td>
</tr>
<tr class="even">
<td align="left">SRB</td>
<td align="right">1.392</td>
<td align="right">18.20</td>
</tr>
<tr class="odd">
<td align="left">MNE</td>
<td align="right">1.204</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">TLS</td>
<td align="right">0.553</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">ROU</td>
<td align="right">-0.596</td>
<td align="right">6.81</td>
</tr>
<tr class="even">
<td align="left">PRI</td>
<td align="right">-0.751</td>
<td align="right">12.00</td>
</tr>
</tbody>
</table>
</div>
<p>In 2015, South Sudan (with country code SSD) had inflation above 50%!</p>
</div>
<div id="final-challenge" class="section level4 hasAnchor" number="25.4.3.3">
<h4><span class="header-section-number">25.4.3.3</span> Final challenge<a href="joining-data-in-sql.html#final-challenge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Your task is to determine the top 10 capital cities in Europe and the Americas by <code>city_perc</code>, a metric you’ll calculate. <code>city_perc</code> is a percentage that calculates the “proper” population in a city as a percentage of the total population in the wider metro area, as follows:</p>
<p><code>city_proper_pop / metroarea_pop * 100</code></p>
<p>Do not use table aliasing in this exercise.</p>
<div class="sourceCode" id="cb3346"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3346-1"><a href="joining-data-in-sql.html#cb3346-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Select fields from cities</span></span>
<span id="cb3346-2"><a href="joining-data-in-sql.html#cb3346-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb3346-3"><a href="joining-data-in-sql.html#cb3346-3" aria-hidden="true" tabindex="-1"></a>    name, country_code, city_proper_pop, metroarea_pop,</span>
<span id="cb3346-4"><a href="joining-data-in-sql.html#cb3346-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- avoid integer dived by integer return integer, so multiple 1.0</span></span>
<span id="cb3346-5"><a href="joining-data-in-sql.html#cb3346-5" aria-hidden="true" tabindex="-1"></a>    ((city_proper_pop <span class="op">*</span> <span class="fl">1.0</span>) <span class="op">/</span> (metroarea_pop <span class="op">*</span> <span class="fl">1.0</span>) <span class="op">*</span> <span class="dv">100</span>) <span class="kw">AS</span> city_perc</span>
<span id="cb3346-6"><a href="joining-data-in-sql.html#cb3346-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cities</span>
<span id="cb3346-7"><a href="joining-data-in-sql.html#cb3346-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use subquery to filter city name, capital cities in Europe and Americas</span></span>
<span id="cb3346-8"><a href="joining-data-in-sql.html#cb3346-8" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">IN</span></span>
<span id="cb3346-9"><a href="joining-data-in-sql.html#cb3346-9" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">SELECT</span> capital</span>
<span id="cb3346-10"><a href="joining-data-in-sql.html#cb3346-10" aria-hidden="true" tabindex="-1"></a>     <span class="kw">FROM</span> countries</span>
<span id="cb3346-11"><a href="joining-data-in-sql.html#cb3346-11" aria-hidden="true" tabindex="-1"></a>     <span class="kw">WHERE</span> continent <span class="kw">LIKE</span> <span class="st">&#39;Europe&#39;</span>  </span>
<span id="cb3346-12"><a href="joining-data-in-sql.html#cb3346-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">OR</span> continent <span class="kw">LIKE</span> <span class="st">&#39;%America&#39;</span>) <span class="co">-- with &#39;America&#39; at the end of name</span></span>
<span id="cb3346-13"><a href="joining-data-in-sql.html#cb3346-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add filter condition such that metroarea_pop does not have null values</span></span>
<span id="cb3346-14"><a href="joining-data-in-sql.html#cb3346-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> (metroarea_pop <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span>)</span>
<span id="cb3346-15"><a href="joining-data-in-sql.html#cb3346-15" aria-hidden="true" tabindex="-1"></a><span class="co">-- Sort and limit the result</span></span>
<span id="cb3346-16"><a href="joining-data-in-sql.html#cb3346-16" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> city_perc <span class="kw">DESC</span></span>
<span id="cb3346-17"><a href="joining-data-in-sql.html#cb3346-17" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-1369">Table 25.49: </span>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">country_code</th>
<th align="right">city_proper_pop</th>
<th align="right">metroarea_pop</th>
<th align="right">city_perc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Lima</td>
<td align="left">PER</td>
<td align="right">8852000</td>
<td align="right">10750000</td>
<td align="right">82.3</td>
</tr>
<tr class="even">
<td align="left">Bogota</td>
<td align="left">COL</td>
<td align="right">7878783</td>
<td align="right">9800000</td>
<td align="right">80.4</td>
</tr>
<tr class="odd">
<td align="left">Moscow</td>
<td align="left">RUS</td>
<td align="right">12197596</td>
<td align="right">16170000</td>
<td align="right">75.4</td>
</tr>
<tr class="even">
<td align="left">Vienna</td>
<td align="left">AUT</td>
<td align="right">1863881</td>
<td align="right">2600000</td>
<td align="right">71.7</td>
</tr>
<tr class="odd">
<td align="left">Montevideo</td>
<td align="left">URY</td>
<td align="right">1305082</td>
<td align="right">1947604</td>
<td align="right">67.0</td>
</tr>
<tr class="even">
<td align="left">Caracas</td>
<td align="left">VEN</td>
<td align="right">1943901</td>
<td align="right">2923959</td>
<td align="right">66.5</td>
</tr>
<tr class="odd">
<td align="left">Rome</td>
<td align="left">ITA</td>
<td align="right">2877215</td>
<td align="right">4353775</td>
<td align="right">66.1</td>
</tr>
<tr class="even">
<td align="left">Brasilia</td>
<td align="left">BRA</td>
<td align="right">2556149</td>
<td align="right">3919864</td>
<td align="right">65.2</td>
</tr>
<tr class="odd">
<td align="left">London</td>
<td align="left">GBR</td>
<td align="right">8673713</td>
<td align="right">13879757</td>
<td align="right">62.5</td>
</tr>
<tr class="even">
<td align="left">Budapest</td>
<td align="left">HUN</td>
<td align="right">1759407</td>
<td align="right">2927944</td>
<td align="right">60.1</td>
</tr>
</tbody>
</table>
</div>
<p>Lima has the highest percentage of people living in the city ‘proper’, relative to the wider metropolitan population.</p>
<div class="sourceCode" id="cb3347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3347-1"><a href="joining-data-in-sql.html#cb3347-1" aria-hidden="true" tabindex="-1"></a><span class="co"># disconnect the sql connection</span></span>
<span id="cb3347-2"><a href="joining-data-in-sql.html#cb3347-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intermediate-sql.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-git.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/25-Joining-Data-in-SQL.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
