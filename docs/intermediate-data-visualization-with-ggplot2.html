<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Intermediate Data Visualization with ggplot2 | Data Scientist with R</title>
  <meta name="description" content="This is a notebook about the data science courses took at datacamp." />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Intermediate Data Visualization with ggplot2 | Data Scientist with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a notebook about the data science courses took at datacamp." />
  <meta name="github-repo" content="yenchunnnn/CourseNote" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Intermediate Data Visualization with ggplot2 | Data Scientist with R" />
  
  <meta name="twitter:description" content="This is a notebook about the data science courses took at datacamp." />
  

<meta name="author" content="Yen-Chun Chen" />


<meta name="date" content="2024-02-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-data-visualization-with-ggplot2.html"/>
<link rel="next" href="introduction-to-importing-data-in-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Scientist with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-arithmetic"><i class="fa fa-check"></i><b>1.1</b> Basic arithmetic</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-data-types"><i class="fa fa-check"></i><b>1.2</b> Basic data types</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#vector"><i class="fa fa-check"></i><b>1.3</b> Vector</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function"><i class="fa fa-check"></i><b>1.3.1</b> Useful function</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-brackets-or-names"><i class="fa fa-check"></i><b>1.3.2</b> Selection - by brackets or names</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---operators"><i class="fa fa-check"></i><b>1.3.3</b> Selection - by comparison - operators</a></li>
<li class="chapter" data-level="1.3.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---by-comparison---values"><i class="fa fa-check"></i><b>1.3.4</b> Selection - by comparison - values</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#matrix"><i class="fa fa-check"></i><b>1.4</b> Matrix</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-function"><i class="fa fa-check"></i><b>1.4.1</b> Construct function</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#construct-by-vector"><i class="fa fa-check"></i><b>1.4.2</b> Construct by vector</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#naming-a-matrix"><i class="fa fa-check"></i><b>1.4.3</b> Naming a matrix</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---sum-of-each-row-column"><i class="fa fa-check"></i><b>1.4.4</b> Manipulating - sum of each row &amp; column</a></li>
<li class="chapter" data-level="1.4.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-columns"><i class="fa fa-check"></i><b>1.4.5</b> Manipulating - add columns</a></li>
<li class="chapter" data-level="1.4.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#manipulating---add-rows"><i class="fa fa-check"></i><b>1.4.6</b> Manipulating - add rows</a></li>
<li class="chapter" data-level="1.4.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection-of-matrix-elements"><i class="fa fa-check"></i><b>1.4.7</b> Selection of matrix elements</a></li>
<li class="chapter" data-level="1.4.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---1"><i class="fa fa-check"></i><b>1.4.8</b> Arithmetic - 1</a></li>
<li class="chapter" data-level="1.4.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#arithmetic---2"><i class="fa fa-check"></i><b>1.4.9</b> Arithmetic - 2</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor"><i class="fa fa-check"></i><b>1.5</b> Factor</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#useful-function-1"><i class="fa fa-check"></i><b>1.5.1</b> Useful function</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#nominal-ordinal-categorical-variable"><i class="fa fa-check"></i><b>1.5.2</b> Nominal &amp; Ordinal categorical variable</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#factor-levels"><i class="fa fa-check"></i><b>1.5.3</b> Factor levels</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#summarizing-a-factor"><i class="fa fa-check"></i><b>1.5.4</b> Summarizing a factor</a></li>
<li class="chapter" data-level="1.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#ordered-factors"><i class="fa fa-check"></i><b>1.5.5</b> Ordered factors</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-frame"><i class="fa fa-check"></i><b>1.6</b> Data Frame</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#quick-look-at-dataset"><i class="fa fa-check"></i><b>1.6.1</b> Quick look at dataset</a></li>
<li class="chapter" data-level="1.6.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-data-frame"><i class="fa fa-check"></i><b>1.6.2</b> Creating a data frame</a></li>
<li class="chapter" data-level="1.6.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---brackets"><i class="fa fa-check"></i><b>1.6.3</b> Selection - brackets</a></li>
<li class="chapter" data-level="1.6.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---names"><i class="fa fa-check"></i><b>1.6.4</b> Selection - names</a></li>
<li class="chapter" data-level="1.6.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection--"><i class="fa fa-check"></i><b>1.6.5</b> Selection - $</a></li>
<li class="chapter" data-level="1.6.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection---subset"><i class="fa fa-check"></i><b>1.6.6</b> Selection - subset</a></li>
<li class="chapter" data-level="1.6.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#sorting"><i class="fa fa-check"></i><b>1.6.7</b> Sorting</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#list"><i class="fa fa-check"></i><b>1.7</b> List</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-list"><i class="fa fa-check"></i><b>1.7.1</b> Creating a list</a></li>
<li class="chapter" data-level="1.7.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#creating-a-named-list"><i class="fa fa-check"></i><b>1.7.2</b> Creating a named list</a></li>
<li class="chapter" data-level="1.7.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#selection"><i class="fa fa-check"></i><b>1.7.3</b> Selection</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#bring-it-all-together"><i class="fa fa-check"></i><b>1.8</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intermediate-r.html"><a href="intermediate-r.html"><i class="fa fa-check"></i><b>2</b> Intermediate R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#conditionals-and-control-flow"><i class="fa fa-check"></i><b>2.1</b> Conditionals and Control Flow</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intermediate-r.html"><a href="intermediate-r.html#relational-operators"><i class="fa fa-check"></i><b>2.1.1</b> Relational operators</a></li>
<li class="chapter" data-level="2.1.2" data-path="intermediate-r.html"><a href="intermediate-r.html#conditional-statements"><i class="fa fa-check"></i><b>2.1.2</b> Conditional statements</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#loops"><i class="fa fa-check"></i><b>2.2</b> Loops</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intermediate-r.html"><a href="intermediate-r.html#while-loop"><i class="fa fa-check"></i><b>2.2.1</b> While loop</a></li>
<li class="chapter" data-level="2.2.2" data-path="intermediate-r.html"><a href="intermediate-r.html#for-loop"><i class="fa fa-check"></i><b>2.2.2</b> For loop</a></li>
<li class="chapter" data-level="2.2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#bring-it-all-together-1"><i class="fa fa-check"></i><b>2.2.3</b> Bring it all together</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intermediate-r.html"><a href="intermediate-r.html#function"><i class="fa fa-check"></i><b>2.3</b> Function</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="intermediate-r.html"><a href="intermediate-r.html#introduction-to-function"><i class="fa fa-check"></i><b>2.3.1</b> Introduction to function</a></li>
<li class="chapter" data-level="2.3.2" data-path="intermediate-r.html"><a href="intermediate-r.html#writing-functions"><i class="fa fa-check"></i><b>2.3.2</b> Writing functions</a></li>
<li class="chapter" data-level="2.3.3" data-path="intermediate-r.html"><a href="intermediate-r.html#packages"><i class="fa fa-check"></i><b>2.3.3</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="intermediate-r.html"><a href="intermediate-r.html#the-apply-family"><i class="fa fa-check"></i><b>2.4</b> The apply family</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply"><i class="fa fa-check"></i><b>2.4.1</b> lapply</a></li>
<li class="chapter" data-level="2.4.2" data-path="intermediate-r.html"><a href="intermediate-r.html#sapply"><i class="fa fa-check"></i><b>2.4.2</b> sapply</a></li>
<li class="chapter" data-level="2.4.3" data-path="intermediate-r.html"><a href="intermediate-r.html#vapply"><i class="fa fa-check"></i><b>2.4.3</b> vapply</a></li>
<li class="chapter" data-level="2.4.4" data-path="intermediate-r.html"><a href="intermediate-r.html#lapply-vs-sapply-vs-vapply"><i class="fa fa-check"></i><b>2.4.4</b> lapply vs sapply vs vapply</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intermediate-r.html"><a href="intermediate-r.html#utilities"><i class="fa fa-check"></i><b>2.5</b> Utilities</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="intermediate-r.html"><a href="intermediate-r.html#mathematical-utilities"><i class="fa fa-check"></i><b>2.5.1</b> Mathematical utilities</a></li>
<li class="chapter" data-level="2.5.2" data-path="intermediate-r.html"><a href="intermediate-r.html#data-structures-utilities"><i class="fa fa-check"></i><b>2.5.2</b> Data structures utilities</a></li>
<li class="chapter" data-level="2.5.3" data-path="intermediate-r.html"><a href="intermediate-r.html#regular-expressions"><i class="fa fa-check"></i><b>2.5.3</b> Regular Expressions</a></li>
<li class="chapter" data-level="2.5.4" data-path="intermediate-r.html"><a href="intermediate-r.html#dates-times"><i class="fa fa-check"></i><b>2.5.4</b> Dates &amp; Times</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Introduction to the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-wrangling"><i class="fa fa-check"></i><b>3.1</b> Data wrangling</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#load-dataset"><i class="fa fa-check"></i><b>3.1.1</b> Load dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#filtering"><i class="fa fa-check"></i><b>3.1.2</b> Filtering</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.1.3</b> Arrange</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.1.4</b> Mutate</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#data-visualization"><i class="fa fa-check"></i><b>3.2</b> Data visualization</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#subset-df-variable"><i class="fa fa-check"></i><b>3.2.1</b> Subset df variable</a></li>
<li class="chapter" data-level="3.2.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#ggplot-aesthetics"><i class="fa fa-check"></i><b>3.2.2</b> ggplot aesthetics</a></li>
<li class="chapter" data-level="3.2.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#faceting"><i class="fa fa-check"></i><b>3.2.3</b> Faceting</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#grouping-summarizing"><i class="fa fa-check"></i><b>3.3</b> Grouping &amp; summarizing</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#summarize"><i class="fa fa-check"></i><b>3.3.1</b> Summarize</a></li>
<li class="chapter" data-level="3.3.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#group-by"><i class="fa fa-check"></i><b>3.3.2</b> Group by</a></li>
<li class="chapter" data-level="3.3.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#visualizing-summarized-data"><i class="fa fa-check"></i><b>3.3.3</b> Visualizing summarized data</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#types-of-visualizations"><i class="fa fa-check"></i><b>3.4</b> Types of visualizations</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#line-plots"><i class="fa fa-check"></i><b>3.4.1</b> Line plots</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#bar-plots"><i class="fa fa-check"></i><b>3.4.2</b> Bar plots</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#histograms"><i class="fa fa-check"></i><b>3.4.3</b> Histograms</a></li>
<li class="chapter" data-level="3.4.4" data-path="introduction-to-the-tidyverse.html"><a href="introduction-to-the-tidyverse.html#box-plots"><i class="fa fa-check"></i><b>3.4.4</b> Box plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#transforming-data"><i class="fa fa-check"></i><b>4.1</b> Transforming Data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data"><i class="fa fa-check"></i><b>4.1.1</b> Exploring data</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#aggregating-data"><i class="fa fa-check"></i><b>4.2</b> Aggregating Data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-manipulation.html"><a href="data-manipulation.html#count"><i class="fa fa-check"></i><b>4.2.1</b> Count</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-manipulation.html"><a href="data-manipulation.html#group_by-summarize-ungroup"><i class="fa fa-check"></i><b>4.2.2</b> group_by, summarize, ungroup</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-manipulation.html"><a href="data-manipulation.html#slice_min-slice_max"><i class="fa fa-check"></i><b>4.2.3</b> slice_min, slice_max</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#selecting-and-transforming-data"><i class="fa fa-check"></i><b>4.3</b> Selecting and Transforming Data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#select"><i class="fa fa-check"></i><b>4.3.1</b> Select</a></li>
<li class="chapter" data-level="4.3.2" data-path="data-manipulation.html"><a href="data-manipulation.html#rename"><i class="fa fa-check"></i><b>4.3.2</b> Rename</a></li>
<li class="chapter" data-level="4.3.3" data-path="data-manipulation.html"><a href="data-manipulation.html#transmute"><i class="fa fa-check"></i><b>4.3.3</b> Transmute</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#case-study-the-babynames-dataset"><i class="fa fa-check"></i><b>4.4</b> Case Study: The babynames Dataset</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#load-dataset-1"><i class="fa fa-check"></i><b>4.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="4.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#exploring-data-1"><i class="fa fa-check"></i><b>4.4.2</b> Exploring data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="joining-data.html"><a href="joining-data.html"><i class="fa fa-check"></i><b>5</b> Joining Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="joining-data.html"><a href="joining-data.html#inner-join"><i class="fa fa-check"></i><b>5.1</b> Inner join</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="joining-data.html"><a href="joining-data.html#join-by-keys"><i class="fa fa-check"></i><b>5.1.1</b> Join by keys</a></li>
<li class="chapter" data-level="5.1.2" data-path="joining-data.html"><a href="joining-data.html#join-with-a-one-to-many-relationship"><i class="fa fa-check"></i><b>5.1.2</b> Join with a one-to-many relationship</a></li>
<li class="chapter" data-level="5.1.3" data-path="joining-data.html"><a href="joining-data.html#join-in-either-direction"><i class="fa fa-check"></i><b>5.1.3</b> Join in either direction</a></li>
<li class="chapter" data-level="5.1.4" data-path="joining-data.html"><a href="joining-data.html#join-three-or-more-tables"><i class="fa fa-check"></i><b>5.1.4</b> Join three or more tables</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="joining-data.html"><a href="joining-data.html#left-right-joins"><i class="fa fa-check"></i><b>5.2</b> Left &amp; Right Joins</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="joining-data.html"><a href="joining-data.html#left-join"><i class="fa fa-check"></i><b>5.2.1</b> Left join</a></li>
<li class="chapter" data-level="5.2.2" data-path="joining-data.html"><a href="joining-data.html#right-join"><i class="fa fa-check"></i><b>5.2.2</b> Right join</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="joining-data.html"><a href="joining-data.html#full-semi-anti-joins"><i class="fa fa-check"></i><b>5.3</b> Full, Semi &amp; Anti Joins</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="joining-data.html"><a href="joining-data.html#full-join"><i class="fa fa-check"></i><b>5.3.1</b> Full join</a></li>
<li class="chapter" data-level="5.3.2" data-path="joining-data.html"><a href="joining-data.html#semi-anti-joins"><i class="fa fa-check"></i><b>5.3.2</b> Semi &amp; Anti joins</a></li>
<li class="chapter" data-level="5.3.3" data-path="joining-data.html"><a href="joining-data.html#visualizing-set-differences"><i class="fa fa-check"></i><b>5.3.3</b> Visualizing set differences</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="joining-data.html"><a href="joining-data.html#case-study-joins-on-stack-overflow-data"><i class="fa fa-check"></i><b>5.4</b> Case study: Joins on Stack Overflow Data</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="joining-data.html"><a href="joining-data.html#load-dataset-2"><i class="fa fa-check"></i><b>5.4.1</b> Load dataset</a></li>
<li class="chapter" data-level="5.4.2" data-path="joining-data.html"><a href="joining-data.html#stack-overflow-questions"><i class="fa fa-check"></i><b>5.4.2</b> Stack Overflow questions</a></li>
<li class="chapter" data-level="5.4.3" data-path="joining-data.html"><a href="joining-data.html#joining-questions-and-answers"><i class="fa fa-check"></i><b>5.4.3</b> Joining questions and answers</a></li>
<li class="chapter" data-level="5.4.4" data-path="joining-data.html"><a href="joining-data.html#the-bind_rows-verb"><i class="fa fa-check"></i><b>5.4.4</b> The bind_rows verb</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html"><i class="fa fa-check"></i><b>6</b> Introduction to Statistics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#summary-statistics"><i class="fa fa-check"></i><b>6.1</b> Summary Statistics</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-center"><i class="fa fa-check"></i><b>6.1.1</b> Measures of center</a></li>
<li class="chapter" data-level="6.1.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#measures-of-spread"><i class="fa fa-check"></i><b>6.1.2</b> Measures of spread</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#random-numbers-and-probability"><i class="fa fa-check"></i><b>6.2</b> Random Numbers and Probability</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#chances"><i class="fa fa-check"></i><b>6.2.1</b> Chances</a></li>
<li class="chapter" data-level="6.2.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#discrete-distributions"><i class="fa fa-check"></i><b>6.2.2</b> Discrete distributions</a></li>
<li class="chapter" data-level="6.2.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#continuous-distributions"><i class="fa fa-check"></i><b>6.2.3</b> Continuous distributions</a></li>
<li class="chapter" data-level="6.2.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#binomial-distribution"><i class="fa fa-check"></i><b>6.2.4</b> Binomial distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#more-distributions-central-limit-theorem"><i class="fa fa-check"></i><b>6.3</b> More Distributions &amp; Central Limit Theorem</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#normal-distribution"><i class="fa fa-check"></i><b>6.3.1</b> Normal distribution</a></li>
<li class="chapter" data-level="6.3.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#central-limit-theorem"><i class="fa fa-check"></i><b>6.3.2</b> Central limit theorem</a></li>
<li class="chapter" data-level="6.3.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#poisson-distribution"><i class="fa fa-check"></i><b>6.3.3</b> Poisson distribution</a></li>
<li class="chapter" data-level="6.3.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#exponential-distribution"><i class="fa fa-check"></i><b>6.3.4</b> Exponential distribution</a></li>
<li class="chapter" data-level="6.3.5" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#students-t-distribution"><i class="fa fa-check"></i><b>6.3.5</b> (Student’s) t-distribution</a></li>
<li class="chapter" data-level="6.3.6" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#log-normal-distribution"><i class="fa fa-check"></i><b>6.3.6</b> Log-normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-and-experimental-design"><i class="fa fa-check"></i><b>6.4</b> Correlation and Experimental Design</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation"><i class="fa fa-check"></i><b>6.4.1</b> Correlation</a></li>
<li class="chapter" data-level="6.4.2" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#correlation-caveats"><i class="fa fa-check"></i><b>6.4.2</b> Correlation caveats</a></li>
<li class="chapter" data-level="6.4.3" data-path="introduction-to-statistics.html"><a href="introduction-to-statistics.html#design-of-experiments"><i class="fa fa-check"></i><b>6.4.3</b> Design of experiments</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Introduction to Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#data-columns-types-affect-plot-types"><i class="fa fa-check"></i><b>7.1.1</b> Data columns types affect plot types</a></li>
<li class="chapter" data-level="7.1.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>7.1.2</b> The grammar of graphics</a></li>
<li class="chapter" data-level="7.1.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#ggplot2-layers"><i class="fa fa-check"></i><b>7.1.3</b> ggplot2 layers</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>7.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#visible-aesthetics"><i class="fa fa-check"></i><b>7.2.1</b> Visible aesthetics</a></li>
<li class="chapter" data-level="7.2.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#using-attributes"><i class="fa fa-check"></i><b>7.2.2</b> Using attributes</a></li>
<li class="chapter" data-level="7.2.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#modifying-aesthetics"><i class="fa fa-check"></i><b>7.2.3</b> Modifying aesthetics</a></li>
<li class="chapter" data-level="7.2.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#aesthetics-best-practices"><i class="fa fa-check"></i><b>7.2.4</b> Aesthetics best practices</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#geometries"><i class="fa fa-check"></i><b>7.3</b> Geometries</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#scatter-plots"><i class="fa fa-check"></i><b>7.3.1</b> Scatter plots</a></li>
<li class="chapter" data-level="7.3.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#histograms-1"><i class="fa fa-check"></i><b>7.3.2</b> Histograms</a></li>
<li class="chapter" data-level="7.3.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#bar-plots-1"><i class="fa fa-check"></i><b>7.3.3</b> Bar plots</a></li>
<li class="chapter" data-level="7.3.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#line-plots-1"><i class="fa fa-check"></i><b>7.3.4</b> Line plots</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>7.4</b> Themes</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#themes-from-scratch"><i class="fa fa-check"></i><b>7.4.1</b> Themes from scratch</a></li>
<li class="chapter" data-level="7.4.2" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#theme-flexibility"><i class="fa fa-check"></i><b>7.4.2</b> Theme flexibility</a></li>
<li class="chapter" data-level="7.4.3" data-path="introduction-to-data-visualization-with-ggplot2.html"><a href="introduction-to-data-visualization-with-ggplot2.html#effective-explanatory-plots"><i class="fa fa-check"></i><b>7.4.3</b> Effective explanatory plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Intermediate Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#statistics"><i class="fa fa-check"></i><b>8.1</b> Statistics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-with-geoms"><i class="fa fa-check"></i><b>8.1.1</b> Stats with geoms</a></li>
<li class="chapter" data-level="8.1.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-sum-quantile"><i class="fa fa-check"></i><b>8.1.2</b> Stats: sum &amp; quantile</a></li>
<li class="chapter" data-level="8.1.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#stats-outside-geoms"><i class="fa fa-check"></i><b>8.1.3</b> Stats outside geoms</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates"><i class="fa fa-check"></i><b>8.2</b> Coordinates</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-layer"><i class="fa fa-check"></i><b>8.2.1</b> Coordinates layer</a></li>
<li class="chapter" data-level="8.2.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#coordinates-vs.-scales"><i class="fa fa-check"></i><b>8.2.2</b> Coordinates vs. scales</a></li>
<li class="chapter" data-level="8.2.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#double-flipped-axes"><i class="fa fa-check"></i><b>8.2.3</b> Double &amp; flipped axes</a></li>
<li class="chapter" data-level="8.2.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#polar-coordinates"><i class="fa fa-check"></i><b>8.2.4</b> Polar coordinates</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>8.3</b> Facets</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#the-facets-layer"><i class="fa fa-check"></i><b>8.3.1</b> The facets layer</a></li>
<li class="chapter" data-level="8.3.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-labels-order"><i class="fa fa-check"></i><b>8.3.2</b> Facet labels &amp; order</a></li>
<li class="chapter" data-level="8.3.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-plotting-spaces"><i class="fa fa-check"></i><b>8.3.3</b> Facet plotting spaces</a></li>
<li class="chapter" data-level="8.3.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#facet-wrap-margins"><i class="fa fa-check"></i><b>8.3.4</b> Facet wrap &amp; margins</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#best-practices"><i class="fa fa-check"></i><b>8.4</b> Best Practices</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#bar-plots-2"><i class="fa fa-check"></i><b>8.4.1</b> Bar plots</a></li>
<li class="chapter" data-level="8.4.2" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#heatmaps-use-case-scenario"><i class="fa fa-check"></i><b>8.4.2</b> Heatmaps use case scenario</a></li>
<li class="chapter" data-level="8.4.3" data-path="intermediate-data-visualization-with-ggplot2.html"><a href="intermediate-data-visualization-with-ggplot2.html#when-good-data-makes-bad-plots"><i class="fa fa-check"></i><b>8.4.3</b> When good data makes bad plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html"><i class="fa fa-check"></i><b>9</b> Introduction to Importing Data in R</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#flat-files-with-utils"><i class="fa fa-check"></i><b>9.1</b> Flat files with utils</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.csv"><i class="fa fa-check"></i><b>9.1.1</b> read.csv</a></li>
<li class="chapter" data-level="9.1.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.delim"><i class="fa fa-check"></i><b>9.1.2</b> read.delim</a></li>
<li class="chapter" data-level="9.1.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#read.table"><i class="fa fa-check"></i><b>9.1.3</b> read.table</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr-data.table"><i class="fa fa-check"></i><b>9.2</b> readr &amp; data.table</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#readr"><i class="fa fa-check"></i><b>9.2.1</b> readr</a></li>
<li class="chapter" data-level="9.2.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#data.table"><i class="fa fa-check"></i><b>9.2.2</b> data.table</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#excel-data"><i class="fa fa-check"></i><b>9.3</b> Excel data</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#list-the-sheets-of-xls-file"><i class="fa fa-check"></i><b>9.3.1</b> List the sheets of xls file</a></li>
<li class="chapter" data-level="9.3.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#import-an-excel-sheet"><i class="fa fa-check"></i><b>9.3.2</b> Import an Excel sheet</a></li>
<li class="chapter" data-level="9.3.3" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#col_names-skip-argument"><i class="fa fa-check"></i><b>9.3.3</b> col_names &amp; skip argument</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#reproducible-excel-work---xlconnect"><i class="fa fa-check"></i><b>9.4</b> Reproducible Excel work - XLConnect</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets"><i class="fa fa-check"></i><b>9.4.1</b> Adapting sheets</a></li>
<li class="chapter" data-level="9.4.2" data-path="introduction-to-importing-data-in-r.html"><a href="introduction-to-importing-data-in-r.html#adapting-sheets-1"><i class="fa fa-check"></i><b>9.4.2</b> Adapting sheets</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html"><i class="fa fa-check"></i><b>10</b> Cleaning Data in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#common-data-problems"><i class="fa fa-check"></i><b>10.1</b> Common Data Problems</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#data-type-constraints"><i class="fa fa-check"></i><b>10.1.1</b> Data type constraints</a></li>
<li class="chapter" data-level="10.1.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#range-constraints"><i class="fa fa-check"></i><b>10.1.2</b> Range constraints</a></li>
<li class="chapter" data-level="10.1.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniqueness-constraints"><i class="fa fa-check"></i><b>10.1.3</b> Uniqueness constraints</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-and-text-data"><i class="fa fa-check"></i><b>10.2</b> Categorical and Text Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#checking-membership"><i class="fa fa-check"></i><b>10.2.1</b> Checking membership</a></li>
<li class="chapter" data-level="10.2.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#categorical-data-problems"><i class="fa fa-check"></i><b>10.2.2</b> Categorical data problems</a></li>
<li class="chapter" data-level="10.2.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cleaning-text-data"><i class="fa fa-check"></i><b>10.2.3</b> Cleaning text data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#advanced-data-problems"><i class="fa fa-check"></i><b>10.3</b> Advanced Data Problems</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#uniformity"><i class="fa fa-check"></i><b>10.3.1</b> Uniformity</a></li>
<li class="chapter" data-level="10.3.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#cross-field-validation"><i class="fa fa-check"></i><b>10.3.2</b> Cross field validation</a></li>
<li class="chapter" data-level="10.3.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#completeness"><i class="fa fa-check"></i><b>10.3.3</b> Completeness</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#record-linkage"><i class="fa fa-check"></i><b>10.4</b> Record Linkage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#comparing-strings"><i class="fa fa-check"></i><b>10.4.1</b> Comparing strings</a></li>
<li class="chapter" data-level="10.4.2" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#generating-and-comparing-pairs"><i class="fa fa-check"></i><b>10.4.2</b> Generating and comparing pairs</a></li>
<li class="chapter" data-level="10.4.3" data-path="cleaning-data-in-r.html"><a href="cleaning-data-in-r.html#scoring-and-linking"><i class="fa fa-check"></i><b>10.4.3</b> Scoring and linking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html"><i class="fa fa-check"></i><b>11</b> Working with Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#dates-and-times-in-r"><i class="fa fa-check"></i><b>11.1</b> Dates and Times in R</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#introduction-to-dates"><i class="fa fa-check"></i><b>11.1.1</b> Introduction to dates</a></li>
<li class="chapter" data-level="11.1.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#why-use-dates"><i class="fa fa-check"></i><b>11.1.2</b> Why use dates?</a></li>
<li class="chapter" data-level="11.1.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#what-about-times"><i class="fa fa-check"></i><b>11.1.3</b> What about times?</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-manipulating-with-lubridate"><i class="fa fa-check"></i><b>11.2</b> Parsing &amp; Manipulating with lubridate</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#parsing-dates"><i class="fa fa-check"></i><b>11.2.1</b> Parsing dates</a></li>
<li class="chapter" data-level="11.2.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#manipulating-dates"><i class="fa fa-check"></i><b>11.2.2</b> Manipulating dates</a></li>
<li class="chapter" data-level="11.2.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#extracting-parts-of-a-datetime"><i class="fa fa-check"></i><b>11.2.3</b> Extracting parts of a datetime</a></li>
<li class="chapter" data-level="11.2.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#rounding-datetimes"><i class="fa fa-check"></i><b>11.2.4</b> Rounding datetimes</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#arithmetic-with-dates-and-times"><i class="fa fa-check"></i><b>11.3</b> Arithmetic with Dates and Times</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#taking-differences-of-datetimes"><i class="fa fa-check"></i><b>11.3.1</b> Taking differences of datetimes</a></li>
<li class="chapter" data-level="11.3.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-spans"><i class="fa fa-check"></i><b>11.3.2</b> Time spans</a></li>
<li class="chapter" data-level="11.3.3" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#intervals"><i class="fa fa-check"></i><b>11.3.3</b> Intervals</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#problems-in-practice"><i class="fa fa-check"></i><b>11.4</b> Problems in practice</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#time-zones"><i class="fa fa-check"></i><b>11.4.1</b> Time zones</a></li>
<li class="chapter" data-level="11.4.2" data-path="working-with-dates-and-times-in-r.html"><a href="working-with-dates-and-times-in-r.html#more-on-import-and-export-datetimes"><i class="fa fa-check"></i><b>11.4.2</b> More on import and export datetimes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html"><i class="fa fa-check"></i><b>12</b> Introduction to Writing Functions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#write-a-function"><i class="fa fa-check"></i><b>12.1</b> Write a Function</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#why-write-function"><i class="fa fa-check"></i><b>12.1.1</b> Why write function?</a></li>
<li class="chapter" data-level="12.1.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#convert-scripts-into-functions"><i class="fa fa-check"></i><b>12.1.2</b> Convert scripts into functions</a></li>
<li class="chapter" data-level="12.1.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#readable-code"><i class="fa fa-check"></i><b>12.1.3</b> Readable code</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#all-about-arguments"><i class="fa fa-check"></i><b>12.2</b> All About Arguments</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#default-arguments"><i class="fa fa-check"></i><b>12.2.1</b> Default arguments</a></li>
<li class="chapter" data-level="12.2.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#pass-arguments-between-functions"><i class="fa fa-check"></i><b>12.2.2</b> Pass arguments between functions</a></li>
<li class="chapter" data-level="12.2.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#checking-arguments"><i class="fa fa-check"></i><b>12.2.3</b> Checking arguments</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-values-and-scope"><i class="fa fa-check"></i><b>12.3</b> Return Values and Scope</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#returning-values"><i class="fa fa-check"></i><b>12.3.1</b> Returning values</a></li>
<li class="chapter" data-level="12.3.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#return-multiple-values"><i class="fa fa-check"></i><b>12.3.2</b> Return multiple values</a></li>
<li class="chapter" data-level="12.3.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#environments"><i class="fa fa-check"></i><b>12.3.3</b> Environments</a></li>
<li class="chapter" data-level="12.3.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#scope-and-precedence"><i class="fa fa-check"></i><b>12.3.4</b> Scope and precedence</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#case-study-on-grain-yields"><i class="fa fa-check"></i><b>12.4</b> Case Study on Grain Yields</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#grain-yields-unit-conversion"><i class="fa fa-check"></i><b>12.4.1</b> Grain yields &amp; unit conversion</a></li>
<li class="chapter" data-level="12.4.2" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#visualizing-grain-yields"><i class="fa fa-check"></i><b>12.4.2</b> Visualizing grain yields</a></li>
<li class="chapter" data-level="12.4.3" data-path="introduction-to-writing-functions.html"><a href="introduction-to-writing-functions.html#modeling-grain-yields"><i class="fa fa-check"></i><b>12.4.3</b> Modeling grain yields</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html"><i class="fa fa-check"></i><b>13</b> Exploratory Data Analysis in R</a>
<ul>
<li class="chapter" data-level="13.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-categorical-data"><i class="fa fa-check"></i><b>13.1</b> Exploring Categorical Data</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#categorical-data"><i class="fa fa-check"></i><b>13.1.1</b> Categorical data</a></li>
<li class="chapter" data-level="13.1.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#counts-vs.-proportions"><i class="fa fa-check"></i><b>13.1.2</b> Counts vs. proportions</a></li>
<li class="chapter" data-level="13.1.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable"><i class="fa fa-check"></i><b>13.1.3</b> Distribution of one variable</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#exploring-numerical-data"><i class="fa fa-check"></i><b>13.2</b> Exploring numerical data</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-data"><i class="fa fa-check"></i><b>13.2.1</b> Numerical Data</a></li>
<li class="chapter" data-level="13.2.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#distribution-of-one-variable-1"><i class="fa fa-check"></i><b>13.2.2</b> Distribution of one variable</a></li>
<li class="chapter" data-level="13.2.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#box-plots-1"><i class="fa fa-check"></i><b>13.2.3</b> Box plots</a></li>
<li class="chapter" data-level="13.2.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#visual-in-higher-dimensions"><i class="fa fa-check"></i><b>13.2.4</b> Visual in higher dimensions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#numerical-summaries"><i class="fa fa-check"></i><b>13.3</b> Numerical Summaries</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-center-1"><i class="fa fa-check"></i><b>13.3.1</b> Measures of center</a></li>
<li class="chapter" data-level="13.3.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#measures-of-variability"><i class="fa fa-check"></i><b>13.3.2</b> Measures of variability</a></li>
<li class="chapter" data-level="13.3.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#shape-transformations"><i class="fa fa-check"></i><b>13.3.3</b> Shape &amp; transformations</a></li>
<li class="chapter" data-level="13.3.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#outliers"><i class="fa fa-check"></i><b>13.3.4</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#case-study"><i class="fa fa-check"></i><b>13.4</b> Case Study</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#new-data"><i class="fa fa-check"></i><b>13.4.1</b> New data</a></li>
<li class="chapter" data-level="13.4.2" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-1"><i class="fa fa-check"></i><b>13.4.2</b> Check-in 1</a></li>
<li class="chapter" data-level="13.4.3" data-path="exploratory-data-analysis-in-r.html"><a href="exploratory-data-analysis-in-r.html#check-in-2"><i class="fa fa-check"></i><b>13.4.3</b> Check-in 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html"><i class="fa fa-check"></i><b>14</b> Introduction to Regression</a>
<ul>
<li class="chapter" data-level="14.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>14.1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#tale-of-two-variables"><i class="fa fa-check"></i><b>14.1.1</b> Tale of two variables</a></li>
<li class="chapter" data-level="14.1.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#fitting-a-linear-regression"><i class="fa fa-check"></i><b>14.1.2</b> Fitting a linear regression</a></li>
<li class="chapter" data-level="14.1.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#categorical-explanatory-variables"><i class="fa fa-check"></i><b>14.1.3</b> Categorical explanatory variables</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-model-objects"><i class="fa fa-check"></i><b>14.2</b> Predictions &amp; model objects</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#making-predictions"><i class="fa fa-check"></i><b>14.2.1</b> Making predictions</a></li>
<li class="chapter" data-level="14.2.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#working-with-model-objects"><i class="fa fa-check"></i><b>14.2.2</b> Working with model objects</a></li>
<li class="chapter" data-level="14.2.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>14.2.3</b> Regression to the mean</a></li>
<li class="chapter" data-level="14.2.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#transforming-variables"><i class="fa fa-check"></i><b>14.2.4</b> Transforming variables</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#assessing-model-fit"><i class="fa fa-check"></i><b>14.3</b> Assessing model fit</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantifying-model-fit"><i class="fa fa-check"></i><b>14.3.1</b> Quantifying model fit</a></li>
<li class="chapter" data-level="14.3.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#visualizing-model-fit"><i class="fa fa-check"></i><b>14.3.2</b> Visualizing model fit</a></li>
<li class="chapter" data-level="14.3.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#outliers-leverage-influence"><i class="fa fa-check"></i><b>14.3.3</b> Outliers, leverage, influence</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#simple-logistic-regression"><i class="fa fa-check"></i><b>14.4</b> Simple logistic regression</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#why-need-logistic-regression"><i class="fa fa-check"></i><b>14.4.1</b> Why need logistic regression</a></li>
<li class="chapter" data-level="14.4.2" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#predictions-odds-ratios"><i class="fa fa-check"></i><b>14.4.2</b> Predictions &amp; odds ratios</a></li>
<li class="chapter" data-level="14.4.3" data-path="introduction-to-regression.html"><a href="introduction-to-regression.html#quantify-logistic-regression-fit"><i class="fa fa-check"></i><b>14.4.3</b> Quantify logistic regression fit</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="intermediate-regression.html"><a href="intermediate-regression.html"><i class="fa fa-check"></i><b>15</b> Intermediate Regression</a>
<ul>
<li class="chapter" data-level="15.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes"><i class="fa fa-check"></i><b>15.1</b> Parallel Slopes</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#parallel-slopes-linear-regression"><i class="fa fa-check"></i><b>15.1.1</b> Parallel slopes linear regression</a></li>
<li class="chapter" data-level="15.1.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predicting-parallel-slopes"><i class="fa fa-check"></i><b>15.1.2</b> Predicting parallel slopes</a></li>
<li class="chapter" data-level="15.1.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#assessing-model-performance"><i class="fa fa-check"></i><b>15.1.3</b> Assessing model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#interactions"><i class="fa fa-check"></i><b>15.2</b> Interactions</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#models-for-each-category"><i class="fa fa-check"></i><b>15.2.1</b> Models for each category</a></li>
<li class="chapter" data-level="15.2.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#one-model-with-an-interaction"><i class="fa fa-check"></i><b>15.2.2</b> One model with an interaction</a></li>
<li class="chapter" data-level="15.2.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#predict-with-interactions"><i class="fa fa-check"></i><b>15.2.3</b> Predict with interactions</a></li>
<li class="chapter" data-level="15.2.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#simpsons-paradox"><i class="fa fa-check"></i><b>15.2.4</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>15.3</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#two-numeric-ivs"><i class="fa fa-check"></i><b>15.3.1</b> Two numeric IVs</a></li>
<li class="chapter" data-level="15.3.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#more-than-2-ivs"><i class="fa fa-check"></i><b>15.3.2</b> More than 2 IVs</a></li>
<li class="chapter" data-level="15.3.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance"><i class="fa fa-check"></i><b>15.3.3</b> Model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression"><i class="fa fa-check"></i><b>15.4</b> Multiple Logistic Regression</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="intermediate-regression.html"><a href="intermediate-regression.html#multiple-logistic-regression-1"><i class="fa fa-check"></i><b>15.4.1</b> Multiple Logistic Regression</a></li>
<li class="chapter" data-level="15.4.2" data-path="intermediate-regression.html"><a href="intermediate-regression.html#logistic-distribution"><i class="fa fa-check"></i><b>15.4.2</b> Logistic distribution</a></li>
<li class="chapter" data-level="15.4.3" data-path="intermediate-regression.html"><a href="intermediate-regression.html#model-performance-1"><i class="fa fa-check"></i><b>15.4.3</b> Model performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sampling-in-r.html"><a href="sampling-in-r.html"><i class="fa fa-check"></i><b>16</b> Sampling in R</a>
<ul>
<li class="chapter" data-level="16.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-sampling"><i class="fa fa-check"></i><b>16.1</b> Introduction to Sampling</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-point-estimates"><i class="fa fa-check"></i><b>16.1.1</b> Sampling &amp; point estimates</a></li>
<li class="chapter" data-level="16.1.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#convenience-sampling"><i class="fa fa-check"></i><b>16.1.2</b> Convenience sampling</a></li>
<li class="chapter" data-level="16.1.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#pseudo-random-number-generation"><i class="fa fa-check"></i><b>16.1.3</b> Pseudo-random number generation</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-methods"><i class="fa fa-check"></i><b>16.2</b> Sampling Methods</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#simple-random-systematic-sampling"><i class="fa fa-check"></i><b>16.2.1</b> Simple random &amp; systematic sampling</a></li>
<li class="chapter" data-level="16.2.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#stratified-weighted-random-sampling"><i class="fa fa-check"></i><b>16.2.2</b> Stratified &amp; weighted random sampling</a></li>
<li class="chapter" data-level="16.2.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#cluster-sampling"><i class="fa fa-check"></i><b>16.2.3</b> Cluster sampling</a></li>
<li class="chapter" data-level="16.2.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-methods"><i class="fa fa-check"></i><b>16.2.4</b> Comparing sampling methods</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#sampling-distributions"><i class="fa fa-check"></i><b>16.3</b> Sampling Distributions</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#relative-error-of-point-estimates"><i class="fa fa-check"></i><b>16.3.1</b> Relative error of point estimates</a></li>
<li class="chapter" data-level="16.3.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#creating-a-sampling-distribution"><i class="fa fa-check"></i><b>16.3.2</b> Creating a sampling distribution</a></li>
<li class="chapter" data-level="16.3.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#approximate-sampling-distributions"><i class="fa fa-check"></i><b>16.3.3</b> Approximate sampling distributions</a></li>
<li class="chapter" data-level="16.3.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#standard-errors-clt"><i class="fa fa-check"></i><b>16.3.4</b> Standard errors &amp; CLT</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="sampling-in-r.html"><a href="sampling-in-r.html#bootstrap-distributions"><i class="fa fa-check"></i><b>16.4</b> Bootstrap Distributions</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="sampling-in-r.html"><a href="sampling-in-r.html#introduction-to-bootstrapping"><i class="fa fa-check"></i><b>16.4.1</b> Introduction to bootstrapping</a></li>
<li class="chapter" data-level="16.4.2" data-path="sampling-in-r.html"><a href="sampling-in-r.html#comparing-sampling-bootstrap-distributions"><i class="fa fa-check"></i><b>16.4.2</b> Comparing sampling &amp; bootstrap distributions</a></li>
<li class="chapter" data-level="16.4.3" data-path="sampling-in-r.html"><a href="sampling-in-r.html#confidence-intervals"><i class="fa fa-check"></i><b>16.4.3</b> Confidence intervals</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>17</b> Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction-to-hypothesis-testing"><i class="fa fa-check"></i><b>17.1</b> Introduction to Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#hypothesis-tests-z-scores"><i class="fa fa-check"></i><b>17.1.1</b> Hypothesis tests &amp; z-scores</a></li>
<li class="chapter" data-level="17.1.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#p-values"><i class="fa fa-check"></i><b>17.1.2</b> p-values</a></li>
<li class="chapter" data-level="17.1.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#statistical-significance"><i class="fa fa-check"></i><b>17.1.3</b> Statistical significance</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-anova-tests"><i class="fa fa-check"></i><b>17.2</b> Two-Sample &amp; ANOVA Tests</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#performing-t-tests"><i class="fa fa-check"></i><b>17.2.1</b> Performing t-tests</a></li>
<li class="chapter" data-level="17.2.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#calculating-p-values-from-t-statistics"><i class="fa fa-check"></i><b>17.2.2</b> Calculating p-values from t-statistics</a></li>
<li class="chapter" data-level="17.2.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#paired-t-tests"><i class="fa fa-check"></i><b>17.2.3</b> Paired t-tests</a></li>
<li class="chapter" data-level="17.2.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#anova-tests"><i class="fa fa-check"></i><b>17.2.4</b> ANOVA tests</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#proportion-tests"><i class="fa fa-check"></i><b>17.3</b> Proportion Tests</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.1</b> One-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#two-sample-proportion-tests"><i class="fa fa-check"></i><b>17.3.2</b> Two-sample proportion tests</a></li>
<li class="chapter" data-level="17.3.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-test-of-independence"><i class="fa fa-check"></i><b>17.3.3</b> Chi-square test of independence</a></li>
<li class="chapter" data-level="17.3.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-goodness-of-fit-tests"><i class="fa fa-check"></i><b>17.3.4</b> Chi-square goodness of fit tests</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-tests"><i class="fa fa-check"></i><b>17.4</b> Non-Parametric Tests</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#assumptions-in-hypothesis-testing"><i class="fa fa-check"></i><b>17.4.1</b> Assumptions in hypothesis testing</a></li>
<li class="chapter" data-level="17.4.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#simulation-based-infer-pipeline"><i class="fa fa-check"></i><b>17.4.2</b> Simulation-based infer pipeline</a></li>
<li class="chapter" data-level="17.4.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-anova-unpaired-t-tests"><i class="fa fa-check"></i><b>17.4.3</b> Non-parametric ANOVA &amp; unpaired t-tests</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i><b>18</b> Experimental Design</a>
<ul>
<li class="chapter" data-level="18.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-to-experimental-design"><i class="fa fa-check"></i><b>18.1</b> Introduction to experimental design</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="experimental-design.html"><a href="experimental-design.html#introduction-1"><i class="fa fa-check"></i><b>18.1.1</b> Introduction</a></li>
<li class="chapter" data-level="18.1.2" data-path="experimental-design.html"><a href="experimental-design.html#replication-blocking"><i class="fa fa-check"></i><b>18.1.2</b> Replication &amp; blocking</a></li>
<li class="chapter" data-level="18.1.3" data-path="experimental-design.html"><a href="experimental-design.html#hypothesis-testing-1"><i class="fa fa-check"></i><b>18.1.3</b> Hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="experimental-design.html"><a href="experimental-design.html#basic-experiments"><i class="fa fa-check"></i><b>18.2</b> Basic Experiments</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="experimental-design.html"><a href="experimental-design.html#anova-factor-experiments"><i class="fa fa-check"></i><b>18.2.1</b> ANOVA &amp; factor experiments</a></li>
<li class="chapter" data-level="18.2.2" data-path="experimental-design.html"><a href="experimental-design.html#model-validation"><i class="fa fa-check"></i><b>18.2.2</b> Model validation</a></li>
<li class="chapter" data-level="18.2.3" data-path="experimental-design.html"><a href="experimental-design.html#ab-testing"><i class="fa fa-check"></i><b>18.2.3</b> A/B testing</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="experimental-design.html"><a href="experimental-design.html#block-designs"><i class="fa fa-check"></i><b>18.3</b> Block Designs</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="experimental-design.html"><a href="experimental-design.html#intro-to-sampling"><i class="fa fa-check"></i><b>18.3.1</b> Intro to sampling</a></li>
<li class="chapter" data-level="18.3.2" data-path="experimental-design.html"><a href="experimental-design.html#randomized-complete-block-designs-rcbd"><i class="fa fa-check"></i><b>18.3.2</b> Randomized Complete Block Designs (RCBD)</a></li>
<li class="chapter" data-level="18.3.3" data-path="experimental-design.html"><a href="experimental-design.html#balanced-incomplete-block-designs-bibd"><i class="fa fa-check"></i><b>18.3.3</b> Balanced Incomplete Block Designs (BIBD)</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="experimental-design.html"><a href="experimental-design.html#squares-factorial-experiments"><i class="fa fa-check"></i><b>18.4</b> Squares &amp; Factorial Experiments</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="experimental-design.html"><a href="experimental-design.html#latin-squares"><i class="fa fa-check"></i><b>18.4.1</b> Latin squares</a></li>
<li class="chapter" data-level="18.4.2" data-path="experimental-design.html"><a href="experimental-design.html#graeco-latin-squares"><i class="fa fa-check"></i><b>18.4.2</b> Graeco-Latin squares</a></li>
<li class="chapter" data-level="18.4.3" data-path="experimental-design.html"><a href="experimental-design.html#factorial-experiments"><i class="fa fa-check"></i><b>18.4.3</b> Factorial experiments</a></li>
<li class="chapter" data-level="18.4.4" data-path="experimental-design.html"><a href="experimental-design.html#other-experimental-designs"><i class="fa fa-check"></i><b>18.4.4</b> Other experimental designs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html"><i class="fa fa-check"></i><b>19</b> Supervised Learning: Classification</a>
<ul>
<li class="chapter" data-level="19.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-nearest-neighbors-knn"><i class="fa fa-check"></i><b>19.1</b> k-Nearest Neighbors (kNN)</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-with-nearest-neighbors"><i class="fa fa-check"></i><b>19.1.1</b> Classification with Nearest Neighbors</a></li>
<li class="chapter" data-level="19.1.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#k-in-knn"><i class="fa fa-check"></i><b>19.1.2</b> ‘k’ in kNN</a></li>
<li class="chapter" data-level="19.1.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#data-preparation-for-knn"><i class="fa fa-check"></i><b>19.1.3</b> 1-3.Data preparation for kNN</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#naive-bayes"><i class="fa fa-check"></i><b>19.2</b> Naive Bayes</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-bayesian-methods"><i class="fa fa-check"></i><b>19.2.1</b> Understanding Bayesian methods</a></li>
<li class="chapter" data-level="19.2.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#understanding-nbs-naivety"><i class="fa fa-check"></i><b>19.2.2</b> Understanding NB’s “naivety”</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#logistic-regression"><i class="fa fa-check"></i><b>19.3</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-binary-predictions-with-regression"><i class="fa fa-check"></i><b>19.3.1</b> Making binary predictions with regression</a></li>
<li class="chapter" data-level="19.3.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#model-performance-tradeoffs"><i class="fa fa-check"></i><b>19.3.2</b> Model performance tradeoffs</a></li>
<li class="chapter" data-level="19.3.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#dummy-variables-missing-data-and-interactions"><i class="fa fa-check"></i><b>19.3.3</b> Dummy variables, missing data, and interactions</a></li>
<li class="chapter" data-level="19.3.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#automatic-feature-selection"><i class="fa fa-check"></i><b>19.3.4</b> Automatic feature selection</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#classification-trees"><i class="fa fa-check"></i><b>19.4</b> Classification Trees</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#making-decisions-with-trees"><i class="fa fa-check"></i><b>19.4.1</b> Making decisions with trees</a></li>
<li class="chapter" data-level="19.4.2" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#growing-larger-classification-trees"><i class="fa fa-check"></i><b>19.4.2</b> Growing larger classification trees</a></li>
<li class="chapter" data-level="19.4.3" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#tending-to-classification-trees"><i class="fa fa-check"></i><b>19.4.3</b> Tending to classification trees</a></li>
<li class="chapter" data-level="19.4.4" data-path="supervised-learning-classification.html"><a href="supervised-learning-classification.html#seeing-the-forest-from-the-trees"><i class="fa fa-check"></i><b>19.4.4</b> Seeing the forest from the trees</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html"><i class="fa fa-check"></i><b>20</b> Supervised Learning: Regression</a>
<ul>
<li class="chapter" data-level="20.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#what-is-regression"><i class="fa fa-check"></i><b>20.1</b> What is Regression?</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#introduction-2"><i class="fa fa-check"></i><b>20.1.1</b> Introduction</a></li>
<li class="chapter" data-level="20.1.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#linear-regression"><i class="fa fa-check"></i><b>20.1.2</b> Linear regression</a></li>
<li class="chapter" data-level="20.1.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#predicting-model"><i class="fa fa-check"></i><b>20.1.3</b> Predicting model</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-and-evaluating-models"><i class="fa fa-check"></i><b>20.2</b> Training and Evaluating Models</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#graphically"><i class="fa fa-check"></i><b>20.2.1</b> Graphically</a></li>
<li class="chapter" data-level="20.2.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#root-mean-squared-error"><i class="fa fa-check"></i><b>20.2.2</b> Root Mean Squared Error</a></li>
<li class="chapter" data-level="20.2.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#r-squared"><i class="fa fa-check"></i><b>20.2.3</b> R-squared</a></li>
<li class="chapter" data-level="20.2.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#training-a-model"><i class="fa fa-check"></i><b>20.2.4</b> Training a Model</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#issues-to-consider"><i class="fa fa-check"></i><b>20.3</b> Issues to Consider</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#categorical-iv"><i class="fa fa-check"></i><b>20.3.1</b> Categorical IV</a></li>
<li class="chapter" data-level="20.3.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#interactions-1"><i class="fa fa-check"></i><b>20.3.2</b> Interactions</a></li>
<li class="chapter" data-level="20.3.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-dv-before-modeling"><i class="fa fa-check"></i><b>20.3.3</b> Transforming DV before modeling</a></li>
<li class="chapter" data-level="20.3.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#transforming-iv-before-modeling"><i class="fa fa-check"></i><b>20.3.4</b> Transforming IV before modeling</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#dealing-with-non-linear-responses"><i class="fa fa-check"></i><b>20.4</b> Dealing with Non-Linear Responses</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#logistic-regression-to-predict-probabilities"><i class="fa fa-check"></i><b>20.4.1</b> Logistic regression to predict probabilities</a></li>
<li class="chapter" data-level="20.4.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#poisson-and-quasipoisson-regression-to-predict-counts"><i class="fa fa-check"></i><b>20.4.2</b> Poisson and quasipoisson regression to predict counts</a></li>
<li class="chapter" data-level="20.4.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gam-to-learn-non-linear-transforms"><i class="fa fa-check"></i><b>20.4.3</b> GAM to learn non-linear transforms</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#tree-based-methods"><i class="fa fa-check"></i><b>20.5</b> Tree-Based Methods</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#random-forests"><i class="fa fa-check"></i><b>20.5.1</b> Random forests</a></li>
<li class="chapter" data-level="20.5.2" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#one-hot-encoding"><i class="fa fa-check"></i><b>20.5.2</b> One-Hot-Encoding</a></li>
<li class="chapter" data-level="20.5.3" data-path="supervised-learning-regression.html"><a href="supervised-learning-regression.html#gradient-boosting"><i class="fa fa-check"></i><b>20.5.3</b> Gradient boosting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>21</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="21.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>21.1</b> k-means clustering</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#types-of-machine-learning"><i class="fa fa-check"></i><b>21.1.1</b> Types of machine learning</a></li>
<li class="chapter" data-level="21.1.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-to-k-means"><i class="fa fa-check"></i><b>21.1.2</b> Introduction to k-means</a></li>
<li class="chapter" data-level="21.1.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#model-selection"><i class="fa fa-check"></i><b>21.1.3</b> Model selection</a></li>
<li class="chapter" data-level="21.1.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#pokemon-data"><i class="fa fa-check"></i><b>21.1.4</b> Pokemon data</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>21.2</b> Hierarchical clustering</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-3"><i class="fa fa-check"></i><b>21.2.1</b> Introduction</a></li>
<li class="chapter" data-level="21.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#selecting-number-of-clusters-1"><i class="fa fa-check"></i><b>21.2.2</b> Selecting number of clusters</a></li>
<li class="chapter" data-level="21.2.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering-linkage"><i class="fa fa-check"></i><b>21.2.3</b> Clustering linkage</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#dimensionality-reduction---pca"><i class="fa fa-check"></i><b>21.3</b> Dimensionality reduction - PCA</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-4"><i class="fa fa-check"></i><b>21.3.1</b> Introduction</a></li>
<li class="chapter" data-level="21.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#visualizing-and-interpreting-1"><i class="fa fa-check"></i><b>21.3.2</b> Visualizing and interpreting</a></li>
<li class="chapter" data-level="21.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#practical-issues"><i class="fa fa-check"></i><b>21.3.3</b> Practical issues</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#case-study-1"><i class="fa fa-check"></i><b>21.4</b> Case study</a>
<ul>
<li class="chapter" data-level="21.4.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-5"><i class="fa fa-check"></i><b>21.4.1</b> Introduction</a></li>
<li class="chapter" data-level="21.4.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#next-steps"><i class="fa fa-check"></i><b>21.4.2</b> Next steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html"><i class="fa fa-check"></i><b>22</b> Intermediate Importing Data in R</a>
<ul>
<li class="chapter" data-level="22.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-1"><i class="fa fa-check"></i><b>22.1</b> Import from databases-1</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#connect-to-a-database"><i class="fa fa-check"></i><b>22.1.1</b> Connect to a database</a></li>
<li class="chapter" data-level="22.1.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-table-data"><i class="fa fa-check"></i><b>22.1.2</b> Import table data</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-databases-2"><i class="fa fa-check"></i><b>22.2</b> Import from databases-2</a>
<ul>
<li class="chapter" data-level="22.2.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#sql-queries-from-inside-r"><i class="fa fa-check"></i><b>22.2.1</b> SQL Queries from inside R</a></li>
<li class="chapter" data-level="22.2.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#dbi-internals"><i class="fa fa-check"></i><b>22.2.2</b> DBI internals</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-1"><i class="fa fa-check"></i><b>22.3</b> Import from the web-1</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#http"><i class="fa fa-check"></i><b>22.3.1</b> HTTP</a></li>
<li class="chapter" data-level="22.3.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#downloading-files"><i class="fa fa-check"></i><b>22.3.2</b> Downloading files</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-the-web-2"><i class="fa fa-check"></i><b>22.4</b> Import from the web-2</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#apis-json"><i class="fa fa-check"></i><b>22.4.1</b> APIs &amp; JSON</a></li>
<li class="chapter" data-level="22.4.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#json-jsonlite"><i class="fa fa-check"></i><b>22.4.2</b> JSON &amp; jsonlite</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#import-from-statistical-software"><i class="fa fa-check"></i><b>22.5</b> Import from statistical software</a>
<ul>
<li class="chapter" data-level="22.5.1" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#haven-package"><i class="fa fa-check"></i><b>22.5.1</b> haven package</a></li>
<li class="chapter" data-level="22.5.2" data-path="intermediate-importing-data-in-r.html"><a href="intermediate-importing-data-in-r.html#foreign-package"><i class="fa fa-check"></i><b>22.5.2</b> foreign package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html"><i class="fa fa-check"></i><b>23</b> Introduction to SQL</a>
<ul>
<li class="chapter" data-level="23.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#relational-databases"><i class="fa fa-check"></i><b>23.1</b> Relational Databases</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#databases"><i class="fa fa-check"></i><b>23.1.1</b> Databases</a></li>
<li class="chapter" data-level="23.1.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#tables"><i class="fa fa-check"></i><b>23.1.2</b> Tables</a></li>
<li class="chapter" data-level="23.1.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#data"><i class="fa fa-check"></i><b>23.1.3</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#querying"><i class="fa fa-check"></i><b>23.2</b> Querying</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#introducing"><i class="fa fa-check"></i><b>23.2.1</b> Introducing</a></li>
<li class="chapter" data-level="23.2.2" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#writing-queries"><i class="fa fa-check"></i><b>23.2.2</b> Writing queries</a></li>
<li class="chapter" data-level="23.2.3" data-path="introduction-to-sql.html"><a href="introduction-to-sql.html#sql-flavors"><i class="fa fa-check"></i><b>23.2.3</b> SQL flavors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="intermediate-sql.html"><a href="intermediate-sql.html"><i class="fa fa-check"></i><b>24</b> Intermediate SQL</a>
<ul>
<li class="chapter" data-level="24.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#selecting-data"><i class="fa fa-check"></i><b>24.1</b> Selecting Data</a>
<ul>
<li class="chapter" data-level="24.1.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#querying-a-database"><i class="fa fa-check"></i><b>24.1.1</b> Querying a database</a></li>
<li class="chapter" data-level="24.1.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#query-execution"><i class="fa fa-check"></i><b>24.1.2</b> Query execution</a></li>
<li class="chapter" data-level="24.1.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sql-style"><i class="fa fa-check"></i><b>24.1.3</b> SQL style</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-records"><i class="fa fa-check"></i><b>24.2</b> Filtering Records</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-numbers"><i class="fa fa-check"></i><b>24.2.1</b> Filtering numbers</a></li>
<li class="chapter" data-level="24.2.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#multiple-criteria"><i class="fa fa-check"></i><b>24.2.2</b> Multiple criteria</a></li>
<li class="chapter" data-level="24.2.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-text"><i class="fa fa-check"></i><b>24.2.3</b> Filtering text</a></li>
<li class="chapter" data-level="24.2.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#null-values"><i class="fa fa-check"></i><b>24.2.4</b> NULL values</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aggregate-functions"><i class="fa fa-check"></i><b>24.3</b> Aggregate Functions</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-data"><i class="fa fa-check"></i><b>24.3.1</b> Summarizing data</a></li>
<li class="chapter" data-level="24.3.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#summarizing-subsets"><i class="fa fa-check"></i><b>24.3.2</b> Summarizing subsets</a></li>
<li class="chapter" data-level="24.3.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#aliasing-and-arithmetic"><i class="fa fa-check"></i><b>24.3.3</b> Aliasing and arithmetic</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-and-grouping"><i class="fa fa-check"></i><b>24.4</b> Sorting and Grouping</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="intermediate-sql.html"><a href="intermediate-sql.html#sorting-results"><i class="fa fa-check"></i><b>24.4.1</b> Sorting results</a></li>
<li class="chapter" data-level="24.4.2" data-path="intermediate-sql.html"><a href="intermediate-sql.html#grouping-data"><i class="fa fa-check"></i><b>24.4.2</b> Grouping data</a></li>
<li class="chapter" data-level="24.4.3" data-path="intermediate-sql.html"><a href="intermediate-sql.html#filtering-grouped-data"><i class="fa fa-check"></i><b>24.4.3</b> Filtering grouped data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html"><i class="fa fa-check"></i><b>25</b> Joining Data in SQL</a>
<ul>
<li class="chapter" data-level="25.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inner-joins"><i class="fa fa-check"></i><b>25.1</b> Inner Joins</a>
<ul>
<li class="chapter" data-level="25.1.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#ins-outs-of-inner-join"><i class="fa fa-check"></i><b>25.1.1</b> ins &amp; outs of INNER JOIN</a></li>
<li class="chapter" data-level="25.1.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#defining-relationships"><i class="fa fa-check"></i><b>25.1.2</b> Defining relationships</a></li>
<li class="chapter" data-level="25.1.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#multiple-joins"><i class="fa fa-check"></i><b>25.1.3</b> Multiple joins</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#outer-cross-self-joins"><i class="fa fa-check"></i><b>25.2</b> Outer, Cross &amp; Self Joins</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#left-right-joins-1"><i class="fa fa-check"></i><b>25.2.1</b> LEFT &amp; RIGHT JOINs</a></li>
<li class="chapter" data-level="25.2.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#full-join-1"><i class="fa fa-check"></i><b>25.2.2</b> FULL JOIN</a></li>
<li class="chapter" data-level="25.2.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#cross-join"><i class="fa fa-check"></i><b>25.2.3</b> CROSS JOIN</a></li>
<li class="chapter" data-level="25.2.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#self-joins"><i class="fa fa-check"></i><b>25.2.4</b> Self joins</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#set-theory-for-sql-joins"><i class="fa fa-check"></i><b>25.3</b> Set Theory for SQL Joins</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#union-vs.-union-all"><i class="fa fa-check"></i><b>25.3.1</b> UNION vs. UNION ALL</a></li>
<li class="chapter" data-level="25.3.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#intersect"><i class="fa fa-check"></i><b>25.3.2</b> INTERSECT</a></li>
<li class="chapter" data-level="25.3.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#except"><i class="fa fa-check"></i><b>25.3.3</b> EXCEPT</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#subqueries"><i class="fa fa-check"></i><b>25.4</b> Subqueries</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#with-semi-joins-anti-joins"><i class="fa fa-check"></i><b>25.4.1</b> With semi joins &amp; anti joins</a></li>
<li class="chapter" data-level="25.4.2" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-where-select"><i class="fa fa-check"></i><b>25.4.2</b> Inside WHERE &amp; SELECT</a></li>
<li class="chapter" data-level="25.4.3" data-path="joining-data-in-sql.html"><a href="joining-data-in-sql.html#inside-from"><i class="fa fa-check"></i><b>25.4.3</b> Inside FROM</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="introduction-to-git.html"><a href="introduction-to-git.html"><i class="fa fa-check"></i><b>26</b> Introduction to Git</a>
<ul>
<li class="chapter" data-level="26.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#introduction-6"><i class="fa fa-check"></i><b>26.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="26.1.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#useful-shell-commands"><i class="fa fa-check"></i><b>26.1.1</b> Useful shell commands</a></li>
<li class="chapter" data-level="26.1.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#saving-files"><i class="fa fa-check"></i><b>26.1.2</b> Saving files</a></li>
<li class="chapter" data-level="26.1.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#comparing-files"><i class="fa fa-check"></i><b>26.1.3</b> Comparing files</a></li>
</ul></li>
<li class="chapter" data-level="26.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#making-changes"><i class="fa fa-check"></i><b>26.2</b> Making changes</a>
<ul>
<li class="chapter" data-level="26.2.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#storing-data-with-git"><i class="fa fa-check"></i><b>26.2.1</b> Storing data with Git</a></li>
<li class="chapter" data-level="26.2.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#viewing-changes"><i class="fa fa-check"></i><b>26.2.2</b> Viewing changes</a></li>
<li class="chapter" data-level="26.2.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#undoing-changes-before-committing"><i class="fa fa-check"></i><b>26.2.3</b> Undoing changes before committing</a></li>
<li class="chapter" data-level="26.2.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#restoring-and-reverting"><i class="fa fa-check"></i><b>26.2.4</b> Restoring and reverting</a></li>
</ul></li>
<li class="chapter" data-level="26.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#git-workflows"><i class="fa fa-check"></i><b>26.3</b> Git workflows</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#configuring-git"><i class="fa fa-check"></i><b>26.3.1</b> Configuring Git</a></li>
<li class="chapter" data-level="26.3.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#branches"><i class="fa fa-check"></i><b>26.3.2</b> Branches</a></li>
<li class="chapter" data-level="26.3.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-branches"><i class="fa fa-check"></i><b>26.3.3</b> Working with branches</a></li>
<li class="chapter" data-level="26.3.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#handling-conflict"><i class="fa fa-check"></i><b>26.3.4</b> Handling conflict</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#collaborating-with-git"><i class="fa fa-check"></i><b>26.4</b> Collaborating with Git</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="introduction-to-git.html"><a href="introduction-to-git.html#creating-repos"><i class="fa fa-check"></i><b>26.4.1</b> Creating repos</a></li>
<li class="chapter" data-level="26.4.2" data-path="introduction-to-git.html"><a href="introduction-to-git.html#working-with-remotes"><i class="fa fa-check"></i><b>26.4.2</b> Working with remotes</a></li>
<li class="chapter" data-level="26.4.3" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pulling-from-a-remote"><i class="fa fa-check"></i><b>26.4.3</b> Pulling from a remote</a></li>
<li class="chapter" data-level="26.4.4" data-path="introduction-to-git.html"><a href="introduction-to-git.html#pushing-to-a-remote"><i class="fa fa-check"></i><b>26.4.4</b> Pushing to a remote</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Scientist with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intermediate-data-visualization-with-ggplot2" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Intermediate Data Visualization with ggplot2<a href="intermediate-data-visualization-with-ggplot2.html#intermediate-data-visualization-with-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="statistics" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Statistics<a href="intermediate-data-visualization-with-ggplot2.html#statistics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="stats-with-geoms" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Stats with geoms<a href="intermediate-data-visualization-with-ggplot2.html#stats-with-geoms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>用來計算新的值的演算法稱之為 stat，為 statistical transformation 的簡稱。因為每個 geom 都有一個預設的 stat，反之亦然，所以我們可以把 geom 與 stat 交換使用。也因此，<code>geom_bar()</code>與<code>stat_count()</code>會到相同的結果。</p>
<p>For example:</p>
<table>
<thead>
<tr class="header">
<th>stat_</th>
<th>geom_</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>stat_bin()</code></td>
<td><code>geom_histogram()</code> , <code>geom_freqpoly()</code></td>
</tr>
<tr class="even">
<td><code>stat_count()</code></td>
<td><code>geom_bar()</code></td>
</tr>
<tr class="odd">
<td><code>stat_smooth()</code></td>
<td><code>geom_smooth()</code></td>
</tr>
<tr class="even">
<td><code>stat_boxplot()</code></td>
<td><code>geom_boxplot()</code></td>
</tr>
<tr class="odd">
<td><code>stat_bindot()</code></td>
<td><code>geom_dotplot()</code></td>
</tr>
<tr class="even">
<td><code>stat_bin2d()</code></td>
<td><code>geom_bin2d()</code></td>
</tr>
<tr class="odd">
<td><code>stat_binhex()</code></td>
<td><code>geom_hex()</code></td>
</tr>
<tr class="even">
<td><code>stat_contour()</code></td>
<td><code>geom_contour()</code></td>
</tr>
<tr class="odd">
<td><code>stat_quantile()</code></td>
<td><code>geom_quantile()</code></td>
</tr>
<tr class="even">
<td><code>stat_sum()</code></td>
<td><code>geom_count()</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb937"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb937-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb937-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb937-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb937-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb937-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb937-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb937-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb937-4" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>fcyl <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>cyl)</span>
<span id="cb937-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb937-5" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>fam <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>am)</span>
<span id="cb937-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb937-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    32 obs. of  13 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
##  $ fcyl: Factor w/ 3 levels &quot;4&quot;,&quot;6&quot;,&quot;8&quot;: 2 2 1 2 3 2 3 1 1 2 ...
##  $ fam : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 2 2 2 1 1 1 1 1 1 1 ...</code></pre>
<div id="smoothing" class="section level4 hasAnchor" number="8.1.1.1">
<h4><span class="header-section-number">8.1.1.1</span> Smoothing<a href="intermediate-data-visualization-with-ggplot2.html#smoothing" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb939"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb939-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb939-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot to add a smooth layer</span></span>
<span id="cb939-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb939-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb939-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb939-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb939-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb939-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-314-1.png" width="672" /></p>
<p>Used <code>se = FALSE</code> in <code>stat_smooth()</code> to remove the 95% Confidence Interval.</p>
<div class="sourceCode" id="cb941"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb941-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb941-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot. Use lin. reg. smoothing; turn off std err ribbon</span></span>
<span id="cb941-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb941-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb941-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb941-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb941-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb941-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> F)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-315-1.png" width="672" /></p>
<div class="sourceCode" id="cb943"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb943-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb943-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot. Swap geom_smooth() for stat_smooth().</span></span>
<span id="cb943-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb943-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb943-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb943-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb943-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb943-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-316-1.png" width="672" /></p>
<p>You can use either <code>stat_smooth()</code> or <code>geom_smooth()</code> to apply a linear model.</p>
</div>
<div id="grouping-variables" class="section level4 hasAnchor" number="8.1.1.2">
<h4><span class="header-section-number">8.1.1.2</span> Grouping variables<a href="intermediate-data-visualization-with-ggplot2.html#grouping-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considering the situation of looking at sub-groups in our dataset. For this we’ll encounter the invisible group aesthetic.</p>
<div class="sourceCode" id="cb945"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb945-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb945-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot to add another smooth layer with dummy grouping</span></span>
<span id="cb945-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb945-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb945-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb945-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb945-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb945-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb945-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb945-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: The following aesthetics were dropped during
## statistical transformation: colour
## ℹ This can happen when ggplot fails to infer
##   the correct grouping structure in the data.
## ℹ Did you forget to specify a `group`
##   aesthetic or to convert a numerical
##   variable into a factor?</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-317-1.png" width="672" /></p>
<p>####　Modifying stat_smooth</p>
<p>The default <code>span</code> for LOESS is <code>0.9</code>. A lower span will result in a better fit with more detail; but don’t overdo it or you’ll end up over-fitting!</p>
<div class="sourceCode" id="cb948"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb948-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb948-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb948-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb948-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb948-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb948-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add 3 smooth LOESS stats, varying span &amp; color</span></span>
<span id="cb948-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb948-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">span =</span> <span class="fl">0.9</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb948-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb948-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">span =</span> <span class="fl">0.6</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb948-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb948-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">span =</span> <span class="fl">0.3</span>, <span class="at">se =</span> F)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-318-1.png" width="672" /></p>
<div class="sourceCode" id="cb950"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb950-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot to color by fcyl</span></span>
<span id="cb950-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb950-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb950-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a smooth LOESS stat, no ribbon</span></span>
<span id="cb950-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">se =</span> F, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb950-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a smooth lin. reg. stat, no ribbon</span></span>
<span id="cb950-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb950-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> F)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-319-1.png" width="672" /></p>
<div class="sourceCode" id="cb952"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb952-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb952-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot</span></span>
<span id="cb952-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb952-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb952-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb952-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb952-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb952-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Map color to dummy variable &quot;All&quot;</span></span>
<span id="cb952-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb952-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="fu">aes</span>(<span class="at">color =</span> <span class="st">&quot;All&quot;</span>)) <span class="sc">+</span></span>
<span id="cb952-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb952-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-320-1.png" width="672" /></p>
<p>In this exercise we’ll take a look at the standard error ribbons, which show the 95% confidence interval of smoothing models.</p>
<div class="sourceCode" id="cb954"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb954-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb954-1" aria-hidden="true" tabindex="-1"></a>Vocab <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/Vocab.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb954-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb954-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year_group =</span> <span class="fu">ifelse</span>(year <span class="sc">&gt;</span> <span class="dv">1995</span>, <span class="st">&quot;(1995,2016]&quot;</span>, <span class="st">&quot;[1974,1995]&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 21638 Columns: 4
## ── Column specification ──────────────────────
## Delimiter: &quot;,&quot;
## chr (1): sex
## dbl (3): year, education, vocabulary
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb956"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb956-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb956-1" aria-hidden="true" tabindex="-1"></a>Vocab<span class="sc">$</span>year_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(Vocab<span class="sc">$</span>year_group)</span>
<span id="cb956-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb956-2" aria-hidden="true" tabindex="-1"></a>Vocab<span class="sc">$</span>vocabulary <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Vocab<span class="sc">$</span>vocabulary)</span>
<span id="cb956-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb956-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Vocab)</span></code></pre></div>
<pre><code>## tibble [21,638 × 5] (S3: tbl_df/tbl/data.frame)
##  $ year      : num [1:21638] 2004 2004 2004 2004 2004 ...
##  $ sex       : chr [1:21638] &quot;Female&quot; &quot;Female&quot; &quot;Male&quot; &quot;Female&quot; ...
##  $ education : num [1:21638] 9 14 14 17 14 14 12 10 11 9 ...
##  $ vocabulary: num [1:21638] 3 6 9 8 1 7 6 6 5 1 ...
##  $ year_group: Factor w/ 2 levels &quot;(1995,2016]&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb958"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb958-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb958-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Vocab, plot vocabulary vs. education, colored by year group</span></span>
<span id="cb958-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb958-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary, <span class="at">color =</span> year_group)) <span class="sc">+</span></span>
<span id="cb958-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb958-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add jittered points with transparency 0.25</span></span>
<span id="cb958-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb958-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb958-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb958-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a smooth lin. reg. line (with ribbon)</span></span>
<span id="cb958-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb958-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> T)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-322-1.png" width="672" /></p>
<div class="sourceCode" id="cb960"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb960-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb960-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot</span></span>
<span id="cb960-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb960-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary, <span class="at">color =</span> year_group)) <span class="sc">+</span></span>
<span id="cb960-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb960-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb960-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb960-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Map the fill color to year_group, set the line size to 2</span></span>
<span id="cb960-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb960-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="fu">aes</span>(<span class="at">fill =</span> year_group), <span class="at">linewidth =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-323-1.png" width="672" /></p>
</div>
</div>
<div id="stats-sum-quantile" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Stats: sum &amp; quantile<a href="intermediate-data-visualization-with-ggplot2.html#stats-sum-quantile" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="image/plot%20count%20to%20overcome%20overplotting.png" width="549" /></p>
<p><code>geom_count()</code> and <code>stat_sum()</code> get the same result.</p>
<p><code>geom_quantile()</code>: dealing with heteroscedasticity. Same as <code>stat_quantile()</code>.</p>
<div id="quantiles" class="section level4 hasAnchor" number="8.1.2.1">
<h4><span class="header-section-number">8.1.2.1</span> Quantiles<a href="intermediate-data-visualization-with-ggplot2.html#quantiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Linear regression predicts the mean response from the explanatory variables, quantile regression predicts a quantile response (e.g. the median) from the explanatory variables. Specific quantiles can be specified with the <code>quantiles</code> argument.</p>
<div class="sourceCode" id="cb962"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb962-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb962-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb962-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb962-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb962-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb962-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a quantile stat, at 0.05, 0.5, and 0.95</span></span>
<span id="cb962-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb962-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span>))</span></code></pre></div>
<pre><code>## Smoothing formula not specified. Using: y ~ x</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-324-1.png" width="672" /></p>
<div class="sourceCode" id="cb964"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb964-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb964-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot to color by year_group</span></span>
<span id="cb964-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb964-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary, <span class="at">color =</span> year_group)) <span class="sc">+</span></span>
<span id="cb964-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb964-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb964-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb964-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_quantile</span>(<span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.95</span>))</span></code></pre></div>
<pre><code>## Smoothing formula not specified. Using: y ~ x
## Smoothing formula not specified. Using: y ~ x</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-325-1.png" width="672" /></p>
<p>Quantile regression is a great tool for getting a more detailed overview of a large dataset.</p>
</div>
<div id="using-stat_sum" class="section level4 hasAnchor" number="8.1.2.2">
<h4><span class="header-section-number">8.1.2.2</span> Using stat_sum<a href="intermediate-data-visualization-with-ggplot2.html#using-stat_sum" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the <code>Vocab</code> dataset, <code>education</code> and <code>vocabulary</code> are integer variables. In the first course, you saw that this is one of the four causes of overplotting. You’d get a single point at each intersection between the two variables.</p>
<p>One solution, shown in the step 1, is jittering with transparency. Another solution is to use <code>stat_sum()</code>, which calculates the total number of overlapping observations and maps that onto the <code>size</code> aesthetic.</p>
<p><code>stat_sum()</code> allows a special variable, <code>..prop..</code>, to show the <em>proportion</em> of values within the dataset.</p>
<div class="sourceCode" id="cb966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb966-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb966-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run this, look at the plot, then update it</span></span>
<span id="cb966-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb966-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb966-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb966-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Replace this with a sum stat</span></span>
<span id="cb966-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb966-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_sum</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-326-1.png" width="672" /></p>
<div class="sourceCode" id="cb967"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb967-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb967-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the size aesthetic with the appropriate scale function</span></span>
<span id="cb967-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb967-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb967-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb967-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_sum</span>() <span class="sc">+</span></span>
<span id="cb967-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb967-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a size scale, from 1 to 10</span></span>
<span id="cb967-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb967-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">10</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-327-1.png" width="672" /></p>
<div class="sourceCode" id="cb968"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb968-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb968-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the stat to use proportion sizes, so circle size represents the proportion of the whole dataset</span></span>
<span id="cb968-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb968-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb968-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb968-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_sum</span>(<span class="fu">aes</span>(<span class="at">size =</span> ..prop..))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-328-1.png" width="672" /></p>
<div class="sourceCode" id="cb969"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb969-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb969-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Amend the plot to group by education, so that circle size represents the proportion of the group</span></span>
<span id="cb969-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb969-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary, <span class="at">group =</span> education)) <span class="sc">+</span></span>
<span id="cb969-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb969-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_sum</span>(<span class="fu">aes</span>(<span class="at">size =</span> ..prop..))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-329-1.png" width="672" /></p>
<p>If a few data points overlap, jittering is great. When you have lots of overlaps (particularly where continuous data has been rounded), using <code>stat_sum()</code> to count the overlaps is more useful.</p>
</div>
</div>
<div id="stats-outside-geoms" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Stats outside geoms<a href="intermediate-data-visualization-with-ggplot2.html#stats-outside-geoms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<colgroup>
<col width="26%" />
<col width="73%" />
</colgroup>
<thead>
<tr class="header">
<th>stat_</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>stat_summary()</code></td>
<td>summarize y values at distinct x values.</td>
</tr>
<tr class="even">
<td><code>stat_function()</code></td>
<td>compute y values from a function of x values.</td>
</tr>
<tr class="odd">
<td><code>stat_qq()</code></td>
<td>perform calculations for a quantile-quantile plot.</td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb970"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb970-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot2, 1 SD</span></span>
<span id="cb970-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean_sdl</span>(xx, <span class="at">mult =</span> <span class="dv">1</span>)</span>
<span id="cb970-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot2, stat_summary(function, function argument)</span></span>
<span id="cb970-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-5" aria-hidden="true" tabindex="-1"></a><span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb970-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>))</span>
<span id="cb970-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-7" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb970-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-8" aria-hidden="true" tabindex="-1"></a><span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb970-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult=</span><span class="dv">1</span>),</span>
<span id="cb970-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">geom =</span> <span class="st">&quot;errorbar&quot;</span>,</span>
<span id="cb970-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">width =</span> <span class="fl">0.1</span>)</span>
<span id="cb970-12"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-13"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot2, 95% confidence interval</span></span>
<span id="cb970-14"><a href="intermediate-data-visualization-with-ggplot2.html#cb970-14" aria-hidden="true" tabindex="-1"></a><span class="fu">mean_cl_normal</span>(xx)</span></code></pre></div>
<div class="sourceCode" id="cb971"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb971-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Normal distribution</span></span>
<span id="cb971-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mam.new, <span class="fu">aes</span>(<span class="at">x =</span> body)) <span class="sc">+</span></span>
<span id="cb971-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>( <span class="at">y =</span> ..density..)) <span class="sc">+</span></span>
<span id="cb971-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rug</span>() <span class="sc">+</span></span>
<span id="cb971-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb971-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(mam.new<span class="sc">$</span>body),</span>
<span id="cb971-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb971-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sd =</span> <span class="fu">sd</span>(mam.new<span class="sc">$</span>body)))</span></code></pre></div>
<div class="sourceCode" id="cb972"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb972-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb972-1" aria-hidden="true" tabindex="-1"></a><span class="co"># QQ plot</span></span>
<span id="cb972-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb972-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mam.new, <span class="fu">aes</span>(<span class="at">sample =</span> body)) <span class="sc">+</span></span>
<span id="cb972-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb972-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_qq</span>() <span class="sc">+</span></span>
<span id="cb972-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb972-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_qq_line</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<div id="preparations" class="section level4 hasAnchor" number="8.1.3.1">
<h4><span class="header-section-number">8.1.3.1</span> Preparations<a href="intermediate-data-visualization-with-ggplot2.html#preparations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Here, we’ll establish our positions and base layer of the plot. Establishing these items as independent objects will allow us to recycle them easily in many layers, or plots.</p>
<ul>
<li><p><code>position_jitter()</code> adds <em>jittering</em> (e.g. for points).</p></li>
<li><p><code>position_dodge()</code> <em>dodges</em> geoms, (e.g. bar, col, boxplot, violin, errorbar, pointrange).</p></li>
<li><p><code>position_jitterdodge()</code> <em>jitters</em> <strong>and</strong> <em>dodges</em> geoms, (e.g. points).</p></li>
</ul>
<div class="sourceCode" id="cb973"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb973-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define position objects, promotes consistency between layers</span></span>
<span id="cb973-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Jitter with width 0.2</span></span>
<span id="cb973-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-3" aria-hidden="true" tabindex="-1"></a>posn_j <span class="ot">&lt;-</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>)</span>
<span id="cb973-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb973-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Dodge with width 0.1</span></span>
<span id="cb973-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-6" aria-hidden="true" tabindex="-1"></a>posn_d <span class="ot">&lt;-</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.1</span>)</span>
<span id="cb973-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb973-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Jitter-dodge with jitter.width 0.2 and dodge.width 0.1</span></span>
<span id="cb973-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-9" aria-hidden="true" tabindex="-1"></a>posn_jd <span class="ot">&lt;-</span> <span class="fu">position_jitterdodge</span>(<span class="at">jitter.width =</span> <span class="fl">0.2</span>, <span class="at">dodge.width =</span> <span class="fl">0.1</span>)</span>
<span id="cb973-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb973-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plot base: wt vs. fcyl, colored by fam</span></span>
<span id="cb973-12"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-12" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> fcyl, <span class="at">y =</span> wt, <span class="at">color =</span> fam))</span>
<span id="cb973-13"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb973-14"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a point layer</span></span>
<span id="cb973-15"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-15" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam <span class="sc">+</span></span>
<span id="cb973-16"><a href="intermediate-data-visualization-with-ggplot2.html#cb973-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-330-1.png" width="672" /></p>
</div>
<div id="using-position-objects" class="section level4 hasAnchor" number="8.1.3.2">
<h4><span class="header-section-number">8.1.3.2</span> Using position objects<a href="intermediate-data-visualization-with-ggplot2.html#using-position-objects" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb974"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb974-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb974-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add jittering only</span></span>
<span id="cb974-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb974-2" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam <span class="sc">+</span></span>
<span id="cb974-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb974-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> posn_j)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-331-1.png" width="672" /></p>
<div class="sourceCode" id="cb975"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb975-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb975-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add dodging only</span></span>
<span id="cb975-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb975-2" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam <span class="sc">+</span></span>
<span id="cb975-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb975-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> posn_d)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-331-2.png" width="672" /></p>
<div class="sourceCode" id="cb976"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb976-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb976-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add jittering and dodging</span></span>
<span id="cb976-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb976-2" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam <span class="sc">+</span></span>
<span id="cb976-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb976-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> posn_jd)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-331-3.png" width="672" /></p>
</div>
<div id="plotting-variations" class="section level4 hasAnchor" number="8.1.3.3">
<h4><span class="header-section-number">8.1.3.3</span> Plotting variations<a href="intermediate-data-visualization-with-ggplot2.html#plotting-variations" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Ｎow let’s explore <code>stat_summary()</code>.</p>
<p><em>Summary statistics</em> refers to a combination of <em>location</em> (mean or median) and <em>spread</em> (standard deviation or confidence interval).</p>
<p>These metrics are calculated in <code>stat_summary()</code> by passing a function to the <code>fun.data</code> argument. <code>mean_sdl()</code>, calculates multiples of the standard deviation and <code>mean_cl_normal()</code> calculates the t-corrected 95% CI.</p>
<p>You can always assign your own function to the <code>fun.data</code> argument as long as the result is a data frame and the variable names match the aesthetics that you will need for the geom layer.</p>
<p>Arguments to the data function are passed to <code>stat_summary()</code>’s <code>fun.args</code> argument as a <code>list</code>.</p>
<div class="sourceCode" id="cb977"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb977-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-1" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam_jit <span class="ot">&lt;-</span> p_wt_vs_fcyl_by_fam <span class="sc">+</span></span>
<span id="cb977-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> posn_j)</span>
<span id="cb977-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb977-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add error bars representing the standard deviation</span></span>
<span id="cb977-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The default geom for stat_summary() is &quot;pointrange&quot;</span></span>
<span id="cb977-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-6" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam_jit <span class="sc">+</span></span>
<span id="cb977-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a summary stat of std deviation limits</span></span>
<span id="cb977-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb977-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb977-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb977-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> posn_d)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-332-1.png" width="672" /></p>
<div class="sourceCode" id="cb978"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb978-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb978-1" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam_jit <span class="sc">+</span></span>
<span id="cb978-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb978-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Change the geom to be an errorbar</span></span>
<span id="cb978-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb978-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl, </span>
<span id="cb978-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb978-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>), </span>
<span id="cb978-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb978-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> posn_d, </span>
<span id="cb978-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb978-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;errorbar&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-333-1.png" width="672" /></p>
<div class="sourceCode" id="cb979"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb979-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb979-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add a summary stat of 95% confidence limits</span></span>
<span id="cb979-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb979-2" aria-hidden="true" tabindex="-1"></a>p_wt_vs_fcyl_by_fam_jit <span class="sc">+</span></span>
<span id="cb979-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb979-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a summary stat of normal confidence limits</span></span>
<span id="cb979-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb979-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_cl_normal, </span>
<span id="cb979-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb979-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> posn_d)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-334-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="coordinates" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Coordinates<a href="intermediate-data-visualization-with-ggplot2.html#coordinates" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="coordinates-layer" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Coordinates layer<a href="intermediate-data-visualization-with-ggplot2.html#coordinates-layer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Controls plot dimensions</li>
<li><code>coord_</code>: e.g.<code>coord_cartesian()</code></li>
</ul>
<div id="zooming-in" class="section level4 hasAnchor" number="8.2.1.1">
<h4><span class="header-section-number">8.2.1.1</span> Zooming in<a href="intermediate-data-visualization-with-ggplot2.html#zooming-in" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><code>coord_cartesian(xlim = ...)</code></p>
<ul>
<li>Really zooming in using the <code>coord_cartesian</code> function. You can see the zoom because the LOESS curve continues past the data presented, and the models look the same as in the original plot.</li>
</ul></li>
<li><p><code>scale_x_continuous(limits = ...)</code></p>
<ul>
<li>Since the LOESS model is only defined for the points shown, although there is data beyond this region. (because the limits we set in <code>scale_x_continuous</code> were a smaller range than the data and thus values were filtered out.) That’s also why the models look different.</li>
</ul></li>
<li><p><code>xlim(...)</code></p>
<ul>
<li>A quick and dirty alternative is to call <code>xlim</code> as a function itself. It has the same effect.</li>
</ul></li>
</ul>
<table style="width:100%;">
<colgroup>
<col width="24%" />
<col width="24%" />
<col width="26%" />
<col width="24%" />
</colgroup>
<thead>
<tr class="header">
<th>original plot</th>
<th><code>coord_cartesian()</code></th>
<th><code>scale_x_continuous()</code></th>
<th><code>xlim()</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img src="image/coord_original%20plot.png" width="216" /></td>
<td><img src="image/coord_cartesian%20plot.png" /></td>
<td><img src="image/coord_scale_x_continuous%20plot.png" /></td>
<td><img src="image/coord_xlim%20plot.png" /></td>
</tr>
<tr class="even">
<td><strong>outcome</strong></td>
<td>放大原圖的特定區域</td>
<td>改變原圖</td>
<td>改變原圖</td>
</tr>
<tr class="odd">
<td><strong>dataset</strong></td>
<td>no changes to the dataset</td>
<td>change the dataset</td>
<td>change the dataset</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb980"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb980-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb980-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the code, view the plot, then update it</span></span>
<span id="cb980-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb980-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> hp, <span class="at">color =</span> fam)) <span class="sc">+</span></span>
<span id="cb980-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb980-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb980-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb980-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-335-1.png" width="672" /></p>
<p>Using the scale function to zoom in meant that there wasn’t enough data to calculate the trend line, and <code>geom_smooth()</code> failed.</p>
<div class="sourceCode" id="cb982"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb982-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb982-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> hp, <span class="at">color =</span> fam)) <span class="sc">+</span></span>
<span id="cb982-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb982-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb982-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb982-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb982-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb982-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a continuous x scale from 3 to 6</span></span>
<span id="cb982-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb982-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 12 rows containing non-finite values
## (`stat_smooth()`).</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : span too small.  fewer data values than degrees of freedom.</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : at 3.168</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : radius 4e-06</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : all data on boundary of neighborhood. make span bigger</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : pseudoinverse used at 3.168</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : neighborhood radius 0.002</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : reciprocal condition number 1</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : at 3.572</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : radius 4e-06</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : all data on boundary of neighborhood. make span bigger</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : There are other near singularities as well. 4e-06</code></pre>
<pre><code>## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : zero-width neighborhood. make span bigger

## Warning in simpleLoess(y, x, w, span, degree = degree, parametric = parametric,
## : zero-width neighborhood. make span bigger</code></pre>
<pre><code>## Warning: Computation failed in `stat_smooth()`
## Caused by error in `predLoess()`:
## ! NA/NaN/Inf in foreign function call (arg 5)</code></pre>
<pre><code>## Warning: Removed 12 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-336-1.png" width="672" /></p>
<p>When <code>coord_cartesian()</code> was applied, the full dataset was used for the trend calculation.</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb999-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb999-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> hp, <span class="at">color =</span> fam)) <span class="sc">+</span></span>
<span id="cb999-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb999-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb999-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb999-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb999-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb999-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add Cartesian coordinates with x limits from 3 to 6</span></span>
<span id="cb999-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb999-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">6</span>))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and
## formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-337-1.png" width="672" /></p>
</div>
<div id="aspect-ratio" class="section level4 hasAnchor" number="8.2.1.2">
<h4><span class="header-section-number">8.2.1.2</span> Aspect ratio<a href="intermediate-data-visualization-with-ggplot2.html#aspect-ratio" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Function: <code>coord_fixed(ratio = y/x)</code></p>
<ul>
<li>Height-to-width ratio</li>
<li>Watch out for deception!</li>
<li>No universal standard so far</li>
<li>Typically use 1:1 if data is on the same scale</li>
</ul>
<p><strong>Aspect ratio I: 1:1 ratios</strong></p>
<p>We can set the aspect ratio of a plot with <code>coord_fixed()</code>, which uses <code>ratio = 1</code> as a default. A 1:1 aspect ratio is most appropriate when two continuous variables are on the same scale, so it only makes sense that one unit on the plot should be the same physical distance on each axis. This gives a more truthful depiction of the relationship between the two variables since the aspect ratio can change the angle of our smoothing line. This would give an erroneous impression of the data. Of course the underlying linear models don’t change, but our perception can be influenced by the angle drawn.</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1001-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1001-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">color =</span> Species)) <span class="sc">+</span></span>
<span id="cb1001-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1001-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb1001-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1001-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1001-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1001-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fix the coordinate ratio</span></span>
<span id="cb1001-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1001-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-338-1.png" width="672" /></p>
<p><strong>Aspect ratio II: setting ratios</strong></p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1003-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb1003-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-3" aria-hidden="true" tabindex="-1"></a>sunspots.m <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1003-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">index</span>(sunspot.month),</span>
<span id="cb1003-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">value =</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(sunspot.month)<span class="sc">$</span>value)</span>
<span id="cb1003-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-7" aria-hidden="true" tabindex="-1"></a>sun_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(sunspots.m, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb1003-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span>
<span id="cb1003-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1003-10" aria-hidden="true" tabindex="-1"></a>sun_plot</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-339-1.png" width="672" /></p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1004-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix the aspect ratio to 1:1</span></span>
<span id="cb1004-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1004-2" aria-hidden="true" tabindex="-1"></a>sun_plot <span class="sc">+</span></span>
<span id="cb1004-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1004-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()</span></code></pre></div>
<pre><code>## Don&#39;t know how to automatically pick scale
## for object of type &lt;ts&gt;. Defaulting to
## continuous.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-340-1.png" width="672" /></p>
<p>Making a wide plot by calling <code>coord_fixed()</code> with a low <code>ratio</code> is often useful for long time series.</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1006-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the aspect ratio to 1:20</span></span>
<span id="cb1006-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1006-2" aria-hidden="true" tabindex="-1"></a>sun_plot <span class="sc">+</span></span>
<span id="cb1006-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1006-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">20</span>)</span></code></pre></div>
<pre><code>## Don&#39;t know how to automatically pick scale
## for object of type &lt;ts&gt;. Defaulting to
## continuous.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-341-1.png" width="672" /></p>
</div>
<div id="expand-and-clip" class="section level4 hasAnchor" number="8.2.1.3">
<h4><span class="header-section-number">8.2.1.3</span> Expand and clip<a href="intermediate-data-visualization-with-ggplot2.html#expand-and-clip" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>coord_*()</code> layer functions offer two useful arguments that work well together: <code>expand</code> and <code>clip</code>.</p>
<ul>
<li><p><code>expand</code> sets a buffer margin around the plot, so data and axes don’t overlap. Setting <code>expand</code> to <code>0</code> draws the axes to the limits of the data.</p></li>
<li><p><code>clip</code> decides whether plot elements that would lie outside the plot panel are displayed or ignored (“clipped”).</p></li>
</ul>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1008-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1008-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1008-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1008-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1008-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-342-1.png" width="672" /></p>
<div class="sourceCode" id="cb1009"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1009-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1009-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1009-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1009-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1009-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1009-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add Cartesian coordinates with zero expansion</span></span>
<span id="cb1009-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1009-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb1009-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1009-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-342-2.png" width="672" /></p>
<p>Setting <code>expand</code> to <code>0</code> caused points at the edge of the plot panel to be cut off. Set the <code>clip</code> argument to <code>"off"</code> to prevent this.</p>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1010-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb1010-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Turn clipping off</span></span>
<span id="cb1010-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> <span class="dv">0</span>, <span class="at">clip =</span> <span class="st">&quot;off&quot;</span>) <span class="sc">+</span></span>
<span id="cb1010-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb1010-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove axis lines</span></span>
<span id="cb1010-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1010-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-343-1.png" width="672" /></p>
<p>These arguments make clean and accurate plots by not cutting off data.</p>
</div>
</div>
<div id="coordinates-vs.-scales" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Coordinates vs. scales<a href="intermediate-data-visualization-with-ggplot2.html#coordinates-vs.-scales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="log-transforming-scales" class="section level4 hasAnchor" number="8.2.2.1">
<h4><span class="header-section-number">8.2.2.1</span> Log-transforming scales<a href="intermediate-data-visualization-with-ggplot2.html#log-transforming-scales" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Using <code>scale_y_log10()</code> and <code>scale_x_log10()</code> is equivalent to transforming our actual dataset before getting to <code>ggplot2</code>.</p>
<p><img src="image/compare%20direct%20transform%20&amp;%20scale_x_log.png" width="414" /></p></li>
<li><p>Using <code>coord_trans()</code>, setting <code>x = "log10"</code> and/or <code>y = "log10"</code> arguments, transforms the data <em>after</em> statistics have been calculated.</p>
<ul>
<li><p>The plot will look the same as with using <code>scale_*_log10()</code>, but we’ll see the original values on our log10 transformed axes.</p>
<p><img src="image/Compare%20scale_x_log10%20&amp;%20coord_trans.png" width="445" /></p></li>
</ul></li>
</ul>
<p>Let’s see this in action with positively skewed data - the brain and body weight of mammals from the <code>msleep</code> dataset.</p>
<div class="sourceCode" id="cb1011"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1011-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1011-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(msleep)</span></code></pre></div>
<pre><code>## tibble [83 × 11] (S3: tbl_df/tbl/data.frame)
##  $ name        : chr [1:83] &quot;Cheetah&quot; &quot;Owl monkey&quot; &quot;Mountain beaver&quot; &quot;Greater short-tailed shrew&quot; ...
##  $ genus       : chr [1:83] &quot;Acinonyx&quot; &quot;Aotus&quot; &quot;Aplodontia&quot; &quot;Blarina&quot; ...
##  $ vore        : chr [1:83] &quot;carni&quot; &quot;omni&quot; &quot;herbi&quot; &quot;omni&quot; ...
##  $ order       : chr [1:83] &quot;Carnivora&quot; &quot;Primates&quot; &quot;Rodentia&quot; &quot;Soricomorpha&quot; ...
##  $ conservation: chr [1:83] &quot;lc&quot; NA &quot;nt&quot; &quot;lc&quot; ...
##  $ sleep_total : num [1:83] 12.1 17 14.4 14.9 4 14.4 8.7 7 10.1 3 ...
##  $ sleep_rem   : num [1:83] NA 1.8 2.4 2.3 0.7 2.2 1.4 NA 2.9 NA ...
##  $ sleep_cycle : num [1:83] NA NA NA 0.133 0.667 ...
##  $ awake       : num [1:83] 11.9 7 9.6 9.1 20 9.6 15.3 17 13.9 21 ...
##  $ brainwt     : num [1:83] NA 0.0155 NA 0.00029 0.423 NA NA NA 0.07 0.0982 ...
##  $ bodywt      : num [1:83] 50 0.48 1.35 0.019 600 ...</code></pre>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1013-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1013-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Produce a scatter plot of brainwt vs. bodywt</span></span>
<span id="cb1013-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1013-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(bodywt, brainwt)) <span class="sc">+</span></span>
<span id="cb1013-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1013-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1013-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1013-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Raw Values&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 27 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-345-1.png" width="672" /></p>
<div class="sourceCode" id="cb1015"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1015-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1015-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add scale_*_*() functions</span></span>
<span id="cb1015-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1015-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(bodywt, brainwt)) <span class="sc">+</span></span>
<span id="cb1015-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1015-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1015-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1015-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb1015-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1015-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb1015-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1015-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Scale_ functions&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 27 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-345-2.png" width="672" /></p>
<div class="sourceCode" id="cb1017"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1017-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1017-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a log10 coordinate system transformation</span></span>
<span id="cb1017-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1017-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(bodywt, brainwt)) <span class="sc">+</span></span>
<span id="cb1017-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1017-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1017-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1017-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_trans</span>(<span class="at">x =</span> <span class="st">&quot;log10&quot;</span>, <span class="at">y =</span> <span class="st">&quot;log10&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 27 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-345-3.png" width="672" /></p>
</div>
<div id="adding-stats-to-transformed-scales" class="section level4 hasAnchor" number="8.2.2.2">
<h4><span class="header-section-number">8.2.2.2</span> Adding stats to transformed scales<a href="intermediate-data-visualization-with-ggplot2.html#adding-stats-to-transformed-scales" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Remember that statistics are calculated on the untransformed data. A linear model may end up looking not-so-linear after an <code>coord_trans</code> axis transformation.</p>
<div class="sourceCode" id="cb1019"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1019-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with a scale_*_*() function:</span></span>
<span id="cb1019-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(bodywt, brainwt)) <span class="sc">+</span></span>
<span id="cb1019-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1019-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1019-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a log10 x scale</span></span>
<span id="cb1019-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb1019-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a log10 y scale</span></span>
<span id="cb1019-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb1019-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1019-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Scale functions&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 27 rows containing non-finite values
## (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 27 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-346-1.png" width="672" /></p>
<div class="sourceCode" id="cb1023"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1023-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with transformed coordinates</span></span>
<span id="cb1023-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(bodywt, brainwt)) <span class="sc">+</span></span>
<span id="cb1023-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1023-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1023-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a log10 coordinate transformation for x and y axes</span></span>
<span id="cb1023-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_trans</span>(<span class="at">x =</span> <span class="st">&quot;log10&quot;</span>, <span class="at">y =</span> <span class="st">&quot;log10&quot;</span>) <span class="sc">+</span></span>
<span id="cb1023-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1023-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Coord_trans function&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 27 rows containing non-finite values
## (`stat_smooth()`).
## Removed 27 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-346-2.png" width="672" /></p>
<p>The smooth trend line is calculated after scale transformations but not coordinate transformations, so the second plot doesn’t make sense. Be careful when using the <code>coord_trans()</code> function!</p>
</div>
</div>
<div id="double-flipped-axes" class="section level3 hasAnchor" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Double &amp; flipped axes<a href="intermediate-data-visualization-with-ggplot2.html#double-flipped-axes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="useful-double-axes" class="section level4 hasAnchor" number="8.2.3.1">
<h4><span class="header-section-number">8.2.3.1</span> Useful double axes<a href="intermediate-data-visualization-with-ggplot2.html#useful-double-axes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Double x or y axes</p>
<ul>
<li>Add raw and transformed values. A scale that is unintuitive for many people can be made easier by adding a transformation as a double axis.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb1026"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1026-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1026-1" aria-hidden="true" tabindex="-1"></a>airquality <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/airquality.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 153 Columns: 7
## ── Column specification ──────────────────────
## Delimiter: &quot;,&quot;
## chr (1): Date
## dbl (6): Ozone, Solar.R, Wind, Temp, Month, Day
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb1028"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1028-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1028-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(airquality)</span></code></pre></div>
<pre><code>## spc_tbl_ [153 × 7] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ Ozone  : num [1:153] 41 36 12 18 NA 28 23 19 8 NA ...
##  $ Solar.R: num [1:153] 190 118 149 313 NA NA 299 99 19 194 ...
##  $ Wind   : num [1:153] 7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...
##  $ Temp   : num [1:153] 67 72 74 62 56 66 65 59 61 69 ...
##  $ Month  : num [1:153] 5 5 5 5 5 5 5 5 5 5 ...
##  $ Day    : num [1:153] 1 2 3 4 5 6 7 8 9 10 ...
##  $ Date   : chr [1:153] &quot;5/1/1973&quot; &quot;5/2/1973&quot; &quot;5/3/1973&quot; &quot;5/4/1973&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   Ozone = col_double(),
##   ..   Solar.R = col_double(),
##   ..   Wind = col_double(),
##   ..   Temp = col_double(),
##   ..   Month = col_double(),
##   ..   Day = col_double(),
##   ..   Date = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb1030"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1030-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1030-1" aria-hidden="true" tabindex="-1"></a>airquality<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(airquality<span class="sc">$</span>Date, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb1031"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1031-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1031-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using airquality, plot Temp vs. Date</span></span>
<span id="cb1031-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1031-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(airquality, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Temp)) <span class="sc">+</span></span>
<span id="cb1031-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1031-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a line layer</span></span>
<span id="cb1031-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1031-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb1031-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1031-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Date (1973)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Fahrenheit&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-348-1.png" width="672" /></p>
<div class="sourceCode" id="cb1032"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1032-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define breaks (Fahrenheit)</span></span>
<span id="cb1032-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-2" aria-hidden="true" tabindex="-1"></a>y_breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">59</span>, <span class="dv">68</span>, <span class="dv">77</span>, <span class="dv">86</span>, <span class="dv">95</span>, <span class="dv">104</span>)</span>
<span id="cb1032-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert y_breaks from Fahrenheit to Celsius</span></span>
<span id="cb1032-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-5" aria-hidden="true" tabindex="-1"></a>y_labels <span class="ot">&lt;-</span> (y_breaks <span class="sc">-</span> <span class="dv">32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span></span>
<span id="cb1032-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a secondary x-axis</span></span>
<span id="cb1032-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-8" aria-hidden="true" tabindex="-1"></a>secondary_y_axis <span class="ot">&lt;-</span> <span class="fu">sec_axis</span>(</span>
<span id="cb1032-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use identity transformation</span></span>
<span id="cb1032-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">trans =</span> identity,</span>
<span id="cb1032-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;Celsius&quot;</span>,</span>
<span id="cb1032-12"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define breaks and labels as above</span></span>
<span id="cb1032-13"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> y_breaks,</span>
<span id="cb1032-14"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> y_labels</span>
<span id="cb1032-15"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1032-16"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-17"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the object</span></span>
<span id="cb1032-18"><a href="intermediate-data-visualization-with-ggplot2.html#cb1032-18" aria-hidden="true" tabindex="-1"></a>secondary_y_axis</span></code></pre></div>
<pre><code>## &lt;ggproto object: Class AxisSecondary, gg&gt;
##     axis: NULL
##     break_info: function
##     breaks: 59 68 77 86 95 104
##     create_scale: function
##     detail: 1000
##     empty: function
##     guide: waiver
##     init: function
##     labels: 15 20 25 30 35 40
##     make_title: function
##     mono_test: function
##     name: Celsius
##     trans: function
##     transform_range: function
##     super:  &lt;ggproto object: Class AxisSecondary, gg&gt;</code></pre>
<div class="sourceCode" id="cb1034"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1034-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1034-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the plot</span></span>
<span id="cb1034-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1034-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(airquality, <span class="fu">aes</span>(Date, Temp)) <span class="sc">+</span></span>
<span id="cb1034-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1034-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb1034-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1034-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the secondary y-axis </span></span>
<span id="cb1034-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1034-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">sec.axis =</span> secondary_y_axis) <span class="sc">+</span></span>
<span id="cb1034-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1034-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Date (1973)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Fahrenheit&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-350-1.png" width="672" /></p>
<p>Double axes are most useful when you want to display the same value in two differnt units.</p>
</div>
<div id="flipping-axes" class="section level4 hasAnchor" number="8.2.3.2">
<h4><span class="header-section-number">8.2.3.2</span> Flipping axes<a href="intermediate-data-visualization-with-ggplot2.html#flipping-axes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><em>Flipping</em> axes means to reverse the variables mapped onto the <code>x</code> and <code>y</code> aesthetics. We can just change the mappings in <code>aes()</code>, but we can also use the <code>coord_flip()</code> layer function.</p>
<p>There are two reasons to use this function:</p>
<ul>
<li><p>We want a vertical geom to be horizontal, or</p></li>
<li><p>We’ve completed a long series of plotting functions and want to flip it without having to rewrite all our commands.</p></li>
</ul>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1035-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1035-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot fcyl bars, filled by fam</span></span>
<span id="cb1035-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1035-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb1035-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1035-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Place bars side by side</span></span>
<span id="cb1035-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1035-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-351-1.png" width="672" /></p>
<p>To get horizontal bars, add a <code>coord_flip()</code> function. Horizontal bars are especially useful when the axis labels are long.</p>
<div class="sourceCode" id="cb1036"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1036-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1036-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot fcyl bars, filled by fam</span></span>
<span id="cb1036-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1036-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb1036-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1036-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Place bars side by side</span></span>
<span id="cb1036-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1036-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb1036-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1036-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-352-1.png" width="672" /></p>
<div class="sourceCode" id="cb1037"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1037-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1037-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(fcyl, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb1037-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1037-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set a dodge width of 0.5 for partially overlapping bars</span></span>
<span id="cb1037-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1037-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb1037-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1037-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-353-1.png" width="672" /></p>
<p>In this exercise, we’ll continue to use the <code>coord_flip()</code> layer function to reverse the variables mapped onto the <code>x</code> and <code>y</code> aesthetics.</p>
<div class="sourceCode" id="cb1038"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1038-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb1038-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">car =</span> <span class="fu">row.names</span>(mtcars))</span>
<span id="cb1038-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1038-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot of wt vs. car</span></span>
<span id="cb1038-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> car, <span class="at">y =</span> wt)) <span class="sc">+</span></span>
<span id="cb1038-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a point layer</span></span>
<span id="cb1038-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1038-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1038-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;car&quot;</span>, <span class="at">y =</span> <span class="st">&quot;weight&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-354-1.png" width="672" /></p>
<p>It would be easier to read if <code>car</code> was mapped to the <code>y</code> axis. Flip the coordinates. Notice that the labels also get flipped!</p>
<div class="sourceCode" id="cb1039"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1039-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1039-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Flip the axes to set car to the y axis</span></span>
<span id="cb1039-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1039-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(car, wt)) <span class="sc">+</span></span>
<span id="cb1039-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1039-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1039-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1039-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;car&quot;</span>, <span class="at">y =</span> <span class="st">&quot;weight&quot;</span>) <span class="sc">+</span></span>
<span id="cb1039-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1039-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-355-1.png" width="672" /></p>
</div>
</div>
<div id="polar-coordinates" class="section level3 hasAnchor" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> Polar coordinates<a href="intermediate-data-visualization-with-ggplot2.html#polar-coordinates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Cartesian (2d)
<ul>
<li>Orthogonal x and y-axes</li>
</ul></li>
<li>Maps
<ul>
<li>Many projections</li>
</ul></li>
<li>Polar
<ul>
<li>Transformed Cartesian space</li>
</ul></li>
</ul>
<div id="pie-charts" class="section level4 hasAnchor" number="8.2.4.1">
<h4><span class="header-section-number">8.2.4.1</span> Pie charts<a href="intermediate-data-visualization-with-ggplot2.html#pie-charts" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>coord_polar()</code> function converts a planar x-y Cartesian plot to polar coordinates. This can be useful if you are producing pie charts.</p>
<p>We can imagine two forms for pie charts - the typical filled circle, or a colored ring.</p>
<div class="sourceCode" id="cb1040"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1040-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1040-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping the angle to the y variable by setting theta to &quot;y&quot;</span></span>
<span id="cb1040-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1040-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">fill =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb1040-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1040-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb1040-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1040-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a polar coordinate system</span></span>
<span id="cb1040-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1040-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-356-1.png" width="672" /></p>
<div class="sourceCode" id="cb1041"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1041-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1041-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">fill =</span> fcyl)) <span class="sc">+</span></span>
<span id="cb1041-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1041-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reduce the bar width to 0.1</span></span>
<span id="cb1041-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1041-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb1041-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1041-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>) <span class="sc">+</span></span>
<span id="cb1041-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1041-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a continuous x scale from 0.5 to 1.5</span></span>
<span id="cb1041-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1041-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">1.5</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-357-1.png" width="672" /></p>
<p>Polar coordinates are particularly useful if you are dealing with a cycle, like yearly data, compass direction or time of day.</p>
</div>
<div id="wind-rose-plots" class="section level4 hasAnchor" number="8.2.4.2">
<h4><span class="header-section-number">8.2.4.2</span> Wind rose plots<a href="intermediate-data-visualization-with-ggplot2.html#wind-rose-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>wind</code> dataset contains hourly measurements for windspeed (<code>ws</code>) and direction (<code>wd</code>) from London in 2003.</p>
<div class="sourceCode" id="cb1042"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1042-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1042-1" aria-hidden="true" tabindex="-1"></a>wind <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;data/wind.txt&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="at">header =</span> T)</span>
<span id="cb1042-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1042-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wind)</span></code></pre></div>
<pre><code>##            date    ws  wd
## 1 1/1/2003 0:00 4 - 6 SSE
## 2 1/1/2003 1:00 4 - 6  SE
## 3 1/1/2003 2:00 2 - 4  SE
## 4 1/1/2003 3:00 4 - 6  SE
## 5 1/1/2003 4:00 4 - 6  SE
## 6 1/1/2003 5:00 4 - 6  SE</code></pre>
<div class="sourceCode" id="cb1044"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1044-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1044-1" aria-hidden="true" tabindex="-1"></a>wind <span class="ot">&lt;-</span> wind <span class="sc">%&gt;%</span></span>
<span id="cb1044-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1044-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.POSIXct</span>(date, <span class="at">format =</span> <span class="st">&quot;%m/%d/%Y %H:%M&quot;</span>),</span>
<span id="cb1044-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1044-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">ws =</span> <span class="fu">factor</span>(ws),</span>
<span id="cb1044-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1044-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">wd =</span> <span class="fu">factor</span>(wd))</span>
<span id="cb1044-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1044-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(wind)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    8753 obs. of  3 variables:
##  $ date: POSIXct, format: &quot;2003-01-01 00:00:00&quot; &quot;2003-01-01 01:00:00&quot; ...
##  $ ws  : Factor w/ 7 levels &quot;0 - 2&quot;,&quot;10 - 12&quot;,..: 5 5 4 5 5 5 5 5 4 4 ...
##  $ wd  : Factor w/ 16 levels &quot;E&quot;,&quot;ENE&quot;,&quot;ESE&quot;,..: 11 10 10 10 10 10 11 11 11 11 ...</code></pre>
<p>Use a <code>geom_bar()</code> layer, since we want to aggregate over all date values, and set the <code>width</code> argument to <code>1</code>, to eliminate any spaces between the bars.</p>
<div class="sourceCode" id="cb1046"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1046-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1046-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using wind, plot wd filled by ws</span></span>
<span id="cb1046-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1046-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(wind, <span class="fu">aes</span>(<span class="at">x =</span> wd, <span class="at">fill =</span> ws)) <span class="sc">+</span></span>
<span id="cb1046-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1046-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a bar layer with width 1</span></span>
<span id="cb1046-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1046-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-359-1.png" width="672" /></p>
<div class="sourceCode" id="cb1047"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1047-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1047-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to polar coordinates:</span></span>
<span id="cb1047-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1047-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(wind, <span class="fu">aes</span>(wd, <span class="at">fill =</span> ws)) <span class="sc">+</span></span>
<span id="cb1047-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1047-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1047-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1047-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-360-1.png" width="672" /></p>
<p>Set the <code>start</code> argument to position North at the top of the plot.</p>
<div class="sourceCode" id="cb1048"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1048-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1048-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to polar coordinates:</span></span>
<span id="cb1048-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1048-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(wind, <span class="fu">aes</span>(wd, <span class="at">fill =</span> ws)) <span class="sc">+</span></span>
<span id="cb1048-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1048-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1048-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1048-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="sc">-</span>pi<span class="sc">/</span><span class="fl">2.3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-361-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="facets" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Facets<a href="intermediate-data-visualization-with-ggplot2.html#facets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="the-facets-layer" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> The facets layer<a href="intermediate-data-visualization-with-ggplot2.html#the-facets-layer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Faceting splits the data up into groups, according to a categorical variable, then plots each group in its own panel. <code>ggplot2</code> will coerce variables to factors when used in facets.</p>
<div id="basics" class="section level4 hasAnchor" number="8.3.1.1">
<h4><span class="header-section-number">8.3.1.1</span> Basics<a href="intermediate-data-visualization-with-ggplot2.html#basics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><code>facet_grid()</code></p>
<ul>
<li>For splitting the data by one or two categorical variables, <code>facet_grid()</code> is best.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb1049"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1049-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example, muti cols</span></span>
<span id="cb1049-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(variable_name))</span>
<span id="cb1049-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1049-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Example, muti rows</span></span>
<span id="cb1049-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-5" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(variable_name)</span>
<span id="cb1049-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1049-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Both cols and rows by different variables</span></span>
<span id="cb1049-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1049-8" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(A), <span class="at">cols =</span> <span class="fu">vars</span>(B))</span></code></pre></div>
<div class="sourceCode" id="cb1050"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1050-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1050-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb1050-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1050-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1050-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1050-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet rows by am</span></span>
<span id="cb1050-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1050-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(am))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-362-1.png" width="672" /></p>
<div class="sourceCode" id="cb1051"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1051-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1051-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb1051-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1051-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1051-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1051-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet columns by cyl</span></span>
<span id="cb1051-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1051-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-363-1.png" width="672" /></p>
<div class="sourceCode" id="cb1052"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1052-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1052-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb1052-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1052-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1052-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1052-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet rows by am and columns by cyl</span></span>
<span id="cb1052-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1052-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(am), <span class="at">cols =</span> <span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-364-1.png" width="672" /></p>
</div>
<div id="many-variables" class="section level4 hasAnchor" number="8.3.1.2">
<h4><span class="header-section-number">8.3.1.2</span> Many variables<a href="intermediate-data-visualization-with-ggplot2.html#many-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Two variables are mapped onto the color aesthetic, using hue and lightness. To achieve this we combined <code>fcyl</code> and <code>fam</code> into a single interaction variable, <code>fcyl_fam</code>. This will allow us to take advantage of Color Brewer’s Paired color palette.</p>
<div class="sourceCode" id="cb1053"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1053-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1053-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb1053-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1053-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fcyl_fam =</span> <span class="fu">interaction</span>(fcyl, fam, <span class="at">sep =</span> <span class="st">&quot;:&quot;</span>))</span>
<span id="cb1053-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1053-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1053-4" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>fcyl_fam</span></code></pre></div>
<pre><code>##  [1] 6:1 6:1 4:1 6:0 8:0 6:0 8:0 4:0 4:0 6:0 6:0 8:0 8:0 8:0 8:0 8:0 8:0 4:1 4:1
## [20] 4:1 4:0 8:0 8:0 8:0 8:0 4:1 4:1 4:1 8:1 6:1 8:1 4:1
## Levels: 4:0 6:0 8:0 4:1 6:1 8:1</code></pre>
<div class="sourceCode" id="cb1055"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1055-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1055-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Color the points by fcyl_fam</span></span>
<span id="cb1055-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1055-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> fcyl_fam)) <span class="sc">+</span></span>
<span id="cb1055-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1055-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1055-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1055-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use a paired color palette</span></span>
<span id="cb1055-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1055-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-366-1.png" width="672" /></p>
<div class="sourceCode" id="cb1056"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1056-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1056-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the plot to map disp to size</span></span>
<span id="cb1056-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1056-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> fcyl_fam, <span class="at">size =</span> disp)) <span class="sc">+</span></span>
<span id="cb1056-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1056-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1056-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1056-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-367-1.png" width="672" /></p>
<div class="sourceCode" id="cb1057"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1057-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1057-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the plot</span></span>
<span id="cb1057-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1057-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg, <span class="at">color =</span> fcyl_fam, <span class="at">size =</span> disp)) <span class="sc">+</span></span>
<span id="cb1057-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1057-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1057-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1057-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>) <span class="sc">+</span></span>
<span id="cb1057-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1057-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Grid facet on gear and vs</span></span>
<span id="cb1057-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1057-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(gear), <span class="at">cols =</span> <span class="fu">vars</span>(vs))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-368-1.png" width="672" /></p>
</div>
<div id="formula-notation" class="section level4 hasAnchor" number="8.3.1.3">
<h4><span class="header-section-number">8.3.1.3</span> Formula notation<a href="intermediate-data-visualization-with-ggplot2.html#formula-notation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><code>lm</code> function</p>
<ul>
<li>Everything on the left of the tilde (<code>~</code>) will split according to rows, and everything on the right will split according to columns.</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th>Modern notation</th>
<th>Formula notation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>facet_grid(rows = vars(A))</code></td>
<td><code>facet_grid(A ~ .)</code></td>
</tr>
<tr class="even">
<td><code>facet_grid(cols = vars(B))</code></td>
<td><code>facet_grid(. ~ B)</code></td>
</tr>
<tr class="odd">
<td><code>facet_grid(rows = vars(A), cols = vars(B))</code></td>
<td><code>facet_grid(A ~ B)</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1058"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1058-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1058-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb1058-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1058-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1058-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1058-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet rows by am using formula notation</span></span>
<span id="cb1058-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1058-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(am <span class="sc">~</span> .)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-369-1.png" width="672" /></p>
<div class="sourceCode" id="cb1059"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1059-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1059-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb1059-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1059-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1059-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1059-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet columns by cyl using formula notation</span></span>
<span id="cb1059-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1059-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> cyl)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-369-2.png" width="672" /></p>
<div class="sourceCode" id="cb1060"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1060-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1060-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span> </span>
<span id="cb1060-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1060-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1060-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1060-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet rows by am and columns by cyl using formula notation</span></span>
<span id="cb1060-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1060-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(am <span class="sc">~</span> cyl)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-369-3.png" width="672" /></p>
</div>
</div>
<div id="facet-labels-order" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Facet labels &amp; order<a href="intermediate-data-visualization-with-ggplot2.html#facet-labels-order" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Two typical problems with facets:</p>
<ul>
<li>Poorly labeled (e.g. non descriptive)</li>
<li>Wrong or inappropriate order</li>
</ul>
<p>Solutions:</p>
<ul>
<li><p>Easy: Add labels in ggplot</p>
<ul>
<li><p>Argument in the <code>facet</code> layer:</p>
<ol style="list-style-type: decimal">
<li><p><code>labeller = label_value</code>: default, displays only the value</p></li>
<li><p><code>labeller = label_both</code>: displays both the value and the variable name</p></li>
<li><p><code>labeller = label_context</code>: displays only the values or both the values and variables depending on whether multiple factors are faceted</p></li>
</ol></li>
</ul></li>
<li><p>Better: Relabel and rearrange factor variables in your dataframe (assign proper labels in your original data <em>before</em> plotting).</p>
<ul>
<li><p>Argument:</p>
<ol style="list-style-type: decimal">
<li><p><code>fct_recode()</code>: relabeling and reordering factors</p></li>
<li><p><code>fct_relevel()</code>: change order of levels</p></li>
</ol></li>
</ul></li>
</ul>
<div id="labelling-facets" class="section level4 hasAnchor" number="8.3.2.1">
<h4><span class="header-section-number">8.3.2.1</span> Labelling facets<a href="intermediate-data-visualization-with-ggplot2.html#labelling-facets" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1061"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1061-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1061-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot wt by mpg</span></span>
<span id="cb1061-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1061-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1061-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1061-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1061-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1061-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The default is label_value</span></span>
<span id="cb1061-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1061-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-370-1.png" width="672" /></p>
<div class="sourceCode" id="cb1062"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1062-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1062-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot wt by mpg</span></span>
<span id="cb1062-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1062-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1062-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1062-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1062-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1062-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Displaying both the values and the variables</span></span>
<span id="cb1062-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1062-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl), <span class="at">labeller =</span> label_both)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-370-2.png" width="672" /></p>
<div class="sourceCode" id="cb1063"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1063-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1063-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot wt by mpg</span></span>
<span id="cb1063-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1063-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1063-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1063-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1063-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1063-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Label context</span></span>
<span id="cb1063-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1063-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl), <span class="at">labeller =</span> label_context)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-370-3.png" width="672" /></p>
<div class="sourceCode" id="cb1064"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1064-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1064-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot wt by mpg</span></span>
<span id="cb1064-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1064-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1064-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1064-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1064-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1064-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Two variables</span></span>
<span id="cb1064-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1064-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(vs, cyl), <span class="at">labeller =</span> label_context)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-370-4.png" width="672" /></p>
</div>
<div id="setting-order" class="section level4 hasAnchor" number="8.3.2.2">
<h4><span class="header-section-number">8.3.2.2</span> Setting order<a href="intermediate-data-visualization-with-ggplot2.html#setting-order" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you want to change the order of your facets, it’s best to properly define your factor variables before plotting.</p>
<p>Let’s see this in action with the mtcars transmission variable am. In this case, <code>0</code> = <code>"automatic"</code> and <code>1</code> = <code>"manual"</code>.</p>
<p>Here, we’ll make <code>am</code> a factor variable and relabel the numbers to proper names. The default order is alphabetical.</p>
<div class="sourceCode" id="cb1065"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1065-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1065-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make factor, set proper labels explictly</span></span>
<span id="cb1065-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1065-2" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>fam <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>am, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">0</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;automatic&quot;</span>,</span>
<span id="cb1065-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1065-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;manual&quot;</span>))</span>
<span id="cb1065-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1065-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1065-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1065-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Check default level</span></span>
<span id="cb1065-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1065-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars<span class="sc">$</span>fam)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;automatic&quot;,&quot;manual&quot;: 2 2 2 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb1067"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1067-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1067-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Default order is alphabetical</span></span>
<span id="cb1067-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1067-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1067-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1067-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1067-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1067-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(fam))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-371-1.png" width="672" /></p>
<div class="sourceCode" id="cb1068"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1068-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make factor, set proper labels explictly, and</span></span>
<span id="cb1068-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-2" aria-hidden="true" tabindex="-1"></a><span class="co"># manually set the label order</span></span>
<span id="cb1068-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-3" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>fam <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>am,</span>
<span id="cb1068-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb1068-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;manual&quot;</span>, <span class="st">&quot;automatic&quot;</span>))</span>
<span id="cb1068-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check level changed</span></span>
<span id="cb1068-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1068-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars<span class="sc">$</span>fam)</span></code></pre></div>
<pre><code>##  Factor w/ 2 levels &quot;manual&quot;,&quot;automatic&quot;: 1 1 1 2 2 2 2 2 2 2 ...</code></pre>
<div class="sourceCode" id="cb1070"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1070-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1070-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View again</span></span>
<span id="cb1070-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1070-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1070-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1070-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1070-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1070-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(fam))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-372-1.png" width="672" /></p>
</div>
</div>
<div id="facet-plotting-spaces" class="section level3 hasAnchor" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> Facet plotting spaces<a href="intermediate-data-visualization-with-ggplot2.html#facet-plotting-spaces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Shared scales make it easy to compare between facets, but can be confusing if the data ranges are very different. In that case, used free scales.</p>
<div id="continuous-variables-plotting-spaces" class="section level4 hasAnchor" number="8.3.3.1">
<h4><span class="header-section-number">8.3.3.1</span> Continuous variables plotting spaces<a href="intermediate-data-visualization-with-ggplot2.html#continuous-variables-plotting-spaces" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>By default every facet of a plot has the same axes. If the data ranges vary wildly between facets, it can be clearer if each facet has its own scale. This is achieved with the <code>scales</code> argument to <code>facet_grid()</code>.</p>
<ul>
<li><p><code>"fixed"</code> (default): axes are shared between facets.</p></li>
<li><p><code>free</code>: each facet has its own axes.</p></li>
<li><p><code>free_x</code>: each facet has its own x-axis, but the y-axis is shared.</p></li>
<li><p><code>free_y</code>: each facet has its own y-axis, but the x-axis is shared.</p></li>
</ul>
<p>When faceting by columns, <code>"free_y"</code> has no effect, but we can adjust the x-axis. In contrast, when faceting by rows, <code>"free_x"</code> has no effect, but we can adjust the y-axis.</p>
<div class="sourceCode" id="cb1071"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1071-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1071-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shared scales</span></span>
<span id="cb1071-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1071-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1071-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1071-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb1071-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1071-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet columns by cyl </span></span>
<span id="cb1071-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1071-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-373-1.png" width="672" /></p>
<div class="sourceCode" id="cb1072"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1072-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1072-1" aria-hidden="true" tabindex="-1"></a><span class="co"># X axis values are different between variables - free_x</span></span>
<span id="cb1072-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1072-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1072-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1072-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb1072-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1072-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the faceting to free the x-axis scales</span></span>
<span id="cb1072-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1072-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl),</span>
<span id="cb1072-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1072-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">scales =</span> <span class="st">&quot;free_x&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-374-1.png" width="672" /></p>
<div class="sourceCode" id="cb1073"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1073-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1073-1" aria-hidden="true" tabindex="-1"></a><span class="co"># y axis values are different between variables - free_y</span></span>
<span id="cb1073-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1073-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb1073-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1073-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb1073-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1073-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Swap cols for rows; free the y-axis scales</span></span>
<span id="cb1073-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1073-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(cyl), <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-375-1.png" width="672" /></p>
</div>
<div id="categorical-variables-plotting-spaces" class="section level4 hasAnchor" number="8.3.3.2">
<h4><span class="header-section-number">8.3.3.2</span> Categorical variables plotting spaces<a href="intermediate-data-visualization-with-ggplot2.html#categorical-variables-plotting-spaces" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When you have a categorical variable with many levels which are not all present in each sub-group of another variable, it’s usually desirable to drop the unused levels.</p>
<p>By default, each facet of a plot is the same size. This behavior can be changed with the <code>spaces</code> argument, which works in the same way as <code>scales</code>: <code>"free_x"</code> allows different sized facets on the x-axis, <code>"free_y"</code>, allows different sized facets on the y-axis, <code>"free"</code> allows different sizes in both directions.</p>
<div class="sourceCode" id="cb1074"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1074-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1074-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> mpg, <span class="at">y =</span> car, <span class="at">color =</span> fam)) <span class="sc">+</span></span>
<span id="cb1074-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1074-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1074-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1074-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet rows by gear</span></span>
<span id="cb1074-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1074-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(gear))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-376-1.png" width="672" /></p>
<p>Notice that <em>every</em> car is listed in <em>every</em> facet, resulting in many lines without data.</p>
<p>To remove blank lines, set the <code>scales</code> and <code>space</code> arguments in <code>facet_grid()</code> to <code>free_y</code>. Freeing the y-scale to remove blank lines helps focus attention on the actual data present.</p>
<div class="sourceCode" id="cb1075"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1075-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1075-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> mpg, <span class="at">y =</span> car, <span class="at">color =</span> fam)) <span class="sc">+</span></span>
<span id="cb1075-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1075-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1075-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1075-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Free the y scales and space</span></span>
<span id="cb1075-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1075-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(gear),</span>
<span id="cb1075-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1075-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span><span class="st">&quot;free_y&quot;</span>,</span>
<span id="cb1075-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1075-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">space =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-377-1.png" width="672" /></p>
</div>
</div>
<div id="facet-wrap-margins" class="section level3 hasAnchor" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> Facet wrap &amp; margins<a href="intermediate-data-visualization-with-ggplot2.html#facet-wrap-margins" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Using <code>facet_wrap()</code></p>
<ol style="list-style-type: decimal">
<li><p>When you want both x and y axes to be free on every individual plot</p>
<ul>
<li>i.e. Not just per row or column as per <code>facet_grid()</code></li>
</ul></li>
<li><p>When your categorical (factor) variable has many groups (levels)</p>
<ul>
<li><p>i.e. too many sub plots for column or row-wise faceting</p></li>
<li><p>A more typical scenario</p></li>
</ul></li>
</ol>
<div id="wrapping-for-many-levels" class="section level4 hasAnchor" number="8.3.4.1">
<h4><span class="header-section-number">8.3.4.1</span> Wrapping for many levels<a href="intermediate-data-visualization-with-ggplot2.html#wrapping-for-many-levels" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>facet_grid()</code> is fantastic for categorical variables with a small number of levels. Although it is possible to facet variables with many levels, the resulting plot will be very wide or very tall, which can make it difficult to view.</p>
<p>The solution is to use <code>facet_wrap()</code> which separates levels along one axis but wraps all the subsets across a given number of rows or columns.</p>
<div class="sourceCode" id="cb1076"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1076-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1076-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb1076-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1076-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1076-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1076-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create facets, wrapping by year, using vars()</span></span>
<span id="cb1076-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1076-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(year))</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-378-1.png" width="672" /></p>
<div class="sourceCode" id="cb1078"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1078-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1078-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb1078-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1078-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1078-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1078-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create facets, wrapping by year, using a formula</span></span>
<span id="cb1078-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1078-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-379-1.png" width="672" /></p>
<div class="sourceCode" id="cb1080"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1080-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1080-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Vocab, <span class="fu">aes</span>(<span class="at">x =</span> education, <span class="at">y =</span> vocabulary)) <span class="sc">+</span></span>
<span id="cb1080-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1080-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1080-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1080-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the facet layout, using 8 columns</span></span>
<span id="cb1080-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1080-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> year, <span class="at">ncol =</span> <span class="dv">8</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-380-1.png" width="672" /></p>
</div>
<div id="margin-plots" class="section level4 hasAnchor" number="8.3.4.2">
<h4><span class="header-section-number">8.3.4.2</span> Margin plots<a href="intermediate-data-visualization-with-ggplot2.html#margin-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Facets are great for seeing subsets in a variable, but sometimes you want to see <em>both</em> those subsets <em>and</em> all values in a variable.</p>
<p>Here, the <code>margins</code> argument to <code>facet_grid()</code> is your friend.</p>
<ul>
<li><p><code>FALSE</code> (default): no margins.</p></li>
<li><p><code>TRUE</code>: add margins to every variable being faceted by.</p></li>
<li><p><code>c("variable1", "variable2")</code>: only add margins to the variables listed.</p></li>
</ul>
<div class="sourceCode" id="cb1082"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1082-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert vs to categorical variable fvs</span></span>
<span id="cb1082-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-2" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>fvs <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>vs, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">0</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;V-shaped&quot;</span>,</span>
<span id="cb1082-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;straight&quot;</span>))</span>
<span id="cb1082-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1082-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span> </span>
<span id="cb1082-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1082-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet rows by fvs and cols by fam</span></span>
<span id="cb1082-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(fvs, fam), </span>
<span id="cb1082-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1082-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">cols =</span> <span class="fu">vars</span>(gear))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-381-1.png" width="672" /></p>
<p>Add all possible margins to the plot.</p>
<div class="sourceCode" id="cb1083"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1083-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1083-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span> </span>
<span id="cb1083-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1083-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1083-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1083-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the facets to add margins</span></span>
<span id="cb1083-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1083-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(fvs, fam), </span>
<span id="cb1083-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1083-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">cols =</span> <span class="fu">vars</span>(gear), </span>
<span id="cb1083-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1083-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">margin =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-382-1.png" width="672" /></p>
<p>Update the facets to only show margins on <code>"fam"</code>.</p>
<div class="sourceCode" id="cb1084"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1084-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1084-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span> </span>
<span id="cb1084-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1084-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1084-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1084-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the facets to only show margins on fam</span></span>
<span id="cb1084-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1084-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(fvs, fam), </span>
<span id="cb1084-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1084-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">cols =</span> <span class="fu">vars</span>(gear), </span>
<span id="cb1084-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1084-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">margins =</span> <span class="st">&quot;fam&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-383-1.png" width="672" /></p>
<p>Update the facets to only show margins on <code>"gear"</code> and <code>"fvs"</code>.</p>
<div class="sourceCode" id="cb1085"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1085-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1085-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span> </span>
<span id="cb1085-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1085-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1085-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1085-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the facets to only show margins on gear and fvs</span></span>
<span id="cb1085-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1085-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(fvs, fam), </span>
<span id="cb1085-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1085-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">cols =</span> <span class="fu">vars</span>(gear), </span>
<span id="cb1085-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1085-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">margins =</span> <span class="fu">c</span>(<span class="st">&quot;gear&quot;</span>, <span class="st">&quot;fvs&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-384-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="best-practices" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Best Practices<a href="intermediate-data-visualization-with-ggplot2.html#best-practices" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Common pitfalls in Data Viz</li>
<li>Best way to represent data
<ul>
<li>For effective explanatory (communication), and</li>
<li>For effective exploratory (investigation) plots</li>
</ul></li>
</ul>
<div id="bar-plots-2" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Bar plots<a href="intermediate-data-visualization-with-ggplot2.html#bar-plots-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="dynamite-plots" class="section level4 hasAnchor" number="8.4.1.1">
<h4><span class="header-section-number">8.4.1.1</span> Dynamite plots<a href="intermediate-data-visualization-with-ggplot2.html#dynamite-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the video we saw many reasons why “dynamite plots” (bar plots with error bars) are not well suited for their intended purpose of depicting distributions. (A further perceptual problem is that our bars give the impression of having data where there is no data. Plus, the region above the mean contains values but no ink!)</p>
<p>If you really want error bars on bar plots, you can of course get them, but you’ll need to set the positions manually. A point geom will typically serve you much better.</p>
<div class="sourceCode" id="cb1086"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1086-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot wt vs. fcyl</span></span>
<span id="cb1086-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> fcyl, <span class="at">y =</span> wt)) <span class="sc">+</span></span>
<span id="cb1086-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a bar summary stat of means, colored skyblue</span></span>
<span id="cb1086-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, </span>
<span id="cb1086-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;bar&quot;</span>, </span>
<span id="cb1086-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> <span class="st">&quot;skyblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb1086-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add an errorbar summary stat std deviation limits</span></span>
<span id="cb1086-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl, </span>
<span id="cb1086-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>), </span>
<span id="cb1086-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;errorbar&quot;</span>, </span>
<span id="cb1086-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1086-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-385-1.png" width="672" /></p>
<p>Remember, we can specify any function in <code>fun.data</code> or <code>fun.y</code> and we can also specify any <code>geom</code>, as long as it’s appropriate to the data type.</p>
</div>
<div id="position-dodging" class="section level4 hasAnchor" number="8.4.1.2">
<h4><span class="header-section-number">8.4.1.2</span> Position dodging<a href="intermediate-data-visualization-with-ggplot2.html#position-dodging" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this exercise we will add a distinction between transmission type, <code>fam</code>, for the dynamite plots and explore position dodging (where bars are side-by-side).</p>
<div class="sourceCode" id="cb1087"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1087-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1087-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the aesthetics to color and fill by fam</span></span>
<span id="cb1087-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1087-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> fcyl, <span class="at">y =</span> wt, </span>
<span id="cb1087-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1087-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">color =</span> fam, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb1087-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1087-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">&quot;bar&quot;</span>) <span class="sc">+</span></span>
<span id="cb1087-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1087-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl, <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>), </span>
<span id="cb1087-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1087-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;errorbar&quot;</span>, <span class="at">width =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-386-1.png" width="672" /></p>
<p>The stacked bars are tricky to interpret. Make them transparent and side-by-side.</p>
<div class="sourceCode" id="cb1088"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1088-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set alpha for the first and set position for each stat summary function</span></span>
<span id="cb1088-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> fcyl, <span class="at">y =</span> wt, <span class="at">color =</span> fam, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb1088-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, </span>
<span id="cb1088-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;bar&quot;</span>, </span>
<span id="cb1088-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.5</span>, </span>
<span id="cb1088-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span></span>
<span id="cb1088-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl, </span>
<span id="cb1088-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>), </span>
<span id="cb1088-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;errorbar&quot;</span>, </span>
<span id="cb1088-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>, </span>
<span id="cb1088-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1088-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-387-1.png" width="672" /></p>
<p>The error bars are incorrectly positioned. Use a position object.</p>
<div class="sourceCode" id="cb1089"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1089-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a dodge position object with width 0.9</span></span>
<span id="cb1089-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-2" aria-hidden="true" tabindex="-1"></a>posn_d <span class="ot">&lt;-</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>)</span>
<span id="cb1089-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1089-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For each summary stat, update the position to posn_d</span></span>
<span id="cb1089-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> fcyl, <span class="at">y =</span> wt, <span class="at">color =</span> fam, <span class="at">fill =</span> fam)) <span class="sc">+</span></span>
<span id="cb1089-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, </span>
<span id="cb1089-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;bar&quot;</span>, </span>
<span id="cb1089-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> posn_d, </span>
<span id="cb1089-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb1089-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl, </span>
<span id="cb1089-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>), </span>
<span id="cb1089-12"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="fl">0.1</span>, </span>
<span id="cb1089-13"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> posn_d, </span>
<span id="cb1089-14"><a href="intermediate-data-visualization-with-ggplot2.html#cb1089-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;errorbar&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-388-1.png" width="672" /></p>
</div>
<div id="using-aggregated-data" class="section level4 hasAnchor" number="8.4.1.3">
<h4><span class="header-section-number">8.4.1.3</span> Using aggregated data<a href="intermediate-data-visualization-with-ggplot2.html#using-aggregated-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Here, we’ve created a summary data frame called <code>mtcars_by_cyl</code> which contains the average (<code>mean_wt</code>), standard deviations (<code>sd_wt</code>) and count (<code>n_wt</code>) of car weights, for each cylinder group, <code>cyl</code>. It also contains the proportion (<code>prop</code>) of each cylinder represented in the entire dataset. Use the console to familiarize yourself with the <code>mtcars_by_cyl</code> data frame.</p>
<div class="sourceCode" id="cb1090"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1090-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mean and sd</span></span>
<span id="cb1090-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-2" aria-hidden="true" tabindex="-1"></a>mtcars_by_cyl1 <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb1090-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb1090-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_wt =</span> <span class="fu">mean</span>(wt),</span>
<span id="cb1090-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd_wt =</span> <span class="fu">sd</span>(wt))</span>
<span id="cb1090-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1090-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1090-7" aria-hidden="true" tabindex="-1"></a>mtcars_by_cyl1</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##     cyl mean_wt sd_wt
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1     4    2.29 0.570
## 2     6    3.12 0.356
## 3     8    4.00 0.759</code></pre>
<div class="sourceCode" id="cb1092"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1092-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-1" aria-hidden="true" tabindex="-1"></a><span class="co"># n and prop</span></span>
<span id="cb1092-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-2" aria-hidden="true" tabindex="-1"></a>mtcars_by_cyl2 <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb1092-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb1092-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">nrow</span>(mtcars)) <span class="sc">%&gt;%</span></span>
<span id="cb1092-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">n_wt =</span> n)</span>
<span id="cb1092-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1092-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1092-7" aria-hidden="true" tabindex="-1"></a>mtcars_by_cyl2</span></code></pre></div>
<pre><code>##   cyl n_wt    prop
## 1   4   11 0.34375
## 2   6    7 0.21875
## 3   8   14 0.43750</code></pre>
<div class="sourceCode" id="cb1094"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1094-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1094-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inner join by cyl column</span></span>
<span id="cb1094-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1094-2" aria-hidden="true" tabindex="-1"></a>mtcars_by_cyl <span class="ot">&lt;-</span> mtcars_by_cyl1 <span class="sc">%&gt;%</span> </span>
<span id="cb1094-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1094-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">inner_join</span>(mtcars_by_cyl2, <span class="at">by =</span> <span class="st">&quot;cyl&quot;</span>); mtcars_by_cyl</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##     cyl mean_wt sd_wt  n_wt  prop
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
## 1     4    2.29 0.570    11 0.344
## 2     6    3.12 0.356     7 0.219
## 3     8    4.00 0.759    14 0.438</code></pre>
<p>If it is appropriate to use bar plots, then it nice to give an impression of the number of values in each group.</p>
<p><code>stat_summary()</code> doesn’t keep track of the count. <code>stat_sum()</code> does (that’s the whole point), but it’s difficult to access. It’s more straightforward to calculate exactly what we want to plot ourselves.</p>
<div class="sourceCode" id="cb1096"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1096-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1096-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using mtcars_cyl, plot mean_wt vs. cyl</span></span>
<span id="cb1096-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1096-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars_by_cyl, <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> mean_wt)) <span class="sc">+</span></span>
<span id="cb1096-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1096-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a bar layer with identity stat, filled skyblue</span></span>
<span id="cb1096-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1096-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb1096-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1096-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">&quot;skyblue&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-390-1.png" width="672" /></p>
<div class="sourceCode" id="cb1097"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1097-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1097-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars_by_cyl, <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> mean_wt)) <span class="sc">+</span></span>
<span id="cb1097-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1097-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Swap geom_bar() for geom_col() and remove stat argument</span></span>
<span id="cb1097-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1097-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;skyblue&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-391-1.png" width="672" /></p>
<div class="sourceCode" id="cb1098"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1098-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1098-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars_by_cyl, <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> mean_wt)) <span class="sc">+</span></span>
<span id="cb1098-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1098-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set the width aesthetic to prop</span></span>
<span id="cb1098-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1098-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;skyblue&quot;</span>,</span>
<span id="cb1098-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1098-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">aes</span>(<span class="at">width =</span> prop))</span></code></pre></div>
<pre><code>## Warning in geom_col(fill = &quot;skyblue&quot;, aes(width = prop)): Ignoring unknown
## aesthetics: width</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-392-1.png" width="672" /></p>
<div class="sourceCode" id="cb1100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1100-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars_by_cyl, <span class="fu">aes</span>(<span class="at">x =</span> cyl, <span class="at">y =</span> mean_wt)) <span class="sc">+</span></span>
<span id="cb1100-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">width =</span> prop), <span class="at">fill =</span> <span class="st">&quot;skyblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb1100-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add an errorbar layer</span></span>
<span id="cb1100-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb1100-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ... at mean weight plus or minus 1 std dev</span></span>
<span id="cb1100-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> mean_wt <span class="sc">-</span> sd_wt, <span class="at">ymax =</span> mean_wt <span class="sc">+</span> sd_wt),</span>
<span id="cb1100-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># with width 0.1</span></span>
<span id="cb1100-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.1</span></span>
<span id="cb1100-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1100-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Warning in geom_col(aes(width = prop), fill = &quot;skyblue&quot;): Ignoring unknown
## aesthetics: width</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-393-1.png" width="672" /></p>
</div>
</div>
<div id="heatmaps-use-case-scenario" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Heatmaps use case scenario<a href="intermediate-data-visualization-with-ggplot2.html#heatmaps-use-case-scenario" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="heat-maps" class="section level4 hasAnchor" number="8.4.2.1">
<h4><span class="header-section-number">8.4.2.1</span> Heat maps<a href="intermediate-data-visualization-with-ggplot2.html#heat-maps" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Since heat maps encode <em>color</em> on a continuous scale, they are difficult to accurately <em>decode</em>. Hence, heat maps are most useful if you have a small number of boxes and/or a clear pattern that allows you to overcome decoding difficulties.</p>
<p>To produce them, map two categorical variables onto the <code>x</code> and <code>y</code> aesthetics, along with a continuous variable onto <code>fill</code>. The <code>geom_tile()</code> layer adds the boxes.</p>
<div class="sourceCode" id="cb1102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1102-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To get barley dataset</span></span>
<span id="cb1102-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice)</span>
<span id="cb1102-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1102-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using barley, plot variety vs. year, filled by yield</span></span>
<span id="cb1102-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lattice<span class="sc">::</span>barley, <span class="fu">aes</span>(year, variety, <span class="at">fill =</span> yield)) <span class="sc">+</span></span>
<span id="cb1102-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a tile geom</span></span>
<span id="cb1102-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-394-1.png" width="672" /></p>
<p>Add a <code>facet_wrap()</code> function with facets as <code>vars(site)</code> and <code>ncol = 1</code>. Strip names will be above the panels, not to the side (as with <code>facet_grid()</code>).</p>
<div class="sourceCode" id="cb1103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1103-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Previously defined</span></span>
<span id="cb1103-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lattice<span class="sc">::</span>barley, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> variety, <span class="at">fill =</span> yield)) <span class="sc">+</span></span>
<span id="cb1103-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span> </span>
<span id="cb1103-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet, wrapping by site, with 3 column</span></span>
<span id="cb1103-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(site), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb1103-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a fill scale using an 2-color gradient</span></span>
<span id="cb1103-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1103-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-395-1.png" width="672" /></p>
<p>Update the fill scale to use an n-color gradient with <code>scale_fill_gradientn()</code> (note the <code>n</code>). Set the scale <code>colors</code> to the red brewer palette.</p>
<div class="sourceCode" id="cb1104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1104-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1104-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1104-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-3" aria-hidden="true" tabindex="-1"></a><span class="co"># A palette of 9 reds</span></span>
<span id="cb1104-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-4" aria-hidden="true" tabindex="-1"></a>red_brewer_palette <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&quot;Reds&quot;</span>)</span>
<span id="cb1104-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1104-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the plot</span></span>
<span id="cb1104-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lattice<span class="sc">::</span>barley, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> variety, <span class="at">fill =</span> yield)) <span class="sc">+</span></span>
<span id="cb1104-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span> </span>
<span id="cb1104-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(site), <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb1104-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update scale to use n-colors from red_brewer_palette</span></span>
<span id="cb1104-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1104-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> red_brewer_palette)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-396-1.png" width="672" /></p>
</div>
<div id="heat-map-alternatives" class="section level4 hasAnchor" number="8.4.2.2">
<h4><span class="header-section-number">8.4.2.2</span> Heat map alternatives<a href="intermediate-data-visualization-with-ggplot2.html#heat-map-alternatives" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are several alternatives to heat maps. The best choice really depends on the data and the story you want to tell with this data. If there is a time component, the most obvious choice is a line plot.</p>
<div class="sourceCode" id="cb1105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1105-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The heat map we want to replace</span></span>
<span id="cb1105-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1105-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Don&#39;t remove, it&#39;s here to help you!</span></span>
<span id="cb1105-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lattice<span class="sc">::</span>barley, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> variety, <span class="at">fill =</span> yield)) <span class="sc">+</span></span>
<span id="cb1105-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb1105-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> site, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1105-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">&quot;Reds&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-397-1.png" width="672" /></p>
<div class="sourceCode" id="cb1106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1106-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using barley, plot yield vs. year, colored and grouped by variety</span></span>
<span id="cb1106-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lattice<span class="sc">::</span>barley, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yield, </span>
<span id="cb1106-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color =</span> variety, <span class="at">group =</span> variety)) <span class="sc">+</span></span>
<span id="cb1106-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a line layer</span></span>
<span id="cb1106-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb1106-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Facet, wrapping by site, with 1 row</span></span>
<span id="cb1106-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1106-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> site, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-397-2.png" width="672" /></p>
<p>Display only means and ribbons for spread.</p>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1107-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using barely, plot yield vs. year, colored, grouped, and filled by site</span></span>
<span id="cb1107-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lattice<span class="sc">::</span>barley, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> yield, </span>
<span id="cb1107-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color =</span> site, <span class="at">group =</span> site, <span class="at">fill =</span> site)) <span class="sc">+</span></span>
<span id="cb1107-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a line summary stat aggregated by mean</span></span>
<span id="cb1107-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>) <span class="sc">+</span></span>
<span id="cb1107-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a ribbon summary stat with 10% opacity, no color</span></span>
<span id="cb1107-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl, </span>
<span id="cb1107-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>), </span>
<span id="cb1107-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;ribbon&quot;</span>, </span>
<span id="cb1107-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.1</span>, </span>
<span id="cb1107-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1107-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="cn">NA</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-398-1.png" width="672" /></p>
<p>Whenever you see a heat map, ask yourself it it’s really necessary. Many people use them because they look fancy and complicated - signs of poor communication skills.</p>
</div>
</div>
<div id="when-good-data-makes-bad-plots" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> When good data makes bad plots<a href="intermediate-data-visualization-with-ggplot2.html#when-good-data-makes-bad-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="bad-plots-style" class="section level4 hasAnchor" number="8.4.3.1">
<h4><span class="header-section-number">8.4.3.1</span> Bad plots: style<a href="intermediate-data-visualization-with-ggplot2.html#bad-plots-style" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Color</p>
<ul>
<li><p>Not color-blind-friendly (e.g. primarily red and green)</p></li>
<li><p>Wrong palette for data type (remember sequential, qualitative and divergent)</p></li>
<li><p>Indistinguishable groups (i.e. colors are too similar)</p></li>
<li><p>Ugly (high saturation primary colors)</p></li>
</ul></li>
<li><p>Text</p>
<ul>
<li><p>Illegible (e.g. too small, poor resolution)</p></li>
<li><p>Non-descriptive (e.g. “length” -- of what? which units?)</p></li>
<li><p>Missing</p></li>
<li><p>Inappropriate (e.g. comic sans)</p></li>
</ul></li>
</ul>
</div>
<div id="bad-plots-structure-and-content" class="section level4 hasAnchor" number="8.4.3.2">
<h4><span class="header-section-number">8.4.3.2</span> Bad plots: structure and content<a href="intermediate-data-visualization-with-ggplot2.html#bad-plots-structure-and-content" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Information content</p>
<ul>
<li><p>Too much information (TMI)</p></li>
<li><p>Too little information (TLI)</p></li>
<li><p>No clear message or purpose</p></li>
</ul></li>
<li><p>Axes</p>
<ul>
<li><p>Poor aspect ratio</p></li>
<li><p>Suppression of the origin</p></li>
<li><p>Broken x or y axes</p></li>
<li><p>Common, but unaligned scales</p></li>
<li><p>Wrong or no transformation</p></li>
</ul></li>
<li><p>Statistics</p>
<ul>
<li>Visualization doesn’t match actual statistics</li>
</ul></li>
<li><p>Geometries</p>
<ul>
<li><p>Wrong plot type</p></li>
<li><p>Wrong orientation</p></li>
</ul></li>
<li><p>Non-data Ink</p>
<ul>
<li>Inappropriate use</li>
</ul></li>
<li><p>3D plots</p>
<ul>
<li><p>Perceptual problems</p></li>
<li><p>Useless 3rd axis</p></li>
</ul></li>
</ul>
<p><strong>Use your common sense:</strong></p>
<p>Is there anything on my plot that obscure a clear reading of the data or the take-home message?</p>
</div>
<div id="typical-problems" class="section level4 hasAnchor" number="8.4.3.3">
<h4><span class="header-section-number">8.4.3.3</span> Typical problems<a href="intermediate-data-visualization-with-ggplot2.html#typical-problems" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s take a look at the steps we could take to produce and improve the plot in the view.</p>
<p>The data comes from an experiment where the effect of two different types of vitamin C sources, orange juice or ascorbic acid, were tested on the growth of the odontoblasts (cells responsible for tooth growth) in 60 guinea pigs.</p>
<p>The data is stored in the <code>TG</code> data frame, which contains three variables: <code>dose</code>, <code>len</code>, and <code>supp</code>.</p>
<div class="sourceCode" id="cb1108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1108-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1108-1" aria-hidden="true" tabindex="-1"></a>TG <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/TG.csv&quot;</span>)</span>
<span id="cb1108-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1108-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(TG)</span></code></pre></div>
<pre><code>## spc_tbl_ [60 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ len : num [1:60] 4.2 11.5 7.3 5.8 6.4 10 11.2 11.2 5.2 7 ...
##  $ supp: chr [1:60] &quot;VC&quot; &quot;VC&quot; &quot;VC&quot; &quot;VC&quot; ...
##  $ dose: num [1:60] 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   len = col_double(),
##   ..   supp = col_character(),
##   ..   dose = col_double()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb1110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1110-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initial plot</span></span>
<span id="cb1110-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-2" aria-hidden="true" tabindex="-1"></a>growth_by_dose <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(TG, <span class="fu">aes</span>(dose, len, <span class="at">color =</span> supp)) <span class="sc">+</span></span>
<span id="cb1110-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb1110-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb1110-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb1110-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_gray</span>(<span class="dv">3</span>)</span>
<span id="cb1110-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1110-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-8" aria-hidden="true" tabindex="-1"></a><span class="co"># View plot</span></span>
<span id="cb1110-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1110-9" aria-hidden="true" tabindex="-1"></a>growth_by_dose</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-400-1.png" width="672" /></p>
<p>The first plot contains purposely illegible labels. It’s a common problem that can occur when resizing plots. There is also too much non-data ink.</p>
<div class="sourceCode" id="cb1111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1111-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initial plot</span></span>
<span id="cb1111-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-2" aria-hidden="true" tabindex="-1"></a>growth_by_dose <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(TG, <span class="fu">aes</span>(dose, len, <span class="at">color =</span> supp)) <span class="sc">+</span></span>
<span id="cb1111-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb1111-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb1111-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb1111-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb1111-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1111-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-8" aria-hidden="true" tabindex="-1"></a><span class="co"># View plot</span></span>
<span id="cb1111-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1111-9" aria-hidden="true" tabindex="-1"></a>growth_by_dose</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-401-1.png" width="672" /></p>
<p>Use the appropriate geometry for the data:
In the new <code>stat_summary()</code> function, set <code>fun</code> to to calculate the <code>mean</code> and the <code>geom</code> to a <code>"line"</code> to connect the points at their mean values.</p>
<div class="sourceCode" id="cb1112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1112-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb1112-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-2" aria-hidden="true" tabindex="-1"></a>growth_by_dose <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(TG, <span class="fu">aes</span>(dose, len, <span class="at">color =</span> supp)) <span class="sc">+</span></span>
<span id="cb1112-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb1112-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb1112-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb1112-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use the right geometry</span></span>
<span id="cb1112-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean,</span>
<span id="cb1112-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>,</span>
<span id="cb1112-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb1112-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb1112-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1112-12"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-12" aria-hidden="true" tabindex="-1"></a><span class="co"># View plot</span></span>
<span id="cb1112-13"><a href="intermediate-data-visualization-with-ggplot2.html#cb1112-13" aria-hidden="true" tabindex="-1"></a>growth_by_dose</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-402-1.png" width="672" /></p>
<p>Make sure the labels are informative:</p>
<ul>
<li><p>Add the units <code>"(mg/day)"</code> and <code>"(mean, standard deviation)"</code> to the x and y labels, respectively.</p></li>
<li><p>Use the <code>"Set1"</code> palette.</p></li>
<li><p>Set the legend labels to <code>"Orange juice"</code> and <code>"Ascorbic acid"</code>.</p></li>
</ul>
<div class="sourceCode" id="cb1113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1113-1"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb1113-2"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-2" aria-hidden="true" tabindex="-1"></a>growth_by_dose <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(TG, <span class="fu">aes</span>(dose, len, <span class="at">color =</span> supp)) <span class="sc">+</span></span>
<span id="cb1113-3"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> mean_sdl,</span>
<span id="cb1113-4"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult =</span> <span class="dv">1</span>),</span>
<span id="cb1113-5"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb1113-6"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean,</span>
<span id="cb1113-7"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>,</span>
<span id="cb1113-8"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb1113-9"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb1113-10"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adjust labels and colors:</span></span>
<span id="cb1113-11"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Dose (mg/day)&quot;</span>, </span>
<span id="cb1113-12"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Odontoblasts length (mean, standard deviation)&quot;</span>, </span>
<span id="cb1113-13"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Supplement&quot;</span>) <span class="sc">+</span></span>
<span id="cb1113-14"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set1&quot;</span>, </span>
<span id="cb1113-15"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Orange juice&quot;</span>, <span class="st">&quot;Ascorbic acid&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1113-16"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">35</span>), </span>
<span id="cb1113-17"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">35</span>, <span class="dv">5</span>), </span>
<span id="cb1113-18"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-18" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb1113-19"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1113-20"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-20" aria-hidden="true" tabindex="-1"></a><span class="co"># View plot</span></span>
<span id="cb1113-21"><a href="intermediate-data-visualization-with-ggplot2.html#cb1113-21" aria-hidden="true" tabindex="-1"></a>growth_by_dose</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-403-1.png" width="672" /></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-data-visualization-with-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-importing-data-in-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/08-Intermediate-Data-Visualization-with-ggplot2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
